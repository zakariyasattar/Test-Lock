{"version":3,"sources":["assets/js/index.js"],"names":["examCodes","students","done","stopEnter","canCount","canChangeCircle","key","initKey","timer","leaverCount","document","onfullscreenchange","event","fullscreenElement","timerInterval","Swal","fire","title","html","confirmButtonText","cancelButtonText","showCancelButton","showConfirmButton","allowEscapeKey","allowEnterKey","onBeforeOpen","setInterval","getContent","querySelector","textContent","getTimerLeft","onClose","clearInterval","then","result","value","toggleFullScreen","endTest","dismiss","DismissReason","firebase","database","ref","on","snapshot","forEach","childSnapshot","code","CryptoJS","AES","encrypt","val","push","onSignIn","googleUser","URL","indexOf","window","location","profile","getBasicProfile","localStorage","setItem","JSON","stringify","getId","getName","getImageUrl","getEmail","href","substring","signOut","auth2","gapi","getAuthInstance","removeItem","onload","$","parseInt","name","parentNode","id","getElementById","style","display","innerHTML","getItem","swal","reload","today","Date","getSeconds","getHours","getMinutes","scroll","i","getElementsByClassName","length","elem","docViewTop","scrollTop","docViewBottom","height","elemTop","offset","top","elemBottom","isInView","bottom","transition","text","childNodes","appendChild","color","right","setTimeout","undefined","finalString","arr","sort","Math","random","j","replace","removeAllActive","getElementsByTagName","className","onclick","removeDropDown","x","matches","matchMedia","addListener","body","background","populateLeaderboard","searchLeaderboard","input","filter","ul","tr","a","txtValue","border","scrollIntoView","behavior","getStudent","mergeSort","low","high","mid","floor","split","middle","left","slice","merge","indexLeft","indexRight","concat","submitExamCode","toUpperCase","data","findCode","test","getCodeLetter","teacher","once","exam","Exams","retrieveName","taken","decryptedBytes","decrypt","plaintext","toString","enc","Utf8","exists","displayQuiz","overflow","populateExam","onblur","examCode","examTotalMins","counter","examDate","examTeacher","dateJS","getMonth","getDate","getFullYear","examDescription","examTitle","examTotalPoints","empty","Object","keys","questions","localQuestions","question","createQuestion","choices","createQuestionTracker","points","imgSrc","src","icon","imgShortDescription","changeQuestionType","type","numBoxes","createMatchingElement","localBoxes","k","questionsArr","shuffle","Array","prototype","call","remove","m","createElement","restructureQuestions","array","currentIndex","temporaryValue","randomIndex","createFreeResponse","createTrueFalse","createMatching","label","true_input","outline","false_input","marginLeft","true_span","fontWeight","false_span","ta","oninput","placeholder","matchingWrapper","matching","hr","width","results","numElements","borderRadius","padding","fontSize","onkeyup","alert","textAlign","position","zIndex","role","newBox","saveExam","div","box","labelTrash","marginRight","click","restructureBoxes","hover","cursor","num","marginTop","arrow","paddingLeft","result_input","loading","numAnswerChoices","br","question_title","readOnly","viewImage","span","numPoints","finishingSpan","answer_choices","answer_choice","getBoundingClientRect","scrollY","populating","manager","finalDiv","tracker","navigator","userAgent","toLowerCase","vendor","block","center","clientHeight","addEventListener","preventDefault","documentElement","requestFullscreen","exitFullscreen","getChecked","checked","submitExam","student_answers","displayResults","answers","parse","dbAnswers","responseStructure","toJSON","total","frTotalPoints","answer","fr","tf","createCorrectBox","createIncorrectBox","createFrBox","studentExamData","toFixed","min","score","dataDiv","float","pointsAwarded","paddingRight","e","keyCode"],"mappings":"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","file":"js.5c615dc2.js","sourceRoot":"..","sourcesContent":["var examCodes = [], students = [], done = [];\nvar stopEnter = false, canCount = false, canChangeCircle = true;\nvar key = initKey(); var timer = 0;\n\n(function() {\n    // Expose to global\n    var leaverCount = 0;\n\n    //code to call when document leaves full screen\n    document.onfullscreenchange = function ( event ) {\n      if(document.fullscreenElement == null) {\n        let timerInterval;\n        if(leaverCount <= 5) {\n            Swal.fire({\n              title: 'Are You Sure You Want To Leave?',\n              html: 'You have <strong></strong> seconds to go back to your test or the test ends and your score is recorded! You can open this dialog <span></span> more times',\n              confirmButtonText: 'Yes, end it!',\n              cancelButtonText: 'No, Go Back!',\n              showCancelButton: true,\n              showConfirmButton: true,\n              allowEscapeKey: false,\n              allowEnterKey: false,\n              timer: 10000,\n              onBeforeOpen: () => {\n                timerInterval = setInterval(() => {\n                  Swal.getContent().querySelector('strong').textContent = Swal.getTimerLeft() / 1000;\n                }, 100)\n                Swal.getContent().querySelector('span').textContent = 4 - leaverCount;\n              },\n              onClose: () => {\n                clearInterval(timerInterval)\n              }\n              }).then((result) => {\n                if (!result.value) {\n                  toggleFullScreen();\n\n                  leaverCount++;\n                }\n                else if(result.value) {\n                  endTest();\n                }\n                if (result.dismiss === Swal.DismissReason.timer) {\n                  endTest();\n                }\n            });\n          }\n          else{\n            endTest();\n          }\n      };\n    }\n\n})();\n//\n// var data;\n// \t$.ajax({\n// \t  type: \"GET\",\n// \t  url: \"data.csv\",\n// \t  dataType: \"text\",\n// \t  success: function(response)\n// \t  {\n//   \t\tdata = $.csv.toArrays(response);\n//       for(var i = 0; i < data.length; i++){\n//         var id = data[i][0];\n//         var names = data[i][3] + \" \" + data[i][2];\n//         var className = data[i][10];\n//\n//         // firebase.database().ref(\"Teachers/Zakariya Sattar/Classes/\" + className + \"/Students\").push(id + \";\" + name);\n//         var json = {\n//           name: names,\n//           score:  Math.floor((Math.random() * 25) + 75),\n//           time: 5,\n//           totalScore: Math.floor((Math.random() * 5) + 15)\n//         }\n//         firebase.database().ref(\"Teachers/Zakariya Sattar/Classes/Advance App Development/Exams/ZIPIXM/responses/\" + names).push(json);\n//       }\n// \t  }\n// });\n\n// pull all exam codes then encrypt them\nfirebase.database().ref('exam-codes').on('value', function(snapshot) {\n  snapshot.forEach(function(childSnapshot) {\n    var code = CryptoJS.AES.encrypt(childSnapshot.val(), key);\n    examCodes.push(code);\n  });\n});\n\n// pull all students then encrypt them\nfirebase.database().ref('Students').on('value', function(snapshot) {\n  snapshot.forEach(function(childSnapshot) {\n    // no need for encryption because no active storage\n    students.push(childSnapshot.val());\n  });\n});\n\n// code to run when google user signs in\nfunction onSignIn(googleUser) {\n  if(document.URL.indexOf(\"?\") == -1){\n    window.location = \"teacher.html\";\n\n    var profile = googleUser.getBasicProfile();\n    localStorage.setItem(\"userInfo\", JSON.stringify([profile.getId(), profile.getName(), profile.getImageUrl(), profile.getEmail()]));\n  }\n  else {\n    window.location.href = document.URL.substring(0, document.URL.indexOf(\"?\"));\n    localStorage.setItem(\"userInfo\", \"\");\n    signOut();\n  }\n}\n\n// request signout\nfunction signOut() {\n  var auth2 = gapi.auth2.getAuthInstance();\n  auth2.signOut().then(function () {\n    localStorage.removeItem('userInfo');\n  });\n}\n\n// for displayQuiz()\nwindow.onload = function() {\n  $(\"#create-exam\").on('change', \"input:radio\", function() {\n    if(parseInt(this.name.substring(0, 1))) {  //MC\n      done[parseInt(this.name.substring(0, 1)) - 1] = 1;\n    }\n    else {  //TF\n      done[parseInt(this.parentNode.parentNode.id) - 1] = 1;\n    }\n\n    // document.getElementsByClassName(this.parentNode.parentNode.parentNode.id)[0].style.background = \"green\";\n\n    if(done.indexOf(0) == -1) {\n      document.getElementById('submit-exam').style.display = 'initial';\n      document.getElementById('submit-exam-disabled').style.display = \"none\";\n    }\n  });\n\n  document.getElementById('timeLeftInExam').innerHTML = localStorage.getItem(\"timeLimit\") - 0 + \" minutes\";\n\n  setInterval(function(){\n    if(canCount) {\n      if(timer == (localStorage.getItem(\"timeLimit\") - 5)) {\n        swal(\"Timer Warning\", \"5 minutes remaining in this exam\", \"info\");\n      }\n      if(timer <= localStorage.getItem(\"timeLimit\")) {\n        timer++;\n        document.getElementById('timeLeftInExam').innerHTML = localStorage.getItem(\"timeLimit\") - timer + \" minutes\";\n      }\n      else {\n        window.location.reload();\n      }\n    }\n  }, 60000);\n\n  setInterval(function(){\n    var today = new Date();\n    if(today.getSeconds() < 10) {\n      document.getElementById(\"currTime\").innerHTML = today.getHours() + \":\" + today.getMinutes() + \":0\" + today.getSeconds();\n    }\n    else {\n      document.getElementById(\"currTime\").innerHTML = today.getHours() + \":\" + today.getMinutes() + \":\" + today.getSeconds();\n    }\n\n  }, 1000)\n\n  $(window).scroll(function(){\n    for(var i = 1; i <= document.getElementsByClassName('question').length; i++) {\n      var elem = document.getElementById(i);\n      var docViewTop = $(window).scrollTop();\n      var docViewBottom = docViewTop + $(window).height();\n\n      var elemTop = $(elem).offset().top;\n      var elemBottom = elemTop + $(elem).height();\n\n      var isInView = ((elemBottom <= docViewBottom) && (elemTop >= docViewTop));\n\n      if (isInView){\n        document.getElementsByClassName(i)[0].style.bottom = '25px';\n        document.getElementsByClassName(i)[0].style.transition = 'all .5s';\n\n        var text = document.getElementsByClassName(i)[0].childNodes[1];\n        document.getElementsByClassName(i)[0].innerHTML = \"&#x25CF;\"\n        document.getElementsByClassName(i)[0].appendChild(text);\n        document.getElementsByClassName(i)[0].childNodes[1].style.color = \"white\";\n        document.getElementsByClassName(i)[0].childNodes[1].style.right = \"22.5px\";\n\n        setTimeout(function(){\n          if(document.getElementsByClassName(i)[0] != undefined) {\n            document.getElementsByClassName(i)[0].style.bottom = '20px';\n            document.getElementsByClassName(i)[0].style.transition = 'all .5s';\n          }\n        }, 3000);\n\n      }\n      else {\n        if(canChangeCircle) {\n          document.getElementsByClassName(i)[0].style.bottom = '20px';\n          document.getElementsByClassName(i)[0].style.transition = 'all .5s';\n\n          var text = document.getElementsByClassName(i)[0].childNodes[1];\n          document.getElementsByClassName(i)[0].innerHTML = \"&#x25CC;\"\n          document.getElementsByClassName(i)[0].appendChild(text);\n          document.getElementsByClassName(i)[0].childNodes[1].style.color = \"black\";\n          document.getElementsByClassName(i)[0].childNodes[1].style.right = \"22.5px\";\n        }\n      }\n    }\n  });\n};\n\n//initialize key with random val\nfunction initKey() {\n  var finalString;\n  var i, arr = [];\n  for (i = 0; i < 25; i++) {\n      arr[i] = i + 1;\n  }\n  arr.sort(function () {\n      return Math.random() - 0.25;\n  });\n\n  for(var j = 0; j < arr.length; j++) {\n    finalString = arr[j] + finalString + \"\";\n  }\n  return finalString.replace('NaN', '');\n}\n\n//function to remove all class='active'\nfunction removeAllActive() {\n  document.getElementsByTagName(\"LI\")[0].className = \"\";\n  document.getElementsByTagName(\"LI\")[1].className = \"\";\n  document.getElementsByTagName(\"LI\")[2].className = \"\";\n}\n\ndocument.getElementById(\"nav-toggle\").onclick = function() {\n  if(document.getElementById('nav-menu').style.display == \"initial\"){\n    document.getElementById('nav-menu').style.display = \"none\";\n  }\n  else {\n    document.getElementById('nav-menu').style.display = \"initial\";\n  }\n}\n\n// remove dropdown if screen size can handle navbar\nfunction removeDropDown(x) {\n if (x.matches) { // If media query matches\n   document.getElementById('dropdown').style.display = \"none\";\n\n   for(var i = 0; i < document.getElementsByClassName('navB').length; i++) {\n     document.getElementsByClassName('navB')[i].style.display = \"initial\";\n   }\n }\n else {\n   document.getElementById('dropdown').style.display = \"initial\";\n   for(var i = 0; i < document.getElementsByClassName('navB').length; i++) {\n     document.getElementsByClassName('navB')[i].style.display = \"none\";\n   }\n }\n}\n\nvar x = window.matchMedia(\"(min-width: 730px)\")\nremoveDropDown(x) // Call listener function at run time\nx.addListener(removeDropDown) // Attach listener function on state changes\n\n\n//function to switch displays based on what user clicks\nfunction display(title) {\n  if(title == '<a href=\"#\">Ping-Pong</a>') {\n    document.getElementById('main').style.display = \"none\";\n    document.getElementById('pong').style.display = \"initial\";\n    document.getElementById('leaderboard').style.display = \"none\";\n  }\n  else if(title == '<a href=\"#\">Home</a>') {\n    document.getElementById('main').style.display = \"initial\";\n    document.getElementById('pong').style.display = \"none\";\n    document.getElementById('leaderboard').style.display = \"none\";\n    document.body.style.background = '#1b1b1d';\n  }\n  else if(title == '<a href=\"#\">Leaderboard</a>') {\n    document.getElementById('main').style.display = \"none\";\n    document.getElementById('pong').style.display = \"none\";\n    document.getElementById('leaderboard').style.display = \"initial\";\n    document.body.style.background = 'white';\n    populateLeaderboard();\n  }\n  document.getElementById('nav-menu').style.display = \"none\";\n}\n\n// search LB\nfunction searchLeaderboard() {\n  var input, filter, ul, tr, a, i, txtValue;\n\n  input = document.getElementById(\"lb-search\");\n  tr = document.getElementById('leaderboard').getElementsByClassName(\"name\");\n\n  for (i = 0; i < tr.length; i++) {\n    if(tr[i].innerHTML == input.value) {\n      tr[i].style.border = \"1px solid black\";\n      tr[i].scrollIntoView({behavior: \"smooth\"});\n    }\n  }\n}\n\nfunction getStudent(id) {\n  students = mergeSort(students);\n  //binary search for finding ID pos\n  var low  = 0 , high = students.length -1 ,mid ;\n  while (low <= high){\n      mid = Math.floor((low+high)/2);\n      if(students[mid].split(\";\")[0]==id) return students[mid];\n      else if (students[mid].split(\";\")[0]<id) low = mid+1;\n      else high = mid-1;\n  }\n  return -1 ;\n}\n\n//implement merge sort\nfunction mergeSort (arr) {\n  if (arr.length === 1) {\n    // return once we hit an array with a single item\n    return arr\n  }\n\n  const middle = Math.floor(arr.length / 2) // get the middle item of the array rounded down\n  const left = arr.slice(0, middle) // items on the left side\n  const right = arr.slice(middle) // items on the right side\n\n  return merge(\n    mergeSort(left),\n    mergeSort(right)\n  )\n}\n\n// compare the arrays item by item and return the concatenated result\nfunction merge (left, right) {\n  let result = []\n  let indexLeft = 0\n  let indexRight = 0\n\n  while (indexLeft < left.length && indexRight < right.length) {\n    if (left[indexLeft].split(\";\")[0] < right[indexRight].split(\";\")[0]) {\n      result.push(left[indexLeft])\n      indexLeft++\n    } else {\n      result.push(right[indexRight])\n      indexRight++\n    }\n  }\n\n  return result.concat(left.slice(indexLeft)).concat(right.slice(indexRight))\n}\n\n// function to retieve and analyze code\nfunction submitExamCode() {\n  var code = document.getElementById('inputExamCode').value.toUpperCase();\n  var data = findCode(code);\n\n  if(code.length == 5 && (!/[~!#$%\\^&*+=\\-\\[\\]\\\\';,/{}|\\\\\":<>\\?]/g.test(code))) {\n    document.getElementById('exam-info').innerHTML = \"\";\n    if(data == null) {\n      swal(\"Invalid exam code!\", \"Check for special characters and make sure the length is at least 5\", \"error\");\n    }\n\n    else if(data.split(\";\")[0] == code) {\n      localStorage.setItem(\"teacher\", data.split(\";\")[1]);\n      document.getElementById('exam-info').innerHTML = data.split(\";\")[3] + \" | \" + data.split(\";\")[2];\n      document.getElementById('id-input').style.display = 'initial';\n\n      getCodeLetter(code, data.split(\";\")[1], data.split(\";\")[2])\n      stopEnter = true;\n    }\n  }\n}\n\nfunction getCodeLetter(code, teacher, className) {\n  firebase.database().ref(\"Teachers/\" + teacher + \"/Classes/\" + className).once('value', function(snapshot) {\n    for(exam in snapshot.val().Exams) {\n      if(exam.substring(1) == code) {\n        localStorage.setItem('ExamCode', exam);\n      }\n    }\n  });\n}\n\nfunction retrieveName() {\n  var taken = false;\n  var id = document.getElementsByClassName(\"ID\")[0].value;\n\n  if(id.length == 5){\n    var i = 0;\n    for(var x = 0; x < examCodes.length; x++){\n      var decryptedBytes = CryptoJS.AES.decrypt(examCodes[x], key);\n      var plaintext = decryptedBytes.toString(CryptoJS.enc.Utf8);\n\n      if(plaintext.split(\";\")[0] == localStorage.getItem('ExamCode').substring(1)){\n        i = x;\n        break;\n      }\n    }\n\n    var teacher = CryptoJS.AES.decrypt(examCodes[i], key);\n    var plaintext = decryptedBytes.toString(CryptoJS.enc.Utf8);\n\n    document.getElementById('userName').innerHTML = \"\";\n\n    firebase.database().ref(\"Teachers/\" + plaintext.split(\";\")[1] + \"/Classes/\" + plaintext.split(\";\")[2] + \"/Exams/\" + localStorage.getItem(\"ExamCode\") + \"/taken\").once('value', function(snapshot) {\n      snapshot.forEach(function(childSnapshot) {\n        if(childSnapshot.val() == id) {\n          taken = true;\n        }\n      });\n      if(!taken || taken) {\n        document.getElementById('userName').style.color = \"black\";\n        localStorage.setItem('idNum', id);\n        firebase.database().ref(\"Teachers/\" + plaintext.split(\";\")[1] + \"/Classes/\" + plaintext.split(\";\")[2] + \"/Students\").once('value', function(snapshot) {\n          snapshot.forEach(function(childSnapshot) {\n            if(childSnapshot.val().split(\";\")[0] == id) {\n              document.getElementById('userName').innerHTML = childSnapshot.val().split(\";\")[1];\n              document.getElementById('proceed').style.display = \"initial\";\n              document.getElementById('recognition').style.bottom = \"-10px\";\n            }\n          });\n        });\n\n        if(document.getElementById('userName').innerHTML == \"\") {\n          document.getElementById('userName').innerHTML = \"Not Found!\"\n        }\n      }\n\n      else {\n        document.getElementById('userName').innerHTML = \"You Have Taken This Exam Already!\";\n        document.getElementById('userName').style.color = \"red\";\n      }\n    });\n  }\n}\n\n//function to make sure exam code is valid\nfunction findCode(code) {\n  var exists = false;\n  var data = \"\";\n\n  for(var x = 0; x < examCodes.length; x++){\n    var decryptedBytes = CryptoJS.AES.decrypt(examCodes[x], key);\n    var plaintext = decryptedBytes.toString(CryptoJS.enc.Utf8);\n\n    if(plaintext.split(\";\")[0] == code){\n      return plaintext;\n    }\n  }\n\n  return null;\n}\n\n// function to display quiz to student\nfunction displayQuiz() {\n  var code = localStorage.getItem(\"ExamCode\");\n  var teacher = localStorage.getItem(\"teacher\");\n\n  localStorage.setItem(\"StudentName\", document.getElementById('userName').innerHTML);\n  var i = 0;\n\n  for(var x = 0; x < examCodes.length; x++){\n    var decryptedBytes = CryptoJS.AES.decrypt(examCodes[x], key);\n    var plaintext = decryptedBytes.toString(CryptoJS.enc.Utf8);\n    if(plaintext.split(\";\")[0] == code.substring(1) && plaintext.split(\";\")[1] == teacher){\n      i = x;\n      break;\n    }\n  }\n\n  var teacher = CryptoJS.AES.decrypt(examCodes[i], key);\n  var plaintext = decryptedBytes.toString(CryptoJS.enc.Utf8);\n\n  localStorage.setItem(\"className\", plaintext.split(\";\")[2]);\n\n  document.getElementById('main').style.display = \"none\";\n  document.getElementById('navigation').style.display = \"none\";\n  document.getElementById('display-exam').style.display = \"initial\";\n\n  document.body.style.background = \"white\";\n  document.body.style.overflow = \"scroll\";\n  populateExam(code, firebase.database().ref(\"Teachers/\" + plaintext.split(\";\")[1] + \"/Classes/\" + plaintext.split(\";\")[2] + \"/Exams/\" + code));\n  toggleFullScreen();\n\n\n  // listen for alt+tab changes and act upon them\n  window.onblur = function() {\n    toggleFullScreen();\n  }\n\n  canCount = true;\n\n  firebase.database().ref(\"Teachers/\" + localStorage.getItem('teacher') + \"/Classes/\" + localStorage.getItem('className') + \"/Exams/\" + localStorage.getItem(\"ExamCode\")).once('value').then(function(snapshot) {\n    snapshot.forEach(function(childSnapshot) {\n      if(childSnapshot.val().examCode != undefined) {\n        localStorage.setItem(\"timeLimit\", childSnapshot.val().examTotalMins);\n      }\n    });\n  });\n\n  firebase.database().ref(\"Teachers/\" + localStorage.getItem('teacher') + \"/Classes/\" + localStorage.getItem('className') + \"/Exams/\" + localStorage.getItem(\"ExamCode\") + \"/taken\").push(localStorage.getItem('idNum'));\n}\n\n//pull and populate exam\nfunction populateExam(code, ref) {\n  firebase.database().ref(ref).once('value').then(function(snapshot) {\n    snapshot.forEach(function(childSnapshot) {\n      var val = childSnapshot.val();\n\n      if(val.examCode != undefined){\n        var counter = 0;\n\n        document.getElementById('exam-code').innerHTML = val.examCode + \" | \" + localStorage.getItem(\"StudentName\");\n\n        if(val.examDate.split(\"-\")[1] != null) {\n          document.getElementById('date').innerHTML = val.examTeacher + \" | \" + val.examDate.split(\"-\")[1] + \"-\" + val.examDate.split(\"-\")[2] + \"-\" + val.examDate.split(\"-\")[0];\n        }\n        else {\n          var dateJS = new Date();\n          document.getElementById('date').innerHTML = val.examTeacher + \" | \" + (dateJS.getMonth()+1)+'-'+dateJS.getDate()+'-'+dateJS.getFullYear();\n        }\n\n        document.getElementById('description').value = val.examDescription;\n\n        var title = val.examTitle;\n        if(title == \"\") {\n          title = \"Untitled\";\n        }\n        document.getElementById('nameOfExam').innerHTML = title;\n\n        document.getElementsByClassName('points')[0].innerHTML = val.examTotalPoints;\n        document.getElementsByClassName('time')[0].innerHTML = val.examTotalMins;\n\n        $(document.getElementById('finalDiv')).empty();\n\n        for(var i = 0; i < Object.keys(val.questions).length; i++) {\n          // var currShuffledPos = shuffled[i];\n\n          done.push(0);\n          var localQuestions = document.getElementsByClassName('question');\n          var question = childSnapshot.val().questions[i];\n\n          createQuestion(true, Object.keys(question.choices).length);\n          createQuestionTracker(i + 1, true);\n\n          localQuestions[i].childNodes[1].value = question.title;\n          localQuestions[i].childNodes[2].childNodes[1].innerHTML = question.points;\n\n          if(question.imgSrc != \"\") {\n            var src = question.imgSrc;\n            localQuestions[i].childNodes[2].childNodes[3].style.display = \"initial\";\n            localQuestions[i].childNodes[2].childNodes[3].onclick = function() {\n              swal({\n                icon: src,\n                text: question.imgShortDescription,\n                className: \"imgView\"\n              });\n            }\n          }\n\n          changeQuestionType(question.type, i);\n\n          if(question.type == \"mc\") {\n            for(var j = 0; j < Object.keys(question.choices).length; j++){\n              if(question.choices[j].value != undefined){\n                localQuestions[i].childNodes[3].childNodes[j].childNodes[1].innerHTML = (question.choices[j].value);\n              }\n              else {\n                localQuestions[i].childNodes[3].childNodes[j].childNodes[1].innerHTML = (question.choices[j]);\n              }\n            }\n          }\n\n          else if(question.type == \"matching\"){\n            document.getElementsByClassName('matching')[i].childNodes[0].value = question.numBoxes;\n            for(var j = 0; j < question.numBoxes; j++) {\n              createMatchingElement(document.getElementsByClassName('matching-wrapper')[i], j + 1);\n            }\n\n            var localBoxes = document.getElementsByClassName('matchingbox');\n            for(var k = 0; k < localBoxes.length; k++) {\n              localBoxes[k].childNodes[1].value = question.choices[k].split(\";\")[0];\n              localBoxes[k].childNodes[3].value = question.choices[k].split(\";\")[1];\n            }\n          }\n        }\n      }\n    });\n  });\n   setTimeout(function(){\n     var questions = (document.getElementsByClassName('question'));\n     var exam = document.getElementById('exam');\n\n     //convert HTMLcollection to array and shuffle\n     var questionsArr = shuffle(Array.prototype.slice.call( questions ));\n\n     $('.questionBr').remove(); $('.questionHr').remove(); $('.question').remove();\n\n     for(var m = 0; m < questionsArr.length; m++) {\n       exam.appendChild(questionsArr[m]);\n       exam.appendChild(document.createElement('br'));\n       exam.appendChild(document.createElement('hr'));\n     }\n     restructureQuestions();\n   }, 500);\n}\n\nfunction shuffle(array) {\n  var currentIndex = array.length, temporaryValue, randomIndex;\n\n  // While there remain elements to shuffle...\n  while (0 !== currentIndex) {\n\n    // Pick a remaining element...\n    randomIndex = Math.floor(Math.random() * currentIndex);\n    currentIndex -= 1;\n\n    // And swap it with the current element.\n    temporaryValue = array[currentIndex];\n    array[currentIndex] = array[randomIndex];\n    array[randomIndex] = temporaryValue;\n  }\n\n  return array;\n}\n\n//function to restructure if question is deleted in the middle\nfunction restructureQuestions() {\n  var questions = document.getElementsByClassName('question');\n\n  for(var i = 0; i < questions.length; i++) {\n    var question = questions[i];\n\n    question.childNodes[0].innerHTML = i + 1 + \". \"\n    question.id = i + 1;\n  }\n}\n\n//function to dynamically change type of question\nfunction changeQuestionType(val, i) {\n  if(val == \"mc\") {\n    document.getElementsByClassName(\"mc\")[i].style.display = \"initial\";\n\n    if(document.getElementsByClassName(\"fr\")[i] != undefined) {\n      document.getElementsByClassName(\"fr\")[i].style.display = \"none\";\n    }\n\n    if(document.getElementsByClassName(\"tf\")[i] != undefined) {\n      document.getElementsByClassName(\"tf\")[i].style.display = \"none\";\n    }\n\n    if(document.getElementsByClassName(\"matching\")[i] != undefined) {\n      document.getElementsByClassName(\"matching\")[i].style.display = \"none\";\n    }\n  }\n  else if(val == \"fr\") {\n    document.getElementsByClassName(\"mc\")[i].style.display = \"none\";\n\n    if(document.getElementsByClassName(\"tf\")[i] != undefined) {\n      document.getElementsByClassName(\"tf\")[i].style.display = \"none\";\n    }\n\n    if(document.getElementsByClassName(\"matching\")[i] != undefined) {\n      document.getElementsByClassName(\"matching\")[i].style.display = \"none\";\n    }\n\n    document.getElementById(i + 1).appendChild(createFreeResponse());\n  }\n  else if(val == \"tf\") {\n    document.getElementsByClassName(\"mc\")[i].style.display = \"none\";\n\n    if(document.getElementsByClassName(\"fr\")[i] != undefined) {\n      document.getElementsByClassName(\"fr\")[i].style.display = \"none\";\n    }\n\n    if(document.getElementsByClassName(\"matching\")[i] != undefined) {\n      document.getElementsByClassName(\"matching\")[i].style.display = \"none\";\n    }\n\n    document.getElementById(i + 1).appendChild(createTrueFalse());\n  }\n  else if(val == \"matching\") {\n    document.getElementsByClassName(\"mc\")[i].style.display = \"none\";\n\n    if(document.getElementsByClassName(\"fr\")[i] != undefined) {\n      document.getElementsByClassName(\"fr\")[i].style.display = \"none\";\n    }\n\n    if(document.getElementsByClassName(\"tf\")[i] != undefined) {\n      document.getElementsByClassName(\"tf\")[i].style.display = \"none\";\n    }\n\n    document.getElementById(i + 1).appendChild(createMatching());\n  }\n}\n\n\n// True | False\nfunction createTrueFalse() {\n  var label = document.createElement('label');\n  label.id = \"label\";\n  label.className = \"tf\";\n\n  var true_input = document.createElement('input');\n  true_input.style.outline = \"none\";\n  true_input.type = \"radio\";\n  true_input.className = \"option-input radio\";\n  true_input.name = \"tf_radio\"\n\n  var false_input = document.createElement('input');\n  false_input.style.outline = \"none\";\n  false_input.type = \"radio\";\n  false_input.className = \"option-input radio\";\n  false_input.style.marginLeft = \"10%\";\n  false_input.name = \"tf_radio\"\n\n  var true_span = document.createElement('span');\n  true_span.innerHTML = \" True\";\n  true_span.style.marginLeft = \"10px\";\n  true_span.style.color = \"gray\"\n  true_span.style.fontWeight = 'normal';\n\n  var false_span = document.createElement('span');\n  false_span.innerHTML = \" False\";\n  false_span.style.marginLeft = \"10px\";\n  false_span.style.color = \"gray\"\n  false_span.style.fontWeight = 'normal';\n\n  label.appendChild(true_input);\n  label.appendChild(true_span)\n\n  label.appendChild(false_input);\n  label.appendChild(false_span)\n\n  return label;\n}\n\n// function for Free-Response\nfunction createFreeResponse() {\n  var ta = document.createElement('textarea');\n\n  // read when user changes text area\n  ta.oninput = function() {\n    setTimeout(function(){\n      done[parseInt(ta.parentNode.id) - 1] = 1;\n\n      if(done.indexOf(0) == -1) {\n        document.getElementById('submit-exam').style.display = 'initial';\n        document.getElementById('submit-exam-disabled').style.display = \"none\";\n      }\n    }, 100)\n  }\n\n  ta.className = \"fr\";\n  ta.placeholder = \"NOTE: This question requires manual grading\";\n  return ta;\n}\n\n// function to create matching boxes\nfunction createMatching(){\n  var matchingWrapper = document.createElement('div');\n  matchingWrapper.className = \"matching-wrapper\";\n\n  var matching = document.createElement('div');\n  matching.className = 'matching';\n\n  var hr = document.createElement('hr');\n  hr.style.width = '67%';\n\n  var questions = document.createElement('span');\n  questions.innerHTML = 'Questions';\n  questions.style.marginLeft = \"1.5vw\";\n\n  var results = document.createElement('span');\n  results.innerHTML = 'Results (Will Be Randomized)'\n  results.style.marginLeft = \"22.5vw\";\n\n  var numElements = document.createElement('input');\n  numElements.type = 'textbox';\n  numElements.placeholder = '# Of Elements...';\n  numElements.style.borderRadius = \"5px\";\n  numElements.style.padding = \"5px\";\n  numElements.style.border= \"1px solid black\";\n  numElements.style.fontSize = \"15px\";\n\n  numElements.onkeyup = function() {\n    $(matchingWrapper).empty();\n\n    if(this.value <= 20) {\n      for(var i = 0; i < this.value; i++) {\n        createMatchingElement(matchingWrapper, i + 1);\n      }\n    }\n    else {\n      this.value = \"\";\n\n      var alert = document.createElement('div');\n      alert.innerHTML = \"20 Elements Max!\"\n      alert.style.textAlign = \"center\";\n      alert.style.width = \"100%\";\n      alert.style.position = \"fixed\";\n      alert.style.zIndex = \"100000\";\n      alert.style.top = \"0\";\n      alert.className = \"alert alert-danger\";\n      alert.role = \"alert\";\n\n      document.getElementById('create-exam').appendChild(document.createElement('center').appendChild(alert));\n\n      setTimeout(function(){ document.getElementsByClassName('alert')[0].remove(); }, 2500);\n    }\n  }\n\n  var newBox = document.createElement('button');\n  newBox.id = \"newBox\";\n  newBox.innerHTML = \"New Element!\";\n\n  newBox.onclick = function() {\n    createMatchingElement(matchingWrapper, document.getElementsByClassName('matchingbox').length + 1);\n    saveExam(false);\n  }\n\n  matching.appendChild(numElements);\n  matching.appendChild(hr);\n  matching.appendChild(questions); matching.appendChild(results);\n  matching.appendChild(matchingWrapper);\n\n  matching.appendChild(document.createElement('br'));\n  matching.appendChild(newBox);\n\n  return matching;\n}\n\n// function to create matching Elements\nfunction createMatchingElement(div, i) {\n  var box = document.createElement('div');\n  box.className = 'matchingbox';\n\n  var labelTrash = document.createElement('span');\n  labelTrash.className = \"glyphicon glyphicon-minus\";\n  labelTrash.style.display = \"none\";\n  labelTrash.style.marginRight = \"5px\";\n  labelTrash.style.color = \"#f25555\";\n\n  $(labelTrash).click(function(){\n    this.parentNode.remove();\n    saveExam(false);\n    restructureBoxes();\n  });\n\n  $(box).hover(function(){\n    this.childNodes[0].style.display = \"initial\";\n  }, function(){\n    this.childNodes[0].style.display = \"none\";\n  });\n\n  $(labelTrash).hover(function(){\n    this.style.cursor=\"pointer\";\n    this.style.color = \"#f25555\";\n  }, function(){\n\n  });\n\n  box.appendChild(labelTrash)\n\n  var num = document.createElement('span');\n  num.innerHTML = i + \".\";\n  num.style.marginRight = \"10px\";\n  num.style.fontSize = \"15px\";\n\n  box.appendChild(num);\n\n  var input = document.createElement('input');\n  input.type = 'textbox';\n  input.style.marginTop = \"20px\";\n  input.style.textAlign = \"center\";\n  input.placeholder = \"1 + 1\";\n  input.id = 'result';\n\n  var arrow = document.createElement('span');\n  arrow.className = 'glyphicon glyphicon-arrow-right';\n  arrow.style.paddingLeft = '5vw';\n\n  var result_input = document.createElement('input');\n  result_input.type = 'textbox';\n  result_input.style.marginLeft = \"5vw\";\n  result_input.style.textAlign = \"center\";\n  result_input.placeholder = \"2\";\n  result_input.id = 'result';\n\n  box.appendChild(input);\n  box.appendChild(arrow);\n  box.appendChild(result_input);\n  div.appendChild(box);\n}\n\n// function to create HTML question\nfunction createQuestion(loading, numAnswerChoices) {\n  var exam = document.getElementById('exam');\n\n  var question = document.createElement('div');\n  question.className = \"question\";\n  question.id = document.getElementsByClassName('question').length + 1;\n\n  var num = document.createElement('span');\n  num.innerHTML = document.getElementsByClassName('question').length + 1 + \". \";\n  num.style.color = \"#97a5aa\";\n\n  var hr = document.createElement('hr');\n  hr.className = \"questionHr\";\n\n  var br = document.createElement('br');\n  br.className = \"questionBr\";\n\n  var question_title = document.createElement('input');\n  question_title.readOnly = true;\n  question_title.type = \"text\";\n  question_title.placeholder = \"Ex: What's Your Name?\";\n  question_title.id = \"question-title\";\n\n  question.appendChild(num);\n  question.appendChild(question_title);\n\n  var viewImage = document.createElement(\"a\");\n  viewImage.innerHTML = \"View Image\";\n  viewImage.style.marginLeft = \"10px\";\n  viewImage.style.display = \"none\";\n\n  var points = document.createElement('div');\n  points.id = \"points\";\n  var span = document.createElement('span');\n  span.innerHTML = \"( \";\n\n  var numPoints = document.createElement('span');\n  numPoints.type = \"text\";\n  numPoints.id = \"numPoints\";\n  numPoints.placeholder = \"Ex: 4\";\n\n  var finishingSpan =  document.createElement('span');\n  finishingSpan.innerHTML = \" points)\";\n\n  points.appendChild(span); points.appendChild(numPoints); points.appendChild(finishingSpan);\n  points.appendChild(viewImage);\n\n  question.appendChild(points);\n\n  var answer_choices = document.createElement('div');\n  answer_choices.className = \"mc\";\n\n  for(var i = 0; i < numAnswerChoices; i++) {\n    var label = document.createElement('label');\n    label.id = \"label\";\n\n    var input = document.createElement('input');\n    input.style.outline = \"none\";\n    input.type = \"radio\";\n    input.className = \"option-input radio\";\n    input.name = num.innerHTML;\n\n    var answer_choice = document.createElement('span');\n    answer_choice.className = \"option\";\n    answer_choice.id = \"question-choice\";\n\n    label.appendChild(input);\n    label.appendChild(answer_choice);\n    answer_choices.appendChild(label);\n  }\n  question.appendChild(answer_choices);\n\n  exam.appendChild(question);\n  exam.appendChild(br);\n  exam.appendChild(hr);\n\n\n  if(!loading) {\n    window.scroll({ top: question.getBoundingClientRect().top + window.scrollY, behavior: 'smooth' });\n    createQuestionTracker(document.getElementsByClassName('question').length, false);\n  }\n}\n\nfunction createQuestionTracker(i, populating) {\n  if(i == 2 && !populating) {\n    createQuestionTracker(1, false);\n  }\n  var manager = document.getElementById('questionNums');\n  var finalDiv = document.getElementById('finalDiv');\n\n  var tracker = document.createElement('span');\n  tracker.innerHTML = \"&#x25CC;\"\n  tracker.style.fontSize = \"60px\";\n  tracker.style.position = \"relative\";\n  tracker.style.bottom = \"20px\";\n  tracker.style.color = \"#58f\";\n  tracker.style.left = \"125px\";\n\n  tracker.id = \"question-tracker\";\n  tracker.className = i;\n\n  $(tracker).hover(function(){\n    var text = tracker.childNodes[1];\n\n    if(navigator.userAgent.toLowerCase().indexOf('safari/') > -1 || /Chrome/.test(navigator.userAgent) && /Google Inc/.test(navigator.vendor)) {\n      text.style.right = \"22.5px\";\n    }\n\n    this.style.cursor = \"pointer\";\n    this.innerHTML = \"&#x25CF;\";\n    this.appendChild(text);\n\n    this.style.bottom = '25px';\n    this.style.transition = 'all .5s';\n\n    tracker.childNodes[1].style.color = \"white\";\n  }, function(){\n    var text = tracker.childNodes[1];\n    this.innerHTML = \"&#x25CC;\";\n\n    if(navigator.userAgent.toLowerCase().indexOf('safari/') > -1 || /Chrome/.test(navigator.userAgent) && /Google Inc/.test(navigator.vendor)) {\n      text.style.right = \"27.5px\";\n    }\n\n    this.style.bottom = '20px';\n    this.style.transition = 'all .5s';\n\n    this.appendChild(text);\n    tracker.childNodes[1].style.color = \"black\";\n  });\n\n  tracker.onclick = function() {\n    document.getElementById(i).scrollIntoView({block: \"center\"});\n  }\n\n  var center = document.createElement('center');\n  var text = document.createElement('div');\n  text.id = \"text\";\n  text.innerHTML = i;\n\n  if(navigator.userAgent.toLowerCase().indexOf('safari/') > -1 || /Chrome/.test(navigator.userAgent) && /Google Inc/.test(navigator.vendor)) {\n    text.style.right = \"27.5px\";\n  }\n\n  tracker.appendChild(text);\n\n  finalDiv.appendChild(tracker);\n  manager.appendChild(finalDiv);\n  manager.scrollTop = (manager.clientHeight + manager.clientHeight);\n}\n\n//toggleFullScreen\nfunction toggleFullScreen() {\n  if (!document.fullscreenElement) {\n    document.addEventListener('contextmenu', event => event.preventDefault());\n    document.documentElement.requestFullscreen();\n  }\n  else {\n    if (document.exitFullscreen) {\n      document.exitFullscreen();\n    }\n  }\n}\n\n//function to end test\nfunction endTest() {\n  window.location.href = window.location.href;\n}\n\nfunction getChecked(question) {\n  var type = question.childNodes[Object.keys(question.childNodes)[question.childNodes.length - 1]];\n\n  if(type.className == \"mc\") {\n    for(var i = 0; i < type.childNodes.length; i++) {\n      if(type.childNodes[i].childNodes[0].checked == true) {\n        return i;\n      }\n    }\n  }\n\n  else if(type.className == \"tf\") {\n    if(type.childNodes[0].checked) {\n      return 0;\n    }\n    else {\n      return 1;\n    }\n  }\n\n  else if(type.className == \"matching\"){\n    type = \"matching\";\n    return 15;\n  }\n\n  else if(type.className == \"fr\"){\n    return type.value;\n  }\n}\n\n// submit code - reroute!\nfunction submitExam() {\n  var student_answers = [];\n\n  for(var i = 0; i < document.getElementsByClassName('question').length; i++) {\n    var question = document.getElementsByClassName('question')[i];\n    var checked = getChecked(question);\n\n    student_answers.push(i + \";\" + checked);\n  }\n\n  localStorage.setItem(\"student_answers\", JSON.stringify(student_answers));\n\n  document.getElementById('display-exam').style.display = \"none\";\n  document.getElementById('result').style.display = \"initial\";\n\n  displayResults();\n}\n\n// function to display Results\nfunction displayResults() {\n  var answers = JSON.parse(localStorage.getItem('student_answers'));\n  var dbAnswers;\n  var responseStructure = {};\n\n  firebase.database().ref(\"Teachers/\" + localStorage.getItem('teacher') + \"/Classes/\" + localStorage.getItem('className') + \"/Exams/\" + localStorage.getItem(\"ExamCode\")).once('value').then(function(snapshot) {\n    snapshot.forEach(function(childSnapshot) {\n      if(childSnapshot.toJSON().questions != undefined) {\n        dbAnswers = childSnapshot.toJSON();\n      }\n    });\n\n    var total = 0;\n    var frTotalPoints = 0;\n\n    for(var i = 0; i < answers.length; i++) {\n      var answer = \"\";\n      var fr = false;\n      var tf = false;\n\n      if(dbAnswers.questions[i].type == \"tf\") {\n        tf = true;\n        if(answers[i].split(\";\")[1] == 1) {\n          answer = \"false\";\n        }\n        else {\n          answer = \"true\";\n        }\n\n        if(answer == dbAnswers.questions[i].choices[0]){\n          total += parseInt(dbAnswers.questions[i].points);\n          createCorrectBox(dbAnswers.questions[i].title, answers[i].split(\";\")[0], parseInt(dbAnswers.questions[i].points));\n        }\n        else {\n          createIncorrectBox(dbAnswers.questions[i].title, answers[i].split(\";\")[0], parseInt(dbAnswers.questions[i].points));\n        }\n      }\n      else if(dbAnswers.questions[i].type == \"mc\") {\n        answer = parseInt(answers[i].split(\";\")[1])\n      }\n      else {\n        fr = true;\n        createFrBox(dbAnswers.questions[i].title, answers[i].split(\";\")[0], parseInt(dbAnswers.questions[i].points));\n        frTotalPoints += parseInt(dbAnswers.questions[i].points);\n      }\n\n      if(!fr && !tf) {\n        if(answer == dbAnswers.questions[i].checked) {\n          total += parseInt(dbAnswers.questions[i].points);\n          createCorrectBox(dbAnswers.questions[i].title, answers[i].split(\";\")[0], parseInt(dbAnswers.questions[i].points));\n        }\n        else {\n          createIncorrectBox(dbAnswers.questions[i].title, answers[i].split(\";\")[0], parseInt(dbAnswers.questions[i].points));\n        }\n      }\n    }\n\n    var studentExamData = {\n      \"score\" : ((total / (dbAnswers.examTotalPoints - frTotalPoints)) * 100).toFixed(1),\n      \"time\" : timer,\n      \"answers\" : answers,\n      \"name\" : localStorage.getItem('StudentName'),\n      \"totalScore\" : (total / (dbAnswers.examTotalPoints) * 100).toFixed(1)\n    }\n\n    firebase.database().ref(\"Teachers/\" + localStorage.getItem('teacher') + \"/Classes/\" + localStorage.getItem('className') + \"/Exams/\" + localStorage.getItem(\"ExamCode\") + \"/responses/\" + localStorage.getItem('StudentName')).push(studentExamData);\n\n    var min = \" Minutes\"\n\n    if(timer == 1) {\n      min = \" Minute\"\n    }\n\n    document.getElementById('score').innerHTML = studentExamData.score + \"%\";\n    document.getElementById('score-num').innerHTML = (total + \" / \" + (dbAnswers.examTotalPoints - frTotalPoints) + \" in \" + timer + min);\n\n  });\n\n\n   var result = document.getElementById('result');\n}\n\nfunction createFrBox(title, num, points) {\n  var dataDiv = document.getElementById('question-data');\n\n  var box = document.createElement('div');\n  box.style.width = \"90vw\";\n  box.style.marginTop = \"10px\";\n  box.style.border = \"1px solid black\";\n  box.style.padding = \"15px\";\n  box.style.height = \"50px\";\n  box.style.background = \"#798893\";\n  box.style.color = \"white\";\n  box.style.borderRadius = \"6px\";\n  box.className = \"questionBox\";\n\n  var name = document.createElement('span');\n  name.innerHTML = parseInt(num) + 1 + \" | \" + title;\n  name.style.float = \"left\";\n  name.style.paddingLeft = \"10px\";\n\n  var pointsAwarded = document.createElement('span');\n  pointsAwarded.innerHTML = \"Free Response Questions Require Manual Grading (Points Possible: \" + points + \")\"\n  pointsAwarded.style.float = \"right\";\n  pointsAwarded.style.paddingRight = \"20px\";\n\n  box.appendChild(name);\n  box.appendChild(pointsAwarded);\n\n  dataDiv.appendChild(box);\n}\n\nfunction createCorrectBox(title, num, points) {\n  var dataDiv = document.getElementById('question-data');\n\n  var box = document.createElement('div');\n  box.style.width = \"90vw\";\n  box.style.marginTop = \"10px\";\n  box.style.border = \"1px solid black\";\n  box.style.padding = \"15px\";\n  box.style.height = \"50px\";\n  box.style.background = \"#84f277\";\n  box.style.borderRadius = \"6px\";\n  box.className = \"questionBox\";\n\n  var name = document.createElement('span');\n  name.innerHTML = parseInt(num) + 1 + \" | \" + title;\n  name.style.float = \"left\";\n  name.style.paddingLeft = \"10px\";\n\n  var pointsAwarded = document.createElement('span');\n  pointsAwarded.innerHTML = \"You Received \" + points + \" / \" + points + \" Points For This Question!\"\n  pointsAwarded.style.float = \"right\";\n  pointsAwarded.style.paddingRight = \"20px\";\n\n  box.appendChild(name);\n  box.appendChild(pointsAwarded);\n\n  dataDiv.appendChild(box);\n}\n\nfunction createIncorrectBox(title, num, points) {\n  var dataDiv = document.getElementById('question-data');\n\n  var box = document.createElement('div');\n  box.style.width = \"90vw\";\n  box.style.marginTop = \"10px\";\n  box.style.border = \"1px solid black\";\n  box.style.padding = \"15px\";\n  box.style.height = \"50px\";\n  box.style.background = \"#cc2d2d\";\n  box.style.color = \"white\";\n  box.style.borderRadius = \"6px\";\n  box.className = \"questionBox\";\n\n  var name = document.createElement('span');\n  name.innerHTML = parseInt(num) + 1 + \" | \" + title;\n  name.style.float = \"left\";\n  name.style.paddingLeft = \"10px\";\n\n  var pointsAwarded = document.createElement('span');\n  pointsAwarded.innerHTML = \"You Received \" + 0 + \" / \" + points + \" Points For This Question\"\n  pointsAwarded.style.float = \"right\";\n  pointsAwarded.style.paddingRight = \"20px\";\n\n  box.appendChild(name);\n  box.appendChild(pointsAwarded);\n\n  dataDiv.appendChild(box);\n}\n\n// window.onbeforeunload = function() {\n//    return \"Dude, are you sure you want to leave? Think of the kittens!\";\n// }\n\n// if user hits enter, check exam code\ndocument.addEventListener(\"keypress\", function(e) {\n  if (e.keyCode === 13 && !stopEnter) {\n    submitExamCode();\n  }\n}, false);\n\n//throw key away\nkey = \"\";\n"]}