{"version":3,"sources":["assets/js/teacher.js","../.nvm/versions/node/v13.0.1/lib/node_modules/parcel-bundler/src/builtins/hmr-runtime.js"],"names":["localStorage","getItem","document","body","style","display","alert","examCodes","examCodesTeachers","arr","exams","examData","totalPoints","autoSaveCounter","alphabet","examDataHasLoaded","userDataHasLoaded","window","onload","populateDashboard","$","click","toggleClass","focus","css","blur","on","saveExam","scroll","i","getElementsByClassName","length","elem","getElementById","docViewTop","scrollTop","docViewBottom","height","elemTop","offset","top","elemBottom","isInView","navigator","userAgent","toLowerCase","indexOf","clientHeight","childNodes","innerHTML","color","marginRight","undefined","userName","JSON","parse","profileImg","src","swal","title","text","icon","buttons","then","value","location","href","createQuiz","examCounter","firebase","database","ref","snapshot","forEach","childSnapshot","push","val","split","randomCode","generateCode","examInit","examCode","toUpperCase","examTitle","lastSaved","examType","examTotalPoints","examTotalMins","examDate","examDescription","questions","type","points","choices","once","child","key","remove","createQuestion","background","successfulSave","createElement","textAlign","width","position","zIndex","className","role","appendChild","setTimeout","newSave","Date","toLocaleString","replace","getAllPoints","set","examTeacher","localQuestions","pluginArrayArg","Array","question","children","jsonArg1","Object","checked","imgSrc","imgShortDescription","j","boxes","numBoxes","result","stringify","extend","code","substring","pointsBoxes","parseInt","createQuestionTracker","populating","manager","tracker","id","hover","cursor","onclick","scrollIntoView","block","circle","center","populateExam","refs","pop","join","counter","keys","changeQuestionType","setChecked","div","loadClass","name","empty","collectiveAvg","classAvg","classCounter","backgroundImage","setItem","exam","grade","score","createExamBox","toFixed","button","console","log","Math","random","toString","substr","string","shift","removeDropDown","x","matches","matchMedia","addListener","displayExamData","examName","cumAvg","classLength","highest","lowest","quickest","slowest","table","populated","standardDeviation","documentElement","finalSelectedCode","examCodeWithLetter","hasOwnProperty","obj","prop","initData","populateItemAnalysis","dbName","init","initName","paddingLeft","initScore","initPercentile","initTime","response","responses","data","time","tr","loadStudentExamData","percentile","getPercentileOriginal","overallData","ul","float","avg","fontSize","highestScorer","lowestScorer","standardDev","mean","reduce","a","b","sd","sqrt","map","pow","possibleTables","dataDiv","answers","responseData","q","createItemAnalysis","num","span","paddingRight","borderRight","pgBar","numBelow","numEqual","student","removeAllActive","navBars","getElementsByTagName","populateLeaderboard","iframe","attr","goHomeFromExams","goExamsFromExam","goHomeFromExamData","answer","finalId","info","fullName","takenKey","taken","studentPoints","totalScore","corrAnswer","createGradedQuestion","studAnswer","numAnswerChoices","numAnswerPoints","studName","examCurrentCode","awardedPoints","correct","hr","question_title","readOnly","numPoints","finishingSpan","answer_choices","label","borderTop","borderBottom","correctAnswer","fontWeight","marginTop","incorrectAnswer","input","disabled","outline","answer_choice","ta","pointsAwardedSpan","numAcceptedPoints","maxLength","questionNum","onkeyup","cleanVersion","k","isNaN","update","newScore","placeholder","padding","border","borderRadius","getPercentile","sort","func","tables","t","testExamData","slice","iTracker","scores","mergeSort","times","mergeSortTime","middle","floor","left","right","merge","indexLeft","indexRight","concat","mergeTime","searchExams","filter","li","txtValue","textContent","innerText","gradients","wrapper","optionVert","classBox","difBackground","marginLeft","option_vertical","modal","edit","results","deleteTest","deleteExam","displayInfo","randomStr","setCorrectExamCode","html","s","cs","createCurrentTakingBox","opacity","overflowY","event","target","keyup","e","descriptor","boxShadow","onmouseover","transform","onmouseleave","transition","letter","getLetter","randomNum","v","currentlyTakingDiv","box","modifiedCode","dangerMode","willDelete","restructureQuestions","restructureBoxes","prevVal","plus","plusDiv","createFreeResponse","createTrueFalse","createMatching","searchLeaderboard","behavior","true_input","false_input","true_span","false_span","matchingWrapper","matching","numElements","createMatchingElement","newBox","labelTrash","parentNode","arrow","result_input","restructureManager","loading","br","trash","moveDiv","swapDiv","prompt","viewImage","imgUpload","uploadImage","question_type","mc","fr","tf","previous","onchange","selectedIndex","createNewAnswerChoice","clasName","getBoundingClientRect","scrollY","imgLink","alertDiv","header","textDecoration","imgInput","imgOut","shortDescription","margin","cancel","overflowX","upload","evt","tgt","srcElement","files","FileReader","marginBottom","readAsDataURL","numToSwap","div1","jQuery","div2","tdiv1","clone","tdiv2","replaceWith","createNewOptionChoice","createClassBox","numStudentsInClass","numExamsInClass","numStudents","lowKey","hrInBetween","numExams","exists","Exams","Students","OVERLAY_ID","OldModule","module","bundle","Module","moduleName","call","hot","hotData","_acceptCallbacks","_disposeCallbacks","accept","fn","dispose","checkedAssets","assetsToAccept","parent","isParcelRequire","WebSocket","hostname","protocol","ws","onmessage","handled","assets","asset","isNew","didAccept","hmrAcceptCheck","global","parcelRequire","every","generated","js","clear","hmrApply","hmrAcceptRun","reload","close","onclose","removeErrorOverlay","error","message","stack","overlay","createErrorOverlay","stackTrace","getParents","modules","parents","d","dep","isArray","Function","deps","cached","cache","some","cb"],"mappings":"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","file":"teacher.d00ec059.js","sourceRoot":"..","sourcesContent":["// check if user is signed in\nif(localStorage.getItem('userInfo') == null) {\n  document.body.style.display = \"none\";\n  alert(\"NOT AUTHORIZED\");\n}\n\nvar examCodes = [];\nvar examCodesTeachers = [];\nvar arr = [];\nvar exams = [];\nvar examData = [];\nvar totalPoints;\nvar autoSaveCounter = 0;\nvar alphabet = \"ABCDEFGHIJKLMNOPQRSTUVWXYZ\";\n\n// HAS LOADED\nvar examDataHasLoaded = false;\nvar userDataHasLoaded = false;\n\n\n//when page loads, populateDashboard()\nwindow.onload = function() {\n  populateDashboard();\n\n  $('.dropdown').click(function(){\n    $('.dropdown-menu').toggleClass('show');\n  });\n\n  $(\"#description\").focus(function() {\n    $(\"#description\").css(\"border\", \"1px solid #458ec1\");\n  }).blur(function() {\n    $(\"#description\").css(\"border\", \"1px solid lightgray\");\n  });\n\n  $(\"#create-exam\").on('blur', \":input\", function() {\n    saveExam(false);\n  });\n\n  $(\"#create-exam\").on('change', \"input:radio\", function() {\n    saveExam(false);\n  });\n\n  // for create-exam\n  $(window).scroll(function(){\n    for(var i = 1; i < document.getElementsByClassName('question').length + 1; i++) {\n      var elem = document.getElementById(i);\n      var docViewTop = $(window).scrollTop();\n      var docViewBottom = docViewTop + $(window).height();\n\n      var elemTop = $(elem).offset().top;\n      var elemBottom = elemTop + $(elem).height();\n\n      var isInView = ((elemBottom <= docViewBottom) && (elemTop >= docViewTop));\n\n      if (isInView){\n        if(navigator.userAgent.toLowerCase().indexOf('safari/') > -1) {\n          document.getElementById('question-manager').scrollTop = document.getElementById('question-tracker').clientHeight * (i - 1);\n          document.getElementsByClassName(i)[0].childNodes[0].innerHTML = \"&#x25CF;\"\n          document.getElementsByClassName(i)[0].childNodes[1].childNodes[0].style.color = \"white\";\n          document.getElementsByClassName(i)[0].childNodes[1].childNodes[0].style.marginRight = \"10px\";\n        }\n        else {\n          document.getElementById('question-manager').scrollTop = document.getElementById('question-tracker').clientHeight * (i - 1);\n          document.getElementsByClassName(i)[0].childNodes[0].innerHTML = \"&#x25CF;\"\n          document.getElementsByClassName(i)[0].childNodes[1].childNodes[0].style.color = \"white\";\n        }\n      }\n      else {\n        if(navigator.userAgent.toLowerCase().indexOf('safari/') > -1) {\n          document.getElementsByClassName(i)[0].childNodes[0].innerHTML = \"&#x25CC;\";\n          document.getElementsByClassName(i)[0].childNodes[1].childNodes[0].style.color = \"black\";\n          document.getElementsByClassName(i)[0].childNodes[1].childNodes[0].style.marginRight = \"0\";\n        }\n        else {\n          if(document.getElementsByClassName(i)[0] != undefined) {\n            document.getElementsByClassName(i)[0].childNodes[0].innerHTML = \"&#x25CC;\";\n            document.getElementsByClassName(i)[0].childNodes[1].childNodes[0].style.color = \"black\";\n          }\n        }\n      }\n    }\n  })\n};\n\n// retrieve userName, img from LocalStorage\nvar userName = (JSON.parse(localStorage.getItem(\"userInfo\"))[1]);\nvar profileImg = (JSON.parse(localStorage.getItem(\"userInfo\"))[2]);\n\n//initialize aspects of page with JS data\ndocument.getElementById('welcome-text').innerHTML = \"Welcome \" + userName + \"!\";\ndocument.getElementById('profile').src = profileImg;\n\n$('#profile').click(function(){\n  swal({\n    title: \"Sign Out\",\n    text: \"Are You Sure You Want To Sign Out?\",\n    icon: \"warning\",\n    buttons: [\"Cancel\", \"Sign Me Out!\"],\n  })\n  .then((value) => {\n    if(value) {\n      window.location.href = \"index.html?noRedirect\";\n    }\n  });\n});\n\n// create initial framework for exams\nfunction createQuiz() {\n  var examCounter = 0;\n\n  if(examCodes.length == 0){\n    // Pull all exam codes and seperate the datapoints from each other\n    firebase.database().ref('exam-codes').on('value', function(snapshot) {\n      snapshot.forEach(function(childSnapshot) {\n        examCodes.push(childSnapshot.val().split(\";\")[0]);\n        examCodesTeachers.push(childSnapshot.val().split(\";\")[1])\n      });\n    });\n  }\n\n  var randomCode = generateCode();\n\n  var examInit = {\n    examCode: randomCode.toUpperCase(),\n    examTitle: \"\",\n    lastSaved: \"\",\n    examType: \"\",\n    examTotalPoints: \"\",\n    examTotalMins: \"\",\n    examDate: \"\",\n    examDescription: \"\",\n    questions: [\n      {\n        title: '',\n        type:   '',\n        points: '',\n        choices: [\n          {value: \"\"},\n          {value: \"\"},\n          {value: \"\"},\n          {value: \"\"},\n        ]\n      }\n    ]\n  };\n\n\n  firebase.database().ref(\"Teachers/\" + userName + \"/Classes/\" + localStorage.getItem('className') + \"/Exams/\").once('value', function(snapshot) {\n    snapshot.forEach(function(childSnapshot) {\n      if(childSnapshot.val() == \"no_exams\") {\n        firebase.database().ref(\"Teachers/\" + userName + \"/Classes/\" + localStorage.getItem('className') + \"/Exams/\").child(childSnapshot.key).remove();\n      }\n      else {\n        examCounter++;\n      }\n    });\n  });\n\n  if(examCounter < 26) {\n    firebase.database().ref(\"Teachers/\" + userName + \"/Classes/\" + localStorage.getItem('className') + \"/Exams/\" + alphabet[(alphabet.length - 1) - examCounter] + randomCode.toUpperCase()).push(examInit);\n  }\n  else {\n    firebase.database().ref(\"Teachers/\" + userName + \"/Classes/\" + localStorage.getItem('className') + \"/Exams/\" + alphabet[(alphabet.length - 1) - examCounter-26] +  alphabet[(alphabet.length - 1) - examCounter-26] + randomCode.toUpperCase()).push(examInit);\n  }\n\n  createQuestion(true, 4);\n\n  document.getElementById('create-exam').style.display = \"initial\";\n  document.getElementById('main').style.display = \"none\";\n  document.body.style.background = \"white\";\n  document.getElementById('exam-code').innerHTML = randomCode.toUpperCase();\n}\n\n// Alert After Save\nfunction successfulSave() {\n  var alert = document.createElement('div');\n  alert.innerHTML = \"Successfully Saved Exam!\"\n  alert.style.textAlign = \"center\";\n  alert.style.width = \"100%\";\n  alert.style.position = \"fixed\";\n  alert.style.zIndex = \"100000\";\n  alert.style.top = \"0\";\n  alert.className = \"alert alert-success\";\n  alert.role = \"alert\";\n\n  document.getElementById('create-exam').appendChild(document.createElement('center').appendChild(alert));\n\n  setTimeout(function(){ document.getElementsByClassName('alert')[0].remove(); }, 2500);\n}\n\n// Save Exam\nfunction saveExam(alert) {\n  if(alert) {\n    successfulSave();\n  }\n\n  var newSave = new Date().toLocaleString().replace(\",\", \" @\");\n  if(newSave == \"\") {\n    newSave = \" Not Saved!\";\n  }\n\n  document.getElementById('last-saved').innerHTML = \"Last Sync: \" + newSave;\n  document.getElementsByClassName('points')[0].value = getAllPoints();\n\n  if(document.getElementById('nameOfExam').value != \"\") {\n    firebase.database().ref(\"exam-codes\").once('value').then(function(snapshot) {\n      snapshot.forEach(function(childSnapshot) {\n        if(childSnapshot.val().split(\";\")[0] == document.getElementById('exam-code').innerHTML) {\n          firebase.database().ref(\"exam-codes\").child(childSnapshot.key).set(childSnapshot.val().split(\";\")[0] + \";\" + childSnapshot.val().split(\";\")[1] + \";\" + childSnapshot.val().split(\";\")[2] + \";\" + document.getElementById('nameOfExam').value);\n        }\n      });\n    });\n  }\n\n  var examInit = {\n    examTeacher: userName,\n    examCode: document.getElementById('exam-code').innerHTML,\n    examTitle: document.getElementById('nameOfExam').value,\n    lastSaved: newSave,\n    examTotalPoints: getAllPoints(),\n    examTotalMins: document.getElementsByClassName('time')[0].value,\n    examDate: document.getElementById('date').value,\n    examDescription: document.getElementById('description').value,\n    questions: []\n  };\n\n  var localQuestions = document.getElementsByClassName('question');\n  var pluginArrayArg = new Array();\n\n  for(var i = 0; i < localQuestions.length; i++) {\n    var question = localQuestions[i];\n    var children = question.childNodes;\n\n    var jsonArg1 = new Object();\n    jsonArg1.title = children[4].value;\n    jsonArg1.type = children[5].value;\n    jsonArg1.points = children[6].childNodes[1].value;\n    jsonArg1.checked = -1;\n    jsonArg1.imgSrc = children[6].childNodes[3].className;\n\n    if(alert != true && alert != false) {\n      jsonArg1.imgShortDescription = alert;\n    }\n\n    jsonArg1.choices = [];\n\n\n    if(jsonArg1.type == 'mc') {\n      for(var j = 0; j < children[7].childNodes.length - 1; j++){\n        jsonArg1.choices.push(children[7].childNodes[j].childNodes[2].value);\n\n        if(children[7].childNodes[j].childNodes[1].checked == true) {\n          jsonArg1.checked = j;\n        }\n      }\n    }\n\n    else if(jsonArg1.type == 'fr') {\n      jsonArg1.choices.push(children[8].value);\n    }\n\n    else if(jsonArg1.type == 'tf') {\n      if(children[8].childNodes[0].checked) {\n        jsonArg1.choices.push(\"true\");\n      }\n      else {\n        jsonArg1.choices.push(\"false\");\n      }\n    }\n\n    else {\n      var boxes = document.getElementsByClassName('matchingbox');\n      jsonArg1.numBoxes = boxes.length;\n\n      for(var i = 0; i < boxes.length; i++) {\n        var question = boxes[i].childNodes[3].value;\n        var result = boxes[i].childNodes[5].value;\n\n        jsonArg1.choices.push(question + \";\" + result);\n      }\n    }\n\n    pluginArrayArg.push(jsonArg1);\n    var questions = JSON.parse(JSON.stringify(pluginArrayArg));\n    $.extend(examInit, { questions });\n  }\n\n  var code = \"\";\n\n  firebase.database().ref(\"Teachers/\" + userName + \"/Classes/\" + localStorage.getItem('createExamClass') + \"/Exams/\").once('value').then(function(snapshot) {\n    snapshot.forEach(function(childSnapshot) {\n      if(childSnapshot.key.substring(1) == document.getElementById('exam-code').innerHTML) {\n        code = childSnapshot.key;\n      }\n    });\n    firebase.database().ref(\"Teachers/\" + userName + \"/Classes/\" + localStorage.getItem('createExamClass') + \"/Exams/\" + code).once('value').then(function(snapshot) {\n      snapshot.forEach(function(childSnapshot) {\n        if(childSnapshot.key != \"responses\" && childSnapshot.key != \"taken\") {\n          firebase.database().ref(\"Teachers/\" + userName + \"/Classes/\" + localStorage.getItem('createExamClass') + \"/Exams/\" + code).child(childSnapshot.key).set(examInit);\n        }\n      });\n    });\n  });\n}\n\nfunction getAllPoints() {\n  var pointsBoxes = document.getElementsByClassName('numPoints');\n  var points = 0;\n\n  for(var i = 0; i < pointsBoxes.length; i++) {\n    if(pointsBoxes[i].value != \"\") {\n      points += parseInt(pointsBoxes[i].value);\n    }\n  }\n\n  return points;\n}\n\nfunction createQuestionTracker(i, populating) {\n  var manager = document.getElementById('question-manager');\n  var tracker = document.createElement('div');\n  tracker.id = \"question-tracker\";\n  tracker.className = i;\n\n    $(tracker).hover(function(){\n      if(navigator.userAgent.toLowerCase().indexOf('safari/') > -1) {\n        this.style.cursor = \"pointer\";\n        $(this).children()[0].innerHTML = \"&#x25CF;\";\n        this.childNodes[1].childNodes[0].style.color = \"white\";\n        this.childNodes[1].childNodes[0].style.marginRight = \"10px\";\n      }\n      else {\n        this.style.cursor = \"pointer\";\n        $(this).children()[0].innerHTML = \"&#x25CF;\";\n        this.childNodes[1].childNodes[0].style.color = \"white\";\n      }\n    }, function(){\n      if(navigator.userAgent.toLowerCase().indexOf('safari/') > -1) {\n        this.childNodes[1].childNodes[0].style.color = \"black\";\n        $(this).children()[0].innerHTML = \"&#x25CC;\";\n        this.childNodes[1].childNodes[0].style.marginRight = \"0\";\n      }\n      else {\n        this.childNodes[1].childNodes[0].style.color = \"black\";\n        $(this).children()[0].innerHTML = \"&#x25CC;\";\n      }\n    });\n\n  tracker.onclick = function() {\n    document.getElementById(i).scrollIntoView({block: \"center\"});\n  }\n\n  var circle = document.createElement('div');\n  circle.id = \"circle\";\n  circle.innerHTML = \"&#x25CC;\"\n\n  var center = document.createElement('center');\n  var text = document.createElement('div');\n  text.id = \"text\";\n  text.innerHTML = i;\n\n  center.appendChild(text);\n\n  tracker.appendChild(circle);\n  tracker.appendChild(center);\n\n  manager.appendChild(tracker);\n  manager.scrollTop = (manager.clientHeight + manager.clientHeight);\n}\n\n//populate exam for autosave\nfunction populateExam(code, ref) {\n  var refs = ref.split('/'); refs.pop();\n\n  firebase.database().ref(refs.join().split(',').join('/')).once('value').then(function(snapshot) {\n    snapshot.forEach(function(childSnapshot) {\n      if(childSnapshot.key.substring(1) == code) {\n        firebase.database().ref(refs.join().split(',').join('/') + \"/\" + childSnapshot.key).once('value').then(function(snapshot) {\n          snapshot.forEach(function(childSnapshot) {\n            var val = childSnapshot.val();\n\n            if(val.examCode != undefined){\n              var counter = 0;\n\n              document.getElementById('last-saved').innerHTML = \"Last Sync: \" + val.lastSaved;\n              document.getElementById('exam-code').innerHTML = val.examCode;\n              document.getElementById('date').value = val.examDate;\n              document.getElementById('description').value = val.examDescription;\n              document.getElementById('nameOfExam').value = val.examTitle;\n              document.getElementsByClassName('time')[0].value = val.examTotalMins;\n\n              for(var i = 0; i < Object.keys(val.questions).length; i++) {\n                var localQuestions = document.getElementsByClassName('question');\n                var question = childSnapshot.val().questions[i];\n\n                if(question.choices != undefined && question.type != \"matching\") {\n                  createQuestion(true, Object.keys(question.choices).length);\n                  createQuestionTracker(i + 1, true);\n\n                  localQuestions[i].childNodes[4].value = question.title;\n                  localQuestions[i].childNodes[6].childNodes[1].value = question.points;\n                  localQuestions[i].childNodes[5].value = question.type;\n\n                  if(question.imgSrc != \"\") {\n                    localQuestions[i].childNodes[6].childNodes[3].style.display = \"initial\";\n                    localQuestions[i].childNodes[6].childNodes[3].onclick = function() {\n                      swal({\n                        icon: question.imgSrc,\n                        text: question.imgShortDescription,\n                        className: \"imgView\"\n                      });\n                    }\n                  }\n\n                  changeQuestionType(question.type, i, 'mc');\n\n                  if(question.type == \"mc\") {\n                    for(var j = 0; j < Object.keys(question.choices).length; j++){\n                      if(question.choices[j].value != undefined){\n                        localQuestions[i].childNodes[7].childNodes[j].childNodes[2].value = (question.choices[j].value);\n                        if(j == question.checked) {\n                          setChecked(localQuestions[i].childNodes[7].childNodes[j].childNodes[1]);\n                        }\n                      }\n                      else {\n                        localQuestions[i].childNodes[7].childNodes[j].childNodes[2].value = (question.choices[j]);\n                        if(j == question.checked) {\n                          setChecked(localQuestions[i].childNodes[7].childNodes[j].childNodes[1]);\n                        }\n                      }\n                    }\n                  }\n\n                  else if(question.type == \"fr\"){\n                    localQuestions[i].childNodes[8].value = (question.choices[0]);\n                  }\n\n                  else if(question.type == \"tf\") {\n                    if(question.choices[0] == 'true') {\n                      localQuestions[i].childNodes[8].childNodes[0].checked = true;\n                    }\n                    else {\n                      localQuestions[i].childNodes[8].childNodes[2].checked = true;\n                    }\n                  }\n                }\n\n                // else if(question.type == \"matching\") {\n                //   createQuestion(true, question.numBoxes);\n                //   createQuestionTracker(i + 1, true);\n                //   changeQuestionType(question.type, i, \"mc\");\n                //\n                //   localQuestions[i].childNodes[3].value = question.title;\n                //   localQuestions[i].childNodes[5].childNodes[1].value = question.points;\n                //   localQuestions[i].childNodes[4].value = question.type;\n                //\n                //   localQuestions[i].childNodes[0].value = question.numBoxes;\n                //   for(var j = 0; j < question.numBoxes; j++) {\n                //     createMatchingElement(localQuestions[i].childNodes[6], j + 1);\n                //   }\n                //\n                //   var localBoxes = document.getElementsByClassName('matchingbox');\n                //   for(var k = 0; k < localBoxes.length; k++) {\n                //     localBoxes[k].childNodes[0].value = question.choices[k].split(\";\")[0];\n                //     localBoxes[k].childNodes[2].value = question.choices[k].split(\";\")[1];\n                //   }\n                // }\n              }\n            }\n          });\n        });\n      }\n    });\n  });\n\n  setTimeout(function(){ document.getElementsByClassName('points')[0].value = getAllPoints(); }, 200);\n}\n\nfunction setChecked(div) {\n  setTimeout(function(){ div.checked = true; }, 200);\n}\n\n//load class based on name\nfunction loadClass(name) {\n    if($(\"#exam-wrapper\") != undefined) {\n      $(\"#exam-wrapper\").empty();\n    }\n    var examCounter = 0;\n    var collectiveAvg = 0;\n    var classAvg = 0;\n    var classCounter = 0;\n    var counter = -1\n\n    document.getElementById('welcome-div').style.display = \"none\";\n    document.getElementById('wrapper').style.display = \"none\";\n    document.getElementById('classSpecific').style.display = \"initial\";\n    document.getElementById('exam-wrapper').style.display = \"grid\";\n    document.getElementById('main-header').innerHTML = \"Welcome to \" + name;\n    document.body.style.backgroundImage = \"linear-gradient(to top, #dfe9f3 0%, white 100%)\";\n\n    localStorage.setItem('createExamClass', name);\n\n    firebase.database().ref(\"Teachers/\" + userName + \"/Classes/\" + name + \"/Exams/\").on('value', function(snapshot) {\n      exams.push(snapshot.val());\n      counter++;\n      snapshot.forEach(function(childSnapshot) {\n        childSnapshot.child('responses').forEach(function(exam) {\n          classCounter++;\n          examCounter++;\n          var grade = exam.val()[Object.keys(exam.val())[0]].score;\n          collectiveAvg += parseInt(grade);\n\n          classAvg += parseInt(grade);\n        });\n\n        for(var key in childSnapshot.val()) {\n          if(childSnapshot.val() != \"no_exams\") {\n            createExamBox(childSnapshot.val()[key].examTitle, (classAvg / classCounter).toFixed(1), \"Teachers/\" + userName + \"/Classes/\" + name + \"/Exams/\" + childSnapshot.key, childSnapshot.val()[key].examCode);\n            var val = childSnapshot.val()[key].examTitle;\n\n            if(localStorage.getItem(\"CreatedExamCode\") != \"\") {\n              var button = document.getElementById('cached-code');\n              if(button != null) {\n                button.id = \"cached-exam-button\";\n                button.style.display = \"inline-block\";\n\n                console.log(button)\n\n                button.onclick = function() {\n                  document.getElementById('create-exam').style.display = \"initial\";\n                  document.getElementById('main').style.display = \"none\";\n                  document.body.style.background = \"white\";\n\n                  console.log(localStorage.getItem(\"CreatedExamCode\").toUpperCase())\n\n                  populateExam(localStorage.getItem(\"CreatedExamCode\").toUpperCase(), \"Teachers/\" + userName + \"/Classes/\" + localStorage.getItem('createExamClass') + \"/Exams/\" + localStorage.getItem(\"CreatedExamCode\").toUpperCase());\n                }\n              }\n            }\n\n            if(childSnapshot.val()[key].examTitle == \"\"){\n              val = childSnapshot.val()[key].examCode;\n            }\n\n            if(localStorage.getItem(\"CreatedExamCode\") != null && localStorage.getItem(\"CreatedExamCode\").toUpperCase() == childSnapshot.val()[key].examCode) {\n              console.log(localStorage.getItem(\"CreatedExamCode\").toUpperCase(), childSnapshot.val()[key].examCode)\n                document.getElementById('cached-exam-button').style.display = \"initial\";\n                document.getElementById('cached-exam-code').innerHTML = \"Edit \" + val;\n            }\n            else if(document.getElementById('cached-exam-button') != null){\n              document.getElementById('cached-exam-button').style.display = \"none\";\n            }\n            break;\n          }\n          else {\n            document.getElementById('no-exams').style.display = \"initial\";\n          }\n        }\n        classAvg = 0;\n        classCounter = 0;\n      });\n\n      collectiveAvg = collectiveAvg / examCounter;\n      collectiveAvg = (collectiveAvg).toFixed(1);\n\n      if(collectiveAvg == \"NaN\"){\n        document.getElementById('avg-grade-number').innerHTML = \"No Data\";\n      }\n      else{\n        document.getElementById('avg-grade-number').innerHTML = collectiveAvg + \"%\";\n        localStorage.setItem(\"avg-grade-number\", collectiveAvg + \"%\");\n      }\n    });\n}\n\n// Generate random exam code\nfunction generateCode() {\n  var code = Math.random().toString(36).replace(/[^a-z]+/g, '').substr(0, 5);\n  var className = \"\";\n\n  var string = document.getElementById('main-header').innerHTML.substring(document.getElementById('main-header')).split(\" \");\n  string.shift(); string.shift();\n\n  for(var i = 0; i < string.length; i++) {\n    if(i != string.length - 1) {\n      className += string[i] + \" \";\n    }\n    else{\n      className += string[i];\n    }\n  }\n\n  if(examCodes.indexOf(code) == -1){\n    firebase.database().ref(\"exam-codes\").push(code.toUpperCase() + \";\" + userName + \";\" + className + \";\" + code.toUpperCase());\n    localStorage.setItem(\"CreatedExamCode\", code);\n    return code;\n  }\n  else {\n    generateCode(); // Rerun generateCode() if code exists already\n  }\n}\n\n// remove dropdown if screen size can handle navbar\nfunction removeDropDown(x) {\n if (x.matches) { // If media query matches\n   document.getElementById('dropdown').style.display = \"none\"; // Remove DropDown\n } else {\n   document.getElementById('dropdown').style.display = \"initial\"; //Bring DropDown back\n }\n}\n\n// JS media query for dropdown nav\nvar x = window.matchMedia(\"(min-width: 601px)\") // Specify what to set media-queries at\nremoveDropDown(x) // Call listener function at run time\nx.addListener(removeDropDown) // Attach listener function on state changes\n\n// function to display all data in the table by exam name\nfunction displayExamData(examName) {\n  if(!examDataHasLoaded) {\n    var cumAvg = 0;\n    var classLength = 0;\n    var highest = \"a:-1000\";\n    var lowest = \"a:1000\";\n    var quickest = \"a:1000\";\n    var slowest = \"a:-1000\";\n    var table;\n    var populated = false;\n    var standardDeviation = [];\n\n    document.getElementById('welcome-div').style.display = \"none\";\n    document.getElementById('wrapper').style.display = \"none\";\n    document.getElementById('classSpecific').style.display = \"none\";\n    document.getElementById('exam-wrapper').style.display = \"none\";\n    document.getElementById('examSpecific').style.display = \"initial\";\n    document.getElementById('sort-menu').style.display = \"initial\";\n    document.getElementById('exam-name').innerHTML = examName;\n    document.body.style.backgroundImage = \"linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%)\";\n\n    var i = document.createElement('i');\n    i.className = \"glyphicon glyphicon-circle-arrow-up\";\n    i.id = \"topPage\";\n\n    i.onclick = function() {\n      document.body.scrollTop = 0;\n      document.documentElement.scrollTop = 0;\n    };\n\n    document.getElementById('main').appendChild(document.createElement('br'));\n    document.getElementById('main').appendChild(i);\n\n    var finalSelectedCode = \"\";\n    var examCodeWithLetter = \"\";\n\n    for (var key in exams) {\n      // skip loop if the property is from prototype\n      if (!arr.hasOwnProperty(key)) continue;\n      var obj = exams[key];\n\n      for (var prop in obj) {\n        for(var initData in obj[prop]){\n          if(obj[prop][initData].examCode != undefined && Object.keys(obj[prop]).length > 1) {\n            var code = obj[prop][initData].examCode;\n\n            localStorage.setItem('populatedExamCode', code);\n\n            if(examName == obj[prop][initData].examTitle) {\n              finalSelectedCode = code;\n              examCodeWithLetter = prop;\n\n              document.getElementById('edit-exam').innerHTML = examName;\n              document.getElementById('edit-current-exam').style.display = \"initial\";\n\n              document.getElementById('edit-current-exam').onclick = function() {\n                document.getElementById('create-exam').style.display = \"initial\";\n                document.getElementById('main').style.display = \"none\";\n                document.body.style.background = \"white\";\n                populateExam(finalSelectedCode, \"Teachers/\" + userName + \"/Classes/\" + localStorage.getItem('createExamClass') + \"/Exams/\" + examCodeWithLetter)\n              };\n\n              document.getElementById('view-item-analysis').style.display = \"initial\";\n              document.getElementById('view-item-analysis').onclick = function() {\n                document.getElementById('main').style.display = \"none\";\n                document.getElementById('item-analysis').style.display = \"inline-block\";\n                document.body.style.backgroundImage = \"linear-gradient(to bottom, #6a85b6 0%, #bac8e0 100%)\";\n                document.getElementById('item-analysis-name').innerHTML = examName;\n                populateItemAnalysis(finalSelectedCode, \"Teachers/\" + userName + \"/Classes/\" + localStorage.getItem('createExamClass') + \"/Exams/\" + examCodeWithLetter)\n              }\n            }\n\n            // skip loop if the property is from prototype\n            if(!obj.hasOwnProperty(prop)) continue;\n\n            var dbName = obj[prop][initData].examTitle;\n            if(dbName == \"\") {\n              dbName = obj[prop][initData].examCode.substring(1);\n            }\n\n            if(dbName == examName) {\n              var random = document.createElement('div');\n              var table = document.createElement('table');\n\n              table.id = \"random\";\n              table.className = \"table table-striped\";\n              table.style.width = \"100vw\";\n\n              var init = document.createElement('tr');\n              init.style.color = \"darkgray\";\n\n              var initName = document.createElement('td');\n              initName.innerHTML = \"Name\";\n              initName.style.paddingLeft = \"66px\";\n              initName.id = \"name\";\n\n              var initScore = document.createElement('td');\n              initScore.innerHTML = \"Score (%)\"\n              initScore.id = \"score\";\n\n              var initPercentile = document.createElement('td');\n              initPercentile.innerHTML = \"Percentile\";\n              initPercentile.id = \"percentile\";\n\n              var initTime = document.createElement('td');\n              initTime.innerHTML = \"Time\";\n              initTime.id = \"time\";\n\n              init.appendChild(initName);\n              init.appendChild(initScore);\n              init.appendChild(initPercentile);\n              init.appendChild(initTime);\n\n              table.appendChild(init);\n            }\n          }\n          else if(Object.keys(obj[prop]).length > 1 && !populated){\n            populated = true;\n\n            for(var response in obj[prop].responses){\n              var data = obj[prop].responses[response][Object.keys(obj[prop].responses[response])[0]];\n\n              standardDeviation.push(parseInt(data.score));\n              examData.push(data.name + \":\" + data.score + \":\" + data.time);\n              cumAvg += parseInt(data.score);\n              classLength = Object.keys(obj[prop].responses).length;\n\n              if(parseInt(data.score) > parseInt(highest.split(\":\")[1])) {\n                highest = data.name + \":\" + parseInt(data.score);\n              }\n\n              if(parseInt(data.score) < parseInt(lowest.split(\":\")[1])) {\n                lowest = data.name + \":\" + parseInt(data.score);\n              }\n\n              var tr = document.createElement('tr');\n              tr.className = response;\n              var examCode = prop;\n              tr.onclick = function() { loadStudentExamData(this.className, examCode); }\n\n              table.appendChild(document.createElement('br'));\n\n        \t\t\tvar name = document.createElement('td');\n              name.style.paddingLeft = \"66px\";\n              name.id = \"name\";\n        \t\t\tvar score = document.createElement('td');\n        \t\t\tvar percentile = document.createElement('td');\n              var time = document.createElement('td');\n\n        \t\t\tname.innerHTML = data.name;\n              name.id = \"name\";\n\n        \t\t\tscore.innerHTML = data.score + \"%\";\n              score.id = \"score\";\n\n              time.innerHTML = data.time + \" Mins\";\n              time.id = \"time\";\n\n        \t\t\tpercentile.innerHTML = getPercentileOriginal(parseInt(data.score), obj[prop].responses, data.name) + \"th\";\n              percentile.id = \"percentile\";\n\n        \t\t\ttr.appendChild(name);\n        \t\t\ttr.appendChild(score);\n        \t\t\ttr.appendChild(percentile);\n              tr.appendChild(time);\n        \t\t\ttable.appendChild(tr);\n\n              random.appendChild(table);\n              document.getElementById('main').appendChild(random);\n            }\n          }\n        }\n      }\n    }\n\n      var overallData = document.getElementById('overall-data');\n      var ul = document.createElement('ul');\n      ul.style.float = \"right\";\n      ul.style.marginRight = \"15vw\";\n\n      var avg = document.createElement('li');\n      avg.innerHTML = \"Class Average: \" + (cumAvg / classLength).toFixed(1) + '%';\n      avg.style.fontSize = \"20px\";\n\n      var highestScorer = document.createElement('li');\n      highestScorer.innerHTML = \"Highest Scorer: \" + highest.split(\":\")[0] + \" (\" + highest.split(\":\")[1] + \"%)\";\n      highestScorer.style.fontSize = \"20px\";\n\n      var lowestScorer = document.createElement('li');\n      lowestScorer.innerHTML = \"Lowest Scorer: \" + lowest.split(\":\")[0] + \" (\" + lowest.split(\":\")[1] + \"%)\";\n      lowestScorer.style.fontSize = \"20px\";\n\n      var standardDev = document.createElement('li');\n\n      // calc SD\n      mean = standardDeviation.reduce((a,b) => a+b)/standardDeviation.length;\n      sd = Math.sqrt(standardDeviation.map(x => Math.pow(x-mean,2)).reduce((a,b) => a+b)/standardDeviation.length);\n\n      standardDev.innerHTML = \"Standard Deviation (): \" + sd.toFixed(3);\n      standardDev.style.fontSize = \"20px\";\n\n      ul.appendChild(avg);\n      ul.appendChild(highestScorer);\n      overallData.appendChild(document.createElement('br'));\n      ul.appendChild(lowestScorer);\n      ul.appendChild(standardDev);\n\n      overallData.appendChild(ul);\n    }\n    else {\n      var possibleTables = document.getElementsByClassName('table');\n      possibleTables[0].style.display = \"table\";\n\n      document.getElementById('topPage').style.display = \"initial\";\n      document.getElementById('examSpecific').style.display = \"inherit\";\n      document.getElementById('classSpecific').style.display = \"none\";\n      document.getElementById('exam-wrapper').style.display = \"none\";\n\n      document.body.style.backgroundImage = \"linear-gradient(135deg, rgb(245, 247, 250) 0%, rgb(195, 207, 226) 100%);\";\n    }\n    examDataHasLoaded = true;\n}\n\nfunction populateItemAnalysis(code, ref) {\n  var dataDiv = document.getElementById('item-analysis-data');\n  var answers = [];\n\n  firebase.database().ref(ref).once('value', function(snapshot) {\n    for(var response in snapshot.val()['responses']) {\n      var responseData = (snapshot.val()['responses'][response][[Object.keys(snapshot.val()['responses'][response])[0]]]);\n\n      answers.push(responseData.answers);\n    }\n\n    snapshot.forEach(function(childSnapshot) {\n      if(childSnapshot.val().examCode != undefined) {\n        var data = childSnapshot.val();\n        var questions = data.questions;\n\n        for(var q in questions) {\n          var question = questions[q];\n\n          createItemAnalysis(dataDiv, question, answers, q)\n        }\n      }\n    });\n  });\n\n}\n\n// <div class=\"progress\">\n// <div class=\"progress-bar progress-bar-success\" style=\"width: 35%\">\n//   <span class=\"sr-only\">35% Complete (success)</span>\n// </div>\n// <div class=\"progress-bar progress-bar-warning progress-bar-striped\" style=\"width: 20%\">\n//   <span class=\"sr-only\">20% Complete (warning)</span>\n// </div>\n// <div class=\"progress-bar progress-bar-danger\" style=\"width: 10%\">\n//   <span class=\"sr-only\">10% Complete (danger)</span>\n// </div>\n// </div>\n\nfunction createItemAnalysis(div, question, answers, num) {\n  for(var i = 0; i < answers.length; i++) {\n    console.log(answers[num][i])\n  }\n\n  var span = document.createElement('span');\n  span.style.color = \"#2e2f7d\";\n  span.style.paddingRight = \"20px\";\n  span.style.paddingLeft = \"20px\";\n  span.style.float = \"left\";\n  span.style.borderRight = \"1px solid #2e2f7d\"\n  span.innerHTML = parseInt(num) + 1;\n\n  div.appendChild(document.createElement('br'));\n  div.appendChild(span);\n  div.appendChild(document.createElement('br'));\n  div.appendChild(document.createElement('hr'))\n\n  if(question.type == \"mc\") {\n\n    var pgBar = document.createElement('div');\n    pgBar.className = \"progress\";\n\n    var pgBar\n  }\n\n  else if(question.type == \"tf\") {\n\n  }\n\n  else if(question.type == \"fr\") {\n\n  }\n}\n\nfunction getPercentileOriginal(score, exam, name) {\n  var numBelow = 0;\n  var numEqual = 0;\n\n  for(var student in exam) {\n    if(score > parseInt(exam[student][Object.keys(exam[student])[0]].score)) {\n      numBelow++;\n    }\n    else if(score == parseInt(exam[student][Object.keys(exam[student])[0]].score) && name != exam[student][Object.keys(exam[student])[0]].name) {\n      numEqual++;\n    }\n  }\n  return 100 * (numBelow / (Object.keys(exam).length)).toFixed(1);\n}\n\n//function to remove all class='active'\nfunction removeAllActive() {\n  var navBars = document.getElementsByTagName(\"LI\");\n\n  for(var i = 0; i < navBars.length; i++) {\n    navBars[i].className = \"\";\n  }\n}\n\n//function to switch displays based on what user clicks\nfunction display(title) {\n  if(title == '<a href=\"#\">Ping-Pong</a>') {\n    document.getElementById('main').style.display = \"none\";\n    document.getElementById('pong').style.display = \"initial\";\n    document.getElementById('leaderboard').style.display = \"none\";\n    document.getElementById('feedback').style.display = \"none\";\n    document.getElementById('create-exam').style.display = \"none\"\n    document.getElementById('report-bug').style.display = \"none\";\n  }\n  else if(title == '<a href=\"#\">Dashboard</a>') {\n    document.getElementById('main').style.display = \"initial\";\n    document.getElementById('pong').style.display = \"none\";\n    document.getElementById('leaderboard').style.display = \"none\";\n    document.getElementById('feedback').style.display = \"none\";\n    document.getElementById('create-exam').style.display = \"none\"\n    document.getElementById('report-bug').style.display = \"none\";\n  }\n  else if(title == '<a href=\"#\">Leaderboard</a>') {\n    populateLeaderboard(); // takes care of all other display calls\n    document.getElementById('feedback').style.display = \"none\";\n    document.getElementById('create-exam').style.display = \"none\"\n    document.getElementById('report-bug').style.display = \"none\";\n  }\n  else if(title == '<a href=\"#\">Feedback</a>') {\n    document.getElementById('main').style.display = \"none\";\n    document.getElementById('pong').style.display = \"none\";\n    document.getElementById('leaderboard').style.display = \"none\";\n    document.getElementById('feedback').style.display = \"initial\";\n    document.getElementById('create-exam').style.display = \"none\"\n    document.getElementById('report-bug').style.display = \"none\";\n\n    var iframe = $(\"#feedback-form\");\n    iframe.attr(\"src\", 'https://forms.id/f/zakariyasattar.id.blockstack/56856430b7');\n  }\n  else if(title == '<a href=\"#\">Report A Bug!</a>') {\n    document.getElementById('main').style.display = \"none\";\n    document.getElementById('pong').style.display = \"none\";\n    document.getElementById('leaderboard').style.display = \"none\";\n    document.getElementById('report-bug').style.display = \"initial\";\n    document.getElementById('feedback').style.display = \"none\";\n    document.getElementById('create-exam').style.display = \"none\"\n\n    var iframe = $(\"#report-bug-form\");\n    iframe.attr(\"src\", 'https://forms.id/f/zakariyasattar.id.blockstack/30e2bc327b');\n  }\n}\n\n// function to display / undisplay items to simulate going home\nfunction goHomeFromExams() {\n  document.getElementById('classSpecific').style.display = \"none\";\n  document.getElementById('welcome-div').style.display = \"block\";\n  document.getElementById('wrapper').style.display = \"grid\";\n  document.getElementById('doesNotExist').style.display = \"none\";\n  document.getElementById('no-exams').style.display = \"none\";\n  document.getElementById('exam-wrapper').style.display = \"none\";\n\n  document.body.style.backgroundImage = \"none\"\n}\n\nfunction goExamsFromExam() {\n  var possibleTables = document.getElementsByClassName('table');\n\n  for(var i = 0; i < possibleTables.length; i++) {\n    possibleTables[i].style.display = \"none\";\n  }\n\n  document.getElementById('topPage').style.display = \"none\";\n  document.getElementById('examSpecific').style.display = \"none\";\n  document.getElementById('classSpecific').style.display = \"initial\";\n  document.getElementById('exam-wrapper').style.display = \"grid\";\n\n  document.body.style.backgroundImage = \"linear-gradient(to top, rgb(223, 233, 243) 0%, white 100%)\";\n  $(document.getElementById('overall-data')).empty()\n}\n\nfunction goHomeFromExamData() {\n  goExamsFromExam(); goHomeFromExams();\n}\n\n// function to display student exam data\nfunction loadStudentExamData(name, code) {\n  document.getElementById('examSpecific').style.display = \"none\";\n  document.getElementById('student-exam-data').style.display = \"initial\";\n  document.body.style.backgroundImage = \"none\";\n  var answer = \"\";\n  var finalId;\n\n  //linear-gradient(135deg, rgb(245, 247, 250) 0%, rgb(195, 207, 226) 100%);\n\n  var table = document.getElementsByClassName('table');\n  for(var i = 0; i < table.length; i++) {\n    table[i].style.display = \"none\";\n  }\n\n  firebase.database().ref(\"Teachers/\" + userName + \"/Classes/\" + localStorage.getItem(\"className\") + \"/Students\").once('value', function(snapshot) {\n    for(var info in snapshot.val()) {\n      var data = snapshot.val()[info];\n      var id = data.split(\";\")[0];\n      var fullName = data.split(\";\")[1];\n\n      if(name == fullName) {\n        finalId = id;\n      }\n    }\n  });\n\n  firebase.database().ref(\"Teachers/\" + userName + \"/Classes/\" + localStorage.getItem(\"className\") + \"/Exams/\" + code).once('value', function(snapshot) {\n    var data = (snapshot.val().responses[name][Object.keys(snapshot.val().responses[name])[0]]);\n\n    document.getElementById('resetStatus').onclick = function() {\n      for(var takenKey in snapshot.val().taken) {\n        var id = (snapshot.val().taken[takenKey]);\n\n        if(id == finalId) {\n          firebase.database().ref(\"Teachers/\" + userName + \"/Classes/\" + localStorage.getItem(\"className\") + \"/Exams/\" + code + \"/taken/\").child(takenKey).remove()\n        }\n      }\n\n      swal(\"Success!\", name + \"'s taken status has been reset. \" + name + \" should be able to retake exam now.\", 'success')\n    }\n\n    var studentPoints = data.totalScore / 100 * snapshot.val()[Object.keys(snapshot.val())[0]].examTotalPoints;\n    document.getElementById('score-num').innerHTML = (studentPoints).toFixed(0) + \" / \" + snapshot.val()[Object.keys(snapshot.val())[0]].examTotalPoints;\n    document.getElementById('score').innerHTML = data.totalScore + \"%\";\n\n    var corrAnswer = \"\";\n    localStorage.setItem(\"totalPointsExcludingFr\", 0);\n\n    for(var i = 0; i < Object.keys(data.answers).length; i++) {\n\n      if(snapshot.val()[Object.keys(snapshot.val())[0]].questions[i].type == \"tf\") {\n        corrAnswer = snapshot.val()[Object.keys(snapshot.val())[0]].questions[i].choices[0];\n      }\n      else if(snapshot.val()[Object.keys(snapshot.val())[0]].questions[i].type == \"mc\"){\n        corrAnswer = snapshot.val()[Object.keys(snapshot.val())[0]].questions[i].checked;\n      }\n      else if(snapshot.val()[Object.keys(snapshot.val())[0]].questions[i].type == \"fr\") {\n        corrAnswer = \"\";\n      }\n      createGradedQuestion(\n        // PARAM: studAnswer\n        data.answers[i].split(\";\")[1],\n        // PARAM: corrAnswer\n        corrAnswer,\n        // PARAM: numAnswerChoices\n        Object.keys(snapshot.val()[Object.keys(snapshot.val())[0]].questions[i].choices).length,\n        // PARAM: numPoints\n        snapshot.val()[Object.keys(snapshot.val())[0]].questions[i].points,\n        // PARAM: questions\n        snapshot.val()[Object.keys(snapshot.val())[0]].questions[i],\n        // PARAM: studName\n        name,\n        // PARAM: examCurrentCode\n        code,\n        // PARAM: examTotalPoints\n        snapshot.val()[Object.keys(snapshot.val())[0]].examTotalPoints\n      );\n    }\n  });\n}\n\n//create Question box for every graded question\nfunction createGradedQuestion(studAnswer, corrAnswer, numAnswerChoices, numAnswerPoints, questions, studName, examCurrentCode, examTotalPoints) {\n  var awardedPoints = 0;\n  if(corrAnswer == \"true\"){\n    corrAnswer = \"0\";\n    numAnswerChoices = 2;\n  }\n  else if(corrAnswer == 'false') {\n    corrAnswer = \"1\";\n    numAnswerChoices = 2;\n  }\n\n  var correct = false;\n  if(studAnswer == corrAnswer) {\n    correct = true;\n  }\n\n  if(questions.type != \"fr\" && correct) {\n    localStorage.setItem(\"totalPointsExcludingFr\", parseInt(localStorage.getItem(\"totalPointsExcludingFr\")) + parseInt(questions.points))\n  }\n\n  var exam = document.getElementById('question-data');\n\n  var question = document.createElement('div');\n  question.className = \"question\";\n  question.id = document.getElementsByClassName('question').length + 1;\n\n  var num = document.createElement('span');\n  num.innerHTML = document.getElementsByClassName('question').length + 1 + \". \";\n  num.style.color = \"#97a5aa\";\n\n  var hr = document.createElement('hr');\n\n  var question_title = document.createElement('input');\n  question_title.readOnly = true;\n  question_title.value = questions.title;\n  question_title.id = \"question-title\";\n\n  question.appendChild(num);\n  question.appendChild(question_title);\n\n  if(correct) {\n    awardedPoints = numAnswerPoints;\n  }\n\n  var points = document.createElement('div');\n  points.id = \"points\";\n\n  var span = document.createElement('span');\n  span.innerHTML = \"( \";\n\n  var numPoints = document.createElement('span');\n  numPoints.type = \"text\";\n  numPoints.id = \"numPoints\";\n  numPoints.innerHTML = numAnswerPoints;\n\n  var finishingSpan = document.createElement('span');\n  finishingSpan.className = \"pa\";\n  finishingSpan.innerHTML = \" points)  -  points awarded: \" + awardedPoints;\n\n  points.appendChild(span); points.appendChild(numPoints); points.appendChild(finishingSpan);\n\n  question.appendChild(points);\n\n  var answer_choices = document.createElement('div');\n  answer_choices.className = \"mc\";\n\n  for(var i = 0; i < numAnswerChoices; i++) {\n    var label = document.createElement('label');\n    label.id = \"label\";\n    label.style.width = \"95%\"\n    if((correct && i == studAnswer) || i == corrAnswer) {\n      label.style.background = \"#e4f7e4\";\n      label.style.borderTop = \"1px solid #00cc00\"\n      label.style.borderBottom = \"1px solid #00cc00\"\n\n      var correctAnswer = document.createElement('span');\n      correctAnswer.innerHTML = \"Correct Answer\"\n      correctAnswer.style.float = \"right\";\n      correctAnswer.style.fontWeight = \"normal\";\n      correctAnswer.style.marginTop  = \"10px\";\n      correctAnswer.style.color = \"#00cc00\";\n      correctAnswer.style.marginRight  = \"15px\";\n\n      label.appendChild(correctAnswer);\n    }\n    else if(!correct && i == studAnswer) {\n      label.style.background = \"#f2ebeb\";\n      label.style.borderTop = \"1px solid #cc5252\"\n      label.style.borderBottom = \"1px solid #cc5252\"\n      label.style.color = \"#cc5252\";\n\n      var incorrectAnswer = document.createElement('span');\n      incorrectAnswer.innerHTML = \"Student Answer\"\n      incorrectAnswer.style.float = \"right\";\n      incorrectAnswer.style.fontWeight = \"normal\";\n      incorrectAnswer.style.marginTop  = \"10px\";\n      incorrectAnswer.style.color = \"#cc5252\";\n      incorrectAnswer.style.marginRight  = \"15px\";\n      label.appendChild(incorrectAnswer);\n    }\n\n    var input = document.createElement('input');\n    input.disabled = true;\n    input.style.outline = \"none\";\n    input.type = \"radio\";\n    input.className = \"option-input radio\";\n    input.name = num.innerHTML;\n\n    var span = document.createElement('span');\n    if(questions.type != \"tf\" && questions.type != \"fr\") {\n      span.innerHTML = questions.choices[i];\n    }\n    else if(questions.type == \"tf\"){\n      if(i == 0) {\n        span.innerHTML = \"True\";\n      }\n      else {\n        span.innerHTML = \"False\";\n      }\n    }\n    span.style.fontWeight = \"normal\"\n\n    var answer_choice = document.createElement('span');\n    answer_choice.className = \"option\";\n    answer_choice.id = \"question-choice\";\n\n    label.appendChild(input);\n    label.appendChild(answer_choice);\n    label.appendChild(span);\n    answer_choices.appendChild(label);\n  }\n\n  if(questions.type == \"fr\") {\n    var ta = document.createElement('textarea');\n    $(ta).attr(\"readonly\", true);\n    ta.className = \"fr\";\n    ta.value = studAnswer;\n\n    var pointsAwardedSpan = document.createElement('span');\n    pointsAwardedSpan.innerHTML = \"Points Awarded - \";\n\n    var numAcceptedPoints = document.createElement('input');\n    numAcceptedPoints.maxLength = questions.points.length;\n\n    firebase.database().ref(\"Teachers/\" + userName + \"/Classes/\" + localStorage.getItem(\"className\") + \"/Exams/\" + examCurrentCode + \"/responses/\" + studName).once('value', function(snapshot) {\n      snapshot.forEach(function(childSnapshot) {\n        var questionNum;\n        var answers = childSnapshot.val().answers;\n\n        if(answers[2].split(\";\")[2] != undefined) {\n          setTimeout(function(){ document.getElementsByClassName('pa')[parseInt(num.innerHTML.substring(0, num.innerHTML.indexOf(\".\"))) - 1].innerHTML = \" points)  -  points awarded: \" + answers[2].split(\";\")[2]; }, 100);\n          numAcceptedPoints.value = answers[2].split(\";\")[2];\n        }\n      });\n    });\n\n    numAcceptedPoints.onkeyup = function () {\n      this.value = this.value.replace(/[^\\d]/,'');\n      this.value = this.value.replace('-', '');\n\n      if(this.value != \"\") {\n        document.getElementsByClassName('pa')[parseInt(num.innerHTML.substring(0, num.innerHTML.indexOf(\".\"))) - 1].innerHTML = \" points)  -  points awarded: \" + this.value;\n      }\n      else {\n        document.getElementsByClassName('pa')[parseInt(num.innerHTML.substring(0, num.innerHTML.indexOf(\".\"))) - 1].innerHTML = \" points)  -  points awarded: 0\";\n      }\n\n      var cleanVersion = this.value;\n\n      firebase.database().ref(\"Teachers/\" + userName + \"/Classes/\" + localStorage.getItem(\"className\") + \"/Exams/\" + examCurrentCode + \"/responses/\" + studName).once('value', function(snapshot) {\n        snapshot.forEach(function(childSnapshot) {\n          var questionNum;\n          var answers = childSnapshot.val().answers;\n\n          for(var k = 0; k < answers.length; k++) {\n            if(isNaN(answers[k].split(\";\")[1])) {\n              console.log(answers[k])\n              answers[k] = answers[k].split(\";\")[0] + \";\" + answers[k].split(\";\")[1] + \";\" + cleanVersion;\n            }\n          }\n          firebase.database().ref(\"Teachers/\" + userName + \"/Classes/\" + localStorage.getItem(\"className\") + \"/Exams/\" + examCurrentCode + \"/responses/\" + studName + \"/\" + childSnapshot.key).update({ 'answers': answers });\n\n          var newScore = (((parseInt(localStorage.getItem(\"totalPointsExcludingFr\")) + parseInt(cleanVersion)) / examTotalPoints) * 100).toFixed(1);\n          firebase.database().ref(\"Teachers/\" + userName + \"/Classes/\" + localStorage.getItem(\"className\") + \"/Exams/\" + examCurrentCode + \"/responses/\" + studName + \"/\" + childSnapshot.key).update({ 'totalScore': newScore });\n\n          document.getElementById(\"score\").innerHTML = newScore + \"%\";\n          document.getElementById(\"score-num\").innerHTML = (parseInt(localStorage.getItem(\"totalPointsExcludingFr\")) + parseInt(cleanVersion)) + \" / \" + examTotalPoints;\n        });\n      });\n    }\n\n    numAcceptedPoints.placeholder = \"0 - \" + questions.points;\n    numAcceptedPoints.style.padding = \"5px\";\n    numAcceptedPoints.style.fontSize = \"15px\";\n    numAcceptedPoints.style.border = \"1px solid #808080\";\n    numAcceptedPoints.style.borderRadius = \"3px\";\n    numAcceptedPoints.style.marginTop = \"20px\";\n\n    question.appendChild(ta);\n    question.appendChild(document.createElement('br'));\n    question.appendChild(pointsAwardedSpan);\n    question.appendChild(numAcceptedPoints);\n  }\n  else {\n    question.appendChild(answer_choices);\n  }\n\n  exam.appendChild(question);\n  exam.appendChild(document.createElement('br'));\n  exam.appendChild(hr);\n\n}\n\n//function to calc precentile range\nfunction getPercentile(val, exam) {\n  var numBelow = 0;\n  var numEqual = 0;\n\n  for(var student in exam) {\n    if(parseInt(val.split(\":\")[1]) > parseInt(exam[student].split(\":\")[1])) {\n      numBelow++;\n    }\n    else if(parseInt(val.split(\":\")[1]) == parseInt(exam[student].split(\":\")[1]) && val.split(\":\")[0] != exam[student].split(\":\")[0]) {\n      numEqual++;\n    }\n  }\n  return 100 * (numBelow / (Object.keys(exam).length)).toFixed(1);\n}\n\n// sort function\nfunction sort(func) {\n  var tables = document.getElementsByClassName('table table-striped');\n\n  for(var t = 0; t < tables.length; t++) {\n    tables[t].style.display = \"none\";\n  }\n\n  var testExamData = examData.slice();\n  testExamData.sort();\n\n  if(func == \" Original\") {\n    var table = document.createElement('table');\n    table.id = \"random\";\n    table.className = \"table table-striped\";\n    table.style.width = \"100vw\";\n\n    var init = document.createElement('tr');\n    init.style.color = \"darkgray\";\n\n    var initName = document.createElement('td');\n    initName.innerHTML = \"Name\";\n    initName.style.paddingLeft = \"66px\";\n    initName.id = \"name\";\n\n    var initScore = document.createElement('td');\n    initScore.innerHTML = \"Score (%)\"\n    initScore.id = \"score\";\n\n    var initPercentile = document.createElement('td');\n    initPercentile.innerHTML = \"Percentile\";\n    initPercentile.id = \"percentile\";\n\n    var initTime = document.createElement('td');\n    initTime.innerHTML = \"Time\";\n    initTime.id = \"time\";\n\n    init.appendChild(initName);\n    init.appendChild(initScore);\n    init.appendChild(initPercentile);\n    init.appendChild(initTime);\n\n    table.appendChild(init);\n\n    for(var i = 0; i < examData.length; i++){\n      var tr = document.createElement('tr');\n\n      var iTracker = i;\n      tr.onclick = function() { loadStudentExamData(examData[iTracker].split(\":\")[0], localStorage.getItem(\"populatedExamCode\")); }\n\n      table.appendChild(document.createElement('br'));\n\n      var name = document.createElement('td');\n      name.style.paddingLeft = \"66px\";\n      var score = document.createElement('td');\n      var percentile = document.createElement('td');\n\n      name.innerHTML = examData[i].split(\":\")[0];\n      score.innerHTML = examData[i].split(\":\")[1] + \"%\";\n      percentile.innerHTML = getPercentile(examData[i], examData) + \"th\";\n\n      var time = document.createElement('td');\n      time.innerHTML = examData[i].split(\":\")[2] + \" Mins\";\n      time.id = \"time\";\n\n      tr.appendChild(name);\n      tr.appendChild(score);\n      tr.appendChild(percentile);\n      tr.appendChild(time);\n      table.appendChild(tr);\n    }\n\n    document.getElementById('main').appendChild(table);\n  }\n  else {\n    if(func == \" Sort By Alphabet (A-Z)\"){\n      testExamData.sort();\n\n      var table = document.createElement('table');\n      table.id = \"random\";\n      table.className = \"table table-striped\";\n      table.style.width = \"100vw\";\n\n      var init = document.createElement('tr');\n      init.style.color = \"darkgray\";\n\n      var initName = document.createElement('td');\n      initName.innerHTML = \"Name\";\n      initName.style.paddingLeft = \"66px\";\n      initName.id = \"name\";\n\n      var initScore = document.createElement('td');\n      initScore.innerHTML = \"Score (%)\"\n      initScore.id = \"score\";\n\n      var initPercentile = document.createElement('td');\n      initPercentile.innerHTML = \"Percentile\";\n      initPercentile.id = \"percentile\";\n\n      var initTime = document.createElement('td');\n      initTime.innerHTML = \"Time\";\n      initTime.id = \"time\";\n\n      init.appendChild(initName);\n      init.appendChild(initScore);\n      init.appendChild(initPercentile);\n      init.appendChild(initTime);\n\n      table.appendChild(init);\n\n      for(var i = 0; i < testExamData.length; i++){\n        var tr = document.createElement('tr');\n        tr.onclick = function() { loadStudentExamData(testExamData[i].split(\":\")[0], localStorage.getItem(\"populatedExamCode\")); }\n\n        table.appendChild(document.createElement('br'));\n\n        var name = document.createElement('td');\n        name.style.paddingLeft = \"66px\";\n        var score = document.createElement('td');\n        var percentile = document.createElement('td');\n\n        name.innerHTML = testExamData[i].split(\":\")[0];\n        score.innerHTML = testExamData[i].split(\":\")[1] + \"%\";\n        percentile.innerHTML = getPercentile(testExamData[i], testExamData) + \"th\";\n\n        var time = document.createElement('td');\n        time.innerHTML = testExamData[i].split(\":\")[2] + \" Mins\";\n        time.id = \"time\";\n\n        tr.appendChild(name);\n        tr.appendChild(score);\n        tr.appendChild(percentile);\n        tr.appendChild(time);\n        table.appendChild(tr);\n      }\n\n      document.getElementById('main').appendChild(table);\n\n    }\n    else if(func == \" Sort By Alphabet (Z-A)\") {\n      testExamData.sort();\n\n      var table = document.createElement('table');\n      table.id = \"random\";\n      table.className = \"table table-striped\";\n      table.style.width = \"100vw\";\n\n      var init = document.createElement('tr');\n      init.style.color = \"darkgray\";\n\n      var initName = document.createElement('td');\n      initName.innerHTML = \"Name\";\n      initName.style.paddingLeft = \"66px\";\n      initName.id = \"name\";\n\n      var initScore = document.createElement('td');\n      initScore.innerHTML = \"Score (%)\"\n      initScore.id = \"score\";\n\n      var initPercentile = document.createElement('td');\n      initPercentile.innerHTML = \"Percentile\";\n      initPercentile.id = \"percentile\";\n\n      var initTime = document.createElement('td');\n      initTime.innerHTML = \"Time\";\n      initTime.id = \"time\";\n\n      init.appendChild(initName);\n      init.appendChild(initScore);\n      init.appendChild(initPercentile);\n      init.appendChild(initTime);\n\n      table.appendChild(init);\n\n      for(var i = testExamData.length - 1; i >= 0; i--){\n        var tr = document.createElement('tr');\n        tr.onclick = function() { loadStudentExamData(testExamData[i].split(\":\")[0], localStorage.getItem(\"populatedExamCode\")); }\n\n        table.appendChild(document.createElement('br'));\n\n        var name = document.createElement('td');\n        name.style.paddingLeft = \"66px\";\n        var score = document.createElement('td');\n        var percentile = document.createElement('td');\n\n        name.innerHTML = testExamData[i].split(\":\")[0];\n        score.innerHTML = testExamData[i].split(\":\")[1] + \"%\";\n        percentile.innerHTML = getPercentile(testExamData[i], testExamData) + \"th\";\n\n        var time = document.createElement('td');\n        time.innerHTML = testExamData[i].split(\":\")[2] + \" Mins\";\n        time.id = \"time\";\n\n        tr.appendChild(name);\n        tr.appendChild(score);\n        tr.appendChild(percentile);\n        tr.appendChild(time);\n        table.appendChild(tr);\n      }\n\n      document.getElementById('main').appendChild(table);\n    }\n\n    else if(func == \" Sort By Score (high-low)\") {\n      var scores = mergeSort(testExamData);\n\n      var table = document.createElement('table');\n      table.id = \"random\";\n      table.className = \"table table-striped\";\n      table.style.width = \"100vw\";\n\n      var init = document.createElement('tr');\n      init.style.color = \"darkgray\";\n\n      var initName = document.createElement('td');\n      initName.innerHTML = \"Name\";\n      initName.style.paddingLeft = \"66px\";\n      initName.id = \"name\";\n\n      var initScore = document.createElement('td');\n      initScore.innerHTML = \"Score (%)\"\n      initScore.id = \"score\";\n\n      var initPercentile = document.createElement('td');\n      initPercentile.innerHTML = \"Percentile\";\n      initPercentile.id = \"percentile\";\n\n      var initTime = document.createElement('td');\n      initTime.innerHTML = \"Time\";\n      initTime.id = \"time\";\n\n      init.appendChild(initName);\n      init.appendChild(initScore);\n      init.appendChild(initPercentile);\n      init.appendChild(initTime);\n\n      table.appendChild(init);\n\n      for(var i = scores.length - 1; i >= 0; i--){\n        var tr = document.createElement('tr');\n        tr.onclick = function() { loadStudentExamData(scores[i].split(\":\")[0], localStorage.getItem(\"populatedExamCode\")); }\n\n        table.appendChild(document.createElement('br'));\n\n        var name = document.createElement('td');\n        name.style.paddingLeft = \"66px\";\n        var score = document.createElement('td');\n        var percentile = document.createElement('td');\n\n        name.innerHTML = scores[i].split(\":\")[0];\n        score.innerHTML = scores[i].split(\":\")[1] + \"%\";\n        percentile.innerHTML = getPercentile(scores[i], scores) + \"th\";\n\n        var time = document.createElement('td');\n        time.innerHTML = testExamData[i].split(\":\")[2] + \" Mins\";\n        time.id = \"time\";\n\n        tr.appendChild(name);\n        tr.appendChild(score);\n        tr.appendChild(percentile);\n        tr.appendChild(time);\n        table.appendChild(tr);\n      }\n\n      document.getElementById('main').appendChild(table);\n\n    }\n    else if(func == \" Sort By Score (low-high)\") {\n      var scores = mergeSort(testExamData);\n\n      var table = document.createElement('table');\n      table.id = \"random\";\n      table.className = \"table table-striped\";\n      table.style.width = \"100vw\";\n\n      var init = document.createElement('tr');\n      init.style.color = \"darkgray\";\n\n      var initName = document.createElement('td');\n      initName.innerHTML = \"Name\";\n      initName.style.paddingLeft = \"66px\";\n      initName.id = \"name\";\n\n      var initScore = document.createElement('td');\n      initScore.innerHTML = \"Score (%)\"\n      initScore.id = \"score\";\n\n      var initPercentile = document.createElement('td');\n      initPercentile.innerHTML = \"Percentile\";\n      initPercentile.id = \"percentile\";\n\n      var initTime = document.createElement('td');\n      initTime.innerHTML = \"Time\";\n      initTime.id = \"time\";\n\n      init.appendChild(initName);\n      init.appendChild(initScore);\n      init.appendChild(initPercentile);\n      init.appendChild(initTime);\n\n      table.appendChild(init);\n\n      for(var i = 0; i < scores.length; i++){\n        var tr = document.createElement('tr');\n        tr.onclick = function() { loadStudentExamData(scores[i].split(\":\")[0], localStorage.getItem(\"populatedExamCode\")); }\n\n        table.appendChild(document.createElement('br'));\n\n        var name = document.createElement('td');\n        name.style.paddingLeft = \"66px\";\n        var score = document.createElement('td');\n        var percentile = document.createElement('td');\n\n        name.innerHTML = scores[i].split(\":\")[0];\n        score.innerHTML = scores[i].split(\":\")[1] + \"%\";\n        percentile.innerHTML = getPercentile(scores[i], scores) + \"th\";\n\n        var time = document.createElement('td');\n        time.innerHTML = testExamData[i].split(\":\")[2] + \" Mins\";\n        time.id = \"time\";\n\n        tr.appendChild(name);\n        tr.appendChild(score);\n        tr.appendChild(percentile);\n        tr.appendChild(time);\n        table.appendChild(tr);\n      }\n\n      document.getElementById('main').appendChild(table);\n\n    }\n    else if(func == \" Sort By Time (high-low)\") {\n      var times = mergeSortTime(testExamData);\n\n      var table = document.createElement('table');\n      table.id = \"random\";\n      table.className = \"table table-striped\";\n      table.style.width = \"100vw\";\n\n      var init = document.createElement('tr');\n      init.style.color = \"darkgray\";\n\n      var initName = document.createElement('td');\n      initName.innerHTML = \"Name\";\n      initName.style.paddingLeft = \"66px\";\n      initName.id = \"name\";\n\n      var initScore = document.createElement('td');\n      initScore.innerHTML = \"Score (%)\"\n      initScore.id = \"score\";\n\n      var initPercentile = document.createElement('td');\n      initPercentile.innerHTML = \"Percentile\";\n      initPercentile.id = \"percentile\";\n\n      var initTime = document.createElement('td');\n      initTime.innerHTML = \"Time\";\n      initTime.id = \"time\";\n\n      init.appendChild(initName);\n      init.appendChild(initScore);\n      init.appendChild(initPercentile);\n      init.appendChild(initTime);\n\n      table.appendChild(init);\n\n      for(var i = times.length - 1; i >= 0; i--){\n        var tr = document.createElement('tr');\n        tr.onclick = function() { loadStudentExamData(times[i].split(\":\")[0], localStorage.getItem(\"populatedExamCode\")); }\n\n        table.appendChild(document.createElement('br'));\n\n        var name = document.createElement('td');\n        name.style.paddingLeft = \"66px\";\n        var score = document.createElement('td');\n        var percentile = document.createElement('td');\n\n        name.innerHTML = times[i].split(\":\")[0];\n        score.innerHTML = times[i].split(\":\")[1] + \"%\";\n        percentile.innerHTML = getPercentile(times[i], times) + \"th\";\n\n        var time = document.createElement('td');\n        time.innerHTML = times[i].split(\":\")[2] + \" Mins\";\n        time.id = \"time\";\n\n        tr.appendChild(name);\n        tr.appendChild(score);\n        tr.appendChild(percentile);\n        tr.appendChild(time);\n        table.appendChild(tr);\n      }\n\n      document.getElementById('main').appendChild(table);\n    }\n    else if(func == \" Sort By Time (low-high)\") {\n      var times = mergeSortTime(testExamData);\n\n      var table = document.createElement('table');\n      table.id = \"random\";\n      table.className = \"table table-striped\";\n      table.style.width = \"100vw\";\n\n      var init = document.createElement('tr');\n      init.style.color = \"darkgray\";\n\n      var initName = document.createElement('td');\n      initName.innerHTML = \"Name\";\n      initName.style.paddingLeft = \"66px\";\n      initName.id = \"name\";\n\n      var initScore = document.createElement('td');\n      initScore.innerHTML = \"Score (%)\"\n      initScore.id = \"score\";\n\n      var initPercentile = document.createElement('td');\n      initPercentile.innerHTML = \"Percentile\";\n      initPercentile.id = \"percentile\";\n\n      var initTime = document.createElement('td');\n      initTime.innerHTML = \"Time\";\n      initTime.id = \"time\";\n\n      init.appendChild(initName);\n      init.appendChild(initScore);\n      init.appendChild(initPercentile);\n      init.appendChild(initTime);\n\n      table.appendChild(init);\n\n      for(var i = 0; i < times.length; i++){\n        var tr = document.createElement('tr');\n        tr.onclick = function() { loadStudentExamData(times[i].split(\":\")[0], localStorage.getItem(\"populatedExamCode\")); }\n\n        table.appendChild(document.createElement('br'));\n\n        var name = document.createElement('td');\n        name.style.paddingLeft = \"66px\";\n        var score = document.createElement('td');\n        var percentile = document.createElement('td');\n\n        name.innerHTML = times[i].split(\":\")[0];\n        score.innerHTML = times[i].split(\":\")[1] + \"%\";\n        percentile.innerHTML = getPercentile(times[i], times) + \"th\";\n\n        var time = document.createElement('td');\n        time.innerHTML = times[i].split(\":\")[2] + \" Mins\";\n        time.id = \"time\";\n\n        tr.appendChild(name);\n        tr.appendChild(score);\n        tr.appendChild(percentile);\n        tr.appendChild(time);\n        table.appendChild(tr);\n      }\n\n      document.getElementById('main').appendChild(table);\n    }\n  }\n}\n\n//implement merge sort\nfunction mergeSort (arr) {\n  if (arr.length === 1) {\n    // return once we hit an array with a single item\n    return arr\n  }\n\n  const middle = Math.floor(arr.length / 2) // get the middle item of the array rounded down\n  const left = arr.slice(0, middle) // items on the left side\n  const right = arr.slice(middle) // items on the right side\n\n  return merge(\n    mergeSort(left),\n    mergeSort(right)\n  )\n}\n\n// compare the arrays item by item and return the concatenated result\nfunction merge(left, right) {\n  let result = []\n  let indexLeft = 0\n  let indexRight = 0\n\n  while (indexLeft < left.length && indexRight < right.length) {\n    if (left[indexLeft].split(\":\")[1] < right[indexRight].split(\":\")[1]) {\n      result.push(left[indexLeft])\n      indexLeft++\n    } else {\n      result.push(right[indexRight])\n      indexRight++\n    }\n  }\n\n  return result.concat(left.slice(indexLeft)).concat(right.slice(indexRight))\n}\n\n//implement merge sort\nfunction mergeSortTime (arr) {\n  if (arr.length === 1) {\n    // return once we hit an array with a single item\n    return arr\n  }\n\n  const middle = Math.floor(arr.length / 2) // get the middle item of the array rounded down\n  const left = arr.slice(0, middle) // items on the left side\n  const right = arr.slice(middle) // items on the right side\n\n  return mergeTime(\n    mergeSortTime(left),\n    mergeSortTime(right)\n  )\n}\n\n// compare the arrays item by item and return the concatenated result\nfunction mergeTime(left, right) {\n  let result = []\n  let indexLeft = 0\n  let indexRight = 0\n\n  while (indexLeft < left.length && indexRight < right.length) {\n    if (left[indexLeft].split(\":\")[2] < right[indexRight].split(\":\")[2]) {\n      result.push(left[indexLeft])\n      indexLeft++\n    } else {\n      result.push(right[indexRight])\n      indexRight++\n    }\n  }\n\n  return result.concat(left.slice(indexLeft)).concat(right.slice(indexRight))\n}\n\n// search and parse through exams based on value\nfunction searchExams() {\n  var input, filter, ul, li, a, i, txtValue;\n\n  input = document.getElementById(\"exam-search\");\n  filter = input.value.toUpperCase();\n\n  ul = document.getElementById(\"exam-wrapper\");\n  li = ul.getElementsByClassName(\"examBox\");\n\n  for (i = 0; i < li.length; i++) {\n    a = li[i].getElementsByTagName(\"span\")[0];\n    txtValue = a.textContent || a.innerText;\n    if (txtValue.toUpperCase().indexOf(filter) > -1) {\n        li[i].style.display = \"\";\n    } else {\n        li[i].style.display = \"none\";\n    }\n  }\n}\n\n// create div based on name and avg\nfunction createExamBox(name, classAvg, ref, code) {\n  var gradients = [\n    \"linear-gradient( 135deg, #FEB692 10%, #EA5455 100%)\",\n    \"linear-gradient( 135deg, #72EDF2 10%, #5151E5 100%)\",\n    \"linear-gradient( 135deg, #ABDCFF 10%, #0396FF 100%)\"\n  ];\n\n  var wrapper = document.getElementById('exam-wrapper');\n  var optionVert = false;\n\n  var classBox = document.createElement('div');\n  classBox.className = \"examBox\";\n  classBox.style.background = \"white\";\n\n  classBox.onclick = function() {\n    displayExamData(name);\n    document.getElementById(\"this-exam\").innerHTML = name;\n  };\n\n  firebase.database().ref(ref).on('value', function(snapshot) {\n    for(var obj in snapshot.val()) {\n      if(snapshot.val()[obj].examCode == code && snapshot.val().responses == undefined) {\n        classBox.onclick = function() {\n          document.getElementById('create-exam').style.display = \"initial\";\n          document.getElementById('main').style.display = \"none\";\n          document.body.style.background = \"white\";\n\n          populateExam(code, ref);\n        };\n      }\n    }\n  });\n\n  var difBackground = document.createElement('div')\n  difBackground.style.background = gradients[Math.floor(Math.random()*(3) + 0)];\n  difBackground.style.borderRadius= \"10px 10px 0 0\";\n  difBackground.className = 'wave';\n\n  difBackground.onclick = function() {\n\n  }\n\n  var span = document.createElement('span');\n  if(name == \"\") {\n    name = code;\n  }\n\n  span.innerHTML = name;\n  span.style.marginLeft = \"40px\";\n  span.style.color = \"white\";\n  span.className = 'examName';\n\n  var option_vertical = document.createElement('span');\n  option_vertical.id = \"option_vertical\"\n  option_vertical.className = \"glyphicon glyphicon-option-vertical\";\n\n  option_vertical.onclick = function() {\n    classBox.onclick = function() {}\n\n    var modal = document.createElement('div');\n    modal.id = \"modal\";\n\n    var ul = document.createElement('ul');\n\n    var edit = document.createElement('li');\n    edit.className = \"options\";\n    edit.innerHTML = \"Edit Exam\";\n\n    edit.onclick = function() {\n      document.getElementById('create-exam').style.display = \"initial\";\n      document.getElementById('main').style.display = \"none\";\n      document.body.style.background = \"white\";\n\n      populateExam(code, ref);\n    }\n\n    var results = document.createElement('li');\n    results.className = \"options\";\n    results.innerHTML = \"View Results\";\n\n    results.onclick = function() {\n      displayExamData(name);\n      document.getElementById(\"this-exam\").innerHTML = name;\n    }\n\n    var deleteTest = document.createElement('li');\n    deleteTest.className = \"options\";\n    deleteTest.innerHTML = \"Delete Exam\";\n\n    deleteTest.onclick = function() {\n      deleteExam(code);\n    }\n\n    var displayInfo = document.createElement('li');\n    displayInfo.className = \"options\";\n    displayInfo.innerHTML = \"Display Exam Info\";\n\n\n    displayInfo.onclick = function() {\n      document.getElementById('main').style.display = \"none\";\n      document.getElementById('create-exam').style.display = \"none\";\n      document.getElementById('display').style.display = \"block\";\n      document.getElementById('display-code').innerHTML = code;\n      document.body.style.backgroundImage = \"none\";\n\n      var randomStr = Math.random().toString(36).substring(7);\n      setCorrectExamCode(code, \"Teachers/\" + userName + \"/Classes/\" + localStorage.getItem('createExamClass')+ \"/Exams/\", randomStr);\n\n      firebase.database().ref(\"Teachers/\" + userName + \"/Classes/\" + localStorage.getItem('createExamClass') + \"/Exams/\" + localStorage.getItem(randomStr) + \"/taken\").on('value', function(snapshot) {\n        $(\"#joined-students\").html(\"\");\n        snapshot.forEach(function(childSnapshot) {\n          var name = \"\";\n\n          firebase.database().ref(\"Teachers/\" + userName + \"/Classes/\" + localStorage.getItem('createExamClass') + \"/Students/\").once('value', function(s) {\n            s.forEach(function(cs) {\n              if(cs.val().split(\";\")[0] == childSnapshot.val()){\n                name = cs.val().split(\";\")[1];\n              }\n            })\n          });\n\n          setTimeout(function(){ createCurrentTakingBox(name); }, 55);\n        });\n      });\n    }\n\n    ul.appendChild(edit); ul.appendChild(document.createElement('hr')); ul.appendChild(results); ul.appendChild(document.createElement('hr')); ul.appendChild(deleteTest); ul.appendChild(document.createElement('hr')); ul.appendChild(displayInfo);\n\n    modal.appendChild(ul);\n\n    document.getElementById('html').appendChild(modal);\n    document.body.style.opacity = \"0\"\n    document.body.style.filter = \"blur(30px)\";\n    document.body.style.overflowY = \"hidden\";\n\n    window.onclick = function(event) {\n      if (event.target != option_vertical && event.target != modal && document.getElementById('modal')) {\n        modal.remove();\n        document.body.style.overflowY = \"auto\";\n        document.body.style.opacity = \"1\"\n        document.body.style.filter = \"blur(0px)\";\n      }\n    }\n\n    $(document).keyup(function(e) {\n       if (e.key === \"Escape\") {\n         modal.remove();\n         document.body.style.overflowY = \"auto\";\n         document.body.style.opacity = \"1\";\n         document.body.style.filter = \"blur(0px)\";\n       }\n    });\n\n    setTimeout(function(){\n      classBox.onclick = function() {\n        displayExamData(name);\n        document.getElementById(\"this-exam\").innerHTML = name;\n      }\n    }, 3000);\n  }\n\n  difBackground.appendChild(span);\n  difBackground.appendChild(option_vertical);\n  difBackground.appendChild(document.createElement('hr'));\n  classBox.appendChild(difBackground);\n\n  if(classAvg == 'NaN') {\n    var descriptor = document.createElement('span');\n    descriptor.innerHTML = \"No Responses!\";\n\n    var button = document.createElement('button');\n    button.style.border = \"none\";\n    button.style.borderRadius = \"5px\";\n    button.style.padding = \"10px\";\n    button.style.marginTop = \"10px\";\n    button.style.boxShadow = \"3px 5px lightgray\"\n    button.innerHTML = \"Display Exam Info\";\n\n    button.onmouseover = function() {\n      this.style.transform = \"translate(2px)\";\n    }\n\n    button.onmouseleave = function() {\n      this.style.transform = \"translate(0px)\";\n      this.style.transition = \"all .5s\";\n    }\n\n    button.onclick = function() {\n      classBox.onclick = function() {};\n\n      document.getElementById('main').style.display = \"none\";\n      document.getElementById('create-exam').style.display = \"none\";\n      document.getElementById('display').style.display = \"block\";\n      document.getElementById('display-code').innerHTML = code;\n      document.body.style.backgroundImage = \"none\";\n\n      var randomStr = Math.random().toString(36).substring(7);\n      setCorrectExamCode(code, \"Teachers/\" + userName + \"/Classes/\" + localStorage.getItem('createExamClass')+ \"/Exams/\", randomStr);\n\n      firebase.database().ref(\"Teachers/\" + userName + \"/Classes/\" + localStorage.getItem('createExamClass') + \"/Exams/\" + localStorage.getItem(randomStr) + \"/taken\").on('value', function(snapshot) {\n        $(\"#joined-students\").html(\"\");\n        snapshot.forEach(function(childSnapshot) {\n          var name = \"\";\n\n          firebase.database().ref(\"Teachers/\" + userName + \"/Classes/\" + localStorage.getItem('createExamClass') + \"/Students/\").once('value', function(s) {\n            s.forEach(function(cs) {\n              if(cs.val().split(\";\")[0] == childSnapshot.val()){\n                name = cs.val().split(\";\")[1];\n              }\n            })\n          });\n\n          setTimeout(function(){ createCurrentTakingBox(name); }, 55);\n        });\n      });\n    }\n\n    classBox.appendChild(descriptor);\n    classBox.appendChild(document.createElement('br'));\n    classBox.appendChild(button);\n  }\n\n  else {\n    var letter = document.createElement('span');\n    letter.innerHTML = getLetter(classAvg);\n    letter.style.color = \"#2e2f7d\";\n    letter.style.fontSize = \"90px\";\n\n    var descriptor = document.createElement('span');\n    descriptor.innerHTML = \"Class Average (\" + classAvg + \")\";\n\n    classBox.appendChild(letter);\n    classBox.appendChild(document.createElement('br'));\n    classBox.appendChild(descriptor);\n  }\n\n  wrapper.appendChild(classBox);\n  document.getElementById('main').appendChild(wrapper);\n}\n\nfunction setCorrectExamCode(code, ref, randomNum) {\n  firebase.database().ref(ref).once('value', function(snapshot) {\n    for(var v in snapshot.val()) {\n      if(v.substring(1) == code) {\n        localStorage.setItem(randomNum, v)\n      }\n    }\n  });\n}\n\n\n// create currentlyTaking box\nfunction createCurrentTakingBox(name) {\n  var currentlyTakingDiv = document.getElementById('joined-students');\n  var gradients = [\n    \"linear-gradient(135deg, #667eea 0%, #764ba2 100%)\",\n    \"linear-gradient(to top, #a3bded 0%, #6991c7 100%)\",\n    \"linear-gradient(60deg, #29323c 0%, #485563 100%)\",\n    \"linear-gradient(-60deg, #ff5858 0%, #f09819 100%)\",\n    \"linear-gradient(to top, #4481eb 0%, #04befe 100%)\",\n    \"linear-gradient(to right, #0acffe 0%, #495aff 100%)\",\n    \"linear-gradient(-225deg, #A445B2 0%, #D41872 52%, #FF0066 100%)\"\n  ];\n\n  var box = document.createElement('div');\n  box.id = 'currentlyTakingBox';\n  box.style.backgroundImage = gradients[Math.floor(Math.random()*gradients.length)];\n  box.innerHTML = name;\n\n  var center = document.createElement('center');\n  center.appendChild(box);\n\n  currentlyTakingDiv.appendChild(center);\n}\n\n//delete current exam\nfunction deleteExam(code) {\n  if(code == \"\"){\n    var code = document.getElementById('exam-code').innerHTML;\n  }\n  var modifiedCode = \"\";\n\n  swal({\n    title: \"Are you sure?\",\n    text: \"Once deleted, you will not be able to recover this exam or any of its response data!\",\n    icon: \"warning\",\n    buttons: true,\n    dangerMode: true,\n  })\n  .then((willDelete) => {\n    if (willDelete) {\n      var data = false;\n\n      firebase.database().ref(\"Teachers/\" + userName + \"/Classes/\" + localStorage.getItem('createExamClass') + \"/Exams/\").once('value').then(function(snapshot) {\n        snapshot.forEach(function(childSnapshot) {\n          if(childSnapshot.key.substring(1) == code) {\n            modifiedCode = childSnapshot.key;\n          }\n        });\n        firebase.database().ref('Teachers/' + userName + \"/Classes/\" + localStorage.getItem('className') + \"/Exams/\" + modifiedCode).remove();\n\n        var ref = (firebase.database().ref('Teachers/' + userName + \"/Classes/\" + localStorage.getItem('className') + \"/Exams/\"));\n        ref.once('value', function(snapshot) {\n          snapshot.forEach(function(childSnapshot) {\n            data = true;\n          });\n          if(!data) {\n            ref.push(\"no_exams\");\n          }\n        });\n      });\n\n      firebase.database().ref('exam-codes').on('value', function(snapshot) {\n        snapshot.forEach(function(childSnapshot) {\n          if(childSnapshot.val().split(\";\")[0] == code){\n            firebase.database().ref('exam-codes').child(childSnapshot.key).remove();\n          }\n        });\n      });\n\n      document.getElementById('create-exam').style.display = \"none\";\n      document.getElementById('main').style.display = \"initial\";\n      document.body.style.background = \"white\";\n\n      setTimeout(function(){\n        $(\"#exam-wrapper\").empty();\n        $(\"#exam\").empty();\n\n        loadClass(localStorage.getItem(\"className\"));\n\n        if(localStorage.getItem(\"CreatedExamCode\").toUpperCase() == code) {\n          localStorage.setItem(\"CreatedExamCode\", \"\");\n          document.getElementById('cached-exam-button').remove();\n        }\n\n        swal(\"Poof! Your exam has been deleted!\", {\n          icon: \"success\",\n        });\n    }, 100);\n\n    }\n  });\n}\n\n//function to restructure if question is deleted in the middle\nfunction restructureQuestions() {\n  var questions = document.getElementsByClassName('question');\n\n  for(var i = 0; i < questions.length; i++) {\n    var question = questions[i];\n\n    question.childNodes[0].innerHTML = i + 1 + \". \"\n    question.id = i + 1;\n  }\n}\n\n// function to restructure matching boxes\nfunction restructureBoxes() {\n  var boxes = document.getElementsByClassName('matchingbox');\n\n  for(var i = 0; i < boxes.length; i++) {\n    var box = questions[i];\n\n    box.childNodes[1].innerHTML = i + 1 + \". \"\n  }\n}\n\n//function to dynamically change type of question\nfunction changeQuestionType(val, i, prevVal) {\n  var plus = i + 1;\n  var plusDiv = document.getElementById(plus);\n\n  if(val != prevVal) {\n    for(var j = 0; j < plusDiv.childNodes.length; j++) {\n      if(plusDiv.childNodes[j].className == prevVal) {\n        plusDiv.childNodes[j].style.display = \"none\";\n      }\n    }\n\n    if(val == \"mc\") {\n      document.getElementsByClassName(\"mc\")[i].style.display = \"initial\";\n    }\n\n    else if(val == \"fr\") {\n      document.getElementsByClassName(\"mc\")[i].style.display = \"none\";\n      document.getElementById(plus).appendChild(createFreeResponse());\n    }\n    else if(val == \"tf\") {\n      document.getElementsByClassName(\"mc\")[i].style.display = \"none\";\n      document.getElementById(plus).appendChild(createTrueFalse());\n    }\n    else if(val == \"matching\") {\n      document.getElementsByClassName(\"mc\")[i].style.display = \"none\";\n      document.getElementById(plus).appendChild(createMatching());\n    }\n  }\n}\n\n// search LB\nfunction searchLeaderboard() {\n  var input, filter, ul, tr, a, i, txtValue;\n\n  input = document.getElementById(\"lb-search\");\n  tr = document.getElementById('leaderboard').getElementsByClassName(\"name\");\n\n  for (i = 0; i < tr.length; i++) {\n    if(tr[i].innerHTML == input.value) {\n      tr[i].style.border = \"1px solid black\";\n      tr[i].scrollIntoView({behavior: \"smooth\"});\n    }\n  }\n}\n\n// True | False\nfunction createTrueFalse() {\n  var label = document.createElement('label');\n  label.id = \"label\";\n  label.className = \"tf\";\n\n  var true_input = document.createElement('input');\n  true_input.style.outline = \"none\";\n  true_input.type = \"radio\";\n  true_input.className = \"option-input radio\";\n  true_input.name = \"tf\";\n\n  var false_input = document.createElement('input');\n  false_input.style.outline = \"none\";\n  false_input.type = \"radio\";\n  false_input.className = \"option-input radio\";\n  false_input.name = \"tf\";\n  false_input.style.marginLeft = \"10%\";\n\n  var true_span = document.createElement('span');\n  true_span.innerHTML = \" True\";\n  true_span.style.marginLeft = \"10px\";\n  true_span.style.color = \"gray\"\n  true_span.style.fontWeight = 'normal';\n\n  var false_span = document.createElement('span');\n  false_span.innerHTML = \" False\";\n  false_span.style.marginLeft = \"10px\";\n  false_span.style.color = \"gray\"\n  false_span.style.fontWeight = 'normal';\n\n  label.appendChild(true_input);\n  label.appendChild(true_span)\n\n  label.appendChild(false_input);\n  label.appendChild(false_span)\n\n  return label;\n}\n\n// function for Free-Response\nfunction createFreeResponse() {\n  var ta = document.createElement('textarea');\n  ta.readOnly = true;\n  ta.className = \"fr\";\n  ta.placeholder = \"NOTE: This question type requires manual grading\";\n\n  return ta;\n}\n\n\n// function to create matching boxes\nfunction createMatching(){\n  var matchingWrapper = document.createElement('div');\n  matchingWrapper.className = \"matching-wrapper\";\n\n  var matching = document.createElement('div');\n  matching.className = 'matching';\n\n  var hr = document.createElement('hr');\n  hr.style.width = '67%';\n\n  var questions = document.createElement('span');\n  questions.innerHTML = 'Questions';\n  questions.style.marginLeft = \"1.5vw\";\n\n  var results = document.createElement('span');\n  results.innerHTML = 'Results (Will Be Randomized)'\n  results.style.marginLeft = \"22.5vw\";\n\n  var numElements = document.createElement('input');\n  numElements.type = 'textbox';\n  numElements.placeholder = '# Of Elements...';\n  numElements.style.borderRadius = \"5px\";\n  numElements.style.padding = \"5px\";\n  numElements.style.border= \"1px solid black\";\n  numElements.style.fontSize = \"15px\";\n\n  numElements.onkeyup = function() {\n    $(matchingWrapper).empty();\n\n    if(this.value <= 20) {\n      for(var i = 0; i < this.value; i++) {\n        createMatchingElement(matchingWrapper, i + 1);\n      }\n    }\n    else {\n      this.value = \"\";\n\n      var alert = document.createElement('div');\n      alert.innerHTML = \"20 Elements Max!\"\n      alert.style.textAlign = \"center\";\n      alert.style.width = \"100%\";\n      alert.style.position = \"fixed\";\n      alert.style.zIndex = \"100000\";\n      alert.style.top = \"0\";\n      alert.className = \"alert alert-danger\";\n      alert.role = \"alert\";\n\n      document.getElementById('create-exam').appendChild(document.createElement('center').appendChild(alert));\n\n      setTimeout(function(){ document.getElementsByClassName('alert')[0].remove(); }, 2500);\n    }\n  }\n\n  var newBox = document.createElement('button');\n  newBox.id = \"newBox\";\n  newBox.innerHTML = \"New Element!\";\n\n  newBox.onclick = function() {\n    createMatchingElement(matchingWrapper, document.getElementsByClassName('matchingbox').length + 1);\n    saveExam(false);\n  }\n\n  matching.appendChild(numElements);\n  matching.appendChild(hr);\n  matching.appendChild(questions); matching.appendChild(results);\n  matching.appendChild(matchingWrapper);\n\n  matching.appendChild(document.createElement('br'));\n  matching.appendChild(newBox);\n\n  return matching;\n}\n\n// function to create matching Elements\nfunction createMatchingElement(div, i) {\n  var box = document.createElement('div');\n  box.className = 'matchingbox';\n\n  var labelTrash = document.createElement('span');\n  labelTrash.className = \"glyphicon glyphicon-minus\";\n  labelTrash.style.display = \"none\";\n  labelTrash.style.marginRight = \"5px\";\n  labelTrash.style.color = \"#f25555\";\n\n  $(labelTrash).click(function(){\n    this.parentNode.remove();\n    saveExam(false);\n    restructureBoxes();\n  });\n\n  $(box).hover(function(){\n    this.childNodes[0].style.display = \"initial\";\n  }, function(){\n    this.childNodes[0].style.display = \"none\";\n  });\n\n  $(labelTrash).hover(function(){\n    this.style.cursor=\"pointer\";\n    this.style.color = \"#f25555\";\n  }, function(){\n\n  });\n\n  box.appendChild(labelTrash)\n\n  var num = document.createElement('span');\n  num.innerHTML = i + \".\";\n  num.style.marginRight = \"10px\";\n  num.style.fontSize = \"15px\";\n\n  box.appendChild(num);\n\n  var input = document.createElement('input');\n  input.type = 'textbox';\n  input.style.marginTop = \"20px\";\n  input.style.textAlign = \"center\";\n  input.placeholder = \"1 + 1\";\n  input.id = 'result';\n\n  var arrow = document.createElement('span');\n  arrow.className = 'glyphicon glyphicon-arrow-right';\n  arrow.style.paddingLeft = '5vw';\n\n  var result_input = document.createElement('input');\n  result_input.type = 'textbox';\n  result_input.style.marginLeft = \"5vw\";\n  result_input.style.textAlign = \"center\";\n  result_input.placeholder = \"2\";\n  result_input.id = 'result';\n\n  box.appendChild(input);\n  box.appendChild(arrow);\n  box.appendChild(result_input);\n  div.appendChild(box);\n}\n\nfunction restructureManager() {\n  $('#question-manager').empty();\n\n  for(var i = 0; i < document.getElementsByClassName('question').length; i++) {\n    createQuestionTracker(i + 1, false);\n  }\n}\n\n// function to create HTML question\nfunction createQuestion(loading, numAnswerChoices) {\n  var exam = document.getElementById('exam');\n\n  var question = document.createElement('div');\n  question.className = \"question\";\n  question.id = document.getElementsByClassName('question').length + 1;\n\n  var num = document.createElement('span');\n  num.innerHTML = document.getElementsByClassName('question').length + 1 + \". \";\n  num.style.color = \"#97a5aa\";\n\n  var hr = document.createElement('hr');\n  var br = document.createElement('br');\n\n  var trash = document.createElement('span');\n  trash.className = \"glyphicon glyphicon-trash\";\n  trash.style.display = \"none\";\n  trash.style.marginRight = \"5px\";\n  trash.style.color = \"lightgray\";\n\n  $(trash).click(function(){\n    question.remove(); hr.remove(); br.remove();\n    restructureManager(); restructureQuestions(); saveExam();\n  });\n\n  $(trash).hover(function(){\n    trash.style.cursor=\"pointer\";\n    trash.style.color = \"black\";\n  }, function(){\n    trash.style.color = \"lightgray\";\n  });\n\n  var moveDiv = document.createElement('span');\n  moveDiv.id = \"moveDiv\"\n  moveDiv.className = \"glyphicon glyphicon-refresh\";\n  moveDiv.style.display = \"none\";\n  moveDiv.style.marginRight = \"5px\";\n\n  $(moveDiv).click(function(){\n    if(!swapDiv(this.parentNode, prompt(\"Which Question (#) Would You Like To Swap With?\"))){\n      swal(\"Failed!\", \"The Number You Provided Does Not Exist\", \"error\");\n    }\n    else {\n      saveExam(false);\n    }\n  });\n\n  var viewImage = document.createElement(\"a\");\n  viewImage.innerHTML = \"View Image\";\n  viewImage.style.marginLeft = \"10px\";\n  viewImage.style.display = \"none\";\n\n  var imgUpload = document.createElement('span');\n  imgUpload.className = \"glyphicon glyphicon-picture\";\n  imgUpload.style.display = \"none\";\n  imgUpload.style.marginRight = \"7px\";\n  imgUpload.style.color = \"lightgray\";\n\n  imgUpload.onclick =  function() {\n    uploadImage(num.innerHTML.substring(0, num.innerHTML.indexOf(\".\")), viewImage);\n  };\n\n  $(imgUpload).hover(function(){\n    imgUpload.style.cursor=\"pointer\";\n    imgUpload.style.color = \"black\";\n  }, function(){\n    imgUpload.style.color = \"lightgray\";\n  });\n\n  $(question).hover(function(){\n    num.style.display = \"none\";\n    trash.style.display = \"initial\";\n    moveDiv.style.display = \"initial\";\n    imgUpload.style.display = \"initial\";\n    num.style.cursor = \"pointer\";\n  }, function(){\n    num.style.display = \"initial\";\n    trash.style.display = \"none\";\n    imgUpload.style.display = \"none\";\n    moveDiv.style.display = \"none\";\n  });\n\n\n  var question_title = document.createElement('input');\n  question_title.type = \"text\";\n  question_title.placeholder = \"Ex: What's Your Name?\";\n  question_title.id = \"question-title\";\n\n  var question_type = document.createElement('select');\n    var mc = document.createElement('option'); mc.value = \"mc\"; mc.innerHTML = \"Multiple Choice\";\n    var fr = document.createElement('option'); fr.value = \"fr\"; fr.innerHTML = \"Free Response\";\n    var tf = document.createElement('option'); tf.value = \"tf\"; tf.innerHTML = \"True | False\";\n    // var matching = document.createElement('option'); matching.value = \"matching\"; matching.innerHTML = \"Matching\"\n\n  question_type.appendChild(mc); question_type.appendChild(fr); question_type.appendChild(tf); //question_type.appendChild(matching);\n  question_type.id = \"question-type\";\n\n  var previous;\n\n  $(question_type).on('focusin', function(){\n    previous = $(this).val();\n  });\n\n  question_type.onchange = function() {\n    changeQuestionType(this.children[this.selectedIndex].value, question.id - 1, previous);\n    question_type.blur();\n  }\n\n  question.appendChild(num);\n  question.appendChild(imgUpload);\n  question.appendChild(moveDiv);\n  question.appendChild(trash);\n  question.appendChild(question_title);\n  question.appendChild(question_type);\n\n  var points = document.createElement('div');\n  var span = document.createElement('span');\n  span.innerHTML = \"( \";\n\n  var numPoints = document.createElement('input');\n  numPoints.type = \"text\";\n  numPoints.id = \"numPoints\";\n  numPoints.className = \"numPoints\";\n  numPoints.placeholder = \"Ex: 4\";\n\n  var finishingSpan =  document.createElement('span');\n  finishingSpan.innerHTML = \" points)\";\n\n  points.appendChild(span); points.appendChild(numPoints); points.appendChild(finishingSpan);\n  points.appendChild(viewImage);\n\n  question.appendChild(points);\n\n\n  var answer_choices = document.createElement('div');\n  answer_choices.className = \"mc\";\n\n  for(var i = 0; i < numAnswerChoices; i++) {\n    var label = document.createElement('label');\n    label.id = \"label\";\n\n    var input = document.createElement('input');\n    input.style.outline = \"none\";\n    input.type = \"radio\";\n    input.className = \"option-input radio\";\n    input.name = num.innerHTML;\n\n    var answer_choice = document.createElement('input');\n    answer_choice.className = \"option\";\n    answer_choice.id = \"question-choice\";\n    answer_choice.type=\"text\";\n    answer_choice.placeholder = \" Answer Choice...\";\n\n    var labelTrash = document.createElement('span');\n    labelTrash.className = \"glyphicon glyphicon-minus\";\n    labelTrash.style.display = \"none\";\n    labelTrash.style.marginRight = \"5px\";\n    labelTrash.style.color = \"#f25555\";\n\n    $(labelTrash).click(function(){\n        this.parentNode.remove();\n        saveExam();\n    });\n    $(label).hover(function(){\n      this.childNodes[0].style.display = \"initial\";\n    }, function(){\n      this.childNodes[0].style.display = \"none\";\n    });\n\n    $(labelTrash).hover(function(){\n      this.style.cursor=\"pointer\";\n      this.style.color = \"#f25555\";\n    }, function(){});\n\n\n    label.appendChild(labelTrash)\n    label.appendChild(input);\n    label.appendChild(answer_choice);\n    answer_choices.appendChild(label);\n  }\n\n  var plus = document.createElement('span');\n  plus.className = \"glyphicon glyphicon-plus\";\n\n  var createNewAnswerChoice = document.createElement('a');\n  createNewAnswerChoice.id = \"createNewAnswerChoice\";\n  createNewAnswerChoice.clasName = \"newChoice\";\n  createNewAnswerChoice.href = \"javascript:createNewOptionChoice(\" +  num.innerHTML + \")\";\n  createNewAnswerChoice.appendChild(plus);\n  createNewAnswerChoice.innerHTML += ' New Answer Choice'\n\n  answer_choices.appendChild(createNewAnswerChoice);\n\n  question.appendChild(answer_choices);\n\n  exam.appendChild(question);\n\n  exam.appendChild(br);\n  exam.appendChild(hr);\n\n\n  if(!loading) {\n    window.scroll({ top: question.getBoundingClientRect().top + window.scrollY, behavior: 'smooth' });\n    createQuestionTracker(document.getElementsByClassName('question').length, false);\n    saveExam(false);\n  }\n}\n\n// upload images\nfunction uploadImage(num, imgLink) {\n  var alertDiv = document.createElement('div');\n  alertDiv.id = \"alertDiv\";\n\n  var header = document.createElement('h1');\n  header.style.textDecoration = \"underline dodgerblue\";\n  header.style.color = \"#1ece76\"\n  header.innerHTML = \"Upload Image To Question \" + num;\n  alertDiv.appendChild(header);\n\n  var imgInput = document.createElement('input');\n  imgInput.type = \"file\";\n  imgInput.style.border = \"1px solid dodgerblue\";\n  imgInput.style.padding = \"10px\";\n  imgInput.style.fontSize = \"10px\"\n  imgInput.style.borderRadius = \"5px\";\n\n  var center = document.createElement('center');\n  center.appendChild(imgInput)\n\n  alertDiv.appendChild(document.createElement('br'));\n  alertDiv.appendChild(center);\n  alertDiv.appendChild(document.createElement('hr'));\n\n  var imgOut = document.createElement('img');\n  imgOut.id = \"imgOut\"\n  alertDiv.appendChild(imgOut);\n\n  var shortDescription = document.createElement('input');\n  shortDescription.style.margin = \"20px\";\n  shortDescription.style.borderRadius = \"5px\";\n  shortDescription.style.border = \"1px solid black\";\n  shortDescription.placeholder = \"Short description...\"\n  shortDescription.style.width = \"90%\";\n  shortDescription.style.height = \"30px\";\n  shortDescription.style.padding = \"5px\";\n  shortDescription.style.fontSize = \"15px\";\n  alertDiv.appendChild(shortDescription)\n\n  var cancel = document.createElement('button');\n  cancel.id = \"imgUploadCancel\";\n  cancel.innerHTML = \"Cancel\";\n\n  cancel.onclick = function() {\n    document.body.style.opacity = \"1\"\n    document.body.style.filter = \"blur(0px)\";\n    document.body.style.overflowX = \"auto\";\n    document.body.style.overflowY = \"auto\";\n\n    alertDiv.remove()\n  }\n\n  var upload = document.createElement('button');\n  upload.id = \"imgUploadAccept\";\n  upload.innerHTML = \"Upload!\";\n\n  upload.onclick = function() {\n    if(imgOut.src != \"\") {\n      imgLink.style.display = \"initial\"\n      imgLink.onclick = function() {\n        swal({\n          icon: imgOut.src,\n          text: shortDescription.value,\n          className: \"imgView\"\n        });\n      }\n      imgLink.className = imgOut.src;\n\n      document.body.style.opacity = \"1\"\n      document.body.style.filter = \"blur(0px)\";\n      document.body.style.overflowX = \"auto\";\n      document.body.style.overflowY = \"auto\";\n\n      alertDiv.remove();\n      saveExam(shortDescription.value);\n    }\n  }\n\n  imgInput.onchange = function (evt) {\n    var tgt = evt.target || window.event.srcElement,\n        files = tgt.files;\n\n    // FileReader support\n    if (FileReader && files && files.length) {\n        var fr = new FileReader();\n        fr.onload = function () {\n            imgOut.src = fr.result;\n            imgOut.style.border = \"1px solid black\";\n            cancel.style.marginBottom = \"20px\";\n            upload.style.marginBottom = \"20px\";\n        }\n        fr.readAsDataURL(files[0]);\n    }\n  }\n\n  alertDiv.appendChild(upload);\n  alertDiv.appendChild(cancel);\n\n  document.getElementById('html').appendChild(alertDiv);\n\n  document.body.style.opacity = \"0.1\"\n  document.body.style.filter = \"blur(5px)\";\n  document.body.style.overflowX = \"hidden\";\n  document.body.style.overflowY = \"hidden\";\n}\n\n//function to swap divs\nfunction swapDiv(elem, numToSwap){\n  if(document.getElementById(numToSwap) == undefined) {\n    return false;\n  }\n  else {\n    var div1 = jQuery(elem);\n  \tvar div2 = jQuery(document.getElementById(numToSwap));\n\n  \tvar tdiv1 = div1.clone();\n  \tvar tdiv2 = div2.clone();\n\n\t\tdiv1.replaceWith(tdiv2);\n\t\tdiv2.replaceWith(tdiv1);\n\n    restructureQuestions();\n    return true;\n  }\n}\n\n// append new answer choice to question based on num\nfunction createNewOptionChoice(num) {\n  var val = document.getElementById(num).childNodes[7];\n  val.childNodes[val.childNodes.length - 1].remove();\n\n  var label = document.createElement('label');\n  label.id = \"label\";\n\n  var input = document.createElement('input');\n  input.style.outline = \"none\";\n  input.type = \"radio\";\n  input.className = \"option-input radio\";\n  input.name = \"radio\";\n\n  var answer_choice = document.createElement('input');\n  answer_choice.className = \"option\";\n  answer_choice.id = \"question-choice\";\n  answer_choice.type=\"text\";\n  answer_choice.placeholder = \" Answer Choice...\";\n\n  var answer_choice = document.createElement('input');\n  answer_choice.className = \"option\";\n  answer_choice.id = \"question-choice\";\n  answer_choice.type=\"text\";\n  answer_choice.placeholder = \" Answer Choice...\";\n\n  var labelTrash = document.createElement('span');\n  labelTrash.className = \"glyphicon glyphicon-minus\";\n  labelTrash.style.display = \"none\";\n  labelTrash.style.marginRight = \"5px\";\n  labelTrash.style.color = \"#f25555\";\n\n  $(labelTrash).click(function(){\n      this.parentNode.remove();\n      saveExam();\n  });\n\n  $(label).hover(function(){\n    this.childNodes[0].style.display = \"initial\";\n  }, function(){\n    this.childNodes[0].style.display = \"none\";\n  });\n\n  $(labelTrash).hover(function(){\n    this.style.cursor=\"pointer\";\n    this.style.color = \"#f25555\";\n  }, function(){\n\n  });\n\n  label.appendChild(labelTrash);\n  label.appendChild(input);\n  label.appendChild(answer_choice);\n  val.appendChild(label);\n\n  var plus = document.createElement('span');\n  plus.className = \"glyphicon glyphicon-plus\";\n\n  var createNewAnswerChoice = document.createElement('a');\n  createNewAnswerChoice.id = \"createNewAnswerChoice\";\n  createNewAnswerChoice.href = \"javascript:createNewOptionChoice(\" +  num + \")\";\n  createNewAnswerChoice.clasName = \"newChoice\";\n  createNewAnswerChoice.appendChild(plus);\n  createNewAnswerChoice.innerHTML += ' New Answer Choice';\n\n  val.appendChild(createNewAnswerChoice);\n  saveExam(false);\n}\n\n// return letter grade based on avg\nfunction getLetter(avg) {\n  if(avg >= 90.0) {\n    return \"A\";\n  }\n  else if(avg < 90.0 && avg >= 80.0) {\n    return \"B\";\n  }\n  else if(avg < 80.0 && avg >= 70.0) {\n    return \"C\";\n  }\n  else if(avg < 70.0 && avg >= 60.0) {\n    return \"D\";\n  }\n  else {\n    return \"F\";\n  }\n\n}\n\n// create div box for every class\nfunction createClassBox(className, numStudentsInClass, numExamsInClass) {\n  var wrapper = document.getElementById('wrapper');\n\n  var classBox = document.createElement('div');\n  classBox.onclick = function() {\n    localStorage.setItem('className', className);\n    loadClass(className, numExamsInClass);\n  };\n\n  classBox.className = \"classBox\";\n\n  var span = document.createElement('span');\n  span.innerHTML = className;\n  span.className = 'className';\n\n  classBox.appendChild(span);\n  classBox.appendChild(document.createElement('hr'));\n\n  var numStudents = document.createElement('p');\n\n  var lowKey = document.createElement('h6');\n  lowKey.innerHTML = \"Students\";\n  lowKey.id=\"lowKey\";\n\n  numStudents.innerHTML = numStudentsInClass;\n  numStudents.appendChild(lowKey);\n\n  numStudents.id = \"numStudents\";\n  classBox.appendChild(numStudents);\n\n  var hrInBetween = document.createElement('hr');\n  hrInBetween.id = \"hrInBetween\";\n  classBox.appendChild(hrInBetween);\n\n  var numExams = document.createElement('p');\n\n  lowKey = document.createElement('h6');\n  lowKey.innerHTML = \"Exams\";\n  lowKey.id = \"lowKey\";\n  numExams.innerHTML = numExamsInClass;\n  numExams.appendChild(lowKey);\n\n  numExams.id=\"numExams\";\n  classBox.appendChild(numExams);\n\n  wrapper.appendChild(classBox);\n  document.getElementById('main').appendChild(wrapper);\n}\n\n//populate main dashboard of page when page loads\nfunction populateDashboard() {\n  if(!userDataHasLoaded) {\n    var ref = firebase.database().ref('Teachers');\n    var counter = 0;\n    var exists = false;\n\n    ref.once('value', function(snapshot) {\n      snapshot.forEach(function(childSnapshot) {\n        if(childSnapshot.key == userName) {\n          exists = true;\n          arr.push(childSnapshot.child(\"Classes\").val());\n\n          for (var key in arr) {\n            var x = 0;\n            // skip loop if the property is from prototype\n            if (!arr.hasOwnProperty(key)) continue;\n            var obj = arr[key];\n            for (var prop in obj) {\n              // skip loop if the property is from prototype\n              if(!obj.hasOwnProperty(prop)) continue;\n\n              if(obj[prop].Exams[Object.keys(obj[prop].Exams)[0]] == \"no_exams\") {\n                createClassBox(prop, Object.keys(obj[prop].Students).length, 0);\n              }\n\n              else {\n                createClassBox(prop, Object.keys(obj[prop].Students).length, Object.keys(obj[prop].Exams).length);\n              }\n            }\n          }\n        }\n      });\n      if(!exists) {\n        document.getElementById('doesNotExist').style.display = \"initial\";\n      }\n    });\n  }\n\n  userDataHasLoaded = true;\n}\n","var OVERLAY_ID = '__parcel__error__overlay__';\n\nvar OldModule = module.bundle.Module;\n\nfunction Module(moduleName) {\n  OldModule.call(this, moduleName);\n  this.hot = {\n    data: module.bundle.hotData,\n    _acceptCallbacks: [],\n    _disposeCallbacks: [],\n    accept: function (fn) {\n      this._acceptCallbacks.push(fn || function () {});\n    },\n    dispose: function (fn) {\n      this._disposeCallbacks.push(fn);\n    }\n  };\n\n  module.bundle.hotData = null;\n}\n\nmodule.bundle.Module = Module;\nvar checkedAssets, assetsToAccept;\n\nvar parent = module.bundle.parent;\nif ((!parent || !parent.isParcelRequire) && typeof WebSocket !== 'undefined') {\n  var hostname = process.env.HMR_HOSTNAME || location.hostname;\n  var protocol = location.protocol === 'https:' ? 'wss' : 'ws';\n  var ws = new WebSocket(protocol + '://' + hostname + ':' + process.env.HMR_PORT + '/');\n  ws.onmessage = function(event) {\n    checkedAssets = {};\n    assetsToAccept = [];\n\n    var data = JSON.parse(event.data);\n\n    if (data.type === 'update') {\n      var handled = false;\n      data.assets.forEach(function(asset) {\n        if (!asset.isNew) {\n          var didAccept = hmrAcceptCheck(global.parcelRequire, asset.id);\n          if (didAccept) {\n            handled = true;\n          }\n        }\n      });\n\n      // Enable HMR for CSS by default.\n      handled = handled || data.assets.every(function(asset) {\n        return asset.type === 'css' && asset.generated.js;\n      });\n\n      if (handled) {\n        console.clear();\n\n        data.assets.forEach(function (asset) {\n          hmrApply(global.parcelRequire, asset);\n        });\n\n        assetsToAccept.forEach(function (v) {\n          hmrAcceptRun(v[0], v[1]);\n        });\n      } else if (location.reload) { // `location` global exists in a web worker context but lacks `.reload()` function.\n        location.reload();\n      }\n    }\n\n    if (data.type === 'reload') {\n      ws.close();\n      ws.onclose = function () {\n        location.reload();\n      }\n    }\n\n    if (data.type === 'error-resolved') {\n      console.log('[parcel]  Error resolved');\n\n      removeErrorOverlay();\n    }\n\n    if (data.type === 'error') {\n      console.error('[parcel]   ' + data.error.message + '\\n' + data.error.stack);\n\n      removeErrorOverlay();\n\n      var overlay = createErrorOverlay(data);\n      document.body.appendChild(overlay);\n    }\n  };\n}\n\nfunction removeErrorOverlay() {\n  var overlay = document.getElementById(OVERLAY_ID);\n  if (overlay) {\n    overlay.remove();\n  }\n}\n\nfunction createErrorOverlay(data) {\n  var overlay = document.createElement('div');\n  overlay.id = OVERLAY_ID;\n\n  // html encode message and stack trace\n  var message = document.createElement('div');\n  var stackTrace = document.createElement('pre');\n  message.innerText = data.error.message;\n  stackTrace.innerText = data.error.stack;\n\n  overlay.innerHTML = (\n    '<div style=\"background: black; font-size: 16px; color: white; position: fixed; height: 100%; width: 100%; top: 0px; left: 0px; padding: 30px; opacity: 0.85; font-family: Menlo, Consolas, monospace; z-index: 9999;\">' +\n      '<span style=\"background: red; padding: 2px 4px; border-radius: 2px;\">ERROR</span>' +\n      '<span style=\"top: 2px; margin-left: 5px; position: relative;\"></span>' +\n      '<div style=\"font-size: 18px; font-weight: bold; margin-top: 20px;\">' + message.innerHTML + '</div>' +\n      '<pre>' + stackTrace.innerHTML + '</pre>' +\n    '</div>'\n  );\n\n  return overlay;\n\n}\n\nfunction getParents(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return [];\n  }\n\n  var parents = [];\n  var k, d, dep;\n\n  for (k in modules) {\n    for (d in modules[k][1]) {\n      dep = modules[k][1][d];\n      if (dep === id || (Array.isArray(dep) && dep[dep.length - 1] === id)) {\n        parents.push(k);\n      }\n    }\n  }\n\n  if (bundle.parent) {\n    parents = parents.concat(getParents(bundle.parent, id));\n  }\n\n  return parents;\n}\n\nfunction hmrApply(bundle, asset) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (modules[asset.id] || !bundle.parent) {\n    var fn = new Function('require', 'module', 'exports', asset.generated.js);\n    asset.isNew = !modules[asset.id];\n    modules[asset.id] = [fn, asset.deps];\n  } else if (bundle.parent) {\n    hmrApply(bundle.parent, asset);\n  }\n}\n\nfunction hmrAcceptCheck(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (!modules[id] && bundle.parent) {\n    return hmrAcceptCheck(bundle.parent, id);\n  }\n\n  if (checkedAssets[id]) {\n    return;\n  }\n  checkedAssets[id] = true;\n\n  var cached = bundle.cache[id];\n\n  assetsToAccept.push([bundle, id]);\n\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    return true;\n  }\n\n  return getParents(global.parcelRequire, id).some(function (id) {\n    return hmrAcceptCheck(global.parcelRequire, id)\n  });\n}\n\nfunction hmrAcceptRun(bundle, id) {\n  var cached = bundle.cache[id];\n  bundle.hotData = {};\n  if (cached) {\n    cached.hot.data = bundle.hotData;\n  }\n\n  if (cached && cached.hot && cached.hot._disposeCallbacks.length) {\n    cached.hot._disposeCallbacks.forEach(function (cb) {\n      cb(bundle.hotData);\n    });\n  }\n\n  delete bundle.cache[id];\n  bundle(id);\n\n  cached = bundle.cache[id];\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    cached.hot._acceptCallbacks.forEach(function (cb) {\n      cb();\n    });\n    return true;\n  }\n}\n"]}