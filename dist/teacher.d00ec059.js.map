{"version":3,"sources":["assets/js/teacher.js"],"names":["localStorage","getItem","document","body","style","display","alert","examCodes","examCodesTeachers","arr","exams","examData","totalPoints","autoSaveCounter","alphabet","examDataHasLoaded","userDataHasLoaded","window","onload","populateDashboard","$","click","toggleClass","focus","css","blur","on","saveExam","scroll","i","getElementsByClassName","length","elem","getElementById","docViewTop","scrollTop","docViewBottom","height","elemTop","offset","top","elemBottom","isInView","navigator","userAgent","toLowerCase","indexOf","clientHeight","childNodes","innerHTML","color","marginRight","undefined","userName","JSON","parse","profileImg","src","swal","title","text","icon","buttons","then","value","location","href","createQuiz","examCounter","firebase","database","ref","snapshot","forEach","childSnapshot","push","val","split","randomCode","generateCode","examInit","examCode","toUpperCase","examTitle","lastSaved","examType","examTotalPoints","examTotalMins","examDate","examDescription","questions","type","points","choices","once","child","key","remove","createQuestion","background","successfulSave","createElement","textAlign","width","position","zIndex","className","role","appendChild","setTimeout","newSave","Date","toLocaleString","replace","getAllPoints","set","examTeacher","localQuestions","pluginArrayArg","Array","question","children","jsonArg1","Object","checked","imgSrc","imgShortDescription","j","boxes","numBoxes","result","stringify","extend","code","substring","pointsBoxes","parseInt","createQuestionTracker","populating","manager","tracker","id","hover","cursor","onclick","scrollIntoView","block","circle","center","populateExam","refs","pop","join","counter","keys","changeQuestionType","setChecked","div","loadClass","name","empty","collectiveAvg","classAvg","classCounter","backgroundImage","setItem","exam","grade","score","createExamBox","toFixed","button","console","log","Math","random","toString","substr","string","shift","removeDropDown","x","matches","matchMedia","addListener","displayExamData","examName","cumAvg","classLength","highest","lowest","quickest","slowest","table","populated","standardDeviation","documentElement","finalSelectedCode","hasOwnProperty","obj","prop","initData","populateItemAnalysis","dbName","init","initName","paddingLeft","initScore","initPercentile","initTime","response","responses","data","time","tr","loadStudentExamData","percentile","getPercentileOriginal","overallData","ul","float","avg","fontSize","highestScorer","lowestScorer","standardDev","mean","reduce","a","b","sd","sqrt","map","pow","possibleTables","dataDiv","numBelow","numEqual","student","removeAllActive","navBars","getElementsByTagName","populateLeaderboard","iframe","attr","goHomeFromExams","goExamsFromExam","goHomeFromExamData","answer","finalId","info","fullName","takenKey","taken","studentPoints","totalScore","corrAnswer","answers","createGradedQuestion","studAnswer","numAnswerChoices","numAnswerPoints","studName","examCurrentCode","awardedPoints","correct","num","hr","question_title","readOnly","span","numPoints","finishingSpan","answer_choices","label","borderTop","borderBottom","correctAnswer","fontWeight","marginTop","incorrectAnswer","input","disabled","outline","answer_choice","ta","pointsAwardedSpan","numAcceptedPoints","maxLength","questionNum","onkeyup","cleanVersion","k","isNaN","update","newScore","placeholder","padding","border","borderRadius","getPercentile","sort","func","tables","t","testExamData","slice","iTracker","scores","mergeSort","times","mergeSortTime","middle","floor","left","right","merge","indexLeft","indexRight","concat","mergeTime","searchExams","filter","li","txtValue","textContent","innerText","gradients","wrapper","optionVert","classBox","difBackground","marginLeft","option_vertical","modal","edit","results","deleteTest","deleteExam","displayInfo","randomStr","setCorrectExamCode","html","s","cs","createCurrentTakingBox","opacity","overflowY","event","target","keyup","e","descriptor","boxShadow","onmouseover","transform","onmouseleave","transition","letter","getLetter","randomNum","v","currentlyTakingDiv","box","modifiedCode","dangerMode","willDelete","restructureQuestions","restructureBoxes","prevVal","plus","plusDiv","createFreeResponse","createTrueFalse","createMatching","searchLeaderboard","behavior","true_input","false_input","true_span","false_span","matchingWrapper","matching","numElements","createMatchingElement","newBox","labelTrash","parentNode","arrow","result_input","restructureManager","loading","br","trash","moveDiv","swapDiv","prompt","viewImage","imgUpload","uploadImage","question_type","mc","fr","tf","previous","onchange","selectedIndex","createNewAnswerChoice","clasName","getBoundingClientRect","scrollY","imgLink","alertDiv","header","textDecoration","imgInput","imgOut","shortDescription","margin","cancel","overflowX","upload","evt","tgt","srcElement","files","FileReader","marginBottom","readAsDataURL","numToSwap","div1","jQuery","div2","tdiv1","clone","tdiv2","replaceWith","createNewOptionChoice","createClassBox","numStudentsInClass","numExamsInClass","numStudents","lowKey","hrInBetween","numExams","exists","Exams","Students"],"mappings":"AAAA;AACA,IAAGA,YAAY,CAACC,OAAb,CAAqB,UAArB,KAAoC,IAAvC,EAA6C;AAC3CC,EAAAA,QAAQ,CAACC,IAAT,CAAcC,KAAd,CAAoBC,OAApB,GAA8B,MAA9B;AACAC,EAAAA,KAAK,CAAC,gBAAD,CAAL;AACD;;AAED,IAAIC,SAAS,GAAG,EAAhB;AACA,IAAIC,iBAAiB,GAAG,EAAxB;AACA,IAAIC,GAAG,GAAG,EAAV;AACA,IAAIC,KAAK,GAAG,EAAZ;AACA,IAAIC,QAAQ,GAAG,EAAf;AACA,IAAIC,WAAJ;AACA,IAAIC,eAAe,GAAG,CAAtB;AACA,IAAIC,QAAQ,GAAG,4BAAf,EAEA;;AACA,IAAIC,iBAAiB,GAAG,KAAxB;AACA,IAAIC,iBAAiB,GAAG,KAAxB,EAGA;;AACAC,MAAM,CAACC,MAAP,GAAgB,YAAW;AACzBC,EAAAA,iBAAiB;AAEjBC,EAAAA,CAAC,CAAC,WAAD,CAAD,CAAeC,KAAf,CAAqB,YAAU;AAC7BD,IAAAA,CAAC,CAAC,gBAAD,CAAD,CAAoBE,WAApB,CAAgC,MAAhC;AACD,GAFD;AAIAF,EAAAA,CAAC,CAAC,cAAD,CAAD,CAAkBG,KAAlB,CAAwB,YAAW;AACjCH,IAAAA,CAAC,CAAC,cAAD,CAAD,CAAkBI,GAAlB,CAAsB,QAAtB,EAAgC,mBAAhC;AACD,GAFD,EAEGC,IAFH,CAEQ,YAAW;AACjBL,IAAAA,CAAC,CAAC,cAAD,CAAD,CAAkBI,GAAlB,CAAsB,QAAtB,EAAgC,qBAAhC;AACD,GAJD;AAMAJ,EAAAA,CAAC,CAAC,cAAD,CAAD,CAAkBM,EAAlB,CAAqB,MAArB,EAA6B,QAA7B,EAAuC,YAAW;AAChDC,IAAAA,QAAQ,CAAC,KAAD,CAAR;AACD,GAFD;AAIAP,EAAAA,CAAC,CAAC,cAAD,CAAD,CAAkBM,EAAlB,CAAqB,QAArB,EAA+B,aAA/B,EAA8C,YAAW;AACvDC,IAAAA,QAAQ,CAAC,KAAD,CAAR;AACD,GAFD,EAjByB,CAqBzB;;AACAP,EAAAA,CAAC,CAACH,MAAD,CAAD,CAAUW,MAAV,CAAiB,YAAU;AACzB,SAAI,IAAIC,CAAC,GAAG,CAAZ,EAAeA,CAAC,GAAG3B,QAAQ,CAAC4B,sBAAT,CAAgC,UAAhC,EAA4CC,MAA5C,GAAqD,CAAxE,EAA2EF,CAAC,EAA5E,EAAgF;AAC9E,UAAIG,IAAI,GAAG9B,QAAQ,CAAC+B,cAAT,CAAwBJ,CAAxB,CAAX;AACA,UAAIK,UAAU,GAAGd,CAAC,CAACH,MAAD,CAAD,CAAUkB,SAAV,EAAjB;AACA,UAAIC,aAAa,GAAGF,UAAU,GAAGd,CAAC,CAACH,MAAD,CAAD,CAAUoB,MAAV,EAAjC;AAEA,UAAIC,OAAO,GAAGlB,CAAC,CAACY,IAAD,CAAD,CAAQO,MAAR,GAAiBC,GAA/B;AACA,UAAIC,UAAU,GAAGH,OAAO,GAAGlB,CAAC,CAACY,IAAD,CAAD,CAAQK,MAAR,EAA3B;AAEA,UAAIK,QAAQ,GAAKD,UAAU,IAAIL,aAAf,IAAkCE,OAAO,IAAIJ,UAA7D;;AAEA,UAAIQ,QAAJ,EAAa;AACX,YAAGC,SAAS,CAACC,SAAV,CAAoBC,WAApB,GAAkCC,OAAlC,CAA0C,SAA1C,IAAuD,CAAC,CAA3D,EAA8D;AAC5D5C,UAAAA,QAAQ,CAAC+B,cAAT,CAAwB,kBAAxB,EAA4CE,SAA5C,GAAwDjC,QAAQ,CAAC+B,cAAT,CAAwB,kBAAxB,EAA4Cc,YAA5C,IAA4DlB,CAAC,GAAG,CAAhE,CAAxD;AACA3B,UAAAA,QAAQ,CAAC4B,sBAAT,CAAgCD,CAAhC,EAAmC,CAAnC,EAAsCmB,UAAtC,CAAiD,CAAjD,EAAoDC,SAApD,GAAgE,UAAhE;AACA/C,UAAAA,QAAQ,CAAC4B,sBAAT,CAAgCD,CAAhC,EAAmC,CAAnC,EAAsCmB,UAAtC,CAAiD,CAAjD,EAAoDA,UAApD,CAA+D,CAA/D,EAAkE5C,KAAlE,CAAwE8C,KAAxE,GAAgF,OAAhF;AACAhD,UAAAA,QAAQ,CAAC4B,sBAAT,CAAgCD,CAAhC,EAAmC,CAAnC,EAAsCmB,UAAtC,CAAiD,CAAjD,EAAoDA,UAApD,CAA+D,CAA/D,EAAkE5C,KAAlE,CAAwE+C,WAAxE,GAAsF,MAAtF;AACD,SALD,MAMK;AACHjD,UAAAA,QAAQ,CAAC+B,cAAT,CAAwB,kBAAxB,EAA4CE,SAA5C,GAAwDjC,QAAQ,CAAC+B,cAAT,CAAwB,kBAAxB,EAA4Cc,YAA5C,IAA4DlB,CAAC,GAAG,CAAhE,CAAxD;AACA3B,UAAAA,QAAQ,CAAC4B,sBAAT,CAAgCD,CAAhC,EAAmC,CAAnC,EAAsCmB,UAAtC,CAAiD,CAAjD,EAAoDC,SAApD,GAAgE,UAAhE;AACA/C,UAAAA,QAAQ,CAAC4B,sBAAT,CAAgCD,CAAhC,EAAmC,CAAnC,EAAsCmB,UAAtC,CAAiD,CAAjD,EAAoDA,UAApD,CAA+D,CAA/D,EAAkE5C,KAAlE,CAAwE8C,KAAxE,GAAgF,OAAhF;AACD;AACF,OAZD,MAaK;AACH,YAAGP,SAAS,CAACC,SAAV,CAAoBC,WAApB,GAAkCC,OAAlC,CAA0C,SAA1C,IAAuD,CAAC,CAA3D,EAA8D;AAC5D5C,UAAAA,QAAQ,CAAC4B,sBAAT,CAAgCD,CAAhC,EAAmC,CAAnC,EAAsCmB,UAAtC,CAAiD,CAAjD,EAAoDC,SAApD,GAAgE,UAAhE;AACA/C,UAAAA,QAAQ,CAAC4B,sBAAT,CAAgCD,CAAhC,EAAmC,CAAnC,EAAsCmB,UAAtC,CAAiD,CAAjD,EAAoDA,UAApD,CAA+D,CAA/D,EAAkE5C,KAAlE,CAAwE8C,KAAxE,GAAgF,OAAhF;AACAhD,UAAAA,QAAQ,CAAC4B,sBAAT,CAAgCD,CAAhC,EAAmC,CAAnC,EAAsCmB,UAAtC,CAAiD,CAAjD,EAAoDA,UAApD,CAA+D,CAA/D,EAAkE5C,KAAlE,CAAwE+C,WAAxE,GAAsF,GAAtF;AACD,SAJD,MAKK;AACH,cAAGjD,QAAQ,CAAC4B,sBAAT,CAAgCD,CAAhC,EAAmC,CAAnC,KAAyCuB,SAA5C,EAAuD;AACrDlD,YAAAA,QAAQ,CAAC4B,sBAAT,CAAgCD,CAAhC,EAAmC,CAAnC,EAAsCmB,UAAtC,CAAiD,CAAjD,EAAoDC,SAApD,GAAgE,UAAhE;AACA/C,YAAAA,QAAQ,CAAC4B,sBAAT,CAAgCD,CAAhC,EAAmC,CAAnC,EAAsCmB,UAAtC,CAAiD,CAAjD,EAAoDA,UAApD,CAA+D,CAA/D,EAAkE5C,KAAlE,CAAwE8C,KAAxE,GAAgF,OAAhF;AACD;AACF;AACF;AACF;AACF,GAtCD;AAuCD,CA7DD,EA+DA;;;AACA,IAAIG,QAAQ,GAAIC,IAAI,CAACC,KAAL,CAAWvD,YAAY,CAACC,OAAb,CAAqB,UAArB,CAAX,EAA6C,CAA7C,CAAhB;AACA,IAAIuD,UAAU,GAAIF,IAAI,CAACC,KAAL,CAAWvD,YAAY,CAACC,OAAb,CAAqB,UAArB,CAAX,EAA6C,CAA7C,CAAlB,EAEA;;AACAC,QAAQ,CAAC+B,cAAT,CAAwB,cAAxB,EAAwCgB,SAAxC,GAAoD,aAAaI,QAAb,GAAwB,GAA5E;AACAnD,QAAQ,CAAC+B,cAAT,CAAwB,SAAxB,EAAmCwB,GAAnC,GAAyCD,UAAzC;AAEApC,CAAC,CAAC,UAAD,CAAD,CAAcC,KAAd,CAAoB,YAAU;AAC5BqC,EAAAA,IAAI,CAAC;AACHC,IAAAA,KAAK,EAAE,UADJ;AAEHC,IAAAA,IAAI,EAAE,oCAFH;AAGHC,IAAAA,IAAI,EAAE,SAHH;AAIHC,IAAAA,OAAO,EAAE,CAAC,QAAD,EAAW,cAAX;AAJN,GAAD,CAAJ,CAMCC,IAND,CAMM,UAACC,KAAD,EAAW;AACf,QAAGA,KAAH,EAAU;AACR/C,MAAAA,MAAM,CAACgD,QAAP,CAAgBC,IAAhB,GAAuB,uBAAvB;AACD;AACF,GAVD;AAWD,CAZD,GAcA;;AACA,SAASC,UAAT,GAAsB;AACpB,MAAIC,WAAW,GAAG,CAAlB;;AAEA,MAAG7D,SAAS,CAACwB,MAAV,IAAoB,CAAvB,EAAyB;AACvB;AACAsC,IAAAA,QAAQ,CAACC,QAAT,GAAoBC,GAApB,CAAwB,YAAxB,EAAsC7C,EAAtC,CAAyC,OAAzC,EAAkD,UAAS8C,QAAT,EAAmB;AACnEA,MAAAA,QAAQ,CAACC,OAAT,CAAiB,UAASC,aAAT,EAAwB;AACvCnE,QAAAA,SAAS,CAACoE,IAAV,CAAeD,aAAa,CAACE,GAAd,GAAoBC,KAApB,CAA0B,GAA1B,EAA+B,CAA/B,CAAf;AACArE,QAAAA,iBAAiB,CAACmE,IAAlB,CAAuBD,aAAa,CAACE,GAAd,GAAoBC,KAApB,CAA0B,GAA1B,EAA+B,CAA/B,CAAvB;AACD,OAHD;AAID,KALD;AAMD;;AAED,MAAIC,UAAU,GAAGC,YAAY,EAA7B;AAEA,MAAIC,QAAQ,GAAG;AACbC,IAAAA,QAAQ,EAAEH,UAAU,CAACI,WAAX,EADG;AAEbC,IAAAA,SAAS,EAAE,EAFE;AAGbC,IAAAA,SAAS,EAAE,EAHE;AAIbC,IAAAA,QAAQ,EAAE,EAJG;AAKbC,IAAAA,eAAe,EAAE,EALJ;AAMbC,IAAAA,aAAa,EAAE,EANF;AAObC,IAAAA,QAAQ,EAAE,EAPG;AAQbC,IAAAA,eAAe,EAAE,EARJ;AASbC,IAAAA,SAAS,EAAE,CACT;AACE/B,MAAAA,KAAK,EAAE,EADT;AAEEgC,MAAAA,IAAI,EAAI,EAFV;AAGEC,MAAAA,MAAM,EAAE,EAHV;AAIEC,MAAAA,OAAO,EAAE,CACP;AAAC7B,QAAAA,KAAK,EAAE;AAAR,OADO,EAEP;AAACA,QAAAA,KAAK,EAAE;AAAR,OAFO,EAGP;AAACA,QAAAA,KAAK,EAAE;AAAR,OAHO,EAIP;AAACA,QAAAA,KAAK,EAAE;AAAR,OAJO;AAJX,KADS;AATE,GAAf;AAyBAK,EAAAA,QAAQ,CAACC,QAAT,GAAoBC,GAApB,CAAwB,cAAclB,QAAd,GAAyB,WAAzB,GAAuCrD,YAAY,CAACC,OAAb,CAAqB,WAArB,CAAvC,GAA2E,SAAnG,EAA8G6F,IAA9G,CAAmH,OAAnH,EAA4H,UAAStB,QAAT,EAAmB;AAC7IA,IAAAA,QAAQ,CAACC,OAAT,CAAiB,UAASC,aAAT,EAAwB;AACvC,UAAGA,aAAa,CAACE,GAAd,MAAuB,UAA1B,EAAsC;AACpCP,QAAAA,QAAQ,CAACC,QAAT,GAAoBC,GAApB,CAAwB,cAAclB,QAAd,GAAyB,WAAzB,GAAuCrD,YAAY,CAACC,OAAb,CAAqB,WAArB,CAAvC,GAA2E,SAAnG,EAA8G8F,KAA9G,CAAoHrB,aAAa,CAACsB,GAAlI,EAAuIC,MAAvI;AACD,OAFD,MAGK;AACH7B,QAAAA,WAAW;AACZ;AACF,KAPD;AAQD,GATD;;AAWA,MAAGA,WAAW,GAAG,EAAjB,EAAqB;AACnBC,IAAAA,QAAQ,CAACC,QAAT,GAAoBC,GAApB,CAAwB,cAAclB,QAAd,GAAyB,WAAzB,GAAuCrD,YAAY,CAACC,OAAb,CAAqB,WAArB,CAAvC,GAA2E,SAA3E,GAAuFa,QAAQ,CAAEA,QAAQ,CAACiB,MAAT,GAAkB,CAAnB,GAAwBqC,WAAzB,CAA/F,GAAuIU,UAAU,CAACI,WAAX,EAA/J,EAAyLP,IAAzL,CAA8LK,QAA9L;AACD,GAFD,MAGK;AACHX,IAAAA,QAAQ,CAACC,QAAT,GAAoBC,GAApB,CAAwB,cAAclB,QAAd,GAAyB,WAAzB,GAAuCrD,YAAY,CAACC,OAAb,CAAqB,WAArB,CAAvC,GAA2E,SAA3E,GAAuFa,QAAQ,CAAEA,QAAQ,CAACiB,MAAT,GAAkB,CAAnB,GAAwBqC,WAAxB,GAAoC,EAArC,CAA/F,GAA2ItD,QAAQ,CAAEA,QAAQ,CAACiB,MAAT,GAAkB,CAAnB,GAAwBqC,WAAxB,GAAoC,EAArC,CAAnJ,GAA8LU,UAAU,CAACI,WAAX,EAAtN,EAAgPP,IAAhP,CAAqPK,QAArP;AACD;;AAEDkB,EAAAA,cAAc,CAAC,IAAD,EAAO,CAAP,CAAd;AAEAhG,EAAAA,QAAQ,CAAC+B,cAAT,CAAwB,aAAxB,EAAuC7B,KAAvC,CAA6CC,OAA7C,GAAuD,SAAvD;AACAH,EAAAA,QAAQ,CAAC+B,cAAT,CAAwB,MAAxB,EAAgC7B,KAAhC,CAAsCC,OAAtC,GAAgD,MAAhD;AACAH,EAAAA,QAAQ,CAACC,IAAT,CAAcC,KAAd,CAAoB+F,UAApB,GAAiC,OAAjC;AACAjG,EAAAA,QAAQ,CAAC+B,cAAT,CAAwB,WAAxB,EAAqCgB,SAArC,GAAiD6B,UAAU,CAACI,WAAX,EAAjD;AACD,EAED;;;AACA,SAASkB,cAAT,GAA0B;AACxB,MAAI9F,KAAK,GAAGJ,QAAQ,CAACmG,aAAT,CAAuB,KAAvB,CAAZ;AACA/F,EAAAA,KAAK,CAAC2C,SAAN,GAAkB,0BAAlB;AACA3C,EAAAA,KAAK,CAACF,KAAN,CAAYkG,SAAZ,GAAwB,QAAxB;AACAhG,EAAAA,KAAK,CAACF,KAAN,CAAYmG,KAAZ,GAAoB,MAApB;AACAjG,EAAAA,KAAK,CAACF,KAAN,CAAYoG,QAAZ,GAAuB,OAAvB;AACAlG,EAAAA,KAAK,CAACF,KAAN,CAAYqG,MAAZ,GAAqB,QAArB;AACAnG,EAAAA,KAAK,CAACF,KAAN,CAAYoC,GAAZ,GAAkB,GAAlB;AACAlC,EAAAA,KAAK,CAACoG,SAAN,GAAkB,qBAAlB;AACApG,EAAAA,KAAK,CAACqG,IAAN,GAAa,OAAb;AAEAzG,EAAAA,QAAQ,CAAC+B,cAAT,CAAwB,aAAxB,EAAuC2E,WAAvC,CAAmD1G,QAAQ,CAACmG,aAAT,CAAuB,QAAvB,EAAiCO,WAAjC,CAA6CtG,KAA7C,CAAnD;AAEAuG,EAAAA,UAAU,CAAC,YAAU;AAAE3G,IAAAA,QAAQ,CAAC4B,sBAAT,CAAgC,OAAhC,EAAyC,CAAzC,EAA4CmE,MAA5C;AAAuD,GAApE,EAAsE,IAAtE,CAAV;AACD,EAED;;;AACA,SAAStE,QAAT,CAAkBrB,KAAlB,EAAyB;AACvB,MAAGA,KAAH,EAAU;AACR8F,IAAAA,cAAc;AACf;;AAED,MAAIU,OAAO,GAAG,IAAIC,IAAJ,GAAWC,cAAX,GAA4BC,OAA5B,CAAoC,GAApC,EAAyC,IAAzC,CAAd;;AACA,MAAGH,OAAO,IAAI,EAAd,EAAkB;AAChBA,IAAAA,OAAO,GAAG,aAAV;AACD;;AAED5G,EAAAA,QAAQ,CAAC+B,cAAT,CAAwB,YAAxB,EAAsCgB,SAAtC,GAAkD,gBAAgB6D,OAAlE;AACA5G,EAAAA,QAAQ,CAAC4B,sBAAT,CAAgC,QAAhC,EAA0C,CAA1C,EAA6CkC,KAA7C,GAAqDkD,YAAY,EAAjE;;AAEA,MAAGhH,QAAQ,CAAC+B,cAAT,CAAwB,YAAxB,EAAsC+B,KAAtC,IAA+C,EAAlD,EAAsD;AACpDK,IAAAA,QAAQ,CAACC,QAAT,GAAoBC,GAApB,CAAwB,YAAxB,EAAsCuB,IAAtC,CAA2C,OAA3C,EAAoD/B,IAApD,CAAyD,UAASS,QAAT,EAAmB;AAC1EA,MAAAA,QAAQ,CAACC,OAAT,CAAiB,UAASC,aAAT,EAAwB;AACvC,YAAGA,aAAa,CAACE,GAAd,GAAoBC,KAApB,CAA0B,GAA1B,EAA+B,CAA/B,KAAqC3E,QAAQ,CAAC+B,cAAT,CAAwB,WAAxB,EAAqCgB,SAA7E,EAAwF;AACtFoB,UAAAA,QAAQ,CAACC,QAAT,GAAoBC,GAApB,CAAwB,YAAxB,EAAsCwB,KAAtC,CAA4CrB,aAAa,CAACsB,GAA1D,EAA+DmB,GAA/D,CAAmEzC,aAAa,CAACE,GAAd,GAAoBC,KAApB,CAA0B,GAA1B,EAA+B,CAA/B,IAAoC,GAApC,GAA0CH,aAAa,CAACE,GAAd,GAAoBC,KAApB,CAA0B,GAA1B,EAA+B,CAA/B,CAA1C,GAA8E,GAA9E,GAAoFH,aAAa,CAACE,GAAd,GAAoBC,KAApB,CAA0B,GAA1B,EAA+B,CAA/B,CAApF,GAAwH,GAAxH,GAA8H3E,QAAQ,CAAC+B,cAAT,CAAwB,YAAxB,EAAsC+B,KAAvO;AACD;AACF,OAJD;AAKD,KAND;AAOD;;AAED,MAAIgB,QAAQ,GAAG;AACboC,IAAAA,WAAW,EAAE/D,QADA;AAEb4B,IAAAA,QAAQ,EAAE/E,QAAQ,CAAC+B,cAAT,CAAwB,WAAxB,EAAqCgB,SAFlC;AAGbkC,IAAAA,SAAS,EAAEjF,QAAQ,CAAC+B,cAAT,CAAwB,YAAxB,EAAsC+B,KAHpC;AAIboB,IAAAA,SAAS,EAAE0B,OAJE;AAKbxB,IAAAA,eAAe,EAAE4B,YAAY,EALhB;AAMb3B,IAAAA,aAAa,EAAErF,QAAQ,CAAC4B,sBAAT,CAAgC,MAAhC,EAAwC,CAAxC,EAA2CkC,KAN7C;AAObwB,IAAAA,QAAQ,EAAEtF,QAAQ,CAAC+B,cAAT,CAAwB,MAAxB,EAAgC+B,KAP7B;AAQbyB,IAAAA,eAAe,EAAEvF,QAAQ,CAAC+B,cAAT,CAAwB,aAAxB,EAAuC+B,KAR3C;AASb0B,IAAAA,SAAS,EAAE;AATE,GAAf;AAYA,MAAI2B,cAAc,GAAGnH,QAAQ,CAAC4B,sBAAT,CAAgC,UAAhC,CAArB;AACA,MAAIwF,cAAc,GAAG,IAAIC,KAAJ,EAArB;;AAEA,OAAI,IAAI1F,CAAC,GAAG,CAAZ,EAAeA,CAAC,GAAGwF,cAAc,CAACtF,MAAlC,EAA0CF,CAAC,EAA3C,EAA+C;AAC7C,QAAI2F,QAAQ,GAAGH,cAAc,CAACxF,CAAD,CAA7B;AACA,QAAI4F,QAAQ,GAAGD,QAAQ,CAACxE,UAAxB;AAEA,QAAI0E,QAAQ,GAAG,IAAIC,MAAJ,EAAf;AACAD,IAAAA,QAAQ,CAAC/D,KAAT,GAAiB8D,QAAQ,CAAC,CAAD,CAAR,CAAYzD,KAA7B;AACA0D,IAAAA,QAAQ,CAAC/B,IAAT,GAAgB8B,QAAQ,CAAC,CAAD,CAAR,CAAYzD,KAA5B;AACA0D,IAAAA,QAAQ,CAAC9B,MAAT,GAAkB6B,QAAQ,CAAC,CAAD,CAAR,CAAYzE,UAAZ,CAAuB,CAAvB,EAA0BgB,KAA5C;AACA0D,IAAAA,QAAQ,CAACE,OAAT,GAAmB,CAAC,CAApB;AACAF,IAAAA,QAAQ,CAACG,MAAT,GAAkBJ,QAAQ,CAAC,CAAD,CAAR,CAAYzE,UAAZ,CAAuB,CAAvB,EAA0B0D,SAA5C;;AAEA,QAAGpG,KAAK,IAAI,IAAT,IAAiBA,KAAK,IAAI,KAA7B,EAAoC;AAClCoH,MAAAA,QAAQ,CAACI,mBAAT,GAA+BxH,KAA/B;AACD;;AAEDoH,IAAAA,QAAQ,CAAC7B,OAAT,GAAmB,EAAnB;;AAGA,QAAG6B,QAAQ,CAAC/B,IAAT,IAAiB,IAApB,EAA0B;AACxB,WAAI,IAAIoC,CAAC,GAAG,CAAZ,EAAeA,CAAC,GAAGN,QAAQ,CAAC,CAAD,CAAR,CAAYzE,UAAZ,CAAuBjB,MAAvB,GAAgC,CAAnD,EAAsDgG,CAAC,EAAvD,EAA0D;AACxDL,QAAAA,QAAQ,CAAC7B,OAAT,CAAiBlB,IAAjB,CAAsB8C,QAAQ,CAAC,CAAD,CAAR,CAAYzE,UAAZ,CAAuB+E,CAAvB,EAA0B/E,UAA1B,CAAqC,CAArC,EAAwCgB,KAA9D;;AAEA,YAAGyD,QAAQ,CAAC,CAAD,CAAR,CAAYzE,UAAZ,CAAuB+E,CAAvB,EAA0B/E,UAA1B,CAAqC,CAArC,EAAwC4E,OAAxC,IAAmD,IAAtD,EAA4D;AAC1DF,UAAAA,QAAQ,CAACE,OAAT,GAAmBG,CAAnB;AACD;AACF;AACF,KARD,MAUK,IAAGL,QAAQ,CAAC/B,IAAT,IAAiB,IAApB,EAA0B;AAC7B+B,MAAAA,QAAQ,CAAC7B,OAAT,CAAiBlB,IAAjB,CAAsB8C,QAAQ,CAAC,CAAD,CAAR,CAAYzD,KAAlC;AACD,KAFI,MAIA,IAAG0D,QAAQ,CAAC/B,IAAT,IAAiB,IAApB,EAA0B;AAC7B,UAAG8B,QAAQ,CAAC,CAAD,CAAR,CAAYzE,UAAZ,CAAuB,CAAvB,EAA0B4E,OAA7B,EAAsC;AACpCF,QAAAA,QAAQ,CAAC7B,OAAT,CAAiBlB,IAAjB,CAAsB,MAAtB;AACD,OAFD,MAGK;AACH+C,QAAAA,QAAQ,CAAC7B,OAAT,CAAiBlB,IAAjB,CAAsB,OAAtB;AACD;AACF,KAPI,MASA;AACH,UAAIqD,KAAK,GAAG9H,QAAQ,CAAC4B,sBAAT,CAAgC,aAAhC,CAAZ;AACA4F,MAAAA,QAAQ,CAACO,QAAT,GAAoBD,KAAK,CAACjG,MAA1B;;AAEA,WAAI,IAAIF,CAAC,GAAG,CAAZ,EAAeA,CAAC,GAAGmG,KAAK,CAACjG,MAAzB,EAAiCF,CAAC,EAAlC,EAAsC;AACpC,YAAI2F,QAAQ,GAAGQ,KAAK,CAACnG,CAAD,CAAL,CAASmB,UAAT,CAAoB,CAApB,EAAuBgB,KAAtC;AACA,YAAIkE,MAAM,GAAGF,KAAK,CAACnG,CAAD,CAAL,CAASmB,UAAT,CAAoB,CAApB,EAAuBgB,KAApC;AAEA0D,QAAAA,QAAQ,CAAC7B,OAAT,CAAiBlB,IAAjB,CAAsB6C,QAAQ,GAAG,GAAX,GAAiBU,MAAvC;AACD;AACF;;AAEDZ,IAAAA,cAAc,CAAC3C,IAAf,CAAoB+C,QAApB;AACA,QAAIhC,SAAS,GAAGpC,IAAI,CAACC,KAAL,CAAWD,IAAI,CAAC6E,SAAL,CAAeb,cAAf,CAAX,CAAhB;AACAlG,IAAAA,CAAC,CAACgH,MAAF,CAASpD,QAAT,EAAmB;AAAEU,MAAAA,SAAS,EAATA;AAAF,KAAnB;AACD;;AAED,MAAI2C,IAAI,GAAG,EAAX;AAEAhE,EAAAA,QAAQ,CAACC,QAAT,GAAoBC,GAApB,CAAwB,cAAclB,QAAd,GAAyB,WAAzB,GAAuCrD,YAAY,CAACC,OAAb,CAAqB,iBAArB,CAAvC,GAAiF,SAAzG,EAAoH6F,IAApH,CAAyH,OAAzH,EAAkI/B,IAAlI,CAAuI,UAASS,QAAT,EAAmB;AACxJA,IAAAA,QAAQ,CAACC,OAAT,CAAiB,UAASC,aAAT,EAAwB;AACvC,UAAGA,aAAa,CAACsB,GAAd,CAAkBsC,SAAlB,CAA4B,CAA5B,KAAkCpI,QAAQ,CAAC+B,cAAT,CAAwB,WAAxB,EAAqCgB,SAA1E,EAAqF;AACnFoF,QAAAA,IAAI,GAAG3D,aAAa,CAACsB,GAArB;AACD;AACF,KAJD;AAKA3B,IAAAA,QAAQ,CAACC,QAAT,GAAoBC,GAApB,CAAwB,cAAclB,QAAd,GAAyB,WAAzB,GAAuCrD,YAAY,CAACC,OAAb,CAAqB,iBAArB,CAAvC,GAAiF,SAAjF,GAA6FoI,IAArH,EAA2HvC,IAA3H,CAAgI,OAAhI,EAAyI/B,IAAzI,CAA8I,UAASS,QAAT,EAAmB;AAC/JA,MAAAA,QAAQ,CAACC,OAAT,CAAiB,UAASC,aAAT,EAAwB;AACvC,YAAGA,aAAa,CAACsB,GAAd,IAAqB,WAArB,IAAoCtB,aAAa,CAACsB,GAAd,IAAqB,OAA5D,EAAqE;AACnE3B,UAAAA,QAAQ,CAACC,QAAT,GAAoBC,GAApB,CAAwB,cAAclB,QAAd,GAAyB,WAAzB,GAAuCrD,YAAY,CAACC,OAAb,CAAqB,iBAArB,CAAvC,GAAiF,SAAjF,GAA6FoI,IAArH,EAA2HtC,KAA3H,CAAiIrB,aAAa,CAACsB,GAA/I,EAAoJmB,GAApJ,CAAwJnC,QAAxJ;AACD;AACF,OAJD;AAKD,KAND;AAOD,GAbD;AAcD;;AAED,SAASkC,YAAT,GAAwB;AACtB,MAAIqB,WAAW,GAAGrI,QAAQ,CAAC4B,sBAAT,CAAgC,WAAhC,CAAlB;AACA,MAAI8D,MAAM,GAAG,CAAb;;AAEA,OAAI,IAAI/D,CAAC,GAAG,CAAZ,EAAeA,CAAC,GAAG0G,WAAW,CAACxG,MAA/B,EAAuCF,CAAC,EAAxC,EAA4C;AAC1C,QAAG0G,WAAW,CAAC1G,CAAD,CAAX,CAAemC,KAAf,IAAwB,EAA3B,EAA+B;AAC7B4B,MAAAA,MAAM,IAAI4C,QAAQ,CAACD,WAAW,CAAC1G,CAAD,CAAX,CAAemC,KAAhB,CAAlB;AACD;AACF;;AAED,SAAO4B,MAAP;AACD;;AAED,SAAS6C,qBAAT,CAA+B5G,CAA/B,EAAkC6G,UAAlC,EAA8C;AAC5C,MAAIC,OAAO,GAAGzI,QAAQ,CAAC+B,cAAT,CAAwB,kBAAxB,CAAd;AACA,MAAI2G,OAAO,GAAG1I,QAAQ,CAACmG,aAAT,CAAuB,KAAvB,CAAd;AACAuC,EAAAA,OAAO,CAACC,EAAR,GAAa,kBAAb;AACAD,EAAAA,OAAO,CAAClC,SAAR,GAAoB7E,CAApB;AAEET,EAAAA,CAAC,CAACwH,OAAD,CAAD,CAAWE,KAAX,CAAiB,YAAU;AACzB,QAAGnG,SAAS,CAACC,SAAV,CAAoBC,WAApB,GAAkCC,OAAlC,CAA0C,SAA1C,IAAuD,CAAC,CAA3D,EAA8D;AAC5D,WAAK1C,KAAL,CAAW2I,MAAX,GAAoB,SAApB;AACA3H,MAAAA,CAAC,CAAC,IAAD,CAAD,CAAQqG,QAAR,GAAmB,CAAnB,EAAsBxE,SAAtB,GAAkC,UAAlC;AACA,WAAKD,UAAL,CAAgB,CAAhB,EAAmBA,UAAnB,CAA8B,CAA9B,EAAiC5C,KAAjC,CAAuC8C,KAAvC,GAA+C,OAA/C;AACA,WAAKF,UAAL,CAAgB,CAAhB,EAAmBA,UAAnB,CAA8B,CAA9B,EAAiC5C,KAAjC,CAAuC+C,WAAvC,GAAqD,MAArD;AACD,KALD,MAMK;AACH,WAAK/C,KAAL,CAAW2I,MAAX,GAAoB,SAApB;AACA3H,MAAAA,CAAC,CAAC,IAAD,CAAD,CAAQqG,QAAR,GAAmB,CAAnB,EAAsBxE,SAAtB,GAAkC,UAAlC;AACA,WAAKD,UAAL,CAAgB,CAAhB,EAAmBA,UAAnB,CAA8B,CAA9B,EAAiC5C,KAAjC,CAAuC8C,KAAvC,GAA+C,OAA/C;AACD;AACF,GAZD,EAYG,YAAU;AACX,QAAGP,SAAS,CAACC,SAAV,CAAoBC,WAApB,GAAkCC,OAAlC,CAA0C,SAA1C,IAAuD,CAAC,CAA3D,EAA8D;AAC5D,WAAKE,UAAL,CAAgB,CAAhB,EAAmBA,UAAnB,CAA8B,CAA9B,EAAiC5C,KAAjC,CAAuC8C,KAAvC,GAA+C,OAA/C;AACA9B,MAAAA,CAAC,CAAC,IAAD,CAAD,CAAQqG,QAAR,GAAmB,CAAnB,EAAsBxE,SAAtB,GAAkC,UAAlC;AACA,WAAKD,UAAL,CAAgB,CAAhB,EAAmBA,UAAnB,CAA8B,CAA9B,EAAiC5C,KAAjC,CAAuC+C,WAAvC,GAAqD,GAArD;AACD,KAJD,MAKK;AACH,WAAKH,UAAL,CAAgB,CAAhB,EAAmBA,UAAnB,CAA8B,CAA9B,EAAiC5C,KAAjC,CAAuC8C,KAAvC,GAA+C,OAA/C;AACA9B,MAAAA,CAAC,CAAC,IAAD,CAAD,CAAQqG,QAAR,GAAmB,CAAnB,EAAsBxE,SAAtB,GAAkC,UAAlC;AACD;AACF,GAtBD;;AAwBF2F,EAAAA,OAAO,CAACI,OAAR,GAAkB,YAAW;AAC3B9I,IAAAA,QAAQ,CAAC+B,cAAT,CAAwBJ,CAAxB,EAA2BoH,cAA3B,CAA0C;AAACC,MAAAA,KAAK,EAAE;AAAR,KAA1C;AACD,GAFD;;AAIA,MAAIC,MAAM,GAAGjJ,QAAQ,CAACmG,aAAT,CAAuB,KAAvB,CAAb;AACA8C,EAAAA,MAAM,CAACN,EAAP,GAAY,QAAZ;AACAM,EAAAA,MAAM,CAAClG,SAAP,GAAmB,UAAnB;AAEA,MAAImG,MAAM,GAAGlJ,QAAQ,CAACmG,aAAT,CAAuB,QAAvB,CAAb;AACA,MAAIzC,IAAI,GAAG1D,QAAQ,CAACmG,aAAT,CAAuB,KAAvB,CAAX;AACAzC,EAAAA,IAAI,CAACiF,EAAL,GAAU,MAAV;AACAjF,EAAAA,IAAI,CAACX,SAAL,GAAiBpB,CAAjB;AAEAuH,EAAAA,MAAM,CAACxC,WAAP,CAAmBhD,IAAnB;AAEAgF,EAAAA,OAAO,CAAChC,WAAR,CAAoBuC,MAApB;AACAP,EAAAA,OAAO,CAAChC,WAAR,CAAoBwC,MAApB;AAEAT,EAAAA,OAAO,CAAC/B,WAAR,CAAoBgC,OAApB;AACAD,EAAAA,OAAO,CAACxG,SAAR,GAAqBwG,OAAO,CAAC5F,YAAR,GAAuB4F,OAAO,CAAC5F,YAApD;AACD,EAED;;;AACA,SAASsG,YAAT,CAAsBhB,IAAtB,EAA4B9D,GAA5B,EAAiC;AAC/B,MAAI+E,IAAI,GAAG/E,GAAG,CAACM,KAAJ,CAAU,GAAV,CAAX;AAA2ByE,EAAAA,IAAI,CAACC,GAAL;AAE3BlF,EAAAA,QAAQ,CAACC,QAAT,GAAoBC,GAApB,CAAwB+E,IAAI,CAACE,IAAL,GAAY3E,KAAZ,CAAkB,GAAlB,EAAuB2E,IAAvB,CAA4B,GAA5B,CAAxB,EAA0D1D,IAA1D,CAA+D,OAA/D,EAAwE/B,IAAxE,CAA6E,UAASS,QAAT,EAAmB;AAC9FA,IAAAA,QAAQ,CAACC,OAAT,CAAiB,UAASC,aAAT,EAAwB;AACvC,UAAGA,aAAa,CAACsB,GAAd,CAAkBsC,SAAlB,CAA4B,CAA5B,KAAkCD,IAArC,EAA2C;AACzChE,QAAAA,QAAQ,CAACC,QAAT,GAAoBC,GAApB,CAAwB+E,IAAI,CAACE,IAAL,GAAY3E,KAAZ,CAAkB,GAAlB,EAAuB2E,IAAvB,CAA4B,GAA5B,IAAmC,GAAnC,GAAyC9E,aAAa,CAACsB,GAA/E,EAAoFF,IAApF,CAAyF,OAAzF,EAAkG/B,IAAlG,CAAuG,UAASS,QAAT,EAAmB;AACxHA,UAAAA,QAAQ,CAACC,OAAT,CAAiB,UAASC,aAAT,EAAwB;AACvC,gBAAIE,GAAG,GAAGF,aAAa,CAACE,GAAd,EAAV;;AAEA,gBAAGA,GAAG,CAACK,QAAJ,IAAgB7B,SAAnB,EAA6B;AAC3B,kBAAIqG,OAAO,GAAG,CAAd;AAEAvJ,cAAAA,QAAQ,CAAC+B,cAAT,CAAwB,YAAxB,EAAsCgB,SAAtC,GAAkD,gBAAgB2B,GAAG,CAACQ,SAAtE;AACAlF,cAAAA,QAAQ,CAAC+B,cAAT,CAAwB,WAAxB,EAAqCgB,SAArC,GAAiD2B,GAAG,CAACK,QAArD;AACA/E,cAAAA,QAAQ,CAAC+B,cAAT,CAAwB,MAAxB,EAAgC+B,KAAhC,GAAwCY,GAAG,CAACY,QAA5C;AACAtF,cAAAA,QAAQ,CAAC+B,cAAT,CAAwB,aAAxB,EAAuC+B,KAAvC,GAA+CY,GAAG,CAACa,eAAnD;AACAvF,cAAAA,QAAQ,CAAC+B,cAAT,CAAwB,YAAxB,EAAsC+B,KAAtC,GAA8CY,GAAG,CAACO,SAAlD;AACAjF,cAAAA,QAAQ,CAAC4B,sBAAT,CAAgC,MAAhC,EAAwC,CAAxC,EAA2CkC,KAA3C,GAAmDY,GAAG,CAACW,aAAvD;;AAEA,mBAAI,IAAI1D,CAAC,GAAG,CAAZ,EAAeA,CAAC,GAAG8F,MAAM,CAAC+B,IAAP,CAAY9E,GAAG,CAACc,SAAhB,EAA2B3D,MAA9C,EAAsDF,CAAC,EAAvD,EAA2D;AACzD,oBAAIwF,cAAc,GAAGnH,QAAQ,CAAC4B,sBAAT,CAAgC,UAAhC,CAArB;AACA,oBAAI0F,QAAQ,GAAG9C,aAAa,CAACE,GAAd,GAAoBc,SAApB,CAA8B7D,CAA9B,CAAf;;AAEA,oBAAG2F,QAAQ,CAAC3B,OAAT,IAAoBzC,SAApB,IAAiCoE,QAAQ,CAAC7B,IAAT,IAAiB,UAArD,EAAiE;AAC/DO,kBAAAA,cAAc,CAAC,IAAD,EAAOyB,MAAM,CAAC+B,IAAP,CAAYlC,QAAQ,CAAC3B,OAArB,EAA8B9D,MAArC,CAAd;AACA0G,kBAAAA,qBAAqB,CAAC5G,CAAC,GAAG,CAAL,EAAQ,IAAR,CAArB;AAEAwF,kBAAAA,cAAc,CAACxF,CAAD,CAAd,CAAkBmB,UAAlB,CAA6B,CAA7B,EAAgCgB,KAAhC,GAAwCwD,QAAQ,CAAC7D,KAAjD;AACA0D,kBAAAA,cAAc,CAACxF,CAAD,CAAd,CAAkBmB,UAAlB,CAA6B,CAA7B,EAAgCA,UAAhC,CAA2C,CAA3C,EAA8CgB,KAA9C,GAAsDwD,QAAQ,CAAC5B,MAA/D;AACAyB,kBAAAA,cAAc,CAACxF,CAAD,CAAd,CAAkBmB,UAAlB,CAA6B,CAA7B,EAAgCgB,KAAhC,GAAwCwD,QAAQ,CAAC7B,IAAjD;;AAEA,sBAAG6B,QAAQ,CAACK,MAAT,IAAmB,EAAtB,EAA0B;AACxBR,oBAAAA,cAAc,CAACxF,CAAD,CAAd,CAAkBmB,UAAlB,CAA6B,CAA7B,EAAgCA,UAAhC,CAA2C,CAA3C,EAA8C5C,KAA9C,CAAoDC,OAApD,GAA8D,SAA9D;;AACAgH,oBAAAA,cAAc,CAACxF,CAAD,CAAd,CAAkBmB,UAAlB,CAA6B,CAA7B,EAAgCA,UAAhC,CAA2C,CAA3C,EAA8CgG,OAA9C,GAAwD,YAAW;AACjEtF,sBAAAA,IAAI,CAAC;AACHG,wBAAAA,IAAI,EAAE2D,QAAQ,CAACK,MADZ;AAEHjE,wBAAAA,IAAI,EAAE4D,QAAQ,CAACM,mBAFZ;AAGHpB,wBAAAA,SAAS,EAAE;AAHR,uBAAD,CAAJ;AAKD,qBAND;AAOD;;AAEDiD,kBAAAA,kBAAkB,CAACnC,QAAQ,CAAC7B,IAAV,EAAgB9D,CAAhB,EAAmB,IAAnB,CAAlB;;AAEA,sBAAG2F,QAAQ,CAAC7B,IAAT,IAAiB,IAApB,EAA0B;AACxB,yBAAI,IAAIoC,CAAC,GAAG,CAAZ,EAAeA,CAAC,GAAGJ,MAAM,CAAC+B,IAAP,CAAYlC,QAAQ,CAAC3B,OAArB,EAA8B9D,MAAjD,EAAyDgG,CAAC,EAA1D,EAA6D;AAC3D,0BAAGP,QAAQ,CAAC3B,OAAT,CAAiBkC,CAAjB,EAAoB/D,KAApB,IAA6BZ,SAAhC,EAA0C;AACxCiE,wBAAAA,cAAc,CAACxF,CAAD,CAAd,CAAkBmB,UAAlB,CAA6B,CAA7B,EAAgCA,UAAhC,CAA2C+E,CAA3C,EAA8C/E,UAA9C,CAAyD,CAAzD,EAA4DgB,KAA5D,GAAqEwD,QAAQ,CAAC3B,OAAT,CAAiBkC,CAAjB,EAAoB/D,KAAzF;;AACA,4BAAG+D,CAAC,IAAIP,QAAQ,CAACI,OAAjB,EAA0B;AACxBgC,0BAAAA,UAAU,CAACvC,cAAc,CAACxF,CAAD,CAAd,CAAkBmB,UAAlB,CAA6B,CAA7B,EAAgCA,UAAhC,CAA2C+E,CAA3C,EAA8C/E,UAA9C,CAAyD,CAAzD,CAAD,CAAV;AACD;AACF,uBALD,MAMK;AACHqE,wBAAAA,cAAc,CAACxF,CAAD,CAAd,CAAkBmB,UAAlB,CAA6B,CAA7B,EAAgCA,UAAhC,CAA2C+E,CAA3C,EAA8C/E,UAA9C,CAAyD,CAAzD,EAA4DgB,KAA5D,GAAqEwD,QAAQ,CAAC3B,OAAT,CAAiBkC,CAAjB,CAArE;;AACA,4BAAGA,CAAC,IAAIP,QAAQ,CAACI,OAAjB,EAA0B;AACxBgC,0BAAAA,UAAU,CAACvC,cAAc,CAACxF,CAAD,CAAd,CAAkBmB,UAAlB,CAA6B,CAA7B,EAAgCA,UAAhC,CAA2C+E,CAA3C,EAA8C/E,UAA9C,CAAyD,CAAzD,CAAD,CAAV;AACD;AACF;AACF;AACF,mBAfD,MAiBK,IAAGwE,QAAQ,CAAC7B,IAAT,IAAiB,IAApB,EAAyB;AAC5B0B,oBAAAA,cAAc,CAACxF,CAAD,CAAd,CAAkBmB,UAAlB,CAA6B,CAA7B,EAAgCgB,KAAhC,GAAyCwD,QAAQ,CAAC3B,OAAT,CAAiB,CAAjB,CAAzC;AACD,mBAFI,MAIA,IAAG2B,QAAQ,CAAC7B,IAAT,IAAiB,IAApB,EAA0B;AAC7B,wBAAG6B,QAAQ,CAAC3B,OAAT,CAAiB,CAAjB,KAAuB,MAA1B,EAAkC;AAChCwB,sBAAAA,cAAc,CAACxF,CAAD,CAAd,CAAkBmB,UAAlB,CAA6B,CAA7B,EAAgCA,UAAhC,CAA2C,CAA3C,EAA8C4E,OAA9C,GAAwD,IAAxD;AACD,qBAFD,MAGK;AACHP,sBAAAA,cAAc,CAACxF,CAAD,CAAd,CAAkBmB,UAAlB,CAA6B,CAA7B,EAAgCA,UAAhC,CAA2C,CAA3C,EAA8C4E,OAA9C,GAAwD,IAAxD;AACD;AACF;AACF,iBAtDwD,CAwDzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACD;AACF;AACF,WA3FD;AA4FD,SA7FD;AA8FD;AACF,KAjGD;AAkGD,GAnGD;AAqGAf,EAAAA,UAAU,CAAC,YAAU;AAAE3G,IAAAA,QAAQ,CAAC4B,sBAAT,CAAgC,QAAhC,EAA0C,CAA1C,EAA6CkC,KAA7C,GAAqDkD,YAAY,EAAjE;AAAsE,GAAnF,EAAqF,GAArF,CAAV;AACD;;AAED,SAAS0C,UAAT,CAAoBC,GAApB,EAAyB;AACvBhD,EAAAA,UAAU,CAAC,YAAU;AAAEgD,IAAAA,GAAG,CAACjC,OAAJ,GAAc,IAAd;AAAqB,GAAlC,EAAoC,GAApC,CAAV;AACD,EAED;;;AACA,SAASkC,SAAT,CAAmBC,IAAnB,EAAyB;AACrB,MAAG3I,CAAC,CAAC,eAAD,CAAD,IAAsBgC,SAAzB,EAAoC;AAClChC,IAAAA,CAAC,CAAC,eAAD,CAAD,CAAmB4I,KAAnB;AACD;;AACD,MAAI5F,WAAW,GAAG,CAAlB;AACA,MAAI6F,aAAa,GAAG,CAApB;AACA,MAAIC,QAAQ,GAAG,CAAf;AACA,MAAIC,YAAY,GAAG,CAAnB;AACA,MAAIV,OAAO,GAAG,CAAC,CAAf;AAEAvJ,EAAAA,QAAQ,CAAC+B,cAAT,CAAwB,aAAxB,EAAuC7B,KAAvC,CAA6CC,OAA7C,GAAuD,MAAvD;AACAH,EAAAA,QAAQ,CAAC+B,cAAT,CAAwB,SAAxB,EAAmC7B,KAAnC,CAAyCC,OAAzC,GAAmD,MAAnD;AACAH,EAAAA,QAAQ,CAAC+B,cAAT,CAAwB,eAAxB,EAAyC7B,KAAzC,CAA+CC,OAA/C,GAAyD,SAAzD;AACAH,EAAAA,QAAQ,CAAC+B,cAAT,CAAwB,cAAxB,EAAwC7B,KAAxC,CAA8CC,OAA9C,GAAwD,MAAxD;AACAH,EAAAA,QAAQ,CAAC+B,cAAT,CAAwB,aAAxB,EAAuCgB,SAAvC,GAAmD,gBAAgB8G,IAAnE;AACA7J,EAAAA,QAAQ,CAACC,IAAT,CAAcC,KAAd,CAAoBgK,eAApB,GAAsC,iDAAtC;AAEApK,EAAAA,YAAY,CAACqK,OAAb,CAAqB,iBAArB,EAAwCN,IAAxC;AAEA1F,EAAAA,QAAQ,CAACC,QAAT,GAAoBC,GAApB,CAAwB,cAAclB,QAAd,GAAyB,WAAzB,GAAuC0G,IAAvC,GAA8C,SAAtE,EAAiFrI,EAAjF,CAAoF,OAApF,EAA6F,UAAS8C,QAAT,EAAmB;AAC9G9D,IAAAA,KAAK,CAACiE,IAAN,CAAWH,QAAQ,CAACI,GAAT,EAAX;AACA6E,IAAAA,OAAO;AACPjF,IAAAA,QAAQ,CAACC,OAAT,CAAiB,UAASC,aAAT,EAAwB;AACvCA,MAAAA,aAAa,CAACqB,KAAd,CAAoB,WAApB,EAAiCtB,OAAjC,CAAyC,UAAS6F,IAAT,EAAe;AACtDH,QAAAA,YAAY;AACZ/F,QAAAA,WAAW;AACX,YAAImG,KAAK,GAAGD,IAAI,CAAC1F,GAAL,GAAW+C,MAAM,CAAC+B,IAAP,CAAYY,IAAI,CAAC1F,GAAL,EAAZ,EAAwB,CAAxB,CAAX,EAAuC4F,KAAnD;AACAP,QAAAA,aAAa,IAAIzB,QAAQ,CAAC+B,KAAD,CAAzB;AAEAL,QAAAA,QAAQ,IAAI1B,QAAQ,CAAC+B,KAAD,CAApB;AACD,OAPD;;AASA,WAAI,IAAIvE,GAAR,IAAetB,aAAa,CAACE,GAAd,EAAf,EAAoC;AAClC,YAAGF,aAAa,CAACE,GAAd,MAAuB,UAA1B,EAAsC;AACpC6F,UAAAA,aAAa,CAAC/F,aAAa,CAACE,GAAd,GAAoBoB,GAApB,EAAyBb,SAA1B,EAAqC,CAAC+E,QAAQ,GAAGC,YAAZ,EAA0BO,OAA1B,CAAkC,CAAlC,CAArC,EAA2E,cAAcrH,QAAd,GAAyB,WAAzB,GAAuC0G,IAAvC,GAA8C,SAA9C,GAA0DrF,aAAa,CAACsB,GAAnJ,EAAwJtB,aAAa,CAACE,GAAd,GAAoBoB,GAApB,EAAyBf,QAAjL,CAAb;AACA,cAAIL,GAAG,GAAGF,aAAa,CAACE,GAAd,GAAoBoB,GAApB,EAAyBb,SAAnC;;AAEA,cAAGnF,YAAY,CAACC,OAAb,CAAqB,iBAArB,KAA2C,EAA9C,EAAkD;AAChD,gBAAI0K,MAAM,GAAGzK,QAAQ,CAAC+B,cAAT,CAAwB,aAAxB,CAAb;;AACA,gBAAG0I,MAAM,IAAI,IAAb,EAAmB;AACjBA,cAAAA,MAAM,CAAC9B,EAAP,GAAY,oBAAZ;AACA8B,cAAAA,MAAM,CAACvK,KAAP,CAAaC,OAAb,GAAuB,cAAvB;AAEAuK,cAAAA,OAAO,CAACC,GAAR,CAAYF,MAAZ;;AAEAA,cAAAA,MAAM,CAAC3B,OAAP,GAAiB,YAAW;AAC1B9I,gBAAAA,QAAQ,CAAC+B,cAAT,CAAwB,aAAxB,EAAuC7B,KAAvC,CAA6CC,OAA7C,GAAuD,SAAvD;AACAH,gBAAAA,QAAQ,CAAC+B,cAAT,CAAwB,MAAxB,EAAgC7B,KAAhC,CAAsCC,OAAtC,GAAgD,MAAhD;AACAH,gBAAAA,QAAQ,CAACC,IAAT,CAAcC,KAAd,CAAoB+F,UAApB,GAAiC,OAAjC;AAEAyE,gBAAAA,OAAO,CAACC,GAAR,CAAY7K,YAAY,CAACC,OAAb,CAAqB,iBAArB,EAAwCiF,WAAxC,EAAZ;AAEAmE,gBAAAA,YAAY,CAACrJ,YAAY,CAACC,OAAb,CAAqB,iBAArB,EAAwCiF,WAAxC,EAAD,EAAwD,cAAc7B,QAAd,GAAyB,WAAzB,GAAuCrD,YAAY,CAACC,OAAb,CAAqB,iBAArB,CAAvC,GAAiF,SAAjF,GAA6FD,YAAY,CAACC,OAAb,CAAqB,iBAArB,EAAwCiF,WAAxC,EAArJ,CAAZ;AACD,eARD;AASD;AACF;;AAED,cAAGR,aAAa,CAACE,GAAd,GAAoBoB,GAApB,EAAyBb,SAAzB,IAAsC,EAAzC,EAA4C;AAC1CP,YAAAA,GAAG,GAAGF,aAAa,CAACE,GAAd,GAAoBoB,GAApB,EAAyBf,QAA/B;AACD;;AAED,cAAGjF,YAAY,CAACC,OAAb,CAAqB,iBAArB,KAA2C,IAA3C,IAAmDD,YAAY,CAACC,OAAb,CAAqB,iBAArB,EAAwCiF,WAAxC,MAAyDR,aAAa,CAACE,GAAd,GAAoBoB,GAApB,EAAyBf,QAAxI,EAAkJ;AAChJ2F,YAAAA,OAAO,CAACC,GAAR,CAAY7K,YAAY,CAACC,OAAb,CAAqB,iBAArB,EAAwCiF,WAAxC,EAAZ,EAAmER,aAAa,CAACE,GAAd,GAAoBoB,GAApB,EAAyBf,QAA5F;AACE/E,YAAAA,QAAQ,CAAC+B,cAAT,CAAwB,oBAAxB,EAA8C7B,KAA9C,CAAoDC,OAApD,GAA8D,SAA9D;AACAH,YAAAA,QAAQ,CAAC+B,cAAT,CAAwB,kBAAxB,EAA4CgB,SAA5C,GAAwD,UAAU2B,GAAlE;AACH,WAJD,MAKK,IAAG1E,QAAQ,CAAC+B,cAAT,CAAwB,oBAAxB,KAAiD,IAApD,EAAyD;AAC5D/B,YAAAA,QAAQ,CAAC+B,cAAT,CAAwB,oBAAxB,EAA8C7B,KAA9C,CAAoDC,OAApD,GAA8D,MAA9D;AACD;;AACD;AACD,SArCD,MAsCK;AACHH,UAAAA,QAAQ,CAAC+B,cAAT,CAAwB,UAAxB,EAAoC7B,KAApC,CAA0CC,OAA1C,GAAoD,SAApD;AACD;AACF;;AACD6J,MAAAA,QAAQ,GAAG,CAAX;AACAC,MAAAA,YAAY,GAAG,CAAf;AACD,KAvDD;AAyDAF,IAAAA,aAAa,GAAGA,aAAa,GAAG7F,WAAhC;AACA6F,IAAAA,aAAa,GAAIA,aAAD,CAAgBS,OAAhB,CAAwB,CAAxB,CAAhB;;AAEA,QAAGT,aAAa,IAAI,KAApB,EAA0B;AACxB/J,MAAAA,QAAQ,CAAC+B,cAAT,CAAwB,kBAAxB,EAA4CgB,SAA5C,GAAwD,SAAxD;AACD,KAFD,MAGI;AACF/C,MAAAA,QAAQ,CAAC+B,cAAT,CAAwB,kBAAxB,EAA4CgB,SAA5C,GAAwDgH,aAAa,GAAG,GAAxE;AACAjK,MAAAA,YAAY,CAACqK,OAAb,CAAqB,kBAArB,EAAyCJ,aAAa,GAAG,GAAzD;AACD;AACF,GAtED;AAuEH,EAED;;;AACA,SAASlF,YAAT,GAAwB;AACtB,MAAIsD,IAAI,GAAGyC,IAAI,CAACC,MAAL,GAAcC,QAAd,CAAuB,EAAvB,EAA2B/D,OAA3B,CAAmC,UAAnC,EAA+C,EAA/C,EAAmDgE,MAAnD,CAA0D,CAA1D,EAA6D,CAA7D,CAAX;AACA,MAAIvE,SAAS,GAAG,EAAhB;AAEA,MAAIwE,MAAM,GAAGhL,QAAQ,CAAC+B,cAAT,CAAwB,aAAxB,EAAuCgB,SAAvC,CAAiDqF,SAAjD,CAA2DpI,QAAQ,CAAC+B,cAAT,CAAwB,aAAxB,CAA3D,EAAmG4C,KAAnG,CAAyG,GAAzG,CAAb;AACAqG,EAAAA,MAAM,CAACC,KAAP;AAAgBD,EAAAA,MAAM,CAACC,KAAP;;AAEhB,OAAI,IAAItJ,CAAC,GAAG,CAAZ,EAAeA,CAAC,GAAGqJ,MAAM,CAACnJ,MAA1B,EAAkCF,CAAC,EAAnC,EAAuC;AACrC,QAAGA,CAAC,IAAIqJ,MAAM,CAACnJ,MAAP,GAAgB,CAAxB,EAA2B;AACzB2E,MAAAA,SAAS,IAAIwE,MAAM,CAACrJ,CAAD,CAAN,GAAY,GAAzB;AACD,KAFD,MAGI;AACF6E,MAAAA,SAAS,IAAIwE,MAAM,CAACrJ,CAAD,CAAnB;AACD;AACF;;AAED,MAAGtB,SAAS,CAACuC,OAAV,CAAkBuF,IAAlB,KAA2B,CAAC,CAA/B,EAAiC;AAC/BhE,IAAAA,QAAQ,CAACC,QAAT,GAAoBC,GAApB,CAAwB,YAAxB,EAAsCI,IAAtC,CAA2C0D,IAAI,CAACnD,WAAL,KAAqB,GAArB,GAA2B7B,QAA3B,GAAsC,GAAtC,GAA4CqD,SAA5C,GAAwD,GAAxD,GAA8D2B,IAAI,CAACnD,WAAL,EAAzG;AACAlF,IAAAA,YAAY,CAACqK,OAAb,CAAqB,iBAArB,EAAwChC,IAAxC;AACA,WAAOA,IAAP;AACD,GAJD,MAKK;AACHtD,IAAAA,YAAY,GADT,CACa;AACjB;AACF,EAED;;;AACA,SAASqG,cAAT,CAAwBC,CAAxB,EAA2B;AAC1B,MAAIA,CAAC,CAACC,OAAN,EAAe;AAAE;AACfpL,IAAAA,QAAQ,CAAC+B,cAAT,CAAwB,UAAxB,EAAoC7B,KAApC,CAA0CC,OAA1C,GAAoD,MAApD,CADa,CAC+C;AAC7D,GAFD,MAEO;AACLH,IAAAA,QAAQ,CAAC+B,cAAT,CAAwB,UAAxB,EAAoC7B,KAApC,CAA0CC,OAA1C,GAAoD,SAApD,CADK,CAC0D;AAChE;AACD,EAED;;;AACA,IAAIgL,CAAC,GAAGpK,MAAM,CAACsK,UAAP,CAAkB,oBAAlB,CAAR,EAAgD;;AAChDH,cAAc,CAACC,CAAD,CAAd,EAAkB;;AAClBA,CAAC,CAACG,WAAF,CAAcJ,cAAd,GAA8B;AAE9B;;AACA,SAASK,eAAT,CAAyBC,QAAzB,EAAmC;AACjC,MAAG,CAAC3K,iBAAJ,EAAuB;AACrB,QAAI4K,MAAM,GAAG,CAAb;AACA,QAAIC,WAAW,GAAG,CAAlB;AACA,QAAIC,OAAO,GAAG,SAAd;AACA,QAAIC,MAAM,GAAG,QAAb;AACA,QAAIC,QAAQ,GAAG,QAAf;AACA,QAAIC,OAAO,GAAG,SAAd;AACA,QAAIC,KAAJ;AACA,QAAIC,SAAS,GAAG,KAAhB;AACA,QAAIC,iBAAiB,GAAG,EAAxB;AAEAjM,IAAAA,QAAQ,CAAC+B,cAAT,CAAwB,aAAxB,EAAuC7B,KAAvC,CAA6CC,OAA7C,GAAuD,MAAvD;AACAH,IAAAA,QAAQ,CAAC+B,cAAT,CAAwB,SAAxB,EAAmC7B,KAAnC,CAAyCC,OAAzC,GAAmD,MAAnD;AACAH,IAAAA,QAAQ,CAAC+B,cAAT,CAAwB,eAAxB,EAAyC7B,KAAzC,CAA+CC,OAA/C,GAAyD,MAAzD;AACAH,IAAAA,QAAQ,CAAC+B,cAAT,CAAwB,cAAxB,EAAwC7B,KAAxC,CAA8CC,OAA9C,GAAwD,MAAxD;AACAH,IAAAA,QAAQ,CAAC+B,cAAT,CAAwB,cAAxB,EAAwC7B,KAAxC,CAA8CC,OAA9C,GAAwD,SAAxD;AACAH,IAAAA,QAAQ,CAAC+B,cAAT,CAAwB,WAAxB,EAAqC7B,KAArC,CAA2CC,OAA3C,GAAqD,SAArD;AACAH,IAAAA,QAAQ,CAAC+B,cAAT,CAAwB,WAAxB,EAAqCgB,SAArC,GAAiDyI,QAAjD;AACAxL,IAAAA,QAAQ,CAACC,IAAT,CAAcC,KAAd,CAAoBgK,eAApB,GAAsC,mDAAtC;AAEA,QAAIvI,CAAC,GAAG3B,QAAQ,CAACmG,aAAT,CAAuB,GAAvB,CAAR;AACAxE,IAAAA,CAAC,CAAC6E,SAAF,GAAc,qCAAd;AACA7E,IAAAA,CAAC,CAACgH,EAAF,GAAO,SAAP;;AAEAhH,IAAAA,CAAC,CAACmH,OAAF,GAAY,YAAW;AACrB9I,MAAAA,QAAQ,CAACC,IAAT,CAAcgC,SAAd,GAA0B,CAA1B;AACAjC,MAAAA,QAAQ,CAACkM,eAAT,CAAyBjK,SAAzB,GAAqC,CAArC;AACD,KAHD;;AAKAjC,IAAAA,QAAQ,CAAC+B,cAAT,CAAwB,MAAxB,EAAgC2E,WAAhC,CAA4C1G,QAAQ,CAACmG,aAAT,CAAuB,IAAvB,CAA5C;AACAnG,IAAAA,QAAQ,CAAC+B,cAAT,CAAwB,MAAxB,EAAgC2E,WAAhC,CAA4C/E,CAA5C;AAEA,QAAIwK,iBAAiB,GAAG,EAAxB;;AAEA,SAAK,IAAIrG,GAAT,IAAgBtF,KAAhB,EAAuB;AACrB;AACA,UAAI,CAACD,GAAG,CAAC6L,cAAJ,CAAmBtG,GAAnB,CAAL,EAA8B;AAC9B,UAAIuG,GAAG,GAAG7L,KAAK,CAACsF,GAAD,CAAf;;AAEA,WAAK,IAAIwG,IAAT,IAAiBD,GAAjB,EAAsB;AACpB,aAAI,IAAIE,QAAR,IAAoBF,GAAG,CAACC,IAAD,CAAvB,EAA8B;AAC5B,cAAGD,GAAG,CAACC,IAAD,CAAH,CAAUC,QAAV,EAAoBxH,QAApB,IAAgC7B,SAAhC,IAA6CuE,MAAM,CAAC+B,IAAP,CAAY6C,GAAG,CAACC,IAAD,CAAf,EAAuBzK,MAAvB,GAAgC,CAAhF,EAAmF;AACjF,gBAAIsG,IAAI,GAAGkE,GAAG,CAACC,IAAD,CAAH,CAAUC,QAAV,EAAoBxH,QAA/B;AAEAjF,YAAAA,YAAY,CAACqK,OAAb,CAAqB,mBAArB,EAA0ChC,IAA1C;;AAEA,gBAAGqD,QAAQ,IAAIa,GAAG,CAACC,IAAD,CAAH,CAAUC,QAAV,EAAoBtH,SAAnC,EAA8C;AAC5CkH,cAAAA,iBAAiB,GAAGhE,IAApB;AACAnI,cAAAA,QAAQ,CAAC+B,cAAT,CAAwB,WAAxB,EAAqCgB,SAArC,GAAiDyI,QAAjD;AACAxL,cAAAA,QAAQ,CAAC+B,cAAT,CAAwB,mBAAxB,EAA6C7B,KAA7C,CAAmDC,OAAnD,GAA6D,SAA7D;;AAEAH,cAAAA,QAAQ,CAAC+B,cAAT,CAAwB,mBAAxB,EAA6C+G,OAA7C,GAAuD,YAAW;AAChE9I,gBAAAA,QAAQ,CAAC+B,cAAT,CAAwB,aAAxB,EAAuC7B,KAAvC,CAA6CC,OAA7C,GAAuD,SAAvD;AACAH,gBAAAA,QAAQ,CAAC+B,cAAT,CAAwB,MAAxB,EAAgC7B,KAAhC,CAAsCC,OAAtC,GAAgD,MAAhD;AACAH,gBAAAA,QAAQ,CAACC,IAAT,CAAcC,KAAd,CAAoB+F,UAApB,GAAiC,OAAjC;AACAkD,gBAAAA,YAAY,CAACgD,iBAAD,EAAoB,cAAchJ,QAAd,GAAyB,WAAzB,GAAuCrD,YAAY,CAACC,OAAb,CAAqB,iBAArB,CAAvC,GAAiF,SAAjF,GAA6FuM,IAAjH,CAAZ;AACD,eALD;;AAOAtM,cAAAA,QAAQ,CAAC+B,cAAT,CAAwB,oBAAxB,EAA8C7B,KAA9C,CAAoDC,OAApD,GAA8D,SAA9D;;AACAH,cAAAA,QAAQ,CAAC+B,cAAT,CAAwB,oBAAxB,EAA8C+G,OAA9C,GAAwD,YAAW;AACjE9I,gBAAAA,QAAQ,CAAC+B,cAAT,CAAwB,MAAxB,EAAgC7B,KAAhC,CAAsCC,OAAtC,GAAgD,MAAhD;AACAH,gBAAAA,QAAQ,CAAC+B,cAAT,CAAwB,eAAxB,EAAyC7B,KAAzC,CAA+CC,OAA/C,GAAyD,cAAzD;AACAH,gBAAAA,QAAQ,CAACC,IAAT,CAAcC,KAAd,CAAoBgK,eAApB,GAAsC,sDAAtC;AACAlK,gBAAAA,QAAQ,CAAC+B,cAAT,CAAwB,oBAAxB,EAA8CgB,SAA9C,GAA0DyI,QAA1D;AACAgB,gBAAAA,oBAAoB,CAACL,iBAAD,EAAoB,cAAchJ,QAAd,GAAyB,WAAzB,GAAuCrD,YAAY,CAACC,OAAb,CAAqB,iBAArB,CAAvC,GAAiF,SAAjF,GAA6FuM,IAAjH,CAApB;AACD,eAND;AAOD,aAzBgF,CA2BjF;;;AACA,gBAAG,CAACD,GAAG,CAACD,cAAJ,CAAmBE,IAAnB,CAAJ,EAA8B;AAE9B,gBAAIG,MAAM,GAAGJ,GAAG,CAACC,IAAD,CAAH,CAAUC,QAAV,EAAoBtH,SAAjC;;AACA,gBAAGwH,MAAM,IAAI,EAAb,EAAiB;AACfA,cAAAA,MAAM,GAAGJ,GAAG,CAACC,IAAD,CAAH,CAAUC,QAAV,EAAoBxH,QAApB,CAA6BqD,SAA7B,CAAuC,CAAvC,CAAT;AACD;;AAED,gBAAGqE,MAAM,IAAIjB,QAAb,EAAuB;AACrB,kBAAIX,MAAM,GAAG7K,QAAQ,CAACmG,aAAT,CAAuB,KAAvB,CAAb;AACA,kBAAI4F,KAAK,GAAG/L,QAAQ,CAACmG,aAAT,CAAuB,OAAvB,CAAZ;AAEA4F,cAAAA,KAAK,CAACpD,EAAN,GAAW,QAAX;AACAoD,cAAAA,KAAK,CAACvF,SAAN,GAAkB,qBAAlB;AACAuF,cAAAA,KAAK,CAAC7L,KAAN,CAAYmG,KAAZ,GAAoB,OAApB;AAEA,kBAAIqG,IAAI,GAAG1M,QAAQ,CAACmG,aAAT,CAAuB,IAAvB,CAAX;AACAuG,cAAAA,IAAI,CAACxM,KAAL,CAAW8C,KAAX,GAAmB,UAAnB;AAEA,kBAAI2J,QAAQ,GAAG3M,QAAQ,CAACmG,aAAT,CAAuB,IAAvB,CAAf;AACAwG,cAAAA,QAAQ,CAAC5J,SAAT,GAAqB,MAArB;AACA4J,cAAAA,QAAQ,CAACzM,KAAT,CAAe0M,WAAf,GAA6B,MAA7B;AACAD,cAAAA,QAAQ,CAAChE,EAAT,GAAc,MAAd;AAEA,kBAAIkE,SAAS,GAAG7M,QAAQ,CAACmG,aAAT,CAAuB,IAAvB,CAAhB;AACA0G,cAAAA,SAAS,CAAC9J,SAAV,GAAsB,WAAtB;AACA8J,cAAAA,SAAS,CAAClE,EAAV,GAAe,OAAf;AAEA,kBAAImE,cAAc,GAAG9M,QAAQ,CAACmG,aAAT,CAAuB,IAAvB,CAArB;AACA2G,cAAAA,cAAc,CAAC/J,SAAf,GAA2B,YAA3B;AACA+J,cAAAA,cAAc,CAACnE,EAAf,GAAoB,YAApB;AAEA,kBAAIoE,QAAQ,GAAG/M,QAAQ,CAACmG,aAAT,CAAuB,IAAvB,CAAf;AACA4G,cAAAA,QAAQ,CAAChK,SAAT,GAAqB,MAArB;AACAgK,cAAAA,QAAQ,CAACpE,EAAT,GAAc,MAAd;AAEA+D,cAAAA,IAAI,CAAChG,WAAL,CAAiBiG,QAAjB;AACAD,cAAAA,IAAI,CAAChG,WAAL,CAAiBmG,SAAjB;AACAH,cAAAA,IAAI,CAAChG,WAAL,CAAiBoG,cAAjB;AACAJ,cAAAA,IAAI,CAAChG,WAAL,CAAiBqG,QAAjB;AAEAhB,cAAAA,KAAK,CAACrF,WAAN,CAAkBgG,IAAlB;AACD;AACF,WAtED,MAuEK,IAAGjF,MAAM,CAAC+B,IAAP,CAAY6C,GAAG,CAACC,IAAD,CAAf,EAAuBzK,MAAvB,GAAgC,CAAhC,IAAqC,CAACmK,SAAzC,EAAmD;AACtDA,YAAAA,SAAS,GAAG,IAAZ;;AAEA,iBAAI,IAAIgB,QAAR,IAAoBX,GAAG,CAACC,IAAD,CAAH,CAAUW,SAA9B,EAAwC;AACtC,kBAAIC,IAAI,GAAGb,GAAG,CAACC,IAAD,CAAH,CAAUW,SAAV,CAAoBD,QAApB,EAA8BvF,MAAM,CAAC+B,IAAP,CAAY6C,GAAG,CAACC,IAAD,CAAH,CAAUW,SAAV,CAAoBD,QAApB,CAAZ,EAA2C,CAA3C,CAA9B,CAAX;AAEAf,cAAAA,iBAAiB,CAACxH,IAAlB,CAAuB6D,QAAQ,CAAC4E,IAAI,CAAC5C,KAAN,CAA/B;AACA7J,cAAAA,QAAQ,CAACgE,IAAT,CAAcyI,IAAI,CAACrD,IAAL,GAAY,GAAZ,GAAkBqD,IAAI,CAAC5C,KAAvB,GAA+B,GAA/B,GAAqC4C,IAAI,CAACC,IAAxD;AACA1B,cAAAA,MAAM,IAAInD,QAAQ,CAAC4E,IAAI,CAAC5C,KAAN,CAAlB;AACAoB,cAAAA,WAAW,GAAGjE,MAAM,CAAC+B,IAAP,CAAY6C,GAAG,CAACC,IAAD,CAAH,CAAUW,SAAtB,EAAiCpL,MAA/C;;AAEA,kBAAGyG,QAAQ,CAAC4E,IAAI,CAAC5C,KAAN,CAAR,GAAuBhC,QAAQ,CAACqD,OAAO,CAAChH,KAAR,CAAc,GAAd,EAAmB,CAAnB,CAAD,CAAlC,EAA2D;AACzDgH,gBAAAA,OAAO,GAAGuB,IAAI,CAACrD,IAAL,GAAY,GAAZ,GAAkBvB,QAAQ,CAAC4E,IAAI,CAAC5C,KAAN,CAApC;AACD;;AAED,kBAAGhC,QAAQ,CAAC4E,IAAI,CAAC5C,KAAN,CAAR,GAAuBhC,QAAQ,CAACsD,MAAM,CAACjH,KAAP,CAAa,GAAb,EAAkB,CAAlB,CAAD,CAAlC,EAA0D;AACxDiH,gBAAAA,MAAM,GAAGsB,IAAI,CAACrD,IAAL,GAAY,GAAZ,GAAkBvB,QAAQ,CAAC4E,IAAI,CAAC5C,KAAN,CAAnC;AACD;;AAED,kBAAI8C,EAAE,GAAGpN,QAAQ,CAACmG,aAAT,CAAuB,IAAvB,CAAT;AACAiH,cAAAA,EAAE,CAAC5G,SAAH,GAAewG,QAAf;AACA,kBAAIjI,QAAQ,GAAGuH,IAAf;;AACAc,cAAAA,EAAE,CAACtE,OAAH,GAAa,YAAW;AAAEuE,gBAAAA,mBAAmB,CAAC,KAAK7G,SAAN,EAAiBzB,QAAjB,CAAnB;AAAgD,eAA1E;;AAEAgH,cAAAA,KAAK,CAACrF,WAAN,CAAkB1G,QAAQ,CAACmG,aAAT,CAAuB,IAAvB,CAAlB;AAEH,kBAAI0D,IAAI,GAAG7J,QAAQ,CAACmG,aAAT,CAAuB,IAAvB,CAAX;AACG0D,cAAAA,IAAI,CAAC3J,KAAL,CAAW0M,WAAX,GAAyB,MAAzB;AACA/C,cAAAA,IAAI,CAAClB,EAAL,GAAU,MAAV;AACH,kBAAI2B,KAAK,GAAGtK,QAAQ,CAACmG,aAAT,CAAuB,IAAvB,CAAZ;AACA,kBAAImH,UAAU,GAAGtN,QAAQ,CAACmG,aAAT,CAAuB,IAAvB,CAAjB;AACG,kBAAIgH,IAAI,GAAGnN,QAAQ,CAACmG,aAAT,CAAuB,IAAvB,CAAX;AAEH0D,cAAAA,IAAI,CAAC9G,SAAL,GAAiBmK,IAAI,CAACrD,IAAtB;AACGA,cAAAA,IAAI,CAAClB,EAAL,GAAU,MAAV;AAEH2B,cAAAA,KAAK,CAACvH,SAAN,GAAkBmK,IAAI,CAAC5C,KAAL,GAAa,GAA/B;AACGA,cAAAA,KAAK,CAAC3B,EAAN,GAAW,OAAX;AAEAwE,cAAAA,IAAI,CAACpK,SAAL,GAAiBmK,IAAI,CAACC,IAAL,GAAY,OAA7B;AACAA,cAAAA,IAAI,CAACxE,EAAL,GAAU,MAAV;AAEH2E,cAAAA,UAAU,CAACvK,SAAX,GAAuBwK,qBAAqB,CAACjF,QAAQ,CAAC4E,IAAI,CAAC5C,KAAN,CAAT,EAAuB+B,GAAG,CAACC,IAAD,CAAH,CAAUW,SAAjC,EAA4CC,IAAI,CAACrD,IAAjD,CAArB,GAA8E,IAArG;AACGyD,cAAAA,UAAU,CAAC3E,EAAX,GAAgB,YAAhB;AAEHyE,cAAAA,EAAE,CAAC1G,WAAH,CAAemD,IAAf;AACAuD,cAAAA,EAAE,CAAC1G,WAAH,CAAe4D,KAAf;AACA8C,cAAAA,EAAE,CAAC1G,WAAH,CAAe4G,UAAf;AACGF,cAAAA,EAAE,CAAC1G,WAAH,CAAeyG,IAAf;AACHpB,cAAAA,KAAK,CAACrF,WAAN,CAAkB0G,EAAlB;AAEGvC,cAAAA,MAAM,CAACnE,WAAP,CAAmBqF,KAAnB;AACA/L,cAAAA,QAAQ,CAAC+B,cAAT,CAAwB,MAAxB,EAAgC2E,WAAhC,CAA4CmE,MAA5C;AACD;AACF;AACF;AACF;AACF;;AAEC,QAAI2C,WAAW,GAAGxN,QAAQ,CAAC+B,cAAT,CAAwB,cAAxB,CAAlB;AACA,QAAI0L,EAAE,GAAGzN,QAAQ,CAACmG,aAAT,CAAuB,IAAvB,CAAT;AACAsH,IAAAA,EAAE,CAACvN,KAAH,CAASwN,KAAT,GAAiB,OAAjB;AACAD,IAAAA,EAAE,CAACvN,KAAH,CAAS+C,WAAT,GAAuB,MAAvB;AAEA,QAAI0K,GAAG,GAAG3N,QAAQ,CAACmG,aAAT,CAAuB,IAAvB,CAAV;AACAwH,IAAAA,GAAG,CAAC5K,SAAJ,GAAgB,oBAAoB,CAAC0I,MAAM,GAAGC,WAAV,EAAuBlB,OAAvB,CAA+B,CAA/B,CAApB,GAAwD,GAAxE;AACAmD,IAAAA,GAAG,CAACzN,KAAJ,CAAU0N,QAAV,GAAqB,MAArB;AAEA,QAAIC,aAAa,GAAG7N,QAAQ,CAACmG,aAAT,CAAuB,IAAvB,CAApB;AACA0H,IAAAA,aAAa,CAAC9K,SAAd,GAA0B,qBAAqB4I,OAAO,CAAChH,KAAR,CAAc,GAAd,EAAmB,CAAnB,CAArB,GAA6C,IAA7C,GAAoDgH,OAAO,CAAChH,KAAR,CAAc,GAAd,EAAmB,CAAnB,CAApD,GAA4E,IAAtG;AACAkJ,IAAAA,aAAa,CAAC3N,KAAd,CAAoB0N,QAApB,GAA+B,MAA/B;AAEA,QAAIE,YAAY,GAAG9N,QAAQ,CAACmG,aAAT,CAAuB,IAAvB,CAAnB;AACA2H,IAAAA,YAAY,CAAC/K,SAAb,GAAyB,oBAAoB6I,MAAM,CAACjH,KAAP,CAAa,GAAb,EAAkB,CAAlB,CAApB,GAA2C,IAA3C,GAAkDiH,MAAM,CAACjH,KAAP,CAAa,GAAb,EAAkB,CAAlB,CAAlD,GAAyE,IAAlG;AACAmJ,IAAAA,YAAY,CAAC5N,KAAb,CAAmB0N,QAAnB,GAA8B,MAA9B;AAEA,QAAIG,WAAW,GAAG/N,QAAQ,CAACmG,aAAT,CAAuB,IAAvB,CAAlB,CA5LmB,CA8LnB;;AACA6H,IAAAA,IAAI,GAAG/B,iBAAiB,CAACgC,MAAlB,CAAyB,UAACC,CAAD,EAAGC,CAAH;AAAA,aAASD,CAAC,GAACC,CAAX;AAAA,KAAzB,IAAuClC,iBAAiB,CAACpK,MAAhE;AACAuM,IAAAA,EAAE,GAAGxD,IAAI,CAACyD,IAAL,CAAUpC,iBAAiB,CAACqC,GAAlB,CAAsB,UAAAnD,CAAC;AAAA,aAAIP,IAAI,CAAC2D,GAAL,CAASpD,CAAC,GAAC6C,IAAX,EAAgB,CAAhB,CAAJ;AAAA,KAAvB,EAA+CC,MAA/C,CAAsD,UAACC,CAAD,EAAGC,CAAH;AAAA,aAASD,CAAC,GAACC,CAAX;AAAA,KAAtD,IAAoElC,iBAAiB,CAACpK,MAAhG,CAAL;AAEAkM,IAAAA,WAAW,CAAChL,SAAZ,GAAwB,6BAA6BqL,EAAE,CAAC5D,OAAH,CAAW,CAAX,CAArD;AACAuD,IAAAA,WAAW,CAAC7N,KAAZ,CAAkB0N,QAAlB,GAA6B,MAA7B;AAEAH,IAAAA,EAAE,CAAC/G,WAAH,CAAeiH,GAAf;AACAF,IAAAA,EAAE,CAAC/G,WAAH,CAAemH,aAAf;AACAL,IAAAA,WAAW,CAAC9G,WAAZ,CAAwB1G,QAAQ,CAACmG,aAAT,CAAuB,IAAvB,CAAxB;AACAsH,IAAAA,EAAE,CAAC/G,WAAH,CAAeoH,YAAf;AACAL,IAAAA,EAAE,CAAC/G,WAAH,CAAeqH,WAAf;AAEAP,IAAAA,WAAW,CAAC9G,WAAZ,CAAwB+G,EAAxB;AACD,GA5MH,MA6MO;AACH,QAAIe,cAAc,GAAGxO,QAAQ,CAAC4B,sBAAT,CAAgC,OAAhC,CAArB;AACA4M,IAAAA,cAAc,CAAC,CAAD,CAAd,CAAkBtO,KAAlB,CAAwBC,OAAxB,GAAkC,OAAlC;AAEAH,IAAAA,QAAQ,CAAC+B,cAAT,CAAwB,SAAxB,EAAmC7B,KAAnC,CAAyCC,OAAzC,GAAmD,SAAnD;AACAH,IAAAA,QAAQ,CAAC+B,cAAT,CAAwB,cAAxB,EAAwC7B,KAAxC,CAA8CC,OAA9C,GAAwD,SAAxD;AACAH,IAAAA,QAAQ,CAAC+B,cAAT,CAAwB,eAAxB,EAAyC7B,KAAzC,CAA+CC,OAA/C,GAAyD,MAAzD;AACAH,IAAAA,QAAQ,CAAC+B,cAAT,CAAwB,cAAxB,EAAwC7B,KAAxC,CAA8CC,OAA9C,GAAwD,MAAxD;AAEAH,IAAAA,QAAQ,CAACC,IAAT,CAAcC,KAAd,CAAoBgK,eAApB,GAAsC,0EAAtC;AACD;;AACDrJ,EAAAA,iBAAiB,GAAG,IAApB;AACH;;AAED,SAAS2L,oBAAT,CAA8BrE,IAA9B,EAAoC9D,GAApC,EAAyC;AACvC,MAAIoK,OAAO,GAAGzO,QAAQ,CAAC+B,cAAT,CAAwB,oBAAxB,CAAd;AAED;;AAED,SAASwL,qBAAT,CAA+BjD,KAA/B,EAAsCF,IAAtC,EAA4CP,IAA5C,EAAkD;AAChD,MAAI6E,QAAQ,GAAG,CAAf;AACA,MAAIC,QAAQ,GAAG,CAAf;;AAEA,OAAI,IAAIC,OAAR,IAAmBxE,IAAnB,EAAyB;AACvB,QAAGE,KAAK,GAAGhC,QAAQ,CAAC8B,IAAI,CAACwE,OAAD,CAAJ,CAAcnH,MAAM,CAAC+B,IAAP,CAAYY,IAAI,CAACwE,OAAD,CAAhB,EAA2B,CAA3B,CAAd,EAA6CtE,KAA9C,CAAnB,EAAyE;AACvEoE,MAAAA,QAAQ;AACT,KAFD,MAGK,IAAGpE,KAAK,IAAIhC,QAAQ,CAAC8B,IAAI,CAACwE,OAAD,CAAJ,CAAcnH,MAAM,CAAC+B,IAAP,CAAYY,IAAI,CAACwE,OAAD,CAAhB,EAA2B,CAA3B,CAAd,EAA6CtE,KAA9C,CAAjB,IAAyET,IAAI,IAAIO,IAAI,CAACwE,OAAD,CAAJ,CAAcnH,MAAM,CAAC+B,IAAP,CAAYY,IAAI,CAACwE,OAAD,CAAhB,EAA2B,CAA3B,CAAd,EAA6C/E,IAAjI,EAAuI;AAC1I8E,MAAAA,QAAQ;AACT;AACF;;AACD,SAAO,MAAM,CAACD,QAAQ,GAAIjH,MAAM,CAAC+B,IAAP,CAAYY,IAAZ,EAAkBvI,MAA/B,EAAwC2I,OAAxC,CAAgD,CAAhD,CAAb;AACD,EAED;;;AACA,SAASqE,eAAT,GAA2B;AACzB,MAAIC,OAAO,GAAG9O,QAAQ,CAAC+O,oBAAT,CAA8B,IAA9B,CAAd;;AAEA,OAAI,IAAIpN,CAAC,GAAG,CAAZ,EAAeA,CAAC,GAAGmN,OAAO,CAACjN,MAA3B,EAAmCF,CAAC,EAApC,EAAwC;AACtCmN,IAAAA,OAAO,CAACnN,CAAD,CAAP,CAAW6E,SAAX,GAAuB,EAAvB;AACD;AACF,EAED;;;AACA,SAASrG,OAAT,CAAiBsD,KAAjB,EAAwB;AACtB,MAAGA,KAAK,IAAI,2BAAZ,EAAyC;AACvCzD,IAAAA,QAAQ,CAAC+B,cAAT,CAAwB,MAAxB,EAAgC7B,KAAhC,CAAsCC,OAAtC,GAAgD,MAAhD;AACAH,IAAAA,QAAQ,CAAC+B,cAAT,CAAwB,MAAxB,EAAgC7B,KAAhC,CAAsCC,OAAtC,GAAgD,SAAhD;AACAH,IAAAA,QAAQ,CAAC+B,cAAT,CAAwB,aAAxB,EAAuC7B,KAAvC,CAA6CC,OAA7C,GAAuD,MAAvD;AACAH,IAAAA,QAAQ,CAAC+B,cAAT,CAAwB,UAAxB,EAAoC7B,KAApC,CAA0CC,OAA1C,GAAoD,MAApD;AACAH,IAAAA,QAAQ,CAAC+B,cAAT,CAAwB,aAAxB,EAAuC7B,KAAvC,CAA6CC,OAA7C,GAAuD,MAAvD;AACAH,IAAAA,QAAQ,CAAC+B,cAAT,CAAwB,YAAxB,EAAsC7B,KAAtC,CAA4CC,OAA5C,GAAsD,MAAtD;AACD,GAPD,MAQK,IAAGsD,KAAK,IAAI,2BAAZ,EAAyC;AAC5CzD,IAAAA,QAAQ,CAAC+B,cAAT,CAAwB,MAAxB,EAAgC7B,KAAhC,CAAsCC,OAAtC,GAAgD,SAAhD;AACAH,IAAAA,QAAQ,CAAC+B,cAAT,CAAwB,MAAxB,EAAgC7B,KAAhC,CAAsCC,OAAtC,GAAgD,MAAhD;AACAH,IAAAA,QAAQ,CAAC+B,cAAT,CAAwB,aAAxB,EAAuC7B,KAAvC,CAA6CC,OAA7C,GAAuD,MAAvD;AACAH,IAAAA,QAAQ,CAAC+B,cAAT,CAAwB,UAAxB,EAAoC7B,KAApC,CAA0CC,OAA1C,GAAoD,MAApD;AACAH,IAAAA,QAAQ,CAAC+B,cAAT,CAAwB,aAAxB,EAAuC7B,KAAvC,CAA6CC,OAA7C,GAAuD,MAAvD;AACAH,IAAAA,QAAQ,CAAC+B,cAAT,CAAwB,YAAxB,EAAsC7B,KAAtC,CAA4CC,OAA5C,GAAsD,MAAtD;AACD,GAPI,MAQA,IAAGsD,KAAK,IAAI,6BAAZ,EAA2C;AAC9CuL,IAAAA,mBAAmB,GAD2B,CACvB;;AACvBhP,IAAAA,QAAQ,CAAC+B,cAAT,CAAwB,UAAxB,EAAoC7B,KAApC,CAA0CC,OAA1C,GAAoD,MAApD;AACAH,IAAAA,QAAQ,CAAC+B,cAAT,CAAwB,aAAxB,EAAuC7B,KAAvC,CAA6CC,OAA7C,GAAuD,MAAvD;AACAH,IAAAA,QAAQ,CAAC+B,cAAT,CAAwB,YAAxB,EAAsC7B,KAAtC,CAA4CC,OAA5C,GAAsD,MAAtD;AACD,GALI,MAMA,IAAGsD,KAAK,IAAI,0BAAZ,EAAwC;AAC3CzD,IAAAA,QAAQ,CAAC+B,cAAT,CAAwB,MAAxB,EAAgC7B,KAAhC,CAAsCC,OAAtC,GAAgD,MAAhD;AACAH,IAAAA,QAAQ,CAAC+B,cAAT,CAAwB,MAAxB,EAAgC7B,KAAhC,CAAsCC,OAAtC,GAAgD,MAAhD;AACAH,IAAAA,QAAQ,CAAC+B,cAAT,CAAwB,aAAxB,EAAuC7B,KAAvC,CAA6CC,OAA7C,GAAuD,MAAvD;AACAH,IAAAA,QAAQ,CAAC+B,cAAT,CAAwB,UAAxB,EAAoC7B,KAApC,CAA0CC,OAA1C,GAAoD,SAApD;AACAH,IAAAA,QAAQ,CAAC+B,cAAT,CAAwB,aAAxB,EAAuC7B,KAAvC,CAA6CC,OAA7C,GAAuD,MAAvD;AACAH,IAAAA,QAAQ,CAAC+B,cAAT,CAAwB,YAAxB,EAAsC7B,KAAtC,CAA4CC,OAA5C,GAAsD,MAAtD;AAEA,QAAI8O,MAAM,GAAG/N,CAAC,CAAC,gBAAD,CAAd;AACA+N,IAAAA,MAAM,CAACC,IAAP,CAAY,KAAZ,EAAmB,4DAAnB;AACD,GAVI,MAWA,IAAGzL,KAAK,IAAI,+BAAZ,EAA6C;AAChDzD,IAAAA,QAAQ,CAAC+B,cAAT,CAAwB,MAAxB,EAAgC7B,KAAhC,CAAsCC,OAAtC,GAAgD,MAAhD;AACAH,IAAAA,QAAQ,CAAC+B,cAAT,CAAwB,MAAxB,EAAgC7B,KAAhC,CAAsCC,OAAtC,GAAgD,MAAhD;AACAH,IAAAA,QAAQ,CAAC+B,cAAT,CAAwB,aAAxB,EAAuC7B,KAAvC,CAA6CC,OAA7C,GAAuD,MAAvD;AACAH,IAAAA,QAAQ,CAAC+B,cAAT,CAAwB,YAAxB,EAAsC7B,KAAtC,CAA4CC,OAA5C,GAAsD,SAAtD;AACAH,IAAAA,QAAQ,CAAC+B,cAAT,CAAwB,UAAxB,EAAoC7B,KAApC,CAA0CC,OAA1C,GAAoD,MAApD;AACAH,IAAAA,QAAQ,CAAC+B,cAAT,CAAwB,aAAxB,EAAuC7B,KAAvC,CAA6CC,OAA7C,GAAuD,MAAvD;AAEA,QAAI8O,MAAM,GAAG/N,CAAC,CAAC,kBAAD,CAAd;AACA+N,IAAAA,MAAM,CAACC,IAAP,CAAY,KAAZ,EAAmB,4DAAnB;AACD;AACF,EAED;;;AACA,SAASC,eAAT,GAA2B;AACzBnP,EAAAA,QAAQ,CAAC+B,cAAT,CAAwB,eAAxB,EAAyC7B,KAAzC,CAA+CC,OAA/C,GAAyD,MAAzD;AACAH,EAAAA,QAAQ,CAAC+B,cAAT,CAAwB,aAAxB,EAAuC7B,KAAvC,CAA6CC,OAA7C,GAAuD,OAAvD;AACAH,EAAAA,QAAQ,CAAC+B,cAAT,CAAwB,SAAxB,EAAmC7B,KAAnC,CAAyCC,OAAzC,GAAmD,MAAnD;AACAH,EAAAA,QAAQ,CAAC+B,cAAT,CAAwB,cAAxB,EAAwC7B,KAAxC,CAA8CC,OAA9C,GAAwD,MAAxD;AACAH,EAAAA,QAAQ,CAAC+B,cAAT,CAAwB,UAAxB,EAAoC7B,KAApC,CAA0CC,OAA1C,GAAoD,MAApD;AACAH,EAAAA,QAAQ,CAAC+B,cAAT,CAAwB,cAAxB,EAAwC7B,KAAxC,CAA8CC,OAA9C,GAAwD,MAAxD;AAEAH,EAAAA,QAAQ,CAACC,IAAT,CAAcC,KAAd,CAAoBgK,eAApB,GAAsC,MAAtC;AACD;;AAED,SAASkF,eAAT,GAA2B;AACzB,MAAIZ,cAAc,GAAGxO,QAAQ,CAAC4B,sBAAT,CAAgC,OAAhC,CAArB;;AAEA,OAAI,IAAID,CAAC,GAAG,CAAZ,EAAeA,CAAC,GAAG6M,cAAc,CAAC3M,MAAlC,EAA0CF,CAAC,EAA3C,EAA+C;AAC7C6M,IAAAA,cAAc,CAAC7M,CAAD,CAAd,CAAkBzB,KAAlB,CAAwBC,OAAxB,GAAkC,MAAlC;AACD;;AAEDH,EAAAA,QAAQ,CAAC+B,cAAT,CAAwB,SAAxB,EAAmC7B,KAAnC,CAAyCC,OAAzC,GAAmD,MAAnD;AACAH,EAAAA,QAAQ,CAAC+B,cAAT,CAAwB,cAAxB,EAAwC7B,KAAxC,CAA8CC,OAA9C,GAAwD,MAAxD;AACAH,EAAAA,QAAQ,CAAC+B,cAAT,CAAwB,eAAxB,EAAyC7B,KAAzC,CAA+CC,OAA/C,GAAyD,SAAzD;AACAH,EAAAA,QAAQ,CAAC+B,cAAT,CAAwB,cAAxB,EAAwC7B,KAAxC,CAA8CC,OAA9C,GAAwD,MAAxD;AAEAH,EAAAA,QAAQ,CAACC,IAAT,CAAcC,KAAd,CAAoBgK,eAApB,GAAsC,4DAAtC;AACAhJ,EAAAA,CAAC,CAAClB,QAAQ,CAAC+B,cAAT,CAAwB,cAAxB,CAAD,CAAD,CAA2C+H,KAA3C;AACD;;AAED,SAASuF,kBAAT,GAA8B;AAC5BD,EAAAA,eAAe;AAAID,EAAAA,eAAe;AACnC,EAED;;;AACA,SAAS9B,mBAAT,CAA6BxD,IAA7B,EAAmC1B,IAAnC,EAAyC;AACvCnI,EAAAA,QAAQ,CAAC+B,cAAT,CAAwB,cAAxB,EAAwC7B,KAAxC,CAA8CC,OAA9C,GAAwD,MAAxD;AACAH,EAAAA,QAAQ,CAAC+B,cAAT,CAAwB,mBAAxB,EAA6C7B,KAA7C,CAAmDC,OAAnD,GAA6D,SAA7D;AACAH,EAAAA,QAAQ,CAACC,IAAT,CAAcC,KAAd,CAAoBgK,eAApB,GAAsC,MAAtC;AACA,MAAIoF,MAAM,GAAG,EAAb;AACA,MAAIC,OAAJ,CALuC,CAOvC;;AAEA,MAAIxD,KAAK,GAAG/L,QAAQ,CAAC4B,sBAAT,CAAgC,OAAhC,CAAZ;;AACA,OAAI,IAAID,CAAC,GAAG,CAAZ,EAAeA,CAAC,GAAGoK,KAAK,CAAClK,MAAzB,EAAiCF,CAAC,EAAlC,EAAsC;AACpCoK,IAAAA,KAAK,CAACpK,CAAD,CAAL,CAASzB,KAAT,CAAeC,OAAf,GAAyB,MAAzB;AACD;;AAEDgE,EAAAA,QAAQ,CAACC,QAAT,GAAoBC,GAApB,CAAwB,cAAclB,QAAd,GAAyB,WAAzB,GAAuCrD,YAAY,CAACC,OAAb,CAAqB,WAArB,CAAvC,GAA2E,WAAnG,EAAgH6F,IAAhH,CAAqH,OAArH,EAA8H,UAAStB,QAAT,EAAmB;AAC/I,SAAI,IAAIkL,IAAR,IAAgBlL,QAAQ,CAACI,GAAT,EAAhB,EAAgC;AAC9B,UAAIwI,IAAI,GAAG5I,QAAQ,CAACI,GAAT,GAAe8K,IAAf,CAAX;AACA,UAAI7G,EAAE,GAAGuE,IAAI,CAACvI,KAAL,CAAW,GAAX,EAAgB,CAAhB,CAAT;AACA,UAAI8K,QAAQ,GAAGvC,IAAI,CAACvI,KAAL,CAAW,GAAX,EAAgB,CAAhB,CAAf;;AAEA,UAAGkF,IAAI,IAAI4F,QAAX,EAAqB;AACnBF,QAAAA,OAAO,GAAG5G,EAAV;AACD;AACF;AACF,GAVD;AAYAxE,EAAAA,QAAQ,CAACC,QAAT,GAAoBC,GAApB,CAAwB,cAAclB,QAAd,GAAyB,WAAzB,GAAuCrD,YAAY,CAACC,OAAb,CAAqB,WAArB,CAAvC,GAA2E,SAA3E,GAAuFoI,IAA/G,EAAqHvC,IAArH,CAA0H,OAA1H,EAAmI,UAAStB,QAAT,EAAmB;AACpJ,QAAI4I,IAAI,GAAI5I,QAAQ,CAACI,GAAT,GAAeuI,SAAf,CAAyBpD,IAAzB,EAA+BpC,MAAM,CAAC+B,IAAP,CAAYlF,QAAQ,CAACI,GAAT,GAAeuI,SAAf,CAAyBpD,IAAzB,CAAZ,EAA4C,CAA5C,CAA/B,CAAZ;;AAEA7J,IAAAA,QAAQ,CAAC+B,cAAT,CAAwB,aAAxB,EAAuC+G,OAAvC,GAAiD,YAAW;AAC1D,WAAI,IAAI4G,QAAR,IAAoBpL,QAAQ,CAACI,GAAT,GAAeiL,KAAnC,EAA0C;AACxC,YAAIhH,EAAE,GAAIrE,QAAQ,CAACI,GAAT,GAAeiL,KAAf,CAAqBD,QAArB,CAAV;;AAEA,YAAG/G,EAAE,IAAI4G,OAAT,EAAkB;AAChBpL,UAAAA,QAAQ,CAACC,QAAT,GAAoBC,GAApB,CAAwB,cAAclB,QAAd,GAAyB,WAAzB,GAAuCrD,YAAY,CAACC,OAAb,CAAqB,WAArB,CAAvC,GAA2E,SAA3E,GAAuFoI,IAAvF,GAA8F,SAAtH,EAAiItC,KAAjI,CAAuI6J,QAAvI,EAAiJ3J,MAAjJ;AACD;AACF;;AAEDvC,MAAAA,IAAI,CAAC,UAAD,EAAaqG,IAAI,GAAG,kCAAP,GAA4CA,IAA5C,GAAmD,qCAAhE,EAAuG,SAAvG,CAAJ;AACD,KAVD;;AAYA,QAAI+F,aAAa,GAAG1C,IAAI,CAAC2C,UAAL,GAAkB,GAAlB,GAAwBvL,QAAQ,CAACI,GAAT,GAAe+C,MAAM,CAAC+B,IAAP,CAAYlF,QAAQ,CAACI,GAAT,EAAZ,EAA4B,CAA5B,CAAf,EAA+CU,eAA3F;AACApF,IAAAA,QAAQ,CAAC+B,cAAT,CAAwB,WAAxB,EAAqCgB,SAArC,GAAkD6M,aAAD,CAAgBpF,OAAhB,CAAwB,CAAxB,IAA6B,KAA7B,GAAqClG,QAAQ,CAACI,GAAT,GAAe+C,MAAM,CAAC+B,IAAP,CAAYlF,QAAQ,CAACI,GAAT,EAAZ,EAA4B,CAA5B,CAAf,EAA+CU,eAArI;AACApF,IAAAA,QAAQ,CAAC+B,cAAT,CAAwB,OAAxB,EAAiCgB,SAAjC,GAA6CmK,IAAI,CAAC2C,UAAL,GAAkB,GAA/D;AAEA,QAAIC,UAAU,GAAG,EAAjB;AACAhQ,IAAAA,YAAY,CAACqK,OAAb,CAAqB,wBAArB,EAA+C,CAA/C;;AAEA,SAAI,IAAIxI,CAAC,GAAG,CAAZ,EAAeA,CAAC,GAAG8F,MAAM,CAAC+B,IAAP,CAAY0D,IAAI,CAAC6C,OAAjB,EAA0BlO,MAA7C,EAAqDF,CAAC,EAAtD,EAA0D;AAExD,UAAG2C,QAAQ,CAACI,GAAT,GAAe+C,MAAM,CAAC+B,IAAP,CAAYlF,QAAQ,CAACI,GAAT,EAAZ,EAA4B,CAA5B,CAAf,EAA+Cc,SAA/C,CAAyD7D,CAAzD,EAA4D8D,IAA5D,IAAoE,IAAvE,EAA6E;AAC3EqK,QAAAA,UAAU,GAAGxL,QAAQ,CAACI,GAAT,GAAe+C,MAAM,CAAC+B,IAAP,CAAYlF,QAAQ,CAACI,GAAT,EAAZ,EAA4B,CAA5B,CAAf,EAA+Cc,SAA/C,CAAyD7D,CAAzD,EAA4DgE,OAA5D,CAAoE,CAApE,CAAb;AACD,OAFD,MAGK,IAAGrB,QAAQ,CAACI,GAAT,GAAe+C,MAAM,CAAC+B,IAAP,CAAYlF,QAAQ,CAACI,GAAT,EAAZ,EAA4B,CAA5B,CAAf,EAA+Cc,SAA/C,CAAyD7D,CAAzD,EAA4D8D,IAA5D,IAAoE,IAAvE,EAA4E;AAC/EqK,QAAAA,UAAU,GAAGxL,QAAQ,CAACI,GAAT,GAAe+C,MAAM,CAAC+B,IAAP,CAAYlF,QAAQ,CAACI,GAAT,EAAZ,EAA4B,CAA5B,CAAf,EAA+Cc,SAA/C,CAAyD7D,CAAzD,EAA4D+F,OAAzE;AACD,OAFI,MAGA,IAAGpD,QAAQ,CAACI,GAAT,GAAe+C,MAAM,CAAC+B,IAAP,CAAYlF,QAAQ,CAACI,GAAT,EAAZ,EAA4B,CAA5B,CAAf,EAA+Cc,SAA/C,CAAyD7D,CAAzD,EAA4D8D,IAA5D,IAAoE,IAAvE,EAA6E;AAChFqK,QAAAA,UAAU,GAAG,EAAb;AACD;;AACDE,MAAAA,oBAAoB,EAClB;AACA9C,MAAAA,IAAI,CAAC6C,OAAL,CAAapO,CAAb,EAAgBgD,KAAhB,CAAsB,GAAtB,EAA2B,CAA3B,CAFkB,EAGlB;AACAmL,MAAAA,UAJkB,EAKlB;AACArI,MAAAA,MAAM,CAAC+B,IAAP,CAAYlF,QAAQ,CAACI,GAAT,GAAe+C,MAAM,CAAC+B,IAAP,CAAYlF,QAAQ,CAACI,GAAT,EAAZ,EAA4B,CAA5B,CAAf,EAA+Cc,SAA/C,CAAyD7D,CAAzD,EAA4DgE,OAAxE,EAAiF9D,MAN/D,EAOlB;AACAyC,MAAAA,QAAQ,CAACI,GAAT,GAAe+C,MAAM,CAAC+B,IAAP,CAAYlF,QAAQ,CAACI,GAAT,EAAZ,EAA4B,CAA5B,CAAf,EAA+Cc,SAA/C,CAAyD7D,CAAzD,EAA4D+D,MAR1C,EASlB;AACApB,MAAAA,QAAQ,CAACI,GAAT,GAAe+C,MAAM,CAAC+B,IAAP,CAAYlF,QAAQ,CAACI,GAAT,EAAZ,EAA4B,CAA5B,CAAf,EAA+Cc,SAA/C,CAAyD7D,CAAzD,CAVkB,EAWlB;AACAkI,MAAAA,IAZkB,EAalB;AACA1B,MAAAA,IAdkB,EAelB;AACA7D,MAAAA,QAAQ,CAACI,GAAT,GAAe+C,MAAM,CAAC+B,IAAP,CAAYlF,QAAQ,CAACI,GAAT,EAAZ,EAA4B,CAA5B,CAAf,EAA+CU,eAhB7B,CAApB;AAkBD;AACF,GApDD;AAqDD,EAED;;;AACA,SAAS4K,oBAAT,CAA8BC,UAA9B,EAA0CH,UAA1C,EAAsDI,gBAAtD,EAAwEC,eAAxE,EAAyF3K,SAAzF,EAAoG4K,QAApG,EAA8GC,eAA9G,EAA+HjL,eAA/H,EAAgJ;AAC9I,MAAIkL,aAAa,GAAG,CAApB;;AACA,MAAGR,UAAU,IAAI,MAAjB,EAAwB;AACtBA,IAAAA,UAAU,GAAG,GAAb;AACAI,IAAAA,gBAAgB,GAAG,CAAnB;AACD,GAHD,MAIK,IAAGJ,UAAU,IAAI,OAAjB,EAA0B;AAC7BA,IAAAA,UAAU,GAAG,GAAb;AACAI,IAAAA,gBAAgB,GAAG,CAAnB;AACD;;AAED,MAAIK,OAAO,GAAG,KAAd;;AACA,MAAGN,UAAU,IAAIH,UAAjB,EAA6B;AAC3BS,IAAAA,OAAO,GAAG,IAAV;AACD;;AAED,MAAG/K,SAAS,CAACC,IAAV,IAAkB,IAAlB,IAA0B8K,OAA7B,EAAsC;AACpCzQ,IAAAA,YAAY,CAACqK,OAAb,CAAqB,wBAArB,EAA+C7B,QAAQ,CAACxI,YAAY,CAACC,OAAb,CAAqB,wBAArB,CAAD,CAAR,GAA2DuI,QAAQ,CAAC9C,SAAS,CAACE,MAAX,CAAlH;AACD;;AAED,MAAI0E,IAAI,GAAGpK,QAAQ,CAAC+B,cAAT,CAAwB,eAAxB,CAAX;AAEA,MAAIuF,QAAQ,GAAGtH,QAAQ,CAACmG,aAAT,CAAuB,KAAvB,CAAf;AACAmB,EAAAA,QAAQ,CAACd,SAAT,GAAqB,UAArB;AACAc,EAAAA,QAAQ,CAACqB,EAAT,GAAc3I,QAAQ,CAAC4B,sBAAT,CAAgC,UAAhC,EAA4CC,MAA5C,GAAqD,CAAnE;AAEA,MAAI2O,GAAG,GAAGxQ,QAAQ,CAACmG,aAAT,CAAuB,MAAvB,CAAV;AACAqK,EAAAA,GAAG,CAACzN,SAAJ,GAAgB/C,QAAQ,CAAC4B,sBAAT,CAAgC,UAAhC,EAA4CC,MAA5C,GAAqD,CAArD,GAAyD,IAAzE;AACA2O,EAAAA,GAAG,CAACtQ,KAAJ,CAAU8C,KAAV,GAAkB,SAAlB;AAEA,MAAIyN,EAAE,GAAGzQ,QAAQ,CAACmG,aAAT,CAAuB,IAAvB,CAAT;AAEA,MAAIuK,cAAc,GAAG1Q,QAAQ,CAACmG,aAAT,CAAuB,OAAvB,CAArB;AACAuK,EAAAA,cAAc,CAACC,QAAf,GAA0B,IAA1B;AACAD,EAAAA,cAAc,CAAC5M,KAAf,GAAuB0B,SAAS,CAAC/B,KAAjC;AACAiN,EAAAA,cAAc,CAAC/H,EAAf,GAAoB,gBAApB;AAEArB,EAAAA,QAAQ,CAACZ,WAAT,CAAqB8J,GAArB;AACAlJ,EAAAA,QAAQ,CAACZ,WAAT,CAAqBgK,cAArB;;AAEA,MAAGH,OAAH,EAAY;AACVD,IAAAA,aAAa,GAAGH,eAAhB;AACD;;AAED,MAAIzK,MAAM,GAAG1F,QAAQ,CAACmG,aAAT,CAAuB,KAAvB,CAAb;AACAT,EAAAA,MAAM,CAACiD,EAAP,GAAY,QAAZ;AAEA,MAAIiI,IAAI,GAAG5Q,QAAQ,CAACmG,aAAT,CAAuB,MAAvB,CAAX;AACAyK,EAAAA,IAAI,CAAC7N,SAAL,GAAiB,IAAjB;AAEA,MAAI8N,SAAS,GAAG7Q,QAAQ,CAACmG,aAAT,CAAuB,MAAvB,CAAhB;AACA0K,EAAAA,SAAS,CAACpL,IAAV,GAAiB,MAAjB;AACAoL,EAAAA,SAAS,CAAClI,EAAV,GAAe,WAAf;AACAkI,EAAAA,SAAS,CAAC9N,SAAV,GAAsBoN,eAAtB;AAEA,MAAIW,aAAa,GAAG9Q,QAAQ,CAACmG,aAAT,CAAuB,MAAvB,CAApB;AACA2K,EAAAA,aAAa,CAACtK,SAAd,GAA0B,IAA1B;AACAsK,EAAAA,aAAa,CAAC/N,SAAd,GAA0B,kCAAkCuN,aAA5D;AAEA5K,EAAAA,MAAM,CAACgB,WAAP,CAAmBkK,IAAnB;AAA0BlL,EAAAA,MAAM,CAACgB,WAAP,CAAmBmK,SAAnB;AAA+BnL,EAAAA,MAAM,CAACgB,WAAP,CAAmBoK,aAAnB;AAEzDxJ,EAAAA,QAAQ,CAACZ,WAAT,CAAqBhB,MAArB;AAEA,MAAIqL,cAAc,GAAG/Q,QAAQ,CAACmG,aAAT,CAAuB,KAAvB,CAArB;AACA4K,EAAAA,cAAc,CAACvK,SAAf,GAA2B,IAA3B;;AAEA,OAAI,IAAI7E,CAAC,GAAG,CAAZ,EAAeA,CAAC,GAAGuO,gBAAnB,EAAqCvO,CAAC,EAAtC,EAA0C;AACxC,QAAIqP,KAAK,GAAGhR,QAAQ,CAACmG,aAAT,CAAuB,OAAvB,CAAZ;AACA6K,IAAAA,KAAK,CAACrI,EAAN,GAAW,OAAX;AACAqI,IAAAA,KAAK,CAAC9Q,KAAN,CAAYmG,KAAZ,GAAoB,KAApB;;AACA,QAAIkK,OAAO,IAAI5O,CAAC,IAAIsO,UAAjB,IAAgCtO,CAAC,IAAImO,UAAxC,EAAoD;AAClDkB,MAAAA,KAAK,CAAC9Q,KAAN,CAAY+F,UAAZ,GAAyB,SAAzB;AACA+K,MAAAA,KAAK,CAAC9Q,KAAN,CAAY+Q,SAAZ,GAAwB,mBAAxB;AACAD,MAAAA,KAAK,CAAC9Q,KAAN,CAAYgR,YAAZ,GAA2B,mBAA3B;AAEA,UAAIC,aAAa,GAAGnR,QAAQ,CAACmG,aAAT,CAAuB,MAAvB,CAApB;AACAgL,MAAAA,aAAa,CAACpO,SAAd,GAA0B,gBAA1B;AACAoO,MAAAA,aAAa,CAACjR,KAAd,CAAoBwN,KAApB,GAA4B,OAA5B;AACAyD,MAAAA,aAAa,CAACjR,KAAd,CAAoBkR,UAApB,GAAiC,QAAjC;AACAD,MAAAA,aAAa,CAACjR,KAAd,CAAoBmR,SAApB,GAAiC,MAAjC;AACAF,MAAAA,aAAa,CAACjR,KAAd,CAAoB8C,KAApB,GAA4B,SAA5B;AACAmO,MAAAA,aAAa,CAACjR,KAAd,CAAoB+C,WAApB,GAAmC,MAAnC;AAEA+N,MAAAA,KAAK,CAACtK,WAAN,CAAkByK,aAAlB;AACD,KAdD,MAeK,IAAG,CAACZ,OAAD,IAAY5O,CAAC,IAAIsO,UAApB,EAAgC;AACnCe,MAAAA,KAAK,CAAC9Q,KAAN,CAAY+F,UAAZ,GAAyB,SAAzB;AACA+K,MAAAA,KAAK,CAAC9Q,KAAN,CAAY+Q,SAAZ,GAAwB,mBAAxB;AACAD,MAAAA,KAAK,CAAC9Q,KAAN,CAAYgR,YAAZ,GAA2B,mBAA3B;AACAF,MAAAA,KAAK,CAAC9Q,KAAN,CAAY8C,KAAZ,GAAoB,SAApB;AAEA,UAAIsO,eAAe,GAAGtR,QAAQ,CAACmG,aAAT,CAAuB,MAAvB,CAAtB;AACAmL,MAAAA,eAAe,CAACvO,SAAhB,GAA4B,gBAA5B;AACAuO,MAAAA,eAAe,CAACpR,KAAhB,CAAsBwN,KAAtB,GAA8B,OAA9B;AACA4D,MAAAA,eAAe,CAACpR,KAAhB,CAAsBkR,UAAtB,GAAmC,QAAnC;AACAE,MAAAA,eAAe,CAACpR,KAAhB,CAAsBmR,SAAtB,GAAmC,MAAnC;AACAC,MAAAA,eAAe,CAACpR,KAAhB,CAAsB8C,KAAtB,GAA8B,SAA9B;AACAsO,MAAAA,eAAe,CAACpR,KAAhB,CAAsB+C,WAAtB,GAAqC,MAArC;AACA+N,MAAAA,KAAK,CAACtK,WAAN,CAAkB4K,eAAlB;AACD;;AAED,QAAIC,KAAK,GAAGvR,QAAQ,CAACmG,aAAT,CAAuB,OAAvB,CAAZ;AACAoL,IAAAA,KAAK,CAACC,QAAN,GAAiB,IAAjB;AACAD,IAAAA,KAAK,CAACrR,KAAN,CAAYuR,OAAZ,GAAsB,MAAtB;AACAF,IAAAA,KAAK,CAAC9L,IAAN,GAAa,OAAb;AACA8L,IAAAA,KAAK,CAAC/K,SAAN,GAAkB,oBAAlB;AACA+K,IAAAA,KAAK,CAAC1H,IAAN,GAAa2G,GAAG,CAACzN,SAAjB;AAEA,QAAI6N,IAAI,GAAG5Q,QAAQ,CAACmG,aAAT,CAAuB,MAAvB,CAAX;;AACA,QAAGX,SAAS,CAACC,IAAV,IAAkB,IAAlB,IAA0BD,SAAS,CAACC,IAAV,IAAkB,IAA/C,EAAqD;AACnDmL,MAAAA,IAAI,CAAC7N,SAAL,GAAiByC,SAAS,CAACG,OAAV,CAAkBhE,CAAlB,CAAjB;AACD,KAFD,MAGK,IAAG6D,SAAS,CAACC,IAAV,IAAkB,IAArB,EAA0B;AAC7B,UAAG9D,CAAC,IAAI,CAAR,EAAW;AACTiP,QAAAA,IAAI,CAAC7N,SAAL,GAAiB,MAAjB;AACD,OAFD,MAGK;AACH6N,QAAAA,IAAI,CAAC7N,SAAL,GAAiB,OAAjB;AACD;AACF;;AACD6N,IAAAA,IAAI,CAAC1Q,KAAL,CAAWkR,UAAX,GAAwB,QAAxB;AAEA,QAAIM,aAAa,GAAG1R,QAAQ,CAACmG,aAAT,CAAuB,MAAvB,CAApB;AACAuL,IAAAA,aAAa,CAAClL,SAAd,GAA0B,QAA1B;AACAkL,IAAAA,aAAa,CAAC/I,EAAd,GAAmB,iBAAnB;AAEAqI,IAAAA,KAAK,CAACtK,WAAN,CAAkB6K,KAAlB;AACAP,IAAAA,KAAK,CAACtK,WAAN,CAAkBgL,aAAlB;AACAV,IAAAA,KAAK,CAACtK,WAAN,CAAkBkK,IAAlB;AACAG,IAAAA,cAAc,CAACrK,WAAf,CAA2BsK,KAA3B;AACD;;AAED,MAAGxL,SAAS,CAACC,IAAV,IAAkB,IAArB,EAA2B;AACzB,QAAIkM,EAAE,GAAG3R,QAAQ,CAACmG,aAAT,CAAuB,UAAvB,CAAT;AACAjF,IAAAA,CAAC,CAACyQ,EAAD,CAAD,CAAMzC,IAAN,CAAW,UAAX,EAAuB,IAAvB;AACAyC,IAAAA,EAAE,CAACnL,SAAH,GAAe,IAAf;AACAmL,IAAAA,EAAE,CAAC7N,KAAH,GAAWmM,UAAX;AAEA,QAAI2B,iBAAiB,GAAG5R,QAAQ,CAACmG,aAAT,CAAuB,MAAvB,CAAxB;AACAyL,IAAAA,iBAAiB,CAAC7O,SAAlB,GAA8B,mBAA9B;AAEA,QAAI8O,iBAAiB,GAAG7R,QAAQ,CAACmG,aAAT,CAAuB,OAAvB,CAAxB;AACA0L,IAAAA,iBAAiB,CAACC,SAAlB,GAA8BtM,SAAS,CAACE,MAAV,CAAiB7D,MAA/C;AAEAsC,IAAAA,QAAQ,CAACC,QAAT,GAAoBC,GAApB,CAAwB,cAAclB,QAAd,GAAyB,WAAzB,GAAuCrD,YAAY,CAACC,OAAb,CAAqB,WAArB,CAAvC,GAA2E,SAA3E,GAAuFsQ,eAAvF,GAAyG,aAAzG,GAAyHD,QAAjJ,EAA2JxK,IAA3J,CAAgK,OAAhK,EAAyK,UAAStB,QAAT,EAAmB;AAC1LA,MAAAA,QAAQ,CAACC,OAAT,CAAiB,UAASC,aAAT,EAAwB;AACvC,YAAIuN,WAAJ;AACA,YAAIhC,OAAO,GAAGvL,aAAa,CAACE,GAAd,GAAoBqL,OAAlC;;AAEA,YAAGA,OAAO,CAAC,CAAD,CAAP,CAAWpL,KAAX,CAAiB,GAAjB,EAAsB,CAAtB,KAA4BzB,SAA/B,EAA0C;AACxCyD,UAAAA,UAAU,CAAC,YAAU;AAAE3G,YAAAA,QAAQ,CAAC4B,sBAAT,CAAgC,IAAhC,EAAsC0G,QAAQ,CAACkI,GAAG,CAACzN,SAAJ,CAAcqF,SAAd,CAAwB,CAAxB,EAA2BoI,GAAG,CAACzN,SAAJ,CAAcH,OAAd,CAAsB,GAAtB,CAA3B,CAAD,CAAR,GAAmE,CAAzG,EAA4GG,SAA5G,GAAwH,kCAAkCgN,OAAO,CAAC,CAAD,CAAP,CAAWpL,KAAX,CAAiB,GAAjB,EAAsB,CAAtB,CAA1J;AAAqL,WAAlM,EAAoM,GAApM,CAAV;AACAkN,UAAAA,iBAAiB,CAAC/N,KAAlB,GAA0BiM,OAAO,CAAC,CAAD,CAAP,CAAWpL,KAAX,CAAiB,GAAjB,EAAsB,CAAtB,CAA1B;AACD;AACF,OARD;AASD,KAVD;;AAYAkN,IAAAA,iBAAiB,CAACG,OAAlB,GAA4B,YAAY;AACtC,WAAKlO,KAAL,GAAa,KAAKA,KAAL,CAAWiD,OAAX,CAAmB,OAAnB,EAA2B,EAA3B,CAAb;AACA,WAAKjD,KAAL,GAAa,KAAKA,KAAL,CAAWiD,OAAX,CAAmB,GAAnB,EAAwB,EAAxB,CAAb;;AAEA,UAAG,KAAKjD,KAAL,IAAc,EAAjB,EAAqB;AACnB9D,QAAAA,QAAQ,CAAC4B,sBAAT,CAAgC,IAAhC,EAAsC0G,QAAQ,CAACkI,GAAG,CAACzN,SAAJ,CAAcqF,SAAd,CAAwB,CAAxB,EAA2BoI,GAAG,CAACzN,SAAJ,CAAcH,OAAd,CAAsB,GAAtB,CAA3B,CAAD,CAAR,GAAmE,CAAzG,EAA4GG,SAA5G,GAAwH,kCAAkC,KAAKe,KAA/J;AACD,OAFD,MAGK;AACH9D,QAAAA,QAAQ,CAAC4B,sBAAT,CAAgC,IAAhC,EAAsC0G,QAAQ,CAACkI,GAAG,CAACzN,SAAJ,CAAcqF,SAAd,CAAwB,CAAxB,EAA2BoI,GAAG,CAACzN,SAAJ,CAAcH,OAAd,CAAsB,GAAtB,CAA3B,CAAD,CAAR,GAAmE,CAAzG,EAA4GG,SAA5G,GAAwH,gCAAxH;AACD;;AAED,UAAIkP,YAAY,GAAG,KAAKnO,KAAxB;AAEAK,MAAAA,QAAQ,CAACC,QAAT,GAAoBC,GAApB,CAAwB,cAAclB,QAAd,GAAyB,WAAzB,GAAuCrD,YAAY,CAACC,OAAb,CAAqB,WAArB,CAAvC,GAA2E,SAA3E,GAAuFsQ,eAAvF,GAAyG,aAAzG,GAAyHD,QAAjJ,EAA2JxK,IAA3J,CAAgK,OAAhK,EAAyK,UAAStB,QAAT,EAAmB;AAC1LA,QAAAA,QAAQ,CAACC,OAAT,CAAiB,UAASC,aAAT,EAAwB;AACvC,cAAIuN,WAAJ;AACA,cAAIhC,OAAO,GAAGvL,aAAa,CAACE,GAAd,GAAoBqL,OAAlC;;AAEA,eAAI,IAAImC,CAAC,GAAG,CAAZ,EAAeA,CAAC,GAAGnC,OAAO,CAAClO,MAA3B,EAAmCqQ,CAAC,EAApC,EAAwC;AACtC,gBAAGC,KAAK,CAACpC,OAAO,CAACmC,CAAD,CAAP,CAAWvN,KAAX,CAAiB,GAAjB,EAAsB,CAAtB,CAAD,CAAR,EAAoC;AAClC+F,cAAAA,OAAO,CAACC,GAAR,CAAYoF,OAAO,CAACmC,CAAD,CAAnB;AACAnC,cAAAA,OAAO,CAACmC,CAAD,CAAP,GAAanC,OAAO,CAACmC,CAAD,CAAP,CAAWvN,KAAX,CAAiB,GAAjB,EAAsB,CAAtB,IAA2B,GAA3B,GAAiCoL,OAAO,CAACmC,CAAD,CAAP,CAAWvN,KAAX,CAAiB,GAAjB,EAAsB,CAAtB,CAAjC,GAA4D,GAA5D,GAAkEsN,YAA/E;AACD;AACF;;AACD9N,UAAAA,QAAQ,CAACC,QAAT,GAAoBC,GAApB,CAAwB,cAAclB,QAAd,GAAyB,WAAzB,GAAuCrD,YAAY,CAACC,OAAb,CAAqB,WAArB,CAAvC,GAA2E,SAA3E,GAAuFsQ,eAAvF,GAAyG,aAAzG,GAAyHD,QAAzH,GAAoI,GAApI,GAA0I5L,aAAa,CAACsB,GAAhL,EAAqLsM,MAArL,CAA4L;AAAE,uBAAWrC;AAAb,WAA5L;AAEA,cAAIsC,QAAQ,GAAG,CAAE,CAAC/J,QAAQ,CAACxI,YAAY,CAACC,OAAb,CAAqB,wBAArB,CAAD,CAAR,GAA2DuI,QAAQ,CAAC2J,YAAD,CAApE,IAAsF7M,eAAvF,GAA0G,GAA3G,EAAgHoF,OAAhH,CAAwH,CAAxH,CAAf;AACArG,UAAAA,QAAQ,CAACC,QAAT,GAAoBC,GAApB,CAAwB,cAAclB,QAAd,GAAyB,WAAzB,GAAuCrD,YAAY,CAACC,OAAb,CAAqB,WAArB,CAAvC,GAA2E,SAA3E,GAAuFsQ,eAAvF,GAAyG,aAAzG,GAAyHD,QAAzH,GAAoI,GAApI,GAA0I5L,aAAa,CAACsB,GAAhL,EAAqLsM,MAArL,CAA4L;AAAE,0BAAcC;AAAhB,WAA5L;AAEArS,UAAAA,QAAQ,CAAC+B,cAAT,CAAwB,OAAxB,EAAiCgB,SAAjC,GAA6CsP,QAAQ,GAAG,GAAxD;AACArS,UAAAA,QAAQ,CAAC+B,cAAT,CAAwB,WAAxB,EAAqCgB,SAArC,GAAkDuF,QAAQ,CAACxI,YAAY,CAACC,OAAb,CAAqB,wBAArB,CAAD,CAAR,GAA2DuI,QAAQ,CAAC2J,YAAD,CAApE,GAAsF,KAAtF,GAA8F7M,eAA/I;AACD,SAjBD;AAkBD,OAnBD;AAoBD,KAjCD;;AAmCAyM,IAAAA,iBAAiB,CAACS,WAAlB,GAAgC,SAAS9M,SAAS,CAACE,MAAnD;AACAmM,IAAAA,iBAAiB,CAAC3R,KAAlB,CAAwBqS,OAAxB,GAAkC,KAAlC;AACAV,IAAAA,iBAAiB,CAAC3R,KAAlB,CAAwB0N,QAAxB,GAAmC,MAAnC;AACAiE,IAAAA,iBAAiB,CAAC3R,KAAlB,CAAwBsS,MAAxB,GAAiC,mBAAjC;AACAX,IAAAA,iBAAiB,CAAC3R,KAAlB,CAAwBuS,YAAxB,GAAuC,KAAvC;AACAZ,IAAAA,iBAAiB,CAAC3R,KAAlB,CAAwBmR,SAAxB,GAAoC,MAApC;AAEA/J,IAAAA,QAAQ,CAACZ,WAAT,CAAqBiL,EAArB;AACArK,IAAAA,QAAQ,CAACZ,WAAT,CAAqB1G,QAAQ,CAACmG,aAAT,CAAuB,IAAvB,CAArB;AACAmB,IAAAA,QAAQ,CAACZ,WAAT,CAAqBkL,iBAArB;AACAtK,IAAAA,QAAQ,CAACZ,WAAT,CAAqBmL,iBAArB;AACD,GAtED,MAuEK;AACHvK,IAAAA,QAAQ,CAACZ,WAAT,CAAqBqK,cAArB;AACD;;AAED3G,EAAAA,IAAI,CAAC1D,WAAL,CAAiBY,QAAjB;AACA8C,EAAAA,IAAI,CAAC1D,WAAL,CAAiB1G,QAAQ,CAACmG,aAAT,CAAuB,IAAvB,CAAjB;AACAiE,EAAAA,IAAI,CAAC1D,WAAL,CAAiB+J,EAAjB;AAED,EAED;;;AACA,SAASiC,aAAT,CAAuBhO,GAAvB,EAA4B0F,IAA5B,EAAkC;AAChC,MAAIsE,QAAQ,GAAG,CAAf;AACA,MAAIC,QAAQ,GAAG,CAAf;;AAEA,OAAI,IAAIC,OAAR,IAAmBxE,IAAnB,EAAyB;AACvB,QAAG9B,QAAQ,CAAC5D,GAAG,CAACC,KAAJ,CAAU,GAAV,EAAe,CAAf,CAAD,CAAR,GAA8B2D,QAAQ,CAAC8B,IAAI,CAACwE,OAAD,CAAJ,CAAcjK,KAAd,CAAoB,GAApB,EAAyB,CAAzB,CAAD,CAAzC,EAAwE;AACtE+J,MAAAA,QAAQ;AACT,KAFD,MAGK,IAAGpG,QAAQ,CAAC5D,GAAG,CAACC,KAAJ,CAAU,GAAV,EAAe,CAAf,CAAD,CAAR,IAA+B2D,QAAQ,CAAC8B,IAAI,CAACwE,OAAD,CAAJ,CAAcjK,KAAd,CAAoB,GAApB,EAAyB,CAAzB,CAAD,CAAvC,IAAwED,GAAG,CAACC,KAAJ,CAAU,GAAV,EAAe,CAAf,KAAqByF,IAAI,CAACwE,OAAD,CAAJ,CAAcjK,KAAd,CAAoB,GAApB,EAAyB,CAAzB,CAAhG,EAA6H;AAChIgK,MAAAA,QAAQ;AACT;AACF;;AACD,SAAO,MAAM,CAACD,QAAQ,GAAIjH,MAAM,CAAC+B,IAAP,CAAYY,IAAZ,EAAkBvI,MAA/B,EAAwC2I,OAAxC,CAAgD,CAAhD,CAAb;AACD,EAED;;;AACA,SAASmI,IAAT,CAAcC,IAAd,EAAoB;AAClB,MAAIC,MAAM,GAAG7S,QAAQ,CAAC4B,sBAAT,CAAgC,qBAAhC,CAAb;;AAEA,OAAI,IAAIkR,CAAC,GAAG,CAAZ,EAAeA,CAAC,GAAGD,MAAM,CAAChR,MAA1B,EAAkCiR,CAAC,EAAnC,EAAuC;AACrCD,IAAAA,MAAM,CAACC,CAAD,CAAN,CAAU5S,KAAV,CAAgBC,OAAhB,GAA0B,MAA1B;AACD;;AAED,MAAI4S,YAAY,GAAGtS,QAAQ,CAACuS,KAAT,EAAnB;AACAD,EAAAA,YAAY,CAACJ,IAAb;;AAEA,MAAGC,IAAI,IAAI,WAAX,EAAwB;AACtB,QAAI7G,KAAK,GAAG/L,QAAQ,CAACmG,aAAT,CAAuB,OAAvB,CAAZ;AACA4F,IAAAA,KAAK,CAACpD,EAAN,GAAW,QAAX;AACAoD,IAAAA,KAAK,CAACvF,SAAN,GAAkB,qBAAlB;AACAuF,IAAAA,KAAK,CAAC7L,KAAN,CAAYmG,KAAZ,GAAoB,OAApB;AAEA,QAAIqG,IAAI,GAAG1M,QAAQ,CAACmG,aAAT,CAAuB,IAAvB,CAAX;AACAuG,IAAAA,IAAI,CAACxM,KAAL,CAAW8C,KAAX,GAAmB,UAAnB;AAEA,QAAI2J,QAAQ,GAAG3M,QAAQ,CAACmG,aAAT,CAAuB,IAAvB,CAAf;AACAwG,IAAAA,QAAQ,CAAC5J,SAAT,GAAqB,MAArB;AACA4J,IAAAA,QAAQ,CAACzM,KAAT,CAAe0M,WAAf,GAA6B,MAA7B;AACAD,IAAAA,QAAQ,CAAChE,EAAT,GAAc,MAAd;AAEA,QAAIkE,SAAS,GAAG7M,QAAQ,CAACmG,aAAT,CAAuB,IAAvB,CAAhB;AACA0G,IAAAA,SAAS,CAAC9J,SAAV,GAAsB,WAAtB;AACA8J,IAAAA,SAAS,CAAClE,EAAV,GAAe,OAAf;AAEA,QAAImE,cAAc,GAAG9M,QAAQ,CAACmG,aAAT,CAAuB,IAAvB,CAArB;AACA2G,IAAAA,cAAc,CAAC/J,SAAf,GAA2B,YAA3B;AACA+J,IAAAA,cAAc,CAACnE,EAAf,GAAoB,YAApB;AAEA,QAAIoE,QAAQ,GAAG/M,QAAQ,CAACmG,aAAT,CAAuB,IAAvB,CAAf;AACA4G,IAAAA,QAAQ,CAAChK,SAAT,GAAqB,MAArB;AACAgK,IAAAA,QAAQ,CAACpE,EAAT,GAAc,MAAd;AAEA+D,IAAAA,IAAI,CAAChG,WAAL,CAAiBiG,QAAjB;AACAD,IAAAA,IAAI,CAAChG,WAAL,CAAiBmG,SAAjB;AACAH,IAAAA,IAAI,CAAChG,WAAL,CAAiBoG,cAAjB;AACAJ,IAAAA,IAAI,CAAChG,WAAL,CAAiBqG,QAAjB;AAEAhB,IAAAA,KAAK,CAACrF,WAAN,CAAkBgG,IAAlB;;AAEA,SAAI,IAAI/K,CAAC,GAAG,CAAZ,EAAeA,CAAC,GAAGlB,QAAQ,CAACoB,MAA5B,EAAoCF,CAAC,EAArC,EAAwC;AACtC,UAAIyL,EAAE,GAAGpN,QAAQ,CAACmG,aAAT,CAAuB,IAAvB,CAAT;AAEA,UAAI8M,QAAQ,GAAGtR,CAAf;;AACAyL,MAAAA,EAAE,CAACtE,OAAH,GAAa,YAAW;AAAEuE,QAAAA,mBAAmB,CAAC5M,QAAQ,CAACwS,QAAD,CAAR,CAAmBtO,KAAnB,CAAyB,GAAzB,EAA8B,CAA9B,CAAD,EAAmC7E,YAAY,CAACC,OAAb,CAAqB,mBAArB,CAAnC,CAAnB;AAAmG,OAA7H;;AAEAgM,MAAAA,KAAK,CAACrF,WAAN,CAAkB1G,QAAQ,CAACmG,aAAT,CAAuB,IAAvB,CAAlB;AAEA,UAAI0D,IAAI,GAAG7J,QAAQ,CAACmG,aAAT,CAAuB,IAAvB,CAAX;AACA0D,MAAAA,IAAI,CAAC3J,KAAL,CAAW0M,WAAX,GAAyB,MAAzB;AACA,UAAItC,KAAK,GAAGtK,QAAQ,CAACmG,aAAT,CAAuB,IAAvB,CAAZ;AACA,UAAImH,UAAU,GAAGtN,QAAQ,CAACmG,aAAT,CAAuB,IAAvB,CAAjB;AAEA0D,MAAAA,IAAI,CAAC9G,SAAL,GAAiBtC,QAAQ,CAACkB,CAAD,CAAR,CAAYgD,KAAZ,CAAkB,GAAlB,EAAuB,CAAvB,CAAjB;AACA2F,MAAAA,KAAK,CAACvH,SAAN,GAAkBtC,QAAQ,CAACkB,CAAD,CAAR,CAAYgD,KAAZ,CAAkB,GAAlB,EAAuB,CAAvB,IAA4B,GAA9C;AACA2I,MAAAA,UAAU,CAACvK,SAAX,GAAuB2P,aAAa,CAACjS,QAAQ,CAACkB,CAAD,CAAT,EAAclB,QAAd,CAAb,GAAuC,IAA9D;AAEA,UAAI0M,IAAI,GAAGnN,QAAQ,CAACmG,aAAT,CAAuB,IAAvB,CAAX;AACAgH,MAAAA,IAAI,CAACpK,SAAL,GAAiBtC,QAAQ,CAACkB,CAAD,CAAR,CAAYgD,KAAZ,CAAkB,GAAlB,EAAuB,CAAvB,IAA4B,OAA7C;AACAwI,MAAAA,IAAI,CAACxE,EAAL,GAAU,MAAV;AAEAyE,MAAAA,EAAE,CAAC1G,WAAH,CAAemD,IAAf;AACAuD,MAAAA,EAAE,CAAC1G,WAAH,CAAe4D,KAAf;AACA8C,MAAAA,EAAE,CAAC1G,WAAH,CAAe4G,UAAf;AACAF,MAAAA,EAAE,CAAC1G,WAAH,CAAeyG,IAAf;AACApB,MAAAA,KAAK,CAACrF,WAAN,CAAkB0G,EAAlB;AACD;;AAEDpN,IAAAA,QAAQ,CAAC+B,cAAT,CAAwB,MAAxB,EAAgC2E,WAAhC,CAA4CqF,KAA5C;AACD,GA9DD,MA+DK;AACH,QAAG6G,IAAI,IAAI,yBAAX,EAAqC;AACnCG,MAAAA,YAAY,CAACJ,IAAb;AAEA,UAAI5G,KAAK,GAAG/L,QAAQ,CAACmG,aAAT,CAAuB,OAAvB,CAAZ;AACA4F,MAAAA,KAAK,CAACpD,EAAN,GAAW,QAAX;AACAoD,MAAAA,KAAK,CAACvF,SAAN,GAAkB,qBAAlB;AACAuF,MAAAA,KAAK,CAAC7L,KAAN,CAAYmG,KAAZ,GAAoB,OAApB;AAEA,UAAIqG,IAAI,GAAG1M,QAAQ,CAACmG,aAAT,CAAuB,IAAvB,CAAX;AACAuG,MAAAA,IAAI,CAACxM,KAAL,CAAW8C,KAAX,GAAmB,UAAnB;AAEA,UAAI2J,QAAQ,GAAG3M,QAAQ,CAACmG,aAAT,CAAuB,IAAvB,CAAf;AACAwG,MAAAA,QAAQ,CAAC5J,SAAT,GAAqB,MAArB;AACA4J,MAAAA,QAAQ,CAACzM,KAAT,CAAe0M,WAAf,GAA6B,MAA7B;AACAD,MAAAA,QAAQ,CAAChE,EAAT,GAAc,MAAd;AAEA,UAAIkE,SAAS,GAAG7M,QAAQ,CAACmG,aAAT,CAAuB,IAAvB,CAAhB;AACA0G,MAAAA,SAAS,CAAC9J,SAAV,GAAsB,WAAtB;AACA8J,MAAAA,SAAS,CAAClE,EAAV,GAAe,OAAf;AAEA,UAAImE,cAAc,GAAG9M,QAAQ,CAACmG,aAAT,CAAuB,IAAvB,CAArB;AACA2G,MAAAA,cAAc,CAAC/J,SAAf,GAA2B,YAA3B;AACA+J,MAAAA,cAAc,CAACnE,EAAf,GAAoB,YAApB;AAEA,UAAIoE,QAAQ,GAAG/M,QAAQ,CAACmG,aAAT,CAAuB,IAAvB,CAAf;AACA4G,MAAAA,QAAQ,CAAChK,SAAT,GAAqB,MAArB;AACAgK,MAAAA,QAAQ,CAACpE,EAAT,GAAc,MAAd;AAEA+D,MAAAA,IAAI,CAAChG,WAAL,CAAiBiG,QAAjB;AACAD,MAAAA,IAAI,CAAChG,WAAL,CAAiBmG,SAAjB;AACAH,MAAAA,IAAI,CAAChG,WAAL,CAAiBoG,cAAjB;AACAJ,MAAAA,IAAI,CAAChG,WAAL,CAAiBqG,QAAjB;AAEAhB,MAAAA,KAAK,CAACrF,WAAN,CAAkBgG,IAAlB;;AAEA,WAAI,IAAI/K,CAAC,GAAG,CAAZ,EAAeA,CAAC,GAAGoR,YAAY,CAAClR,MAAhC,EAAwCF,CAAC,EAAzC,EAA4C;AAC1C,YAAIyL,EAAE,GAAGpN,QAAQ,CAACmG,aAAT,CAAuB,IAAvB,CAAT;;AACAiH,QAAAA,EAAE,CAACtE,OAAH,GAAa,YAAW;AAAEuE,UAAAA,mBAAmB,CAAC0F,YAAY,CAACpR,CAAD,CAAZ,CAAgBgD,KAAhB,CAAsB,GAAtB,EAA2B,CAA3B,CAAD,EAAgC7E,YAAY,CAACC,OAAb,CAAqB,mBAArB,CAAhC,CAAnB;AAAgG,SAA1H;;AAEAgM,QAAAA,KAAK,CAACrF,WAAN,CAAkB1G,QAAQ,CAACmG,aAAT,CAAuB,IAAvB,CAAlB;AAEA,YAAI0D,IAAI,GAAG7J,QAAQ,CAACmG,aAAT,CAAuB,IAAvB,CAAX;AACA0D,QAAAA,IAAI,CAAC3J,KAAL,CAAW0M,WAAX,GAAyB,MAAzB;AACA,YAAItC,KAAK,GAAGtK,QAAQ,CAACmG,aAAT,CAAuB,IAAvB,CAAZ;AACA,YAAImH,UAAU,GAAGtN,QAAQ,CAACmG,aAAT,CAAuB,IAAvB,CAAjB;AAEA0D,QAAAA,IAAI,CAAC9G,SAAL,GAAiBgQ,YAAY,CAACpR,CAAD,CAAZ,CAAgBgD,KAAhB,CAAsB,GAAtB,EAA2B,CAA3B,CAAjB;AACA2F,QAAAA,KAAK,CAACvH,SAAN,GAAkBgQ,YAAY,CAACpR,CAAD,CAAZ,CAAgBgD,KAAhB,CAAsB,GAAtB,EAA2B,CAA3B,IAAgC,GAAlD;AACA2I,QAAAA,UAAU,CAACvK,SAAX,GAAuB2P,aAAa,CAACK,YAAY,CAACpR,CAAD,CAAb,EAAkBoR,YAAlB,CAAb,GAA+C,IAAtE;AAEA,YAAI5F,IAAI,GAAGnN,QAAQ,CAACmG,aAAT,CAAuB,IAAvB,CAAX;AACAgH,QAAAA,IAAI,CAACpK,SAAL,GAAiBgQ,YAAY,CAACpR,CAAD,CAAZ,CAAgBgD,KAAhB,CAAsB,GAAtB,EAA2B,CAA3B,IAAgC,OAAjD;AACAwI,QAAAA,IAAI,CAACxE,EAAL,GAAU,MAAV;AAEAyE,QAAAA,EAAE,CAAC1G,WAAH,CAAemD,IAAf;AACAuD,QAAAA,EAAE,CAAC1G,WAAH,CAAe4D,KAAf;AACA8C,QAAAA,EAAE,CAAC1G,WAAH,CAAe4G,UAAf;AACAF,QAAAA,EAAE,CAAC1G,WAAH,CAAeyG,IAAf;AACApB,QAAAA,KAAK,CAACrF,WAAN,CAAkB0G,EAAlB;AACD;;AAEDpN,MAAAA,QAAQ,CAAC+B,cAAT,CAAwB,MAAxB,EAAgC2E,WAAhC,CAA4CqF,KAA5C;AAED,KA/DD,MAgEK,IAAG6G,IAAI,IAAI,yBAAX,EAAsC;AACzCG,MAAAA,YAAY,CAACJ,IAAb;AAEA,UAAI5G,KAAK,GAAG/L,QAAQ,CAACmG,aAAT,CAAuB,OAAvB,CAAZ;AACA4F,MAAAA,KAAK,CAACpD,EAAN,GAAW,QAAX;AACAoD,MAAAA,KAAK,CAACvF,SAAN,GAAkB,qBAAlB;AACAuF,MAAAA,KAAK,CAAC7L,KAAN,CAAYmG,KAAZ,GAAoB,OAApB;AAEA,UAAIqG,IAAI,GAAG1M,QAAQ,CAACmG,aAAT,CAAuB,IAAvB,CAAX;AACAuG,MAAAA,IAAI,CAACxM,KAAL,CAAW8C,KAAX,GAAmB,UAAnB;AAEA,UAAI2J,QAAQ,GAAG3M,QAAQ,CAACmG,aAAT,CAAuB,IAAvB,CAAf;AACAwG,MAAAA,QAAQ,CAAC5J,SAAT,GAAqB,MAArB;AACA4J,MAAAA,QAAQ,CAACzM,KAAT,CAAe0M,WAAf,GAA6B,MAA7B;AACAD,MAAAA,QAAQ,CAAChE,EAAT,GAAc,MAAd;AAEA,UAAIkE,SAAS,GAAG7M,QAAQ,CAACmG,aAAT,CAAuB,IAAvB,CAAhB;AACA0G,MAAAA,SAAS,CAAC9J,SAAV,GAAsB,WAAtB;AACA8J,MAAAA,SAAS,CAAClE,EAAV,GAAe,OAAf;AAEA,UAAImE,cAAc,GAAG9M,QAAQ,CAACmG,aAAT,CAAuB,IAAvB,CAArB;AACA2G,MAAAA,cAAc,CAAC/J,SAAf,GAA2B,YAA3B;AACA+J,MAAAA,cAAc,CAACnE,EAAf,GAAoB,YAApB;AAEA,UAAIoE,QAAQ,GAAG/M,QAAQ,CAACmG,aAAT,CAAuB,IAAvB,CAAf;AACA4G,MAAAA,QAAQ,CAAChK,SAAT,GAAqB,MAArB;AACAgK,MAAAA,QAAQ,CAACpE,EAAT,GAAc,MAAd;AAEA+D,MAAAA,IAAI,CAAChG,WAAL,CAAiBiG,QAAjB;AACAD,MAAAA,IAAI,CAAChG,WAAL,CAAiBmG,SAAjB;AACAH,MAAAA,IAAI,CAAChG,WAAL,CAAiBoG,cAAjB;AACAJ,MAAAA,IAAI,CAAChG,WAAL,CAAiBqG,QAAjB;AAEAhB,MAAAA,KAAK,CAACrF,WAAN,CAAkBgG,IAAlB;;AAEA,WAAI,IAAI/K,CAAC,GAAGoR,YAAY,CAAClR,MAAb,GAAsB,CAAlC,EAAqCF,CAAC,IAAI,CAA1C,EAA6CA,CAAC,EAA9C,EAAiD;AAC/C,YAAIyL,EAAE,GAAGpN,QAAQ,CAACmG,aAAT,CAAuB,IAAvB,CAAT;;AACAiH,QAAAA,EAAE,CAACtE,OAAH,GAAa,YAAW;AAAEuE,UAAAA,mBAAmB,CAAC0F,YAAY,CAACpR,CAAD,CAAZ,CAAgBgD,KAAhB,CAAsB,GAAtB,EAA2B,CAA3B,CAAD,EAAgC7E,YAAY,CAACC,OAAb,CAAqB,mBAArB,CAAhC,CAAnB;AAAgG,SAA1H;;AAEAgM,QAAAA,KAAK,CAACrF,WAAN,CAAkB1G,QAAQ,CAACmG,aAAT,CAAuB,IAAvB,CAAlB;AAEA,YAAI0D,IAAI,GAAG7J,QAAQ,CAACmG,aAAT,CAAuB,IAAvB,CAAX;AACA0D,QAAAA,IAAI,CAAC3J,KAAL,CAAW0M,WAAX,GAAyB,MAAzB;AACA,YAAItC,KAAK,GAAGtK,QAAQ,CAACmG,aAAT,CAAuB,IAAvB,CAAZ;AACA,YAAImH,UAAU,GAAGtN,QAAQ,CAACmG,aAAT,CAAuB,IAAvB,CAAjB;AAEA0D,QAAAA,IAAI,CAAC9G,SAAL,GAAiBgQ,YAAY,CAACpR,CAAD,CAAZ,CAAgBgD,KAAhB,CAAsB,GAAtB,EAA2B,CAA3B,CAAjB;AACA2F,QAAAA,KAAK,CAACvH,SAAN,GAAkBgQ,YAAY,CAACpR,CAAD,CAAZ,CAAgBgD,KAAhB,CAAsB,GAAtB,EAA2B,CAA3B,IAAgC,GAAlD;AACA2I,QAAAA,UAAU,CAACvK,SAAX,GAAuB2P,aAAa,CAACK,YAAY,CAACpR,CAAD,CAAb,EAAkBoR,YAAlB,CAAb,GAA+C,IAAtE;AAEA,YAAI5F,IAAI,GAAGnN,QAAQ,CAACmG,aAAT,CAAuB,IAAvB,CAAX;AACAgH,QAAAA,IAAI,CAACpK,SAAL,GAAiBgQ,YAAY,CAACpR,CAAD,CAAZ,CAAgBgD,KAAhB,CAAsB,GAAtB,EAA2B,CAA3B,IAAgC,OAAjD;AACAwI,QAAAA,IAAI,CAACxE,EAAL,GAAU,MAAV;AAEAyE,QAAAA,EAAE,CAAC1G,WAAH,CAAemD,IAAf;AACAuD,QAAAA,EAAE,CAAC1G,WAAH,CAAe4D,KAAf;AACA8C,QAAAA,EAAE,CAAC1G,WAAH,CAAe4G,UAAf;AACAF,QAAAA,EAAE,CAAC1G,WAAH,CAAeyG,IAAf;AACApB,QAAAA,KAAK,CAACrF,WAAN,CAAkB0G,EAAlB;AACD;;AAEDpN,MAAAA,QAAQ,CAAC+B,cAAT,CAAwB,MAAxB,EAAgC2E,WAAhC,CAA4CqF,KAA5C;AACD,KA9DI,MAgEA,IAAG6G,IAAI,IAAI,2BAAX,EAAwC;AAC3C,UAAIM,MAAM,GAAGC,SAAS,CAACJ,YAAD,CAAtB;AAEA,UAAIhH,KAAK,GAAG/L,QAAQ,CAACmG,aAAT,CAAuB,OAAvB,CAAZ;AACA4F,MAAAA,KAAK,CAACpD,EAAN,GAAW,QAAX;AACAoD,MAAAA,KAAK,CAACvF,SAAN,GAAkB,qBAAlB;AACAuF,MAAAA,KAAK,CAAC7L,KAAN,CAAYmG,KAAZ,GAAoB,OAApB;AAEA,UAAIqG,IAAI,GAAG1M,QAAQ,CAACmG,aAAT,CAAuB,IAAvB,CAAX;AACAuG,MAAAA,IAAI,CAACxM,KAAL,CAAW8C,KAAX,GAAmB,UAAnB;AAEA,UAAI2J,QAAQ,GAAG3M,QAAQ,CAACmG,aAAT,CAAuB,IAAvB,CAAf;AACAwG,MAAAA,QAAQ,CAAC5J,SAAT,GAAqB,MAArB;AACA4J,MAAAA,QAAQ,CAACzM,KAAT,CAAe0M,WAAf,GAA6B,MAA7B;AACAD,MAAAA,QAAQ,CAAChE,EAAT,GAAc,MAAd;AAEA,UAAIkE,SAAS,GAAG7M,QAAQ,CAACmG,aAAT,CAAuB,IAAvB,CAAhB;AACA0G,MAAAA,SAAS,CAAC9J,SAAV,GAAsB,WAAtB;AACA8J,MAAAA,SAAS,CAAClE,EAAV,GAAe,OAAf;AAEA,UAAImE,cAAc,GAAG9M,QAAQ,CAACmG,aAAT,CAAuB,IAAvB,CAArB;AACA2G,MAAAA,cAAc,CAAC/J,SAAf,GAA2B,YAA3B;AACA+J,MAAAA,cAAc,CAACnE,EAAf,GAAoB,YAApB;AAEA,UAAIoE,QAAQ,GAAG/M,QAAQ,CAACmG,aAAT,CAAuB,IAAvB,CAAf;AACA4G,MAAAA,QAAQ,CAAChK,SAAT,GAAqB,MAArB;AACAgK,MAAAA,QAAQ,CAACpE,EAAT,GAAc,MAAd;AAEA+D,MAAAA,IAAI,CAAChG,WAAL,CAAiBiG,QAAjB;AACAD,MAAAA,IAAI,CAAChG,WAAL,CAAiBmG,SAAjB;AACAH,MAAAA,IAAI,CAAChG,WAAL,CAAiBoG,cAAjB;AACAJ,MAAAA,IAAI,CAAChG,WAAL,CAAiBqG,QAAjB;AAEAhB,MAAAA,KAAK,CAACrF,WAAN,CAAkBgG,IAAlB;;AAEA,WAAI,IAAI/K,CAAC,GAAGuR,MAAM,CAACrR,MAAP,GAAgB,CAA5B,EAA+BF,CAAC,IAAI,CAApC,EAAuCA,CAAC,EAAxC,EAA2C;AACzC,YAAIyL,EAAE,GAAGpN,QAAQ,CAACmG,aAAT,CAAuB,IAAvB,CAAT;;AACAiH,QAAAA,EAAE,CAACtE,OAAH,GAAa,YAAW;AAAEuE,UAAAA,mBAAmB,CAAC6F,MAAM,CAACvR,CAAD,CAAN,CAAUgD,KAAV,CAAgB,GAAhB,EAAqB,CAArB,CAAD,EAA0B7E,YAAY,CAACC,OAAb,CAAqB,mBAArB,CAA1B,CAAnB;AAA0F,SAApH;;AAEAgM,QAAAA,KAAK,CAACrF,WAAN,CAAkB1G,QAAQ,CAACmG,aAAT,CAAuB,IAAvB,CAAlB;AAEA,YAAI0D,IAAI,GAAG7J,QAAQ,CAACmG,aAAT,CAAuB,IAAvB,CAAX;AACA0D,QAAAA,IAAI,CAAC3J,KAAL,CAAW0M,WAAX,GAAyB,MAAzB;AACA,YAAItC,KAAK,GAAGtK,QAAQ,CAACmG,aAAT,CAAuB,IAAvB,CAAZ;AACA,YAAImH,UAAU,GAAGtN,QAAQ,CAACmG,aAAT,CAAuB,IAAvB,CAAjB;AAEA0D,QAAAA,IAAI,CAAC9G,SAAL,GAAiBmQ,MAAM,CAACvR,CAAD,CAAN,CAAUgD,KAAV,CAAgB,GAAhB,EAAqB,CAArB,CAAjB;AACA2F,QAAAA,KAAK,CAACvH,SAAN,GAAkBmQ,MAAM,CAACvR,CAAD,CAAN,CAAUgD,KAAV,CAAgB,GAAhB,EAAqB,CAArB,IAA0B,GAA5C;AACA2I,QAAAA,UAAU,CAACvK,SAAX,GAAuB2P,aAAa,CAACQ,MAAM,CAACvR,CAAD,CAAP,EAAYuR,MAAZ,CAAb,GAAmC,IAA1D;AAEA,YAAI/F,IAAI,GAAGnN,QAAQ,CAACmG,aAAT,CAAuB,IAAvB,CAAX;AACAgH,QAAAA,IAAI,CAACpK,SAAL,GAAiBgQ,YAAY,CAACpR,CAAD,CAAZ,CAAgBgD,KAAhB,CAAsB,GAAtB,EAA2B,CAA3B,IAAgC,OAAjD;AACAwI,QAAAA,IAAI,CAACxE,EAAL,GAAU,MAAV;AAEAyE,QAAAA,EAAE,CAAC1G,WAAH,CAAemD,IAAf;AACAuD,QAAAA,EAAE,CAAC1G,WAAH,CAAe4D,KAAf;AACA8C,QAAAA,EAAE,CAAC1G,WAAH,CAAe4G,UAAf;AACAF,QAAAA,EAAE,CAAC1G,WAAH,CAAeyG,IAAf;AACApB,QAAAA,KAAK,CAACrF,WAAN,CAAkB0G,EAAlB;AACD;;AAEDpN,MAAAA,QAAQ,CAAC+B,cAAT,CAAwB,MAAxB,EAAgC2E,WAAhC,CAA4CqF,KAA5C;AAED,KA/DI,MAgEA,IAAG6G,IAAI,IAAI,2BAAX,EAAwC;AAC3C,UAAIM,MAAM,GAAGC,SAAS,CAACJ,YAAD,CAAtB;AAEA,UAAIhH,KAAK,GAAG/L,QAAQ,CAACmG,aAAT,CAAuB,OAAvB,CAAZ;AACA4F,MAAAA,KAAK,CAACpD,EAAN,GAAW,QAAX;AACAoD,MAAAA,KAAK,CAACvF,SAAN,GAAkB,qBAAlB;AACAuF,MAAAA,KAAK,CAAC7L,KAAN,CAAYmG,KAAZ,GAAoB,OAApB;AAEA,UAAIqG,IAAI,GAAG1M,QAAQ,CAACmG,aAAT,CAAuB,IAAvB,CAAX;AACAuG,MAAAA,IAAI,CAACxM,KAAL,CAAW8C,KAAX,GAAmB,UAAnB;AAEA,UAAI2J,QAAQ,GAAG3M,QAAQ,CAACmG,aAAT,CAAuB,IAAvB,CAAf;AACAwG,MAAAA,QAAQ,CAAC5J,SAAT,GAAqB,MAArB;AACA4J,MAAAA,QAAQ,CAACzM,KAAT,CAAe0M,WAAf,GAA6B,MAA7B;AACAD,MAAAA,QAAQ,CAAChE,EAAT,GAAc,MAAd;AAEA,UAAIkE,SAAS,GAAG7M,QAAQ,CAACmG,aAAT,CAAuB,IAAvB,CAAhB;AACA0G,MAAAA,SAAS,CAAC9J,SAAV,GAAsB,WAAtB;AACA8J,MAAAA,SAAS,CAAClE,EAAV,GAAe,OAAf;AAEA,UAAImE,cAAc,GAAG9M,QAAQ,CAACmG,aAAT,CAAuB,IAAvB,CAArB;AACA2G,MAAAA,cAAc,CAAC/J,SAAf,GAA2B,YAA3B;AACA+J,MAAAA,cAAc,CAACnE,EAAf,GAAoB,YAApB;AAEA,UAAIoE,QAAQ,GAAG/M,QAAQ,CAACmG,aAAT,CAAuB,IAAvB,CAAf;AACA4G,MAAAA,QAAQ,CAAChK,SAAT,GAAqB,MAArB;AACAgK,MAAAA,QAAQ,CAACpE,EAAT,GAAc,MAAd;AAEA+D,MAAAA,IAAI,CAAChG,WAAL,CAAiBiG,QAAjB;AACAD,MAAAA,IAAI,CAAChG,WAAL,CAAiBmG,SAAjB;AACAH,MAAAA,IAAI,CAAChG,WAAL,CAAiBoG,cAAjB;AACAJ,MAAAA,IAAI,CAAChG,WAAL,CAAiBqG,QAAjB;AAEAhB,MAAAA,KAAK,CAACrF,WAAN,CAAkBgG,IAAlB;;AAEA,WAAI,IAAI/K,CAAC,GAAG,CAAZ,EAAeA,CAAC,GAAGuR,MAAM,CAACrR,MAA1B,EAAkCF,CAAC,EAAnC,EAAsC;AACpC,YAAIyL,EAAE,GAAGpN,QAAQ,CAACmG,aAAT,CAAuB,IAAvB,CAAT;;AACAiH,QAAAA,EAAE,CAACtE,OAAH,GAAa,YAAW;AAAEuE,UAAAA,mBAAmB,CAAC6F,MAAM,CAACvR,CAAD,CAAN,CAAUgD,KAAV,CAAgB,GAAhB,EAAqB,CAArB,CAAD,EAA0B7E,YAAY,CAACC,OAAb,CAAqB,mBAArB,CAA1B,CAAnB;AAA0F,SAApH;;AAEAgM,QAAAA,KAAK,CAACrF,WAAN,CAAkB1G,QAAQ,CAACmG,aAAT,CAAuB,IAAvB,CAAlB;AAEA,YAAI0D,IAAI,GAAG7J,QAAQ,CAACmG,aAAT,CAAuB,IAAvB,CAAX;AACA0D,QAAAA,IAAI,CAAC3J,KAAL,CAAW0M,WAAX,GAAyB,MAAzB;AACA,YAAItC,KAAK,GAAGtK,QAAQ,CAACmG,aAAT,CAAuB,IAAvB,CAAZ;AACA,YAAImH,UAAU,GAAGtN,QAAQ,CAACmG,aAAT,CAAuB,IAAvB,CAAjB;AAEA0D,QAAAA,IAAI,CAAC9G,SAAL,GAAiBmQ,MAAM,CAACvR,CAAD,CAAN,CAAUgD,KAAV,CAAgB,GAAhB,EAAqB,CAArB,CAAjB;AACA2F,QAAAA,KAAK,CAACvH,SAAN,GAAkBmQ,MAAM,CAACvR,CAAD,CAAN,CAAUgD,KAAV,CAAgB,GAAhB,EAAqB,CAArB,IAA0B,GAA5C;AACA2I,QAAAA,UAAU,CAACvK,SAAX,GAAuB2P,aAAa,CAACQ,MAAM,CAACvR,CAAD,CAAP,EAAYuR,MAAZ,CAAb,GAAmC,IAA1D;AAEA,YAAI/F,IAAI,GAAGnN,QAAQ,CAACmG,aAAT,CAAuB,IAAvB,CAAX;AACAgH,QAAAA,IAAI,CAACpK,SAAL,GAAiBgQ,YAAY,CAACpR,CAAD,CAAZ,CAAgBgD,KAAhB,CAAsB,GAAtB,EAA2B,CAA3B,IAAgC,OAAjD;AACAwI,QAAAA,IAAI,CAACxE,EAAL,GAAU,MAAV;AAEAyE,QAAAA,EAAE,CAAC1G,WAAH,CAAemD,IAAf;AACAuD,QAAAA,EAAE,CAAC1G,WAAH,CAAe4D,KAAf;AACA8C,QAAAA,EAAE,CAAC1G,WAAH,CAAe4G,UAAf;AACAF,QAAAA,EAAE,CAAC1G,WAAH,CAAeyG,IAAf;AACApB,QAAAA,KAAK,CAACrF,WAAN,CAAkB0G,EAAlB;AACD;;AAEDpN,MAAAA,QAAQ,CAAC+B,cAAT,CAAwB,MAAxB,EAAgC2E,WAAhC,CAA4CqF,KAA5C;AAED,KA/DI,MAgEA,IAAG6G,IAAI,IAAI,0BAAX,EAAuC;AAC1C,UAAIQ,KAAK,GAAGC,aAAa,CAACN,YAAD,CAAzB;AAEA,UAAIhH,KAAK,GAAG/L,QAAQ,CAACmG,aAAT,CAAuB,OAAvB,CAAZ;AACA4F,MAAAA,KAAK,CAACpD,EAAN,GAAW,QAAX;AACAoD,MAAAA,KAAK,CAACvF,SAAN,GAAkB,qBAAlB;AACAuF,MAAAA,KAAK,CAAC7L,KAAN,CAAYmG,KAAZ,GAAoB,OAApB;AAEA,UAAIqG,IAAI,GAAG1M,QAAQ,CAACmG,aAAT,CAAuB,IAAvB,CAAX;AACAuG,MAAAA,IAAI,CAACxM,KAAL,CAAW8C,KAAX,GAAmB,UAAnB;AAEA,UAAI2J,QAAQ,GAAG3M,QAAQ,CAACmG,aAAT,CAAuB,IAAvB,CAAf;AACAwG,MAAAA,QAAQ,CAAC5J,SAAT,GAAqB,MAArB;AACA4J,MAAAA,QAAQ,CAACzM,KAAT,CAAe0M,WAAf,GAA6B,MAA7B;AACAD,MAAAA,QAAQ,CAAChE,EAAT,GAAc,MAAd;AAEA,UAAIkE,SAAS,GAAG7M,QAAQ,CAACmG,aAAT,CAAuB,IAAvB,CAAhB;AACA0G,MAAAA,SAAS,CAAC9J,SAAV,GAAsB,WAAtB;AACA8J,MAAAA,SAAS,CAAClE,EAAV,GAAe,OAAf;AAEA,UAAImE,cAAc,GAAG9M,QAAQ,CAACmG,aAAT,CAAuB,IAAvB,CAArB;AACA2G,MAAAA,cAAc,CAAC/J,SAAf,GAA2B,YAA3B;AACA+J,MAAAA,cAAc,CAACnE,EAAf,GAAoB,YAApB;AAEA,UAAIoE,QAAQ,GAAG/M,QAAQ,CAACmG,aAAT,CAAuB,IAAvB,CAAf;AACA4G,MAAAA,QAAQ,CAAChK,SAAT,GAAqB,MAArB;AACAgK,MAAAA,QAAQ,CAACpE,EAAT,GAAc,MAAd;AAEA+D,MAAAA,IAAI,CAAChG,WAAL,CAAiBiG,QAAjB;AACAD,MAAAA,IAAI,CAAChG,WAAL,CAAiBmG,SAAjB;AACAH,MAAAA,IAAI,CAAChG,WAAL,CAAiBoG,cAAjB;AACAJ,MAAAA,IAAI,CAAChG,WAAL,CAAiBqG,QAAjB;AAEAhB,MAAAA,KAAK,CAACrF,WAAN,CAAkBgG,IAAlB;;AAEA,WAAI,IAAI/K,CAAC,GAAGyR,KAAK,CAACvR,MAAN,GAAe,CAA3B,EAA8BF,CAAC,IAAI,CAAnC,EAAsCA,CAAC,EAAvC,EAA0C;AACxC,YAAIyL,EAAE,GAAGpN,QAAQ,CAACmG,aAAT,CAAuB,IAAvB,CAAT;;AACAiH,QAAAA,EAAE,CAACtE,OAAH,GAAa,YAAW;AAAEuE,UAAAA,mBAAmB,CAAC+F,KAAK,CAACzR,CAAD,CAAL,CAASgD,KAAT,CAAe,GAAf,EAAoB,CAApB,CAAD,EAAyB7E,YAAY,CAACC,OAAb,CAAqB,mBAArB,CAAzB,CAAnB;AAAyF,SAAnH;;AAEAgM,QAAAA,KAAK,CAACrF,WAAN,CAAkB1G,QAAQ,CAACmG,aAAT,CAAuB,IAAvB,CAAlB;AAEA,YAAI0D,IAAI,GAAG7J,QAAQ,CAACmG,aAAT,CAAuB,IAAvB,CAAX;AACA0D,QAAAA,IAAI,CAAC3J,KAAL,CAAW0M,WAAX,GAAyB,MAAzB;AACA,YAAItC,KAAK,GAAGtK,QAAQ,CAACmG,aAAT,CAAuB,IAAvB,CAAZ;AACA,YAAImH,UAAU,GAAGtN,QAAQ,CAACmG,aAAT,CAAuB,IAAvB,CAAjB;AAEA0D,QAAAA,IAAI,CAAC9G,SAAL,GAAiBqQ,KAAK,CAACzR,CAAD,CAAL,CAASgD,KAAT,CAAe,GAAf,EAAoB,CAApB,CAAjB;AACA2F,QAAAA,KAAK,CAACvH,SAAN,GAAkBqQ,KAAK,CAACzR,CAAD,CAAL,CAASgD,KAAT,CAAe,GAAf,EAAoB,CAApB,IAAyB,GAA3C;AACA2I,QAAAA,UAAU,CAACvK,SAAX,GAAuB2P,aAAa,CAACU,KAAK,CAACzR,CAAD,CAAN,EAAWyR,KAAX,CAAb,GAAiC,IAAxD;AAEA,YAAIjG,IAAI,GAAGnN,QAAQ,CAACmG,aAAT,CAAuB,IAAvB,CAAX;AACAgH,QAAAA,IAAI,CAACpK,SAAL,GAAiBqQ,KAAK,CAACzR,CAAD,CAAL,CAASgD,KAAT,CAAe,GAAf,EAAoB,CAApB,IAAyB,OAA1C;AACAwI,QAAAA,IAAI,CAACxE,EAAL,GAAU,MAAV;AAEAyE,QAAAA,EAAE,CAAC1G,WAAH,CAAemD,IAAf;AACAuD,QAAAA,EAAE,CAAC1G,WAAH,CAAe4D,KAAf;AACA8C,QAAAA,EAAE,CAAC1G,WAAH,CAAe4G,UAAf;AACAF,QAAAA,EAAE,CAAC1G,WAAH,CAAeyG,IAAf;AACApB,QAAAA,KAAK,CAACrF,WAAN,CAAkB0G,EAAlB;AACD;;AAEDpN,MAAAA,QAAQ,CAAC+B,cAAT,CAAwB,MAAxB,EAAgC2E,WAAhC,CAA4CqF,KAA5C;AACD,KA9DI,MA+DA,IAAG6G,IAAI,IAAI,0BAAX,EAAuC;AAC1C,UAAIQ,KAAK,GAAGC,aAAa,CAACN,YAAD,CAAzB;AAEA,UAAIhH,KAAK,GAAG/L,QAAQ,CAACmG,aAAT,CAAuB,OAAvB,CAAZ;AACA4F,MAAAA,KAAK,CAACpD,EAAN,GAAW,QAAX;AACAoD,MAAAA,KAAK,CAACvF,SAAN,GAAkB,qBAAlB;AACAuF,MAAAA,KAAK,CAAC7L,KAAN,CAAYmG,KAAZ,GAAoB,OAApB;AAEA,UAAIqG,IAAI,GAAG1M,QAAQ,CAACmG,aAAT,CAAuB,IAAvB,CAAX;AACAuG,MAAAA,IAAI,CAACxM,KAAL,CAAW8C,KAAX,GAAmB,UAAnB;AAEA,UAAI2J,QAAQ,GAAG3M,QAAQ,CAACmG,aAAT,CAAuB,IAAvB,CAAf;AACAwG,MAAAA,QAAQ,CAAC5J,SAAT,GAAqB,MAArB;AACA4J,MAAAA,QAAQ,CAACzM,KAAT,CAAe0M,WAAf,GAA6B,MAA7B;AACAD,MAAAA,QAAQ,CAAChE,EAAT,GAAc,MAAd;AAEA,UAAIkE,SAAS,GAAG7M,QAAQ,CAACmG,aAAT,CAAuB,IAAvB,CAAhB;AACA0G,MAAAA,SAAS,CAAC9J,SAAV,GAAsB,WAAtB;AACA8J,MAAAA,SAAS,CAAClE,EAAV,GAAe,OAAf;AAEA,UAAImE,cAAc,GAAG9M,QAAQ,CAACmG,aAAT,CAAuB,IAAvB,CAArB;AACA2G,MAAAA,cAAc,CAAC/J,SAAf,GAA2B,YAA3B;AACA+J,MAAAA,cAAc,CAACnE,EAAf,GAAoB,YAApB;AAEA,UAAIoE,QAAQ,GAAG/M,QAAQ,CAACmG,aAAT,CAAuB,IAAvB,CAAf;AACA4G,MAAAA,QAAQ,CAAChK,SAAT,GAAqB,MAArB;AACAgK,MAAAA,QAAQ,CAACpE,EAAT,GAAc,MAAd;AAEA+D,MAAAA,IAAI,CAAChG,WAAL,CAAiBiG,QAAjB;AACAD,MAAAA,IAAI,CAAChG,WAAL,CAAiBmG,SAAjB;AACAH,MAAAA,IAAI,CAAChG,WAAL,CAAiBoG,cAAjB;AACAJ,MAAAA,IAAI,CAAChG,WAAL,CAAiBqG,QAAjB;AAEAhB,MAAAA,KAAK,CAACrF,WAAN,CAAkBgG,IAAlB;;AAEA,WAAI,IAAI/K,CAAC,GAAG,CAAZ,EAAeA,CAAC,GAAGyR,KAAK,CAACvR,MAAzB,EAAiCF,CAAC,EAAlC,EAAqC;AACnC,YAAIyL,EAAE,GAAGpN,QAAQ,CAACmG,aAAT,CAAuB,IAAvB,CAAT;;AACAiH,QAAAA,EAAE,CAACtE,OAAH,GAAa,YAAW;AAAEuE,UAAAA,mBAAmB,CAAC+F,KAAK,CAACzR,CAAD,CAAL,CAASgD,KAAT,CAAe,GAAf,EAAoB,CAApB,CAAD,EAAyB7E,YAAY,CAACC,OAAb,CAAqB,mBAArB,CAAzB,CAAnB;AAAyF,SAAnH;;AAEAgM,QAAAA,KAAK,CAACrF,WAAN,CAAkB1G,QAAQ,CAACmG,aAAT,CAAuB,IAAvB,CAAlB;AAEA,YAAI0D,IAAI,GAAG7J,QAAQ,CAACmG,aAAT,CAAuB,IAAvB,CAAX;AACA0D,QAAAA,IAAI,CAAC3J,KAAL,CAAW0M,WAAX,GAAyB,MAAzB;AACA,YAAItC,KAAK,GAAGtK,QAAQ,CAACmG,aAAT,CAAuB,IAAvB,CAAZ;AACA,YAAImH,UAAU,GAAGtN,QAAQ,CAACmG,aAAT,CAAuB,IAAvB,CAAjB;AAEA0D,QAAAA,IAAI,CAAC9G,SAAL,GAAiBqQ,KAAK,CAACzR,CAAD,CAAL,CAASgD,KAAT,CAAe,GAAf,EAAoB,CAApB,CAAjB;AACA2F,QAAAA,KAAK,CAACvH,SAAN,GAAkBqQ,KAAK,CAACzR,CAAD,CAAL,CAASgD,KAAT,CAAe,GAAf,EAAoB,CAApB,IAAyB,GAA3C;AACA2I,QAAAA,UAAU,CAACvK,SAAX,GAAuB2P,aAAa,CAACU,KAAK,CAACzR,CAAD,CAAN,EAAWyR,KAAX,CAAb,GAAiC,IAAxD;AAEA,YAAIjG,IAAI,GAAGnN,QAAQ,CAACmG,aAAT,CAAuB,IAAvB,CAAX;AACAgH,QAAAA,IAAI,CAACpK,SAAL,GAAiBqQ,KAAK,CAACzR,CAAD,CAAL,CAASgD,KAAT,CAAe,GAAf,EAAoB,CAApB,IAAyB,OAA1C;AACAwI,QAAAA,IAAI,CAACxE,EAAL,GAAU,MAAV;AAEAyE,QAAAA,EAAE,CAAC1G,WAAH,CAAemD,IAAf;AACAuD,QAAAA,EAAE,CAAC1G,WAAH,CAAe4D,KAAf;AACA8C,QAAAA,EAAE,CAAC1G,WAAH,CAAe4G,UAAf;AACAF,QAAAA,EAAE,CAAC1G,WAAH,CAAeyG,IAAf;AACApB,QAAAA,KAAK,CAACrF,WAAN,CAAkB0G,EAAlB;AACD;;AAEDpN,MAAAA,QAAQ,CAAC+B,cAAT,CAAwB,MAAxB,EAAgC2E,WAAhC,CAA4CqF,KAA5C;AACD;AACF;AACF,EAED;;;AACA,SAASoH,SAAT,CAAoB5S,GAApB,EAAyB;AACvB,MAAIA,GAAG,CAACsB,MAAJ,KAAe,CAAnB,EAAsB;AACpB;AACA,WAAOtB,GAAP;AACD;;AAED,MAAM+S,MAAM,GAAG1I,IAAI,CAAC2I,KAAL,CAAWhT,GAAG,CAACsB,MAAJ,GAAa,CAAxB,CAAf,CANuB,CAMmB;;AAC1C,MAAM2R,IAAI,GAAGjT,GAAG,CAACyS,KAAJ,CAAU,CAAV,EAAaM,MAAb,CAAb,CAPuB,CAOW;;AAClC,MAAMG,KAAK,GAAGlT,GAAG,CAACyS,KAAJ,CAAUM,MAAV,CAAd,CARuB,CAQS;;AAEhC,SAAOI,KAAK,CACVP,SAAS,CAACK,IAAD,CADC,EAEVL,SAAS,CAACM,KAAD,CAFC,CAAZ;AAID,EAED;;;AACA,SAASC,KAAT,CAAeF,IAAf,EAAqBC,KAArB,EAA4B;AAC1B,MAAIzL,MAAM,GAAG,EAAb;AACA,MAAI2L,SAAS,GAAG,CAAhB;AACA,MAAIC,UAAU,GAAG,CAAjB;;AAEA,SAAOD,SAAS,GAAGH,IAAI,CAAC3R,MAAjB,IAA2B+R,UAAU,GAAGH,KAAK,CAAC5R,MAArD,EAA6D;AAC3D,QAAI2R,IAAI,CAACG,SAAD,CAAJ,CAAgBhP,KAAhB,CAAsB,GAAtB,EAA2B,CAA3B,IAAgC8O,KAAK,CAACG,UAAD,CAAL,CAAkBjP,KAAlB,CAAwB,GAAxB,EAA6B,CAA7B,CAApC,EAAqE;AACnEqD,MAAAA,MAAM,CAACvD,IAAP,CAAY+O,IAAI,CAACG,SAAD,CAAhB;AACAA,MAAAA,SAAS;AACV,KAHD,MAGO;AACL3L,MAAAA,MAAM,CAACvD,IAAP,CAAYgP,KAAK,CAACG,UAAD,CAAjB;AACAA,MAAAA,UAAU;AACX;AACF;;AAED,SAAO5L,MAAM,CAAC6L,MAAP,CAAcL,IAAI,CAACR,KAAL,CAAWW,SAAX,CAAd,EAAqCE,MAArC,CAA4CJ,KAAK,CAACT,KAAN,CAAYY,UAAZ,CAA5C,CAAP;AACD,EAED;;;AACA,SAASP,aAAT,CAAwB9S,GAAxB,EAA6B;AAC3B,MAAIA,GAAG,CAACsB,MAAJ,KAAe,CAAnB,EAAsB;AACpB;AACA,WAAOtB,GAAP;AACD;;AAED,MAAM+S,MAAM,GAAG1I,IAAI,CAAC2I,KAAL,CAAWhT,GAAG,CAACsB,MAAJ,GAAa,CAAxB,CAAf,CAN2B,CAMe;;AAC1C,MAAM2R,IAAI,GAAGjT,GAAG,CAACyS,KAAJ,CAAU,CAAV,EAAaM,MAAb,CAAb,CAP2B,CAOO;;AAClC,MAAMG,KAAK,GAAGlT,GAAG,CAACyS,KAAJ,CAAUM,MAAV,CAAd,CAR2B,CAQK;;AAEhC,SAAOQ,SAAS,CACdT,aAAa,CAACG,IAAD,CADC,EAEdH,aAAa,CAACI,KAAD,CAFC,CAAhB;AAID,EAED;;;AACA,SAASK,SAAT,CAAmBN,IAAnB,EAAyBC,KAAzB,EAAgC;AAC9B,MAAIzL,MAAM,GAAG,EAAb;AACA,MAAI2L,SAAS,GAAG,CAAhB;AACA,MAAIC,UAAU,GAAG,CAAjB;;AAEA,SAAOD,SAAS,GAAGH,IAAI,CAAC3R,MAAjB,IAA2B+R,UAAU,GAAGH,KAAK,CAAC5R,MAArD,EAA6D;AAC3D,QAAI2R,IAAI,CAACG,SAAD,CAAJ,CAAgBhP,KAAhB,CAAsB,GAAtB,EAA2B,CAA3B,IAAgC8O,KAAK,CAACG,UAAD,CAAL,CAAkBjP,KAAlB,CAAwB,GAAxB,EAA6B,CAA7B,CAApC,EAAqE;AACnEqD,MAAAA,MAAM,CAACvD,IAAP,CAAY+O,IAAI,CAACG,SAAD,CAAhB;AACAA,MAAAA,SAAS;AACV,KAHD,MAGO;AACL3L,MAAAA,MAAM,CAACvD,IAAP,CAAYgP,KAAK,CAACG,UAAD,CAAjB;AACAA,MAAAA,UAAU;AACX;AACF;;AAED,SAAO5L,MAAM,CAAC6L,MAAP,CAAcL,IAAI,CAACR,KAAL,CAAWW,SAAX,CAAd,EAAqCE,MAArC,CAA4CJ,KAAK,CAACT,KAAN,CAAYY,UAAZ,CAA5C,CAAP;AACD,EAED;;;AACA,SAASG,WAAT,GAAuB;AACrB,MAAIxC,KAAJ,EAAWyC,MAAX,EAAmBvG,EAAnB,EAAuBwG,EAAvB,EAA2B/F,CAA3B,EAA8BvM,CAA9B,EAAiCuS,QAAjC;AAEA3C,EAAAA,KAAK,GAAGvR,QAAQ,CAAC+B,cAAT,CAAwB,aAAxB,CAAR;AACAiS,EAAAA,MAAM,GAAGzC,KAAK,CAACzN,KAAN,CAAYkB,WAAZ,EAAT;AAEAyI,EAAAA,EAAE,GAAGzN,QAAQ,CAAC+B,cAAT,CAAwB,cAAxB,CAAL;AACAkS,EAAAA,EAAE,GAAGxG,EAAE,CAAC7L,sBAAH,CAA0B,SAA1B,CAAL;;AAEA,OAAKD,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAGsS,EAAE,CAACpS,MAAnB,EAA2BF,CAAC,EAA5B,EAAgC;AAC9BuM,IAAAA,CAAC,GAAG+F,EAAE,CAACtS,CAAD,CAAF,CAAMoN,oBAAN,CAA2B,MAA3B,EAAmC,CAAnC,CAAJ;AACAmF,IAAAA,QAAQ,GAAGhG,CAAC,CAACiG,WAAF,IAAiBjG,CAAC,CAACkG,SAA9B;;AACA,QAAIF,QAAQ,CAAClP,WAAT,GAAuBpC,OAAvB,CAA+BoR,MAA/B,IAAyC,CAAC,CAA9C,EAAiD;AAC7CC,MAAAA,EAAE,CAACtS,CAAD,CAAF,CAAMzB,KAAN,CAAYC,OAAZ,GAAsB,EAAtB;AACH,KAFD,MAEO;AACH8T,MAAAA,EAAE,CAACtS,CAAD,CAAF,CAAMzB,KAAN,CAAYC,OAAZ,GAAsB,MAAtB;AACH;AACF;AACF,EAED;;;AACA,SAASoK,aAAT,CAAuBV,IAAvB,EAA6BG,QAA7B,EAAuC3F,GAAvC,EAA4C8D,IAA5C,EAAkD;AAChD,MAAIkM,SAAS,GAAG,CACd,qDADc,EAEd,qDAFc,EAGd,qDAHc,CAAhB;AAMA,MAAIC,OAAO,GAAGtU,QAAQ,CAAC+B,cAAT,CAAwB,cAAxB,CAAd;AACA,MAAIwS,UAAU,GAAG,KAAjB;AAEA,MAAIC,QAAQ,GAAGxU,QAAQ,CAACmG,aAAT,CAAuB,KAAvB,CAAf;AACAqO,EAAAA,QAAQ,CAAChO,SAAT,GAAqB,SAArB;AACAgO,EAAAA,QAAQ,CAACtU,KAAT,CAAe+F,UAAf,GAA4B,OAA5B;;AAEAuO,EAAAA,QAAQ,CAAC1L,OAAT,GAAmB,YAAW;AAC5ByC,IAAAA,eAAe,CAAC1B,IAAD,CAAf;AACA7J,IAAAA,QAAQ,CAAC+B,cAAT,CAAwB,WAAxB,EAAqCgB,SAArC,GAAiD8G,IAAjD;AACD,GAHD;;AAKA1F,EAAAA,QAAQ,CAACC,QAAT,GAAoBC,GAApB,CAAwBA,GAAxB,EAA6B7C,EAA7B,CAAgC,OAAhC,EAAyC,UAAS8C,QAAT,EAAmB;AAC1D,SAAI,IAAI+H,GAAR,IAAe/H,QAAQ,CAACI,GAAT,EAAf,EAA+B;AAC7B,UAAGJ,QAAQ,CAACI,GAAT,GAAe2H,GAAf,EAAoBtH,QAApB,IAAgCoD,IAAhC,IAAwC7D,QAAQ,CAACI,GAAT,GAAeuI,SAAf,IAA4B/J,SAAvE,EAAkF;AAChFsR,QAAAA,QAAQ,CAAC1L,OAAT,GAAmB,YAAW;AAC5B9I,UAAAA,QAAQ,CAAC+B,cAAT,CAAwB,aAAxB,EAAuC7B,KAAvC,CAA6CC,OAA7C,GAAuD,SAAvD;AACAH,UAAAA,QAAQ,CAAC+B,cAAT,CAAwB,MAAxB,EAAgC7B,KAAhC,CAAsCC,OAAtC,GAAgD,MAAhD;AACAH,UAAAA,QAAQ,CAACC,IAAT,CAAcC,KAAd,CAAoB+F,UAApB,GAAiC,OAAjC;AAEAkD,UAAAA,YAAY,CAAChB,IAAD,EAAO9D,GAAP,CAAZ;AACD,SAND;AAOD;AACF;AACF,GAZD;AAcA,MAAIoQ,aAAa,GAAGzU,QAAQ,CAACmG,aAAT,CAAuB,KAAvB,CAApB;AACAsO,EAAAA,aAAa,CAACvU,KAAd,CAAoB+F,UAApB,GAAiCoO,SAAS,CAACzJ,IAAI,CAAC2I,KAAL,CAAW3I,IAAI,CAACC,MAAL,KAAe,CAAf,GAAoB,CAA/B,CAAD,CAA1C;AACA4J,EAAAA,aAAa,CAACvU,KAAd,CAAoBuS,YAApB,GAAkC,eAAlC;AACAgC,EAAAA,aAAa,CAACjO,SAAd,GAA0B,MAA1B;;AAEAiO,EAAAA,aAAa,CAAC3L,OAAd,GAAwB,YAAW,CAElC,CAFD;;AAIA,MAAI8H,IAAI,GAAG5Q,QAAQ,CAACmG,aAAT,CAAuB,MAAvB,CAAX;;AACA,MAAG0D,IAAI,IAAI,EAAX,EAAe;AACbA,IAAAA,IAAI,GAAG1B,IAAP;AACD;;AAEDyI,EAAAA,IAAI,CAAC7N,SAAL,GAAiB8G,IAAjB;AACA+G,EAAAA,IAAI,CAAC1Q,KAAL,CAAWwU,UAAX,GAAwB,MAAxB;AACA9D,EAAAA,IAAI,CAAC1Q,KAAL,CAAW8C,KAAX,GAAmB,OAAnB;AACA4N,EAAAA,IAAI,CAACpK,SAAL,GAAiB,UAAjB;AAEA,MAAImO,eAAe,GAAG3U,QAAQ,CAACmG,aAAT,CAAuB,MAAvB,CAAtB;AACAwO,EAAAA,eAAe,CAAChM,EAAhB,GAAqB,iBAArB;AACAgM,EAAAA,eAAe,CAACnO,SAAhB,GAA4B,qCAA5B;;AAEAmO,EAAAA,eAAe,CAAC7L,OAAhB,GAA0B,YAAW;AACnC0L,IAAAA,QAAQ,CAAC1L,OAAT,GAAmB,YAAW,CAAE,CAAhC;;AAEA,QAAI8L,KAAK,GAAG5U,QAAQ,CAACmG,aAAT,CAAuB,KAAvB,CAAZ;AACAyO,IAAAA,KAAK,CAACjM,EAAN,GAAW,OAAX;AAEA,QAAI8E,EAAE,GAAGzN,QAAQ,CAACmG,aAAT,CAAuB,IAAvB,CAAT;AAEA,QAAI0O,IAAI,GAAG7U,QAAQ,CAACmG,aAAT,CAAuB,IAAvB,CAAX;AACA0O,IAAAA,IAAI,CAACrO,SAAL,GAAiB,SAAjB;AACAqO,IAAAA,IAAI,CAAC9R,SAAL,GAAiB,WAAjB;;AAEA8R,IAAAA,IAAI,CAAC/L,OAAL,GAAe,YAAW;AACxB9I,MAAAA,QAAQ,CAAC+B,cAAT,CAAwB,aAAxB,EAAuC7B,KAAvC,CAA6CC,OAA7C,GAAuD,SAAvD;AACAH,MAAAA,QAAQ,CAAC+B,cAAT,CAAwB,MAAxB,EAAgC7B,KAAhC,CAAsCC,OAAtC,GAAgD,MAAhD;AACAH,MAAAA,QAAQ,CAACC,IAAT,CAAcC,KAAd,CAAoB+F,UAApB,GAAiC,OAAjC;AAEAkD,MAAAA,YAAY,CAAChB,IAAD,EAAO9D,GAAP,CAAZ;AACD,KAND;;AAQA,QAAIyQ,OAAO,GAAG9U,QAAQ,CAACmG,aAAT,CAAuB,IAAvB,CAAd;AACA2O,IAAAA,OAAO,CAACtO,SAAR,GAAoB,SAApB;AACAsO,IAAAA,OAAO,CAAC/R,SAAR,GAAoB,cAApB;;AAEA+R,IAAAA,OAAO,CAAChM,OAAR,GAAkB,YAAW;AAC3ByC,MAAAA,eAAe,CAAC1B,IAAD,CAAf;AACA7J,MAAAA,QAAQ,CAAC+B,cAAT,CAAwB,WAAxB,EAAqCgB,SAArC,GAAiD8G,IAAjD;AACD,KAHD;;AAKA,QAAIkL,UAAU,GAAG/U,QAAQ,CAACmG,aAAT,CAAuB,IAAvB,CAAjB;AACA4O,IAAAA,UAAU,CAACvO,SAAX,GAAuB,SAAvB;AACAuO,IAAAA,UAAU,CAAChS,SAAX,GAAuB,aAAvB;;AAEAgS,IAAAA,UAAU,CAACjM,OAAX,GAAqB,YAAW;AAC9BkM,MAAAA,UAAU,CAAC7M,IAAD,CAAV;AACD,KAFD;;AAIA,QAAI8M,WAAW,GAAGjV,QAAQ,CAACmG,aAAT,CAAuB,IAAvB,CAAlB;AACA8O,IAAAA,WAAW,CAACzO,SAAZ,GAAwB,SAAxB;AACAyO,IAAAA,WAAW,CAAClS,SAAZ,GAAwB,mBAAxB;;AAGAkS,IAAAA,WAAW,CAACnM,OAAZ,GAAsB,YAAW;AAC/B9I,MAAAA,QAAQ,CAAC+B,cAAT,CAAwB,MAAxB,EAAgC7B,KAAhC,CAAsCC,OAAtC,GAAgD,MAAhD;AACAH,MAAAA,QAAQ,CAAC+B,cAAT,CAAwB,aAAxB,EAAuC7B,KAAvC,CAA6CC,OAA7C,GAAuD,MAAvD;AACAH,MAAAA,QAAQ,CAAC+B,cAAT,CAAwB,SAAxB,EAAmC7B,KAAnC,CAAyCC,OAAzC,GAAmD,OAAnD;AACAH,MAAAA,QAAQ,CAAC+B,cAAT,CAAwB,cAAxB,EAAwCgB,SAAxC,GAAoDoF,IAApD;AACAnI,MAAAA,QAAQ,CAACC,IAAT,CAAcC,KAAd,CAAoBgK,eAApB,GAAsC,MAAtC;AAEA,UAAIgL,SAAS,GAAGtK,IAAI,CAACC,MAAL,GAAcC,QAAd,CAAuB,EAAvB,EAA2B1C,SAA3B,CAAqC,CAArC,CAAhB;AACA+M,MAAAA,kBAAkB,CAAChN,IAAD,EAAO,cAAchF,QAAd,GAAyB,WAAzB,GAAuCrD,YAAY,CAACC,OAAb,CAAqB,iBAArB,CAAvC,GAAgF,SAAvF,EAAkGmV,SAAlG,CAAlB;AAEA/Q,MAAAA,QAAQ,CAACC,QAAT,GAAoBC,GAApB,CAAwB,cAAclB,QAAd,GAAyB,WAAzB,GAAuCrD,YAAY,CAACC,OAAb,CAAqB,iBAArB,CAAvC,GAAiF,SAAjF,GAA6FD,YAAY,CAACC,OAAb,CAAqBmV,SAArB,CAA7F,GAA+H,QAAvJ,EAAiK1T,EAAjK,CAAoK,OAApK,EAA6K,UAAS8C,QAAT,EAAmB;AAC9LpD,QAAAA,CAAC,CAAC,kBAAD,CAAD,CAAsBkU,IAAtB,CAA2B,EAA3B;AACA9Q,QAAAA,QAAQ,CAACC,OAAT,CAAiB,UAASC,aAAT,EAAwB;AACvC,cAAIqF,IAAI,GAAG,EAAX;AAEA1F,UAAAA,QAAQ,CAACC,QAAT,GAAoBC,GAApB,CAAwB,cAAclB,QAAd,GAAyB,WAAzB,GAAuCrD,YAAY,CAACC,OAAb,CAAqB,iBAArB,CAAvC,GAAiF,YAAzG,EAAuH6F,IAAvH,CAA4H,OAA5H,EAAqI,UAASyP,CAAT,EAAY;AAC/IA,YAAAA,CAAC,CAAC9Q,OAAF,CAAU,UAAS+Q,EAAT,EAAa;AACrB,kBAAGA,EAAE,CAAC5Q,GAAH,GAASC,KAAT,CAAe,GAAf,EAAoB,CAApB,KAA0BH,aAAa,CAACE,GAAd,EAA7B,EAAiD;AAC/CmF,gBAAAA,IAAI,GAAGyL,EAAE,CAAC5Q,GAAH,GAASC,KAAT,CAAe,GAAf,EAAoB,CAApB,CAAP;AACD;AACF,aAJD;AAKD,WAND;AAQAgC,UAAAA,UAAU,CAAC,YAAU;AAAE4O,YAAAA,sBAAsB,CAAC1L,IAAD,CAAtB;AAA+B,WAA5C,EAA8C,EAA9C,CAAV;AACD,SAZD;AAaD,OAfD;AAgBD,KA1BD;;AA4BA4D,IAAAA,EAAE,CAAC/G,WAAH,CAAemO,IAAf;AAAsBpH,IAAAA,EAAE,CAAC/G,WAAH,CAAe1G,QAAQ,CAACmG,aAAT,CAAuB,IAAvB,CAAf;AAA8CsH,IAAAA,EAAE,CAAC/G,WAAH,CAAeoO,OAAf;AAAyBrH,IAAAA,EAAE,CAAC/G,WAAH,CAAe1G,QAAQ,CAACmG,aAAT,CAAuB,IAAvB,CAAf;AAA8CsH,IAAAA,EAAE,CAAC/G,WAAH,CAAeqO,UAAf;AAA4BtH,IAAAA,EAAE,CAAC/G,WAAH,CAAe1G,QAAQ,CAACmG,aAAT,CAAuB,IAAvB,CAAf;AAA8CsH,IAAAA,EAAE,CAAC/G,WAAH,CAAeuO,WAAf;AAErNL,IAAAA,KAAK,CAAClO,WAAN,CAAkB+G,EAAlB;AAEAzN,IAAAA,QAAQ,CAAC+B,cAAT,CAAwB,MAAxB,EAAgC2E,WAAhC,CAA4CkO,KAA5C;AACA5U,IAAAA,QAAQ,CAACC,IAAT,CAAcC,KAAd,CAAoBsV,OAApB,GAA8B,GAA9B;AACAxV,IAAAA,QAAQ,CAACC,IAAT,CAAcC,KAAd,CAAoB8T,MAApB,GAA6B,YAA7B;AACAhU,IAAAA,QAAQ,CAACC,IAAT,CAAcC,KAAd,CAAoBuV,SAApB,GAAgC,QAAhC;;AAEA1U,IAAAA,MAAM,CAAC+H,OAAP,GAAiB,UAAS4M,KAAT,EAAgB;AAC/B,UAAIA,KAAK,CAACC,MAAN,IAAgBhB,eAAhB,IAAmCe,KAAK,CAACC,MAAN,IAAgBf,KAAnD,IAA4D5U,QAAQ,CAAC+B,cAAT,CAAwB,OAAxB,CAAhE,EAAkG;AAChG6S,QAAAA,KAAK,CAAC7O,MAAN;AACA/F,QAAAA,QAAQ,CAACC,IAAT,CAAcC,KAAd,CAAoBuV,SAApB,GAAgC,MAAhC;AACAzV,QAAAA,QAAQ,CAACC,IAAT,CAAcC,KAAd,CAAoBsV,OAApB,GAA8B,GAA9B;AACAxV,QAAAA,QAAQ,CAACC,IAAT,CAAcC,KAAd,CAAoB8T,MAApB,GAA6B,WAA7B;AACD;AACF,KAPD;;AASA9S,IAAAA,CAAC,CAAClB,QAAD,CAAD,CAAY4V,KAAZ,CAAkB,UAASC,CAAT,EAAY;AAC3B,UAAIA,CAAC,CAAC/P,GAAF,KAAU,QAAd,EAAwB;AACtB8O,QAAAA,KAAK,CAAC7O,MAAN;AACA/F,QAAAA,QAAQ,CAACC,IAAT,CAAcC,KAAd,CAAoBuV,SAApB,GAAgC,MAAhC;AACAzV,QAAAA,QAAQ,CAACC,IAAT,CAAcC,KAAd,CAAoBsV,OAApB,GAA8B,GAA9B;AACAxV,QAAAA,QAAQ,CAACC,IAAT,CAAcC,KAAd,CAAoB8T,MAApB,GAA6B,WAA7B;AACD;AACH,KAPD;AASArN,IAAAA,UAAU,CAAC,YAAU;AACnB6N,MAAAA,QAAQ,CAAC1L,OAAT,GAAmB,YAAW;AAC5ByC,QAAAA,eAAe,CAAC1B,IAAD,CAAf;AACA7J,QAAAA,QAAQ,CAAC+B,cAAT,CAAwB,WAAxB,EAAqCgB,SAArC,GAAiD8G,IAAjD;AACD,OAHD;AAID,KALS,EAKP,IALO,CAAV;AAMD,GAvGD;;AAyGA4K,EAAAA,aAAa,CAAC/N,WAAd,CAA0BkK,IAA1B;AACA6D,EAAAA,aAAa,CAAC/N,WAAd,CAA0BiO,eAA1B;AACAF,EAAAA,aAAa,CAAC/N,WAAd,CAA0B1G,QAAQ,CAACmG,aAAT,CAAuB,IAAvB,CAA1B;AACAqO,EAAAA,QAAQ,CAAC9N,WAAT,CAAqB+N,aAArB;;AAEA,MAAGzK,QAAQ,IAAI,KAAf,EAAsB;AACpB,QAAI8L,UAAU,GAAG9V,QAAQ,CAACmG,aAAT,CAAuB,MAAvB,CAAjB;AACA2P,IAAAA,UAAU,CAAC/S,SAAX,GAAuB,eAAvB;AAEA,QAAI0H,MAAM,GAAGzK,QAAQ,CAACmG,aAAT,CAAuB,QAAvB,CAAb;AACAsE,IAAAA,MAAM,CAACvK,KAAP,CAAasS,MAAb,GAAsB,MAAtB;AACA/H,IAAAA,MAAM,CAACvK,KAAP,CAAauS,YAAb,GAA4B,KAA5B;AACAhI,IAAAA,MAAM,CAACvK,KAAP,CAAaqS,OAAb,GAAuB,MAAvB;AACA9H,IAAAA,MAAM,CAACvK,KAAP,CAAamR,SAAb,GAAyB,MAAzB;AACA5G,IAAAA,MAAM,CAACvK,KAAP,CAAa6V,SAAb,GAAyB,mBAAzB;AACAtL,IAAAA,MAAM,CAAC1H,SAAP,GAAmB,mBAAnB;;AAEA0H,IAAAA,MAAM,CAACuL,WAAP,GAAqB,YAAW;AAC9B,WAAK9V,KAAL,CAAW+V,SAAX,GAAuB,gBAAvB;AACD,KAFD;;AAIAxL,IAAAA,MAAM,CAACyL,YAAP,GAAsB,YAAW;AAC/B,WAAKhW,KAAL,CAAW+V,SAAX,GAAuB,gBAAvB;AACA,WAAK/V,KAAL,CAAWiW,UAAX,GAAwB,SAAxB;AACD,KAHD;;AAKA1L,IAAAA,MAAM,CAAC3B,OAAP,GAAiB,YAAW;AAC1B0L,MAAAA,QAAQ,CAAC1L,OAAT,GAAmB,YAAW,CAAE,CAAhC;;AAEA9I,MAAAA,QAAQ,CAAC+B,cAAT,CAAwB,MAAxB,EAAgC7B,KAAhC,CAAsCC,OAAtC,GAAgD,MAAhD;AACAH,MAAAA,QAAQ,CAAC+B,cAAT,CAAwB,aAAxB,EAAuC7B,KAAvC,CAA6CC,OAA7C,GAAuD,MAAvD;AACAH,MAAAA,QAAQ,CAAC+B,cAAT,CAAwB,SAAxB,EAAmC7B,KAAnC,CAAyCC,OAAzC,GAAmD,OAAnD;AACAH,MAAAA,QAAQ,CAAC+B,cAAT,CAAwB,cAAxB,EAAwCgB,SAAxC,GAAoDoF,IAApD;AACAnI,MAAAA,QAAQ,CAACC,IAAT,CAAcC,KAAd,CAAoBgK,eAApB,GAAsC,MAAtC;AAEA,UAAIgL,SAAS,GAAGtK,IAAI,CAACC,MAAL,GAAcC,QAAd,CAAuB,EAAvB,EAA2B1C,SAA3B,CAAqC,CAArC,CAAhB;AACA+M,MAAAA,kBAAkB,CAAChN,IAAD,EAAO,cAAchF,QAAd,GAAyB,WAAzB,GAAuCrD,YAAY,CAACC,OAAb,CAAqB,iBAArB,CAAvC,GAAgF,SAAvF,EAAkGmV,SAAlG,CAAlB;AAEA/Q,MAAAA,QAAQ,CAACC,QAAT,GAAoBC,GAApB,CAAwB,cAAclB,QAAd,GAAyB,WAAzB,GAAuCrD,YAAY,CAACC,OAAb,CAAqB,iBAArB,CAAvC,GAAiF,SAAjF,GAA6FD,YAAY,CAACC,OAAb,CAAqBmV,SAArB,CAA7F,GAA+H,QAAvJ,EAAiK1T,EAAjK,CAAoK,OAApK,EAA6K,UAAS8C,QAAT,EAAmB;AAC9LpD,QAAAA,CAAC,CAAC,kBAAD,CAAD,CAAsBkU,IAAtB,CAA2B,EAA3B;AACA9Q,QAAAA,QAAQ,CAACC,OAAT,CAAiB,UAASC,aAAT,EAAwB;AACvC,cAAIqF,IAAI,GAAG,EAAX;AAEA1F,UAAAA,QAAQ,CAACC,QAAT,GAAoBC,GAApB,CAAwB,cAAclB,QAAd,GAAyB,WAAzB,GAAuCrD,YAAY,CAACC,OAAb,CAAqB,iBAArB,CAAvC,GAAiF,YAAzG,EAAuH6F,IAAvH,CAA4H,OAA5H,EAAqI,UAASyP,CAAT,EAAY;AAC/IA,YAAAA,CAAC,CAAC9Q,OAAF,CAAU,UAAS+Q,EAAT,EAAa;AACrB,kBAAGA,EAAE,CAAC5Q,GAAH,GAASC,KAAT,CAAe,GAAf,EAAoB,CAApB,KAA0BH,aAAa,CAACE,GAAd,EAA7B,EAAiD;AAC/CmF,gBAAAA,IAAI,GAAGyL,EAAE,CAAC5Q,GAAH,GAASC,KAAT,CAAe,GAAf,EAAoB,CAApB,CAAP;AACD;AACF,aAJD;AAKD,WAND;AAQAgC,UAAAA,UAAU,CAAC,YAAU;AAAE4O,YAAAA,sBAAsB,CAAC1L,IAAD,CAAtB;AAA+B,WAA5C,EAA8C,EAA9C,CAAV;AACD,SAZD;AAaD,OAfD;AAgBD,KA5BD;;AA8BA2K,IAAAA,QAAQ,CAAC9N,WAAT,CAAqBoP,UAArB;AACAtB,IAAAA,QAAQ,CAAC9N,WAAT,CAAqB1G,QAAQ,CAACmG,aAAT,CAAuB,IAAvB,CAArB;AACAqO,IAAAA,QAAQ,CAAC9N,WAAT,CAAqB+D,MAArB;AACD,GAtDD,MAwDK;AACH,QAAI2L,MAAM,GAAGpW,QAAQ,CAACmG,aAAT,CAAuB,MAAvB,CAAb;AACAiQ,IAAAA,MAAM,CAACrT,SAAP,GAAmBsT,SAAS,CAACrM,QAAD,CAA5B;AACAoM,IAAAA,MAAM,CAAClW,KAAP,CAAa8C,KAAb,GAAqB,SAArB;AACAoT,IAAAA,MAAM,CAAClW,KAAP,CAAa0N,QAAb,GAAwB,MAAxB;AAEA,QAAIkI,UAAU,GAAG9V,QAAQ,CAACmG,aAAT,CAAuB,MAAvB,CAAjB;AACA2P,IAAAA,UAAU,CAAC/S,SAAX,GAAuB,oBAAoBiH,QAApB,GAA+B,GAAtD;AAEAwK,IAAAA,QAAQ,CAAC9N,WAAT,CAAqB0P,MAArB;AACA5B,IAAAA,QAAQ,CAAC9N,WAAT,CAAqB1G,QAAQ,CAACmG,aAAT,CAAuB,IAAvB,CAArB;AACAqO,IAAAA,QAAQ,CAAC9N,WAAT,CAAqBoP,UAArB;AACD;;AAEDxB,EAAAA,OAAO,CAAC5N,WAAR,CAAoB8N,QAApB;AACAxU,EAAAA,QAAQ,CAAC+B,cAAT,CAAwB,MAAxB,EAAgC2E,WAAhC,CAA4C4N,OAA5C;AACD;;AAED,SAASa,kBAAT,CAA4BhN,IAA5B,EAAkC9D,GAAlC,EAAuCiS,SAAvC,EAAkD;AAChDnS,EAAAA,QAAQ,CAACC,QAAT,GAAoBC,GAApB,CAAwBA,GAAxB,EAA6BuB,IAA7B,CAAkC,OAAlC,EAA2C,UAAStB,QAAT,EAAmB;AAC5D,SAAI,IAAIiS,CAAR,IAAajS,QAAQ,CAACI,GAAT,EAAb,EAA6B;AAC3B,UAAG6R,CAAC,CAACnO,SAAF,CAAY,CAAZ,KAAkBD,IAArB,EAA2B;AACzBrI,QAAAA,YAAY,CAACqK,OAAb,CAAqBmM,SAArB,EAAgCC,CAAhC;AACD;AACF;AACF,GAND;AAOD,EAGD;;;AACA,SAAShB,sBAAT,CAAgC1L,IAAhC,EAAsC;AACpC,MAAI2M,kBAAkB,GAAGxW,QAAQ,CAAC+B,cAAT,CAAwB,iBAAxB,CAAzB;AACA,MAAIsS,SAAS,GAAG,CACd,mDADc,EAEd,mDAFc,EAGd,kDAHc,EAId,mDAJc,EAKd,mDALc,EAMd,qDANc,EAOd,iEAPc,CAAhB;AAUA,MAAIoC,GAAG,GAAGzW,QAAQ,CAACmG,aAAT,CAAuB,KAAvB,CAAV;AACAsQ,EAAAA,GAAG,CAAC9N,EAAJ,GAAS,oBAAT;AACA8N,EAAAA,GAAG,CAACvW,KAAJ,CAAUgK,eAAV,GAA4BmK,SAAS,CAACzJ,IAAI,CAAC2I,KAAL,CAAW3I,IAAI,CAACC,MAAL,KAAcwJ,SAAS,CAACxS,MAAnC,CAAD,CAArC;AACA4U,EAAAA,GAAG,CAAC1T,SAAJ,GAAgB8G,IAAhB;AAEA,MAAIX,MAAM,GAAGlJ,QAAQ,CAACmG,aAAT,CAAuB,QAAvB,CAAb;AACA+C,EAAAA,MAAM,CAACxC,WAAP,CAAmB+P,GAAnB;AAEAD,EAAAA,kBAAkB,CAAC9P,WAAnB,CAA+BwC,MAA/B;AACD,EAED;;;AACA,SAAS8L,UAAT,CAAoB7M,IAApB,EAA0B;AACxB,MAAGA,IAAI,IAAI,EAAX,EAAc;AACZ,QAAIA,IAAI,GAAGnI,QAAQ,CAAC+B,cAAT,CAAwB,WAAxB,EAAqCgB,SAAhD;AACD;;AACD,MAAI2T,YAAY,GAAG,EAAnB;AAEAlT,EAAAA,IAAI,CAAC;AACHC,IAAAA,KAAK,EAAE,eADJ;AAEHC,IAAAA,IAAI,EAAE,sFAFH;AAGHC,IAAAA,IAAI,EAAE,SAHH;AAIHC,IAAAA,OAAO,EAAE,IAJN;AAKH+S,IAAAA,UAAU,EAAE;AALT,GAAD,CAAJ,CAOC9S,IAPD,CAOM,UAAC+S,UAAD,EAAgB;AACpB,QAAIA,UAAJ,EAAgB;AACd,UAAI1J,IAAI,GAAG,KAAX;AAEA/I,MAAAA,QAAQ,CAACC,QAAT,GAAoBC,GAApB,CAAwB,cAAclB,QAAd,GAAyB,WAAzB,GAAuCrD,YAAY,CAACC,OAAb,CAAqB,iBAArB,CAAvC,GAAiF,SAAzG,EAAoH6F,IAApH,CAAyH,OAAzH,EAAkI/B,IAAlI,CAAuI,UAASS,QAAT,EAAmB;AACxJA,QAAAA,QAAQ,CAACC,OAAT,CAAiB,UAASC,aAAT,EAAwB;AACvC,cAAGA,aAAa,CAACsB,GAAd,CAAkBsC,SAAlB,CAA4B,CAA5B,KAAkCD,IAArC,EAA2C;AACzCuO,YAAAA,YAAY,GAAGlS,aAAa,CAACsB,GAA7B;AACD;AACF,SAJD;AAKA3B,QAAAA,QAAQ,CAACC,QAAT,GAAoBC,GAApB,CAAwB,cAAclB,QAAd,GAAyB,WAAzB,GAAuCrD,YAAY,CAACC,OAAb,CAAqB,WAArB,CAAvC,GAA2E,SAA3E,GAAuF2W,YAA/G,EAA6H3Q,MAA7H;AAEA,YAAI1B,GAAG,GAAIF,QAAQ,CAACC,QAAT,GAAoBC,GAApB,CAAwB,cAAclB,QAAd,GAAyB,WAAzB,GAAuCrD,YAAY,CAACC,OAAb,CAAqB,WAArB,CAAvC,GAA2E,SAAnG,CAAX;AACAsE,QAAAA,GAAG,CAACuB,IAAJ,CAAS,OAAT,EAAkB,UAAStB,QAAT,EAAmB;AACnCA,UAAAA,QAAQ,CAACC,OAAT,CAAiB,UAASC,aAAT,EAAwB;AACvC0I,YAAAA,IAAI,GAAG,IAAP;AACD,WAFD;;AAGA,cAAG,CAACA,IAAJ,EAAU;AACR7I,YAAAA,GAAG,CAACI,IAAJ,CAAS,UAAT;AACD;AACF,SAPD;AAQD,OAjBD;AAmBAN,MAAAA,QAAQ,CAACC,QAAT,GAAoBC,GAApB,CAAwB,YAAxB,EAAsC7C,EAAtC,CAAyC,OAAzC,EAAkD,UAAS8C,QAAT,EAAmB;AACnEA,QAAAA,QAAQ,CAACC,OAAT,CAAiB,UAASC,aAAT,EAAwB;AACvC,cAAGA,aAAa,CAACE,GAAd,GAAoBC,KAApB,CAA0B,GAA1B,EAA+B,CAA/B,KAAqCwD,IAAxC,EAA6C;AAC3ChE,YAAAA,QAAQ,CAACC,QAAT,GAAoBC,GAApB,CAAwB,YAAxB,EAAsCwB,KAAtC,CAA4CrB,aAAa,CAACsB,GAA1D,EAA+DC,MAA/D;AACD;AACF,SAJD;AAKD,OAND;AAQA/F,MAAAA,QAAQ,CAAC+B,cAAT,CAAwB,aAAxB,EAAuC7B,KAAvC,CAA6CC,OAA7C,GAAuD,MAAvD;AACAH,MAAAA,QAAQ,CAAC+B,cAAT,CAAwB,MAAxB,EAAgC7B,KAAhC,CAAsCC,OAAtC,GAAgD,SAAhD;AACAH,MAAAA,QAAQ,CAACC,IAAT,CAAcC,KAAd,CAAoB+F,UAApB,GAAiC,OAAjC;AAEAU,MAAAA,UAAU,CAAC,YAAU;AACnBzF,QAAAA,CAAC,CAAC,eAAD,CAAD,CAAmB4I,KAAnB;AACA5I,QAAAA,CAAC,CAAC,OAAD,CAAD,CAAW4I,KAAX;AAEAF,QAAAA,SAAS,CAAC9J,YAAY,CAACC,OAAb,CAAqB,WAArB,CAAD,CAAT;;AAEA,YAAGD,YAAY,CAACC,OAAb,CAAqB,iBAArB,EAAwCiF,WAAxC,MAAyDmD,IAA5D,EAAkE;AAChErI,UAAAA,YAAY,CAACqK,OAAb,CAAqB,iBAArB,EAAwC,EAAxC;AACAnK,UAAAA,QAAQ,CAAC+B,cAAT,CAAwB,oBAAxB,EAA8CgE,MAA9C;AACD;;AAEDvC,QAAAA,IAAI,CAAC,mCAAD,EAAsC;AACxCG,UAAAA,IAAI,EAAE;AADkC,SAAtC,CAAJ;AAGH,OAdW,EAcT,GAdS,CAAV;AAgBD;AACF,GA3DD;AA4DD,EAED;;;AACA,SAASkT,oBAAT,GAAgC;AAC9B,MAAIrR,SAAS,GAAGxF,QAAQ,CAAC4B,sBAAT,CAAgC,UAAhC,CAAhB;;AAEA,OAAI,IAAID,CAAC,GAAG,CAAZ,EAAeA,CAAC,GAAG6D,SAAS,CAAC3D,MAA7B,EAAqCF,CAAC,EAAtC,EAA0C;AACxC,QAAI2F,QAAQ,GAAG9B,SAAS,CAAC7D,CAAD,CAAxB;AAEA2F,IAAAA,QAAQ,CAACxE,UAAT,CAAoB,CAApB,EAAuBC,SAAvB,GAAmCpB,CAAC,GAAG,CAAJ,GAAQ,IAA3C;AACA2F,IAAAA,QAAQ,CAACqB,EAAT,GAAchH,CAAC,GAAG,CAAlB;AACD;AACF,EAED;;;AACA,SAASmV,gBAAT,GAA4B;AAC1B,MAAIhP,KAAK,GAAG9H,QAAQ,CAAC4B,sBAAT,CAAgC,aAAhC,CAAZ;;AAEA,OAAI,IAAID,CAAC,GAAG,CAAZ,EAAeA,CAAC,GAAGmG,KAAK,CAACjG,MAAzB,EAAiCF,CAAC,EAAlC,EAAsC;AACpC,QAAI8U,GAAG,GAAGjR,SAAS,CAAC7D,CAAD,CAAnB;AAEA8U,IAAAA,GAAG,CAAC3T,UAAJ,CAAe,CAAf,EAAkBC,SAAlB,GAA8BpB,CAAC,GAAG,CAAJ,GAAQ,IAAtC;AACD;AACF,EAED;;;AACA,SAAS8H,kBAAT,CAA4B/E,GAA5B,EAAiC/C,CAAjC,EAAoCoV,OAApC,EAA6C;AAC3C,MAAIC,IAAI,GAAGrV,CAAC,GAAG,CAAf;AACA,MAAIsV,OAAO,GAAGjX,QAAQ,CAAC+B,cAAT,CAAwBiV,IAAxB,CAAd;;AAEA,MAAGtS,GAAG,IAAIqS,OAAV,EAAmB;AACjB,SAAI,IAAIlP,CAAC,GAAG,CAAZ,EAAeA,CAAC,GAAGoP,OAAO,CAACnU,UAAR,CAAmBjB,MAAtC,EAA8CgG,CAAC,EAA/C,EAAmD;AACjD,UAAGoP,OAAO,CAACnU,UAAR,CAAmB+E,CAAnB,EAAsBrB,SAAtB,IAAmCuQ,OAAtC,EAA+C;AAC7CE,QAAAA,OAAO,CAACnU,UAAR,CAAmB+E,CAAnB,EAAsB3H,KAAtB,CAA4BC,OAA5B,GAAsC,MAAtC;AACD;AACF;;AAED,QAAGuE,GAAG,IAAI,IAAV,EAAgB;AACd1E,MAAAA,QAAQ,CAAC4B,sBAAT,CAAgC,IAAhC,EAAsCD,CAAtC,EAAyCzB,KAAzC,CAA+CC,OAA/C,GAAyD,SAAzD;AACD,KAFD,MAIK,IAAGuE,GAAG,IAAI,IAAV,EAAgB;AACnB1E,MAAAA,QAAQ,CAAC4B,sBAAT,CAAgC,IAAhC,EAAsCD,CAAtC,EAAyCzB,KAAzC,CAA+CC,OAA/C,GAAyD,MAAzD;AACAH,MAAAA,QAAQ,CAAC+B,cAAT,CAAwBiV,IAAxB,EAA8BtQ,WAA9B,CAA0CwQ,kBAAkB,EAA5D;AACD,KAHI,MAIA,IAAGxS,GAAG,IAAI,IAAV,EAAgB;AACnB1E,MAAAA,QAAQ,CAAC4B,sBAAT,CAAgC,IAAhC,EAAsCD,CAAtC,EAAyCzB,KAAzC,CAA+CC,OAA/C,GAAyD,MAAzD;AACAH,MAAAA,QAAQ,CAAC+B,cAAT,CAAwBiV,IAAxB,EAA8BtQ,WAA9B,CAA0CyQ,eAAe,EAAzD;AACD,KAHI,MAIA,IAAGzS,GAAG,IAAI,UAAV,EAAsB;AACzB1E,MAAAA,QAAQ,CAAC4B,sBAAT,CAAgC,IAAhC,EAAsCD,CAAtC,EAAyCzB,KAAzC,CAA+CC,OAA/C,GAAyD,MAAzD;AACAH,MAAAA,QAAQ,CAAC+B,cAAT,CAAwBiV,IAAxB,EAA8BtQ,WAA9B,CAA0C0Q,cAAc,EAAxD;AACD;AACF;AACF,EAED;;;AACA,SAASC,iBAAT,GAA6B;AAC3B,MAAI9F,KAAJ,EAAWyC,MAAX,EAAmBvG,EAAnB,EAAuBL,EAAvB,EAA2Bc,CAA3B,EAA8BvM,CAA9B,EAAiCuS,QAAjC;AAEA3C,EAAAA,KAAK,GAAGvR,QAAQ,CAAC+B,cAAT,CAAwB,WAAxB,CAAR;AACAqL,EAAAA,EAAE,GAAGpN,QAAQ,CAAC+B,cAAT,CAAwB,aAAxB,EAAuCH,sBAAvC,CAA8D,MAA9D,CAAL;;AAEA,OAAKD,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAGyL,EAAE,CAACvL,MAAnB,EAA2BF,CAAC,EAA5B,EAAgC;AAC9B,QAAGyL,EAAE,CAACzL,CAAD,CAAF,CAAMoB,SAAN,IAAmBwO,KAAK,CAACzN,KAA5B,EAAmC;AACjCsJ,MAAAA,EAAE,CAACzL,CAAD,CAAF,CAAMzB,KAAN,CAAYsS,MAAZ,GAAqB,iBAArB;AACApF,MAAAA,EAAE,CAACzL,CAAD,CAAF,CAAMoH,cAAN,CAAqB;AAACuO,QAAAA,QAAQ,EAAE;AAAX,OAArB;AACD;AACF;AACF,EAED;;;AACA,SAASH,eAAT,GAA2B;AACzB,MAAInG,KAAK,GAAGhR,QAAQ,CAACmG,aAAT,CAAuB,OAAvB,CAAZ;AACA6K,EAAAA,KAAK,CAACrI,EAAN,GAAW,OAAX;AACAqI,EAAAA,KAAK,CAACxK,SAAN,GAAkB,IAAlB;AAEA,MAAI+Q,UAAU,GAAGvX,QAAQ,CAACmG,aAAT,CAAuB,OAAvB,CAAjB;AACAoR,EAAAA,UAAU,CAACrX,KAAX,CAAiBuR,OAAjB,GAA2B,MAA3B;AACA8F,EAAAA,UAAU,CAAC9R,IAAX,GAAkB,OAAlB;AACA8R,EAAAA,UAAU,CAAC/Q,SAAX,GAAuB,oBAAvB;AACA+Q,EAAAA,UAAU,CAAC1N,IAAX,GAAkB,IAAlB;AAEA,MAAI2N,WAAW,GAAGxX,QAAQ,CAACmG,aAAT,CAAuB,OAAvB,CAAlB;AACAqR,EAAAA,WAAW,CAACtX,KAAZ,CAAkBuR,OAAlB,GAA4B,MAA5B;AACA+F,EAAAA,WAAW,CAAC/R,IAAZ,GAAmB,OAAnB;AACA+R,EAAAA,WAAW,CAAChR,SAAZ,GAAwB,oBAAxB;AACAgR,EAAAA,WAAW,CAAC3N,IAAZ,GAAmB,IAAnB;AACA2N,EAAAA,WAAW,CAACtX,KAAZ,CAAkBwU,UAAlB,GAA+B,KAA/B;AAEA,MAAI+C,SAAS,GAAGzX,QAAQ,CAACmG,aAAT,CAAuB,MAAvB,CAAhB;AACAsR,EAAAA,SAAS,CAAC1U,SAAV,GAAsB,OAAtB;AACA0U,EAAAA,SAAS,CAACvX,KAAV,CAAgBwU,UAAhB,GAA6B,MAA7B;AACA+C,EAAAA,SAAS,CAACvX,KAAV,CAAgB8C,KAAhB,GAAwB,MAAxB;AACAyU,EAAAA,SAAS,CAACvX,KAAV,CAAgBkR,UAAhB,GAA6B,QAA7B;AAEA,MAAIsG,UAAU,GAAG1X,QAAQ,CAACmG,aAAT,CAAuB,MAAvB,CAAjB;AACAuR,EAAAA,UAAU,CAAC3U,SAAX,GAAuB,QAAvB;AACA2U,EAAAA,UAAU,CAACxX,KAAX,CAAiBwU,UAAjB,GAA8B,MAA9B;AACAgD,EAAAA,UAAU,CAACxX,KAAX,CAAiB8C,KAAjB,GAAyB,MAAzB;AACA0U,EAAAA,UAAU,CAACxX,KAAX,CAAiBkR,UAAjB,GAA8B,QAA9B;AAEAJ,EAAAA,KAAK,CAACtK,WAAN,CAAkB6Q,UAAlB;AACAvG,EAAAA,KAAK,CAACtK,WAAN,CAAkB+Q,SAAlB;AAEAzG,EAAAA,KAAK,CAACtK,WAAN,CAAkB8Q,WAAlB;AACAxG,EAAAA,KAAK,CAACtK,WAAN,CAAkBgR,UAAlB;AAEA,SAAO1G,KAAP;AACD,EAED;;;AACA,SAASkG,kBAAT,GAA8B;AAC5B,MAAIvF,EAAE,GAAG3R,QAAQ,CAACmG,aAAT,CAAuB,UAAvB,CAAT;AACAwL,EAAAA,EAAE,CAAChB,QAAH,GAAc,IAAd;AACAgB,EAAAA,EAAE,CAACnL,SAAH,GAAe,IAAf;AACAmL,EAAAA,EAAE,CAACW,WAAH,GAAiB,kDAAjB;AAEA,SAAOX,EAAP;AACD,EAGD;;;AACA,SAASyF,cAAT,GAAyB;AACvB,MAAIO,eAAe,GAAG3X,QAAQ,CAACmG,aAAT,CAAuB,KAAvB,CAAtB;AACAwR,EAAAA,eAAe,CAACnR,SAAhB,GAA4B,kBAA5B;AAEA,MAAIoR,QAAQ,GAAG5X,QAAQ,CAACmG,aAAT,CAAuB,KAAvB,CAAf;AACAyR,EAAAA,QAAQ,CAACpR,SAAT,GAAqB,UAArB;AAEA,MAAIiK,EAAE,GAAGzQ,QAAQ,CAACmG,aAAT,CAAuB,IAAvB,CAAT;AACAsK,EAAAA,EAAE,CAACvQ,KAAH,CAASmG,KAAT,GAAiB,KAAjB;AAEA,MAAIb,SAAS,GAAGxF,QAAQ,CAACmG,aAAT,CAAuB,MAAvB,CAAhB;AACAX,EAAAA,SAAS,CAACzC,SAAV,GAAsB,WAAtB;AACAyC,EAAAA,SAAS,CAACtF,KAAV,CAAgBwU,UAAhB,GAA6B,OAA7B;AAEA,MAAII,OAAO,GAAG9U,QAAQ,CAACmG,aAAT,CAAuB,MAAvB,CAAd;AACA2O,EAAAA,OAAO,CAAC/R,SAAR,GAAoB,8BAApB;AACA+R,EAAAA,OAAO,CAAC5U,KAAR,CAAcwU,UAAd,GAA2B,QAA3B;AAEA,MAAImD,WAAW,GAAG7X,QAAQ,CAACmG,aAAT,CAAuB,OAAvB,CAAlB;AACA0R,EAAAA,WAAW,CAACpS,IAAZ,GAAmB,SAAnB;AACAoS,EAAAA,WAAW,CAACvF,WAAZ,GAA0B,kBAA1B;AACAuF,EAAAA,WAAW,CAAC3X,KAAZ,CAAkBuS,YAAlB,GAAiC,KAAjC;AACAoF,EAAAA,WAAW,CAAC3X,KAAZ,CAAkBqS,OAAlB,GAA4B,KAA5B;AACAsF,EAAAA,WAAW,CAAC3X,KAAZ,CAAkBsS,MAAlB,GAA0B,iBAA1B;AACAqF,EAAAA,WAAW,CAAC3X,KAAZ,CAAkB0N,QAAlB,GAA6B,MAA7B;;AAEAiK,EAAAA,WAAW,CAAC7F,OAAZ,GAAsB,YAAW;AAC/B9Q,IAAAA,CAAC,CAACyW,eAAD,CAAD,CAAmB7N,KAAnB;;AAEA,QAAG,KAAKhG,KAAL,IAAc,EAAjB,EAAqB;AACnB,WAAI,IAAInC,CAAC,GAAG,CAAZ,EAAeA,CAAC,GAAG,KAAKmC,KAAxB,EAA+BnC,CAAC,EAAhC,EAAoC;AAClCmW,QAAAA,qBAAqB,CAACH,eAAD,EAAkBhW,CAAC,GAAG,CAAtB,CAArB;AACD;AACF,KAJD,MAKK;AACH,WAAKmC,KAAL,GAAa,EAAb;AAEA,UAAI1D,KAAK,GAAGJ,QAAQ,CAACmG,aAAT,CAAuB,KAAvB,CAAZ;AACA/F,MAAAA,KAAK,CAAC2C,SAAN,GAAkB,kBAAlB;AACA3C,MAAAA,KAAK,CAACF,KAAN,CAAYkG,SAAZ,GAAwB,QAAxB;AACAhG,MAAAA,KAAK,CAACF,KAAN,CAAYmG,KAAZ,GAAoB,MAApB;AACAjG,MAAAA,KAAK,CAACF,KAAN,CAAYoG,QAAZ,GAAuB,OAAvB;AACAlG,MAAAA,KAAK,CAACF,KAAN,CAAYqG,MAAZ,GAAqB,QAArB;AACAnG,MAAAA,KAAK,CAACF,KAAN,CAAYoC,GAAZ,GAAkB,GAAlB;AACAlC,MAAAA,KAAK,CAACoG,SAAN,GAAkB,oBAAlB;AACApG,MAAAA,KAAK,CAACqG,IAAN,GAAa,OAAb;AAEAzG,MAAAA,QAAQ,CAAC+B,cAAT,CAAwB,aAAxB,EAAuC2E,WAAvC,CAAmD1G,QAAQ,CAACmG,aAAT,CAAuB,QAAvB,EAAiCO,WAAjC,CAA6CtG,KAA7C,CAAnD;AAEAuG,MAAAA,UAAU,CAAC,YAAU;AAAE3G,QAAAA,QAAQ,CAAC4B,sBAAT,CAAgC,OAAhC,EAAyC,CAAzC,EAA4CmE,MAA5C;AAAuD,OAApE,EAAsE,IAAtE,CAAV;AACD;AACF,GAzBD;;AA2BA,MAAIgS,MAAM,GAAG/X,QAAQ,CAACmG,aAAT,CAAuB,QAAvB,CAAb;AACA4R,EAAAA,MAAM,CAACpP,EAAP,GAAY,QAAZ;AACAoP,EAAAA,MAAM,CAAChV,SAAP,GAAmB,cAAnB;;AAEAgV,EAAAA,MAAM,CAACjP,OAAP,GAAiB,YAAW;AAC1BgP,IAAAA,qBAAqB,CAACH,eAAD,EAAkB3X,QAAQ,CAAC4B,sBAAT,CAAgC,aAAhC,EAA+CC,MAA/C,GAAwD,CAA1E,CAArB;AACAJ,IAAAA,QAAQ,CAAC,KAAD,CAAR;AACD,GAHD;;AAKAmW,EAAAA,QAAQ,CAAClR,WAAT,CAAqBmR,WAArB;AACAD,EAAAA,QAAQ,CAAClR,WAAT,CAAqB+J,EAArB;AACAmH,EAAAA,QAAQ,CAAClR,WAAT,CAAqBlB,SAArB;AAAiCoS,EAAAA,QAAQ,CAAClR,WAAT,CAAqBoO,OAArB;AACjC8C,EAAAA,QAAQ,CAAClR,WAAT,CAAqBiR,eAArB;AAEAC,EAAAA,QAAQ,CAAClR,WAAT,CAAqB1G,QAAQ,CAACmG,aAAT,CAAuB,IAAvB,CAArB;AACAyR,EAAAA,QAAQ,CAAClR,WAAT,CAAqBqR,MAArB;AAEA,SAAOH,QAAP;AACD,EAED;;;AACA,SAASE,qBAAT,CAA+BnO,GAA/B,EAAoChI,CAApC,EAAuC;AACrC,MAAI8U,GAAG,GAAGzW,QAAQ,CAACmG,aAAT,CAAuB,KAAvB,CAAV;AACAsQ,EAAAA,GAAG,CAACjQ,SAAJ,GAAgB,aAAhB;AAEA,MAAIwR,UAAU,GAAGhY,QAAQ,CAACmG,aAAT,CAAuB,MAAvB,CAAjB;AACA6R,EAAAA,UAAU,CAACxR,SAAX,GAAuB,2BAAvB;AACAwR,EAAAA,UAAU,CAAC9X,KAAX,CAAiBC,OAAjB,GAA2B,MAA3B;AACA6X,EAAAA,UAAU,CAAC9X,KAAX,CAAiB+C,WAAjB,GAA+B,KAA/B;AACA+U,EAAAA,UAAU,CAAC9X,KAAX,CAAiB8C,KAAjB,GAAyB,SAAzB;AAEA9B,EAAAA,CAAC,CAAC8W,UAAD,CAAD,CAAc7W,KAAd,CAAoB,YAAU;AAC5B,SAAK8W,UAAL,CAAgBlS,MAAhB;AACAtE,IAAAA,QAAQ,CAAC,KAAD,CAAR;AACAqV,IAAAA,gBAAgB;AACjB,GAJD;AAMA5V,EAAAA,CAAC,CAACuV,GAAD,CAAD,CAAO7N,KAAP,CAAa,YAAU;AACrB,SAAK9F,UAAL,CAAgB,CAAhB,EAAmB5C,KAAnB,CAAyBC,OAAzB,GAAmC,SAAnC;AACD,GAFD,EAEG,YAAU;AACX,SAAK2C,UAAL,CAAgB,CAAhB,EAAmB5C,KAAnB,CAAyBC,OAAzB,GAAmC,MAAnC;AACD,GAJD;AAMAe,EAAAA,CAAC,CAAC8W,UAAD,CAAD,CAAcpP,KAAd,CAAoB,YAAU;AAC5B,SAAK1I,KAAL,CAAW2I,MAAX,GAAkB,SAAlB;AACA,SAAK3I,KAAL,CAAW8C,KAAX,GAAmB,SAAnB;AACD,GAHD,EAGG,YAAU,CAEZ,CALD;AAOAyT,EAAAA,GAAG,CAAC/P,WAAJ,CAAgBsR,UAAhB;AAEA,MAAIxH,GAAG,GAAGxQ,QAAQ,CAACmG,aAAT,CAAuB,MAAvB,CAAV;AACAqK,EAAAA,GAAG,CAACzN,SAAJ,GAAgBpB,CAAC,GAAG,GAApB;AACA6O,EAAAA,GAAG,CAACtQ,KAAJ,CAAU+C,WAAV,GAAwB,MAAxB;AACAuN,EAAAA,GAAG,CAACtQ,KAAJ,CAAU0N,QAAV,GAAqB,MAArB;AAEA6I,EAAAA,GAAG,CAAC/P,WAAJ,CAAgB8J,GAAhB;AAEA,MAAIe,KAAK,GAAGvR,QAAQ,CAACmG,aAAT,CAAuB,OAAvB,CAAZ;AACAoL,EAAAA,KAAK,CAAC9L,IAAN,GAAa,SAAb;AACA8L,EAAAA,KAAK,CAACrR,KAAN,CAAYmR,SAAZ,GAAwB,MAAxB;AACAE,EAAAA,KAAK,CAACrR,KAAN,CAAYkG,SAAZ,GAAwB,QAAxB;AACAmL,EAAAA,KAAK,CAACe,WAAN,GAAoB,OAApB;AACAf,EAAAA,KAAK,CAAC5I,EAAN,GAAW,QAAX;AAEA,MAAIuP,KAAK,GAAGlY,QAAQ,CAACmG,aAAT,CAAuB,MAAvB,CAAZ;AACA+R,EAAAA,KAAK,CAAC1R,SAAN,GAAkB,iCAAlB;AACA0R,EAAAA,KAAK,CAAChY,KAAN,CAAY0M,WAAZ,GAA0B,KAA1B;AAEA,MAAIuL,YAAY,GAAGnY,QAAQ,CAACmG,aAAT,CAAuB,OAAvB,CAAnB;AACAgS,EAAAA,YAAY,CAAC1S,IAAb,GAAoB,SAApB;AACA0S,EAAAA,YAAY,CAACjY,KAAb,CAAmBwU,UAAnB,GAAgC,KAAhC;AACAyD,EAAAA,YAAY,CAACjY,KAAb,CAAmBkG,SAAnB,GAA+B,QAA/B;AACA+R,EAAAA,YAAY,CAAC7F,WAAb,GAA2B,GAA3B;AACA6F,EAAAA,YAAY,CAACxP,EAAb,GAAkB,QAAlB;AAEA8N,EAAAA,GAAG,CAAC/P,WAAJ,CAAgB6K,KAAhB;AACAkF,EAAAA,GAAG,CAAC/P,WAAJ,CAAgBwR,KAAhB;AACAzB,EAAAA,GAAG,CAAC/P,WAAJ,CAAgByR,YAAhB;AACAxO,EAAAA,GAAG,CAACjD,WAAJ,CAAgB+P,GAAhB;AACD;;AAED,SAAS2B,kBAAT,GAA8B;AAC5BlX,EAAAA,CAAC,CAAC,mBAAD,CAAD,CAAuB4I,KAAvB;;AAEA,OAAI,IAAInI,CAAC,GAAG,CAAZ,EAAeA,CAAC,GAAG3B,QAAQ,CAAC4B,sBAAT,CAAgC,UAAhC,EAA4CC,MAA/D,EAAuEF,CAAC,EAAxE,EAA4E;AAC1E4G,IAAAA,qBAAqB,CAAC5G,CAAC,GAAG,CAAL,EAAQ,KAAR,CAArB;AACD;AACF,EAED;;;AACA,SAASqE,cAAT,CAAwBqS,OAAxB,EAAiCnI,gBAAjC,EAAmD;AACjD,MAAI9F,IAAI,GAAGpK,QAAQ,CAAC+B,cAAT,CAAwB,MAAxB,CAAX;AAEA,MAAIuF,QAAQ,GAAGtH,QAAQ,CAACmG,aAAT,CAAuB,KAAvB,CAAf;AACAmB,EAAAA,QAAQ,CAACd,SAAT,GAAqB,UAArB;AACAc,EAAAA,QAAQ,CAACqB,EAAT,GAAc3I,QAAQ,CAAC4B,sBAAT,CAAgC,UAAhC,EAA4CC,MAA5C,GAAqD,CAAnE;AAEA,MAAI2O,GAAG,GAAGxQ,QAAQ,CAACmG,aAAT,CAAuB,MAAvB,CAAV;AACAqK,EAAAA,GAAG,CAACzN,SAAJ,GAAgB/C,QAAQ,CAAC4B,sBAAT,CAAgC,UAAhC,EAA4CC,MAA5C,GAAqD,CAArD,GAAyD,IAAzE;AACA2O,EAAAA,GAAG,CAACtQ,KAAJ,CAAU8C,KAAV,GAAkB,SAAlB;AAEA,MAAIyN,EAAE,GAAGzQ,QAAQ,CAACmG,aAAT,CAAuB,IAAvB,CAAT;AACA,MAAImS,EAAE,GAAGtY,QAAQ,CAACmG,aAAT,CAAuB,IAAvB,CAAT;AAEA,MAAIoS,KAAK,GAAGvY,QAAQ,CAACmG,aAAT,CAAuB,MAAvB,CAAZ;AACAoS,EAAAA,KAAK,CAAC/R,SAAN,GAAkB,2BAAlB;AACA+R,EAAAA,KAAK,CAACrY,KAAN,CAAYC,OAAZ,GAAsB,MAAtB;AACAoY,EAAAA,KAAK,CAACrY,KAAN,CAAY+C,WAAZ,GAA0B,KAA1B;AACAsV,EAAAA,KAAK,CAACrY,KAAN,CAAY8C,KAAZ,GAAoB,WAApB;AAEA9B,EAAAA,CAAC,CAACqX,KAAD,CAAD,CAASpX,KAAT,CAAe,YAAU;AACvBmG,IAAAA,QAAQ,CAACvB,MAAT;AAAmB0K,IAAAA,EAAE,CAAC1K,MAAH;AAAauS,IAAAA,EAAE,CAACvS,MAAH;AAChCqS,IAAAA,kBAAkB;AAAIvB,IAAAA,oBAAoB;AAAIpV,IAAAA,QAAQ;AACvD,GAHD;AAKAP,EAAAA,CAAC,CAACqX,KAAD,CAAD,CAAS3P,KAAT,CAAe,YAAU;AACvB2P,IAAAA,KAAK,CAACrY,KAAN,CAAY2I,MAAZ,GAAmB,SAAnB;AACA0P,IAAAA,KAAK,CAACrY,KAAN,CAAY8C,KAAZ,GAAoB,OAApB;AACD,GAHD,EAGG,YAAU;AACXuV,IAAAA,KAAK,CAACrY,KAAN,CAAY8C,KAAZ,GAAoB,WAApB;AACD,GALD;AAOA,MAAIwV,OAAO,GAAGxY,QAAQ,CAACmG,aAAT,CAAuB,MAAvB,CAAd;AACAqS,EAAAA,OAAO,CAAC7P,EAAR,GAAa,SAAb;AACA6P,EAAAA,OAAO,CAAChS,SAAR,GAAoB,6BAApB;AACAgS,EAAAA,OAAO,CAACtY,KAAR,CAAcC,OAAd,GAAwB,MAAxB;AACAqY,EAAAA,OAAO,CAACtY,KAAR,CAAc+C,WAAd,GAA4B,KAA5B;AAEA/B,EAAAA,CAAC,CAACsX,OAAD,CAAD,CAAWrX,KAAX,CAAiB,YAAU;AACzB,QAAG,CAACsX,OAAO,CAAC,KAAKR,UAAN,EAAkBS,MAAM,CAAC,iDAAD,CAAxB,CAAX,EAAwF;AACtFlV,MAAAA,IAAI,CAAC,SAAD,EAAY,wCAAZ,EAAsD,OAAtD,CAAJ;AACD,KAFD,MAGK;AACH/B,MAAAA,QAAQ,CAAC,KAAD,CAAR;AACD;AACF,GAPD;AASA,MAAIkX,SAAS,GAAG3Y,QAAQ,CAACmG,aAAT,CAAuB,GAAvB,CAAhB;AACAwS,EAAAA,SAAS,CAAC5V,SAAV,GAAsB,YAAtB;AACA4V,EAAAA,SAAS,CAACzY,KAAV,CAAgBwU,UAAhB,GAA6B,MAA7B;AACAiE,EAAAA,SAAS,CAACzY,KAAV,CAAgBC,OAAhB,GAA0B,MAA1B;AAEA,MAAIyY,SAAS,GAAG5Y,QAAQ,CAACmG,aAAT,CAAuB,MAAvB,CAAhB;AACAyS,EAAAA,SAAS,CAACpS,SAAV,GAAsB,6BAAtB;AACAoS,EAAAA,SAAS,CAAC1Y,KAAV,CAAgBC,OAAhB,GAA0B,MAA1B;AACAyY,EAAAA,SAAS,CAAC1Y,KAAV,CAAgB+C,WAAhB,GAA8B,KAA9B;AACA2V,EAAAA,SAAS,CAAC1Y,KAAV,CAAgB8C,KAAhB,GAAwB,WAAxB;;AAEA4V,EAAAA,SAAS,CAAC9P,OAAV,GAAqB,YAAW;AAC9B+P,IAAAA,WAAW,CAACrI,GAAG,CAACzN,SAAJ,CAAcqF,SAAd,CAAwB,CAAxB,EAA2BoI,GAAG,CAACzN,SAAJ,CAAcH,OAAd,CAAsB,GAAtB,CAA3B,CAAD,EAAyD+V,SAAzD,CAAX;AACD,GAFD;;AAIAzX,EAAAA,CAAC,CAAC0X,SAAD,CAAD,CAAahQ,KAAb,CAAmB,YAAU;AAC3BgQ,IAAAA,SAAS,CAAC1Y,KAAV,CAAgB2I,MAAhB,GAAuB,SAAvB;AACA+P,IAAAA,SAAS,CAAC1Y,KAAV,CAAgB8C,KAAhB,GAAwB,OAAxB;AACD,GAHD,EAGG,YAAU;AACX4V,IAAAA,SAAS,CAAC1Y,KAAV,CAAgB8C,KAAhB,GAAwB,WAAxB;AACD,GALD;AAOA9B,EAAAA,CAAC,CAACoG,QAAD,CAAD,CAAYsB,KAAZ,CAAkB,YAAU;AAC1B4H,IAAAA,GAAG,CAACtQ,KAAJ,CAAUC,OAAV,GAAoB,MAApB;AACAoY,IAAAA,KAAK,CAACrY,KAAN,CAAYC,OAAZ,GAAsB,SAAtB;AACAqY,IAAAA,OAAO,CAACtY,KAAR,CAAcC,OAAd,GAAwB,SAAxB;AACAyY,IAAAA,SAAS,CAAC1Y,KAAV,CAAgBC,OAAhB,GAA0B,SAA1B;AACAqQ,IAAAA,GAAG,CAACtQ,KAAJ,CAAU2I,MAAV,GAAmB,SAAnB;AACD,GAND,EAMG,YAAU;AACX2H,IAAAA,GAAG,CAACtQ,KAAJ,CAAUC,OAAV,GAAoB,SAApB;AACAoY,IAAAA,KAAK,CAACrY,KAAN,CAAYC,OAAZ,GAAsB,MAAtB;AACAyY,IAAAA,SAAS,CAAC1Y,KAAV,CAAgBC,OAAhB,GAA0B,MAA1B;AACAqY,IAAAA,OAAO,CAACtY,KAAR,CAAcC,OAAd,GAAwB,MAAxB;AACD,GAXD;AAcA,MAAIuQ,cAAc,GAAG1Q,QAAQ,CAACmG,aAAT,CAAuB,OAAvB,CAArB;AACAuK,EAAAA,cAAc,CAACjL,IAAf,GAAsB,MAAtB;AACAiL,EAAAA,cAAc,CAAC4B,WAAf,GAA6B,uBAA7B;AACA5B,EAAAA,cAAc,CAAC/H,EAAf,GAAoB,gBAApB;AAEA,MAAImQ,aAAa,GAAG9Y,QAAQ,CAACmG,aAAT,CAAuB,QAAvB,CAApB;AACE,MAAI4S,EAAE,GAAG/Y,QAAQ,CAACmG,aAAT,CAAuB,QAAvB,CAAT;AAA2C4S,EAAAA,EAAE,CAACjV,KAAH,GAAW,IAAX;AAAiBiV,EAAAA,EAAE,CAAChW,SAAH,GAAe,iBAAf;AAC5D,MAAIiW,EAAE,GAAGhZ,QAAQ,CAACmG,aAAT,CAAuB,QAAvB,CAAT;AAA2C6S,EAAAA,EAAE,CAAClV,KAAH,GAAW,IAAX;AAAiBkV,EAAAA,EAAE,CAACjW,SAAH,GAAe,eAAf;AAC5D,MAAIkW,EAAE,GAAGjZ,QAAQ,CAACmG,aAAT,CAAuB,QAAvB,CAAT;AAA2C8S,EAAAA,EAAE,CAACnV,KAAH,GAAW,IAAX;AAAiBmV,EAAAA,EAAE,CAAClW,SAAH,GAAe,cAAf,CA3Fb,CA4F/C;;AAEF+V,EAAAA,aAAa,CAACpS,WAAd,CAA0BqS,EAA1B;AAA+BD,EAAAA,aAAa,CAACpS,WAAd,CAA0BsS,EAA1B;AAA+BF,EAAAA,aAAa,CAACpS,WAAd,CAA0BuS,EAA1B,EA9Fb,CA8F4C;;AAC7FH,EAAAA,aAAa,CAACnQ,EAAd,GAAmB,eAAnB;AAEA,MAAIuQ,QAAJ;AAEAhY,EAAAA,CAAC,CAAC4X,aAAD,CAAD,CAAiBtX,EAAjB,CAAoB,SAApB,EAA+B,YAAU;AACvC0X,IAAAA,QAAQ,GAAGhY,CAAC,CAAC,IAAD,CAAD,CAAQwD,GAAR,EAAX;AACD,GAFD;;AAIAoU,EAAAA,aAAa,CAACK,QAAd,GAAyB,YAAW;AAClC1P,IAAAA,kBAAkB,CAAC,KAAKlC,QAAL,CAAc,KAAK6R,aAAnB,EAAkCtV,KAAnC,EAA0CwD,QAAQ,CAACqB,EAAT,GAAc,CAAxD,EAA2DuQ,QAA3D,CAAlB;AACAJ,IAAAA,aAAa,CAACvX,IAAd;AACD,GAHD;;AAKA+F,EAAAA,QAAQ,CAACZ,WAAT,CAAqB8J,GAArB;AACAlJ,EAAAA,QAAQ,CAACZ,WAAT,CAAqBkS,SAArB;AACAtR,EAAAA,QAAQ,CAACZ,WAAT,CAAqB8R,OAArB;AACAlR,EAAAA,QAAQ,CAACZ,WAAT,CAAqB6R,KAArB;AACAjR,EAAAA,QAAQ,CAACZ,WAAT,CAAqBgK,cAArB;AACApJ,EAAAA,QAAQ,CAACZ,WAAT,CAAqBoS,aAArB;AAEA,MAAIpT,MAAM,GAAG1F,QAAQ,CAACmG,aAAT,CAAuB,KAAvB,CAAb;AACA,MAAIyK,IAAI,GAAG5Q,QAAQ,CAACmG,aAAT,CAAuB,MAAvB,CAAX;AACAyK,EAAAA,IAAI,CAAC7N,SAAL,GAAiB,IAAjB;AAEA,MAAI8N,SAAS,GAAG7Q,QAAQ,CAACmG,aAAT,CAAuB,OAAvB,CAAhB;AACA0K,EAAAA,SAAS,CAACpL,IAAV,GAAiB,MAAjB;AACAoL,EAAAA,SAAS,CAAClI,EAAV,GAAe,WAAf;AACAkI,EAAAA,SAAS,CAACrK,SAAV,GAAsB,WAAtB;AACAqK,EAAAA,SAAS,CAACyB,WAAV,GAAwB,OAAxB;AAEA,MAAIxB,aAAa,GAAI9Q,QAAQ,CAACmG,aAAT,CAAuB,MAAvB,CAArB;AACA2K,EAAAA,aAAa,CAAC/N,SAAd,GAA0B,UAA1B;AAEA2C,EAAAA,MAAM,CAACgB,WAAP,CAAmBkK,IAAnB;AAA0BlL,EAAAA,MAAM,CAACgB,WAAP,CAAmBmK,SAAnB;AAA+BnL,EAAAA,MAAM,CAACgB,WAAP,CAAmBoK,aAAnB;AACzDpL,EAAAA,MAAM,CAACgB,WAAP,CAAmBiS,SAAnB;AAEArR,EAAAA,QAAQ,CAACZ,WAAT,CAAqBhB,MAArB;AAGA,MAAIqL,cAAc,GAAG/Q,QAAQ,CAACmG,aAAT,CAAuB,KAAvB,CAArB;AACA4K,EAAAA,cAAc,CAACvK,SAAf,GAA2B,IAA3B;;AAEA,OAAI,IAAI7E,CAAC,GAAG,CAAZ,EAAeA,CAAC,GAAGuO,gBAAnB,EAAqCvO,CAAC,EAAtC,EAA0C;AACxC,QAAIqP,KAAK,GAAGhR,QAAQ,CAACmG,aAAT,CAAuB,OAAvB,CAAZ;AACA6K,IAAAA,KAAK,CAACrI,EAAN,GAAW,OAAX;AAEA,QAAI4I,KAAK,GAAGvR,QAAQ,CAACmG,aAAT,CAAuB,OAAvB,CAAZ;AACAoL,IAAAA,KAAK,CAACrR,KAAN,CAAYuR,OAAZ,GAAsB,MAAtB;AACAF,IAAAA,KAAK,CAAC9L,IAAN,GAAa,OAAb;AACA8L,IAAAA,KAAK,CAAC/K,SAAN,GAAkB,oBAAlB;AACA+K,IAAAA,KAAK,CAAC1H,IAAN,GAAa2G,GAAG,CAACzN,SAAjB;AAEA,QAAI2O,aAAa,GAAG1R,QAAQ,CAACmG,aAAT,CAAuB,OAAvB,CAApB;AACAuL,IAAAA,aAAa,CAAClL,SAAd,GAA0B,QAA1B;AACAkL,IAAAA,aAAa,CAAC/I,EAAd,GAAmB,iBAAnB;AACA+I,IAAAA,aAAa,CAACjM,IAAd,GAAmB,MAAnB;AACAiM,IAAAA,aAAa,CAACY,WAAd,GAA4B,mBAA5B;AAEA,QAAI0F,UAAU,GAAGhY,QAAQ,CAACmG,aAAT,CAAuB,MAAvB,CAAjB;AACA6R,IAAAA,UAAU,CAACxR,SAAX,GAAuB,2BAAvB;AACAwR,IAAAA,UAAU,CAAC9X,KAAX,CAAiBC,OAAjB,GAA2B,MAA3B;AACA6X,IAAAA,UAAU,CAAC9X,KAAX,CAAiB+C,WAAjB,GAA+B,KAA/B;AACA+U,IAAAA,UAAU,CAAC9X,KAAX,CAAiB8C,KAAjB,GAAyB,SAAzB;AAEA9B,IAAAA,CAAC,CAAC8W,UAAD,CAAD,CAAc7W,KAAd,CAAoB,YAAU;AAC1B,WAAK8W,UAAL,CAAgBlS,MAAhB;AACAtE,MAAAA,QAAQ;AACX,KAHD;AAIAP,IAAAA,CAAC,CAAC8P,KAAD,CAAD,CAASpI,KAAT,CAAe,YAAU;AACvB,WAAK9F,UAAL,CAAgB,CAAhB,EAAmB5C,KAAnB,CAAyBC,OAAzB,GAAmC,SAAnC;AACD,KAFD,EAEG,YAAU;AACX,WAAK2C,UAAL,CAAgB,CAAhB,EAAmB5C,KAAnB,CAAyBC,OAAzB,GAAmC,MAAnC;AACD,KAJD;AAMAe,IAAAA,CAAC,CAAC8W,UAAD,CAAD,CAAcpP,KAAd,CAAoB,YAAU;AAC5B,WAAK1I,KAAL,CAAW2I,MAAX,GAAkB,SAAlB;AACA,WAAK3I,KAAL,CAAW8C,KAAX,GAAmB,SAAnB;AACD,KAHD,EAGG,YAAU,CAAE,CAHf;AAMAgO,IAAAA,KAAK,CAACtK,WAAN,CAAkBsR,UAAlB;AACAhH,IAAAA,KAAK,CAACtK,WAAN,CAAkB6K,KAAlB;AACAP,IAAAA,KAAK,CAACtK,WAAN,CAAkBgL,aAAlB;AACAX,IAAAA,cAAc,CAACrK,WAAf,CAA2BsK,KAA3B;AACD;;AAED,MAAIgG,IAAI,GAAGhX,QAAQ,CAACmG,aAAT,CAAuB,MAAvB,CAAX;AACA6Q,EAAAA,IAAI,CAACxQ,SAAL,GAAiB,0BAAjB;AAEA,MAAI6S,qBAAqB,GAAGrZ,QAAQ,CAACmG,aAAT,CAAuB,GAAvB,CAA5B;AACAkT,EAAAA,qBAAqB,CAAC1Q,EAAtB,GAA2B,uBAA3B;AACA0Q,EAAAA,qBAAqB,CAACC,QAAtB,GAAiC,WAAjC;AACAD,EAAAA,qBAAqB,CAACrV,IAAtB,GAA6B,sCAAuCwM,GAAG,CAACzN,SAA3C,GAAuD,GAApF;AACAsW,EAAAA,qBAAqB,CAAC3S,WAAtB,CAAkCsQ,IAAlC;AACAqC,EAAAA,qBAAqB,CAACtW,SAAtB,IAAmC,oBAAnC;AAEAgO,EAAAA,cAAc,CAACrK,WAAf,CAA2B2S,qBAA3B;AAEA/R,EAAAA,QAAQ,CAACZ,WAAT,CAAqBqK,cAArB;AAEA3G,EAAAA,IAAI,CAAC1D,WAAL,CAAiBY,QAAjB;AAEA8C,EAAAA,IAAI,CAAC1D,WAAL,CAAiB4R,EAAjB;AACAlO,EAAAA,IAAI,CAAC1D,WAAL,CAAiB+J,EAAjB;;AAGA,MAAG,CAAC4H,OAAJ,EAAa;AACXtX,IAAAA,MAAM,CAACW,MAAP,CAAc;AAAEY,MAAAA,GAAG,EAAEgF,QAAQ,CAACiS,qBAAT,GAAiCjX,GAAjC,GAAuCvB,MAAM,CAACyY,OAArD;AAA8DlC,MAAAA,QAAQ,EAAE;AAAxE,KAAd;AACA/O,IAAAA,qBAAqB,CAACvI,QAAQ,CAAC4B,sBAAT,CAAgC,UAAhC,EAA4CC,MAA7C,EAAqD,KAArD,CAArB;AACAJ,IAAAA,QAAQ,CAAC,KAAD,CAAR;AACD;AACF,EAED;;;AACA,SAASoX,WAAT,CAAqBrI,GAArB,EAA0BiJ,OAA1B,EAAmC;AACjC,MAAIC,QAAQ,GAAG1Z,QAAQ,CAACmG,aAAT,CAAuB,KAAvB,CAAf;AACAuT,EAAAA,QAAQ,CAAC/Q,EAAT,GAAc,UAAd;AAEA,MAAIgR,MAAM,GAAG3Z,QAAQ,CAACmG,aAAT,CAAuB,IAAvB,CAAb;AACAwT,EAAAA,MAAM,CAACzZ,KAAP,CAAa0Z,cAAb,GAA8B,sBAA9B;AACAD,EAAAA,MAAM,CAACzZ,KAAP,CAAa8C,KAAb,GAAqB,SAArB;AACA2W,EAAAA,MAAM,CAAC5W,SAAP,GAAmB,8BAA8ByN,GAAjD;AACAkJ,EAAAA,QAAQ,CAAChT,WAAT,CAAqBiT,MAArB;AAEA,MAAIE,QAAQ,GAAG7Z,QAAQ,CAACmG,aAAT,CAAuB,OAAvB,CAAf;AACA0T,EAAAA,QAAQ,CAACpU,IAAT,GAAgB,MAAhB;AACAoU,EAAAA,QAAQ,CAAC3Z,KAAT,CAAesS,MAAf,GAAwB,sBAAxB;AACAqH,EAAAA,QAAQ,CAAC3Z,KAAT,CAAeqS,OAAf,GAAyB,MAAzB;AACAsH,EAAAA,QAAQ,CAAC3Z,KAAT,CAAe0N,QAAf,GAA0B,MAA1B;AACAiM,EAAAA,QAAQ,CAAC3Z,KAAT,CAAeuS,YAAf,GAA8B,KAA9B;AAEA,MAAIvJ,MAAM,GAAGlJ,QAAQ,CAACmG,aAAT,CAAuB,QAAvB,CAAb;AACA+C,EAAAA,MAAM,CAACxC,WAAP,CAAmBmT,QAAnB;AAEAH,EAAAA,QAAQ,CAAChT,WAAT,CAAqB1G,QAAQ,CAACmG,aAAT,CAAuB,IAAvB,CAArB;AACAuT,EAAAA,QAAQ,CAAChT,WAAT,CAAqBwC,MAArB;AACAwQ,EAAAA,QAAQ,CAAChT,WAAT,CAAqB1G,QAAQ,CAACmG,aAAT,CAAuB,IAAvB,CAArB;AAEA,MAAI2T,MAAM,GAAG9Z,QAAQ,CAACmG,aAAT,CAAuB,KAAvB,CAAb;AACA2T,EAAAA,MAAM,CAACnR,EAAP,GAAY,QAAZ;AACA+Q,EAAAA,QAAQ,CAAChT,WAAT,CAAqBoT,MAArB;AAEA,MAAIC,gBAAgB,GAAG/Z,QAAQ,CAACmG,aAAT,CAAuB,OAAvB,CAAvB;AACA4T,EAAAA,gBAAgB,CAAC7Z,KAAjB,CAAuB8Z,MAAvB,GAAgC,MAAhC;AACAD,EAAAA,gBAAgB,CAAC7Z,KAAjB,CAAuBuS,YAAvB,GAAsC,KAAtC;AACAsH,EAAAA,gBAAgB,CAAC7Z,KAAjB,CAAuBsS,MAAvB,GAAgC,iBAAhC;AACAuH,EAAAA,gBAAgB,CAACzH,WAAjB,GAA+B,sBAA/B;AACAyH,EAAAA,gBAAgB,CAAC7Z,KAAjB,CAAuBmG,KAAvB,GAA+B,KAA/B;AACA0T,EAAAA,gBAAgB,CAAC7Z,KAAjB,CAAuBiC,MAAvB,GAAgC,MAAhC;AACA4X,EAAAA,gBAAgB,CAAC7Z,KAAjB,CAAuBqS,OAAvB,GAAiC,KAAjC;AACAwH,EAAAA,gBAAgB,CAAC7Z,KAAjB,CAAuB0N,QAAvB,GAAkC,MAAlC;AACA8L,EAAAA,QAAQ,CAAChT,WAAT,CAAqBqT,gBAArB;AAEA,MAAIE,MAAM,GAAGja,QAAQ,CAACmG,aAAT,CAAuB,QAAvB,CAAb;AACA8T,EAAAA,MAAM,CAACtR,EAAP,GAAY,iBAAZ;AACAsR,EAAAA,MAAM,CAAClX,SAAP,GAAmB,QAAnB;;AAEAkX,EAAAA,MAAM,CAACnR,OAAP,GAAiB,YAAW;AAC1B9I,IAAAA,QAAQ,CAACC,IAAT,CAAcC,KAAd,CAAoBsV,OAApB,GAA8B,GAA9B;AACAxV,IAAAA,QAAQ,CAACC,IAAT,CAAcC,KAAd,CAAoB8T,MAApB,GAA6B,WAA7B;AACAhU,IAAAA,QAAQ,CAACC,IAAT,CAAcC,KAAd,CAAoBga,SAApB,GAAgC,MAAhC;AACAla,IAAAA,QAAQ,CAACC,IAAT,CAAcC,KAAd,CAAoBuV,SAApB,GAAgC,MAAhC;AAEAiE,IAAAA,QAAQ,CAAC3T,MAAT;AACD,GAPD;;AASA,MAAIoU,MAAM,GAAGna,QAAQ,CAACmG,aAAT,CAAuB,QAAvB,CAAb;AACAgU,EAAAA,MAAM,CAACxR,EAAP,GAAY,iBAAZ;AACAwR,EAAAA,MAAM,CAACpX,SAAP,GAAmB,SAAnB;;AAEAoX,EAAAA,MAAM,CAACrR,OAAP,GAAiB,YAAW;AAC1B,QAAGgR,MAAM,CAACvW,GAAP,IAAc,EAAjB,EAAqB;AACnBkW,MAAAA,OAAO,CAACvZ,KAAR,CAAcC,OAAd,GAAwB,SAAxB;;AACAsZ,MAAAA,OAAO,CAAC3Q,OAAR,GAAkB,YAAW;AAC3BtF,QAAAA,IAAI,CAAC;AACHG,UAAAA,IAAI,EAAEmW,MAAM,CAACvW,GADV;AAEHG,UAAAA,IAAI,EAAEqW,gBAAgB,CAACjW,KAFpB;AAGH0C,UAAAA,SAAS,EAAE;AAHR,SAAD,CAAJ;AAKD,OAND;;AAOAiT,MAAAA,OAAO,CAACjT,SAAR,GAAoBsT,MAAM,CAACvW,GAA3B;AAEAvD,MAAAA,QAAQ,CAACC,IAAT,CAAcC,KAAd,CAAoBsV,OAApB,GAA8B,GAA9B;AACAxV,MAAAA,QAAQ,CAACC,IAAT,CAAcC,KAAd,CAAoB8T,MAApB,GAA6B,WAA7B;AACAhU,MAAAA,QAAQ,CAACC,IAAT,CAAcC,KAAd,CAAoBga,SAApB,GAAgC,MAAhC;AACAla,MAAAA,QAAQ,CAACC,IAAT,CAAcC,KAAd,CAAoBuV,SAApB,GAAgC,MAAhC;AAEAiE,MAAAA,QAAQ,CAAC3T,MAAT;AACAtE,MAAAA,QAAQ,CAACsY,gBAAgB,CAACjW,KAAlB,CAAR;AACD;AACF,GApBD;;AAsBA+V,EAAAA,QAAQ,CAACV,QAAT,GAAoB,UAAUiB,GAAV,EAAe;AACjC,QAAIC,GAAG,GAAGD,GAAG,CAACzE,MAAJ,IAAc5U,MAAM,CAAC2U,KAAP,CAAa4E,UAArC;AAAA,QACIC,KAAK,GAAGF,GAAG,CAACE,KADhB,CADiC,CAIjC;;AACA,QAAIC,UAAU,IAAID,KAAd,IAAuBA,KAAK,CAAC1Y,MAAjC,EAAyC;AACrC,UAAImX,EAAE,GAAG,IAAIwB,UAAJ,EAAT;;AACAxB,MAAAA,EAAE,CAAChY,MAAH,GAAY,YAAY;AACpB8Y,QAAAA,MAAM,CAACvW,GAAP,GAAayV,EAAE,CAAChR,MAAhB;AACA8R,QAAAA,MAAM,CAAC5Z,KAAP,CAAasS,MAAb,GAAsB,iBAAtB;AACAyH,QAAAA,MAAM,CAAC/Z,KAAP,CAAaua,YAAb,GAA4B,MAA5B;AACAN,QAAAA,MAAM,CAACja,KAAP,CAAaua,YAAb,GAA4B,MAA5B;AACH,OALD;;AAMAzB,MAAAA,EAAE,CAAC0B,aAAH,CAAiBH,KAAK,CAAC,CAAD,CAAtB;AACH;AACF,GAfD;;AAiBAb,EAAAA,QAAQ,CAAChT,WAAT,CAAqByT,MAArB;AACAT,EAAAA,QAAQ,CAAChT,WAAT,CAAqBuT,MAArB;AAEAja,EAAAA,QAAQ,CAAC+B,cAAT,CAAwB,MAAxB,EAAgC2E,WAAhC,CAA4CgT,QAA5C;AAEA1Z,EAAAA,QAAQ,CAACC,IAAT,CAAcC,KAAd,CAAoBsV,OAApB,GAA8B,KAA9B;AACAxV,EAAAA,QAAQ,CAACC,IAAT,CAAcC,KAAd,CAAoB8T,MAApB,GAA6B,WAA7B;AACAhU,EAAAA,QAAQ,CAACC,IAAT,CAAcC,KAAd,CAAoBga,SAApB,GAAgC,QAAhC;AACAla,EAAAA,QAAQ,CAACC,IAAT,CAAcC,KAAd,CAAoBuV,SAApB,GAAgC,QAAhC;AACD,EAED;;;AACA,SAASgD,OAAT,CAAiB3W,IAAjB,EAAuB6Y,SAAvB,EAAiC;AAC/B,MAAG3a,QAAQ,CAAC+B,cAAT,CAAwB4Y,SAAxB,KAAsCzX,SAAzC,EAAoD;AAClD,WAAO,KAAP;AACD,GAFD,MAGK;AACH,QAAI0X,IAAI,GAAGC,MAAM,CAAC/Y,IAAD,CAAjB;AACD,QAAIgZ,IAAI,GAAGD,MAAM,CAAC7a,QAAQ,CAAC+B,cAAT,CAAwB4Y,SAAxB,CAAD,CAAjB;AAEA,QAAII,KAAK,GAAGH,IAAI,CAACI,KAAL,EAAZ;AACA,QAAIC,KAAK,GAAGH,IAAI,CAACE,KAAL,EAAZ;AAEDJ,IAAAA,IAAI,CAACM,WAAL,CAAiBD,KAAjB;AACAH,IAAAA,IAAI,CAACI,WAAL,CAAiBH,KAAjB;AAEElE,IAAAA,oBAAoB;AACpB,WAAO,IAAP;AACD;AACF,EAED;;;AACA,SAASsE,qBAAT,CAA+B3K,GAA/B,EAAoC;AAClC,MAAI9L,GAAG,GAAG1E,QAAQ,CAAC+B,cAAT,CAAwByO,GAAxB,EAA6B1N,UAA7B,CAAwC,CAAxC,CAAV;AACA4B,EAAAA,GAAG,CAAC5B,UAAJ,CAAe4B,GAAG,CAAC5B,UAAJ,CAAejB,MAAf,GAAwB,CAAvC,EAA0CkE,MAA1C;AAEA,MAAIiL,KAAK,GAAGhR,QAAQ,CAACmG,aAAT,CAAuB,OAAvB,CAAZ;AACA6K,EAAAA,KAAK,CAACrI,EAAN,GAAW,OAAX;AAEA,MAAI4I,KAAK,GAAGvR,QAAQ,CAACmG,aAAT,CAAuB,OAAvB,CAAZ;AACAoL,EAAAA,KAAK,CAACrR,KAAN,CAAYuR,OAAZ,GAAsB,MAAtB;AACAF,EAAAA,KAAK,CAAC9L,IAAN,GAAa,OAAb;AACA8L,EAAAA,KAAK,CAAC/K,SAAN,GAAkB,oBAAlB;AACA+K,EAAAA,KAAK,CAAC1H,IAAN,GAAa,OAAb;AAEA,MAAI6H,aAAa,GAAG1R,QAAQ,CAACmG,aAAT,CAAuB,OAAvB,CAApB;AACAuL,EAAAA,aAAa,CAAClL,SAAd,GAA0B,QAA1B;AACAkL,EAAAA,aAAa,CAAC/I,EAAd,GAAmB,iBAAnB;AACA+I,EAAAA,aAAa,CAACjM,IAAd,GAAmB,MAAnB;AACAiM,EAAAA,aAAa,CAACY,WAAd,GAA4B,mBAA5B;AAEA,MAAIZ,aAAa,GAAG1R,QAAQ,CAACmG,aAAT,CAAuB,OAAvB,CAApB;AACAuL,EAAAA,aAAa,CAAClL,SAAd,GAA0B,QAA1B;AACAkL,EAAAA,aAAa,CAAC/I,EAAd,GAAmB,iBAAnB;AACA+I,EAAAA,aAAa,CAACjM,IAAd,GAAmB,MAAnB;AACAiM,EAAAA,aAAa,CAACY,WAAd,GAA4B,mBAA5B;AAEA,MAAI0F,UAAU,GAAGhY,QAAQ,CAACmG,aAAT,CAAuB,MAAvB,CAAjB;AACA6R,EAAAA,UAAU,CAACxR,SAAX,GAAuB,2BAAvB;AACAwR,EAAAA,UAAU,CAAC9X,KAAX,CAAiBC,OAAjB,GAA2B,MAA3B;AACA6X,EAAAA,UAAU,CAAC9X,KAAX,CAAiB+C,WAAjB,GAA+B,KAA/B;AACA+U,EAAAA,UAAU,CAAC9X,KAAX,CAAiB8C,KAAjB,GAAyB,SAAzB;AAEA9B,EAAAA,CAAC,CAAC8W,UAAD,CAAD,CAAc7W,KAAd,CAAoB,YAAU;AAC1B,SAAK8W,UAAL,CAAgBlS,MAAhB;AACAtE,IAAAA,QAAQ;AACX,GAHD;AAKAP,EAAAA,CAAC,CAAC8P,KAAD,CAAD,CAASpI,KAAT,CAAe,YAAU;AACvB,SAAK9F,UAAL,CAAgB,CAAhB,EAAmB5C,KAAnB,CAAyBC,OAAzB,GAAmC,SAAnC;AACD,GAFD,EAEG,YAAU;AACX,SAAK2C,UAAL,CAAgB,CAAhB,EAAmB5C,KAAnB,CAAyBC,OAAzB,GAAmC,MAAnC;AACD,GAJD;AAMAe,EAAAA,CAAC,CAAC8W,UAAD,CAAD,CAAcpP,KAAd,CAAoB,YAAU;AAC5B,SAAK1I,KAAL,CAAW2I,MAAX,GAAkB,SAAlB;AACA,SAAK3I,KAAL,CAAW8C,KAAX,GAAmB,SAAnB;AACD,GAHD,EAGG,YAAU,CAEZ,CALD;AAOAgO,EAAAA,KAAK,CAACtK,WAAN,CAAkBsR,UAAlB;AACAhH,EAAAA,KAAK,CAACtK,WAAN,CAAkB6K,KAAlB;AACAP,EAAAA,KAAK,CAACtK,WAAN,CAAkBgL,aAAlB;AACAhN,EAAAA,GAAG,CAACgC,WAAJ,CAAgBsK,KAAhB;AAEA,MAAIgG,IAAI,GAAGhX,QAAQ,CAACmG,aAAT,CAAuB,MAAvB,CAAX;AACA6Q,EAAAA,IAAI,CAACxQ,SAAL,GAAiB,0BAAjB;AAEA,MAAI6S,qBAAqB,GAAGrZ,QAAQ,CAACmG,aAAT,CAAuB,GAAvB,CAA5B;AACAkT,EAAAA,qBAAqB,CAAC1Q,EAAtB,GAA2B,uBAA3B;AACA0Q,EAAAA,qBAAqB,CAACrV,IAAtB,GAA6B,sCAAuCwM,GAAvC,GAA6C,GAA1E;AACA6I,EAAAA,qBAAqB,CAACC,QAAtB,GAAiC,WAAjC;AACAD,EAAAA,qBAAqB,CAAC3S,WAAtB,CAAkCsQ,IAAlC;AACAqC,EAAAA,qBAAqB,CAACtW,SAAtB,IAAmC,oBAAnC;AAEA2B,EAAAA,GAAG,CAACgC,WAAJ,CAAgB2S,qBAAhB;AACA5X,EAAAA,QAAQ,CAAC,KAAD,CAAR;AACD,EAED;;;AACA,SAAS4U,SAAT,CAAmB1I,GAAnB,EAAwB;AACtB,MAAGA,GAAG,IAAI,IAAV,EAAgB;AACd,WAAO,GAAP;AACD,GAFD,MAGK,IAAGA,GAAG,GAAG,IAAN,IAAcA,GAAG,IAAI,IAAxB,EAA8B;AACjC,WAAO,GAAP;AACD,GAFI,MAGA,IAAGA,GAAG,GAAG,IAAN,IAAcA,GAAG,IAAI,IAAxB,EAA8B;AACjC,WAAO,GAAP;AACD,GAFI,MAGA,IAAGA,GAAG,GAAG,IAAN,IAAcA,GAAG,IAAI,IAAxB,EAA8B;AACjC,WAAO,GAAP;AACD,GAFI,MAGA;AACH,WAAO,GAAP;AACD;AAEF,EAED;;;AACA,SAASyN,cAAT,CAAwB5U,SAAxB,EAAmC6U,kBAAnC,EAAuDC,eAAvD,EAAwE;AACtE,MAAIhH,OAAO,GAAGtU,QAAQ,CAAC+B,cAAT,CAAwB,SAAxB,CAAd;AAEA,MAAIyS,QAAQ,GAAGxU,QAAQ,CAACmG,aAAT,CAAuB,KAAvB,CAAf;;AACAqO,EAAAA,QAAQ,CAAC1L,OAAT,GAAmB,YAAW;AAC5BhJ,IAAAA,YAAY,CAACqK,OAAb,CAAqB,WAArB,EAAkC3D,SAAlC;AACAoD,IAAAA,SAAS,CAACpD,SAAD,EAAY8U,eAAZ,CAAT;AACD,GAHD;;AAKA9G,EAAAA,QAAQ,CAAChO,SAAT,GAAqB,UAArB;AAEA,MAAIoK,IAAI,GAAG5Q,QAAQ,CAACmG,aAAT,CAAuB,MAAvB,CAAX;AACAyK,EAAAA,IAAI,CAAC7N,SAAL,GAAiByD,SAAjB;AACAoK,EAAAA,IAAI,CAACpK,SAAL,GAAiB,WAAjB;AAEAgO,EAAAA,QAAQ,CAAC9N,WAAT,CAAqBkK,IAArB;AACA4D,EAAAA,QAAQ,CAAC9N,WAAT,CAAqB1G,QAAQ,CAACmG,aAAT,CAAuB,IAAvB,CAArB;AAEA,MAAIoV,WAAW,GAAGvb,QAAQ,CAACmG,aAAT,CAAuB,GAAvB,CAAlB;AAEA,MAAIqV,MAAM,GAAGxb,QAAQ,CAACmG,aAAT,CAAuB,IAAvB,CAAb;AACAqV,EAAAA,MAAM,CAACzY,SAAP,GAAmB,UAAnB;AACAyY,EAAAA,MAAM,CAAC7S,EAAP,GAAU,QAAV;AAEA4S,EAAAA,WAAW,CAACxY,SAAZ,GAAwBsY,kBAAxB;AACAE,EAAAA,WAAW,CAAC7U,WAAZ,CAAwB8U,MAAxB;AAEAD,EAAAA,WAAW,CAAC5S,EAAZ,GAAiB,aAAjB;AACA6L,EAAAA,QAAQ,CAAC9N,WAAT,CAAqB6U,WAArB;AAEA,MAAIE,WAAW,GAAGzb,QAAQ,CAACmG,aAAT,CAAuB,IAAvB,CAAlB;AACAsV,EAAAA,WAAW,CAAC9S,EAAZ,GAAiB,aAAjB;AACA6L,EAAAA,QAAQ,CAAC9N,WAAT,CAAqB+U,WAArB;AAEA,MAAIC,QAAQ,GAAG1b,QAAQ,CAACmG,aAAT,CAAuB,GAAvB,CAAf;AAEAqV,EAAAA,MAAM,GAAGxb,QAAQ,CAACmG,aAAT,CAAuB,IAAvB,CAAT;AACAqV,EAAAA,MAAM,CAACzY,SAAP,GAAmB,OAAnB;AACAyY,EAAAA,MAAM,CAAC7S,EAAP,GAAY,QAAZ;AACA+S,EAAAA,QAAQ,CAAC3Y,SAAT,GAAqBuY,eAArB;AACAI,EAAAA,QAAQ,CAAChV,WAAT,CAAqB8U,MAArB;AAEAE,EAAAA,QAAQ,CAAC/S,EAAT,GAAY,UAAZ;AACA6L,EAAAA,QAAQ,CAAC9N,WAAT,CAAqBgV,QAArB;AAEApH,EAAAA,OAAO,CAAC5N,WAAR,CAAoB8N,QAApB;AACAxU,EAAAA,QAAQ,CAAC+B,cAAT,CAAwB,MAAxB,EAAgC2E,WAAhC,CAA4C4N,OAA5C;AACD,EAED;;;AACA,SAASrT,iBAAT,GAA6B;AAC3B,MAAG,CAACH,iBAAJ,EAAuB;AACrB,QAAIuD,GAAG,GAAGF,QAAQ,CAACC,QAAT,GAAoBC,GAApB,CAAwB,UAAxB,CAAV;AACA,QAAIkF,OAAO,GAAG,CAAd;AACA,QAAIoS,MAAM,GAAG,KAAb;AAEAtX,IAAAA,GAAG,CAACuB,IAAJ,CAAS,OAAT,EAAkB,UAAStB,QAAT,EAAmB;AACnCA,MAAAA,QAAQ,CAACC,OAAT,CAAiB,UAASC,aAAT,EAAwB;AACvC,YAAGA,aAAa,CAACsB,GAAd,IAAqB3C,QAAxB,EAAkC;AAChCwY,UAAAA,MAAM,GAAG,IAAT;AACApb,UAAAA,GAAG,CAACkE,IAAJ,CAASD,aAAa,CAACqB,KAAd,CAAoB,SAApB,EAA+BnB,GAA/B,EAAT;;AAEA,eAAK,IAAIoB,GAAT,IAAgBvF,GAAhB,EAAqB;AACnB,gBAAI4K,CAAC,GAAG,CAAR,CADmB,CAEnB;;AACA,gBAAI,CAAC5K,GAAG,CAAC6L,cAAJ,CAAmBtG,GAAnB,CAAL,EAA8B;AAC9B,gBAAIuG,GAAG,GAAG9L,GAAG,CAACuF,GAAD,CAAb;;AACA,iBAAK,IAAIwG,IAAT,IAAiBD,GAAjB,EAAsB;AACpB;AACA,kBAAG,CAACA,GAAG,CAACD,cAAJ,CAAmBE,IAAnB,CAAJ,EAA8B;;AAE9B,kBAAGD,GAAG,CAACC,IAAD,CAAH,CAAUsP,KAAV,CAAgBnU,MAAM,CAAC+B,IAAP,CAAY6C,GAAG,CAACC,IAAD,CAAH,CAAUsP,KAAtB,EAA6B,CAA7B,CAAhB,KAAoD,UAAvD,EAAmE;AACjER,gBAAAA,cAAc,CAAC9O,IAAD,EAAO7E,MAAM,CAAC+B,IAAP,CAAY6C,GAAG,CAACC,IAAD,CAAH,CAAUuP,QAAtB,EAAgCha,MAAvC,EAA+C,CAA/C,CAAd;AACD,eAFD,MAIK;AACHuZ,gBAAAA,cAAc,CAAC9O,IAAD,EAAO7E,MAAM,CAAC+B,IAAP,CAAY6C,GAAG,CAACC,IAAD,CAAH,CAAUuP,QAAtB,EAAgCha,MAAvC,EAA+C4F,MAAM,CAAC+B,IAAP,CAAY6C,GAAG,CAACC,IAAD,CAAH,CAAUsP,KAAtB,EAA6B/Z,MAA5E,CAAd;AACD;AACF;AACF;AACF;AACF,OAxBD;;AAyBA,UAAG,CAAC8Z,MAAJ,EAAY;AACV3b,QAAAA,QAAQ,CAAC+B,cAAT,CAAwB,cAAxB,EAAwC7B,KAAxC,CAA8CC,OAA9C,GAAwD,SAAxD;AACD;AACF,KA7BD;AA8BD;;AAEDW,EAAAA,iBAAiB,GAAG,IAApB;AACD","file":"teacher.d00ec059.js","sourceRoot":"..","sourcesContent":["// check if user is signed in\nif(localStorage.getItem('userInfo') == null) {\n  document.body.style.display = \"none\";\n  alert(\"NOT AUTHORIZED\");\n}\n\nvar examCodes = [];\nvar examCodesTeachers = [];\nvar arr = [];\nvar exams = [];\nvar examData = [];\nvar totalPoints;\nvar autoSaveCounter = 0;\nvar alphabet = \"ABCDEFGHIJKLMNOPQRSTUVWXYZ\";\n\n// HAS LOADED\nvar examDataHasLoaded = false;\nvar userDataHasLoaded = false;\n\n\n//when page loads, populateDashboard()\nwindow.onload = function() {\n  populateDashboard();\n\n  $('.dropdown').click(function(){\n    $('.dropdown-menu').toggleClass('show');\n  });\n\n  $(\"#description\").focus(function() {\n    $(\"#description\").css(\"border\", \"1px solid #458ec1\");\n  }).blur(function() {\n    $(\"#description\").css(\"border\", \"1px solid lightgray\");\n  });\n\n  $(\"#create-exam\").on('blur', \":input\", function() {\n    saveExam(false);\n  });\n\n  $(\"#create-exam\").on('change', \"input:radio\", function() {\n    saveExam(false);\n  });\n\n  // for create-exam\n  $(window).scroll(function(){\n    for(var i = 1; i < document.getElementsByClassName('question').length + 1; i++) {\n      var elem = document.getElementById(i);\n      var docViewTop = $(window).scrollTop();\n      var docViewBottom = docViewTop + $(window).height();\n\n      var elemTop = $(elem).offset().top;\n      var elemBottom = elemTop + $(elem).height();\n\n      var isInView = ((elemBottom <= docViewBottom) && (elemTop >= docViewTop));\n\n      if (isInView){\n        if(navigator.userAgent.toLowerCase().indexOf('safari/') > -1) {\n          document.getElementById('question-manager').scrollTop = document.getElementById('question-tracker').clientHeight * (i - 1);\n          document.getElementsByClassName(i)[0].childNodes[0].innerHTML = \"&#x25CF;\"\n          document.getElementsByClassName(i)[0].childNodes[1].childNodes[0].style.color = \"white\";\n          document.getElementsByClassName(i)[0].childNodes[1].childNodes[0].style.marginRight = \"10px\";\n        }\n        else {\n          document.getElementById('question-manager').scrollTop = document.getElementById('question-tracker').clientHeight * (i - 1);\n          document.getElementsByClassName(i)[0].childNodes[0].innerHTML = \"&#x25CF;\"\n          document.getElementsByClassName(i)[0].childNodes[1].childNodes[0].style.color = \"white\";\n        }\n      }\n      else {\n        if(navigator.userAgent.toLowerCase().indexOf('safari/') > -1) {\n          document.getElementsByClassName(i)[0].childNodes[0].innerHTML = \"&#x25CC;\";\n          document.getElementsByClassName(i)[0].childNodes[1].childNodes[0].style.color = \"black\";\n          document.getElementsByClassName(i)[0].childNodes[1].childNodes[0].style.marginRight = \"0\";\n        }\n        else {\n          if(document.getElementsByClassName(i)[0] != undefined) {\n            document.getElementsByClassName(i)[0].childNodes[0].innerHTML = \"&#x25CC;\";\n            document.getElementsByClassName(i)[0].childNodes[1].childNodes[0].style.color = \"black\";\n          }\n        }\n      }\n    }\n  })\n};\n\n// retrieve userName, img from LocalStorage\nvar userName = (JSON.parse(localStorage.getItem(\"userInfo\"))[1]);\nvar profileImg = (JSON.parse(localStorage.getItem(\"userInfo\"))[2]);\n\n//initialize aspects of page with JS data\ndocument.getElementById('welcome-text').innerHTML = \"Welcome \" + userName + \"!\";\ndocument.getElementById('profile').src = profileImg;\n\n$('#profile').click(function(){\n  swal({\n    title: \"Sign Out\",\n    text: \"Are You Sure You Want To Sign Out?\",\n    icon: \"warning\",\n    buttons: [\"Cancel\", \"Sign Me Out!\"],\n  })\n  .then((value) => {\n    if(value) {\n      window.location.href = \"index.html?noRedirect\";\n    }\n  });\n});\n\n// create initial framework for exams\nfunction createQuiz() {\n  var examCounter = 0;\n\n  if(examCodes.length == 0){\n    // Pull all exam codes and seperate the datapoints from each other\n    firebase.database().ref('exam-codes').on('value', function(snapshot) {\n      snapshot.forEach(function(childSnapshot) {\n        examCodes.push(childSnapshot.val().split(\";\")[0]);\n        examCodesTeachers.push(childSnapshot.val().split(\";\")[1])\n      });\n    });\n  }\n\n  var randomCode = generateCode();\n\n  var examInit = {\n    examCode: randomCode.toUpperCase(),\n    examTitle: \"\",\n    lastSaved: \"\",\n    examType: \"\",\n    examTotalPoints: \"\",\n    examTotalMins: \"\",\n    examDate: \"\",\n    examDescription: \"\",\n    questions: [\n      {\n        title: '',\n        type:   '',\n        points: '',\n        choices: [\n          {value: \"\"},\n          {value: \"\"},\n          {value: \"\"},\n          {value: \"\"},\n        ]\n      }\n    ]\n  };\n\n\n  firebase.database().ref(\"Teachers/\" + userName + \"/Classes/\" + localStorage.getItem('className') + \"/Exams/\").once('value', function(snapshot) {\n    snapshot.forEach(function(childSnapshot) {\n      if(childSnapshot.val() == \"no_exams\") {\n        firebase.database().ref(\"Teachers/\" + userName + \"/Classes/\" + localStorage.getItem('className') + \"/Exams/\").child(childSnapshot.key).remove();\n      }\n      else {\n        examCounter++;\n      }\n    });\n  });\n\n  if(examCounter < 26) {\n    firebase.database().ref(\"Teachers/\" + userName + \"/Classes/\" + localStorage.getItem('className') + \"/Exams/\" + alphabet[(alphabet.length - 1) - examCounter] + randomCode.toUpperCase()).push(examInit);\n  }\n  else {\n    firebase.database().ref(\"Teachers/\" + userName + \"/Classes/\" + localStorage.getItem('className') + \"/Exams/\" + alphabet[(alphabet.length - 1) - examCounter-26] +  alphabet[(alphabet.length - 1) - examCounter-26] + randomCode.toUpperCase()).push(examInit);\n  }\n\n  createQuestion(true, 4);\n\n  document.getElementById('create-exam').style.display = \"initial\";\n  document.getElementById('main').style.display = \"none\";\n  document.body.style.background = \"white\";\n  document.getElementById('exam-code').innerHTML = randomCode.toUpperCase();\n}\n\n// Alert After Save\nfunction successfulSave() {\n  var alert = document.createElement('div');\n  alert.innerHTML = \"Successfully Saved Exam!\"\n  alert.style.textAlign = \"center\";\n  alert.style.width = \"100%\";\n  alert.style.position = \"fixed\";\n  alert.style.zIndex = \"100000\";\n  alert.style.top = \"0\";\n  alert.className = \"alert alert-success\";\n  alert.role = \"alert\";\n\n  document.getElementById('create-exam').appendChild(document.createElement('center').appendChild(alert));\n\n  setTimeout(function(){ document.getElementsByClassName('alert')[0].remove(); }, 2500);\n}\n\n// Save Exam\nfunction saveExam(alert) {\n  if(alert) {\n    successfulSave();\n  }\n\n  var newSave = new Date().toLocaleString().replace(\",\", \" @\");\n  if(newSave == \"\") {\n    newSave = \" Not Saved!\";\n  }\n\n  document.getElementById('last-saved').innerHTML = \"Last Sync: \" + newSave;\n  document.getElementsByClassName('points')[0].value = getAllPoints();\n\n  if(document.getElementById('nameOfExam').value != \"\") {\n    firebase.database().ref(\"exam-codes\").once('value').then(function(snapshot) {\n      snapshot.forEach(function(childSnapshot) {\n        if(childSnapshot.val().split(\";\")[0] == document.getElementById('exam-code').innerHTML) {\n          firebase.database().ref(\"exam-codes\").child(childSnapshot.key).set(childSnapshot.val().split(\";\")[0] + \";\" + childSnapshot.val().split(\";\")[1] + \";\" + childSnapshot.val().split(\";\")[2] + \";\" + document.getElementById('nameOfExam').value);\n        }\n      });\n    });\n  }\n\n  var examInit = {\n    examTeacher: userName,\n    examCode: document.getElementById('exam-code').innerHTML,\n    examTitle: document.getElementById('nameOfExam').value,\n    lastSaved: newSave,\n    examTotalPoints: getAllPoints(),\n    examTotalMins: document.getElementsByClassName('time')[0].value,\n    examDate: document.getElementById('date').value,\n    examDescription: document.getElementById('description').value,\n    questions: []\n  };\n\n  var localQuestions = document.getElementsByClassName('question');\n  var pluginArrayArg = new Array();\n\n  for(var i = 0; i < localQuestions.length; i++) {\n    var question = localQuestions[i];\n    var children = question.childNodes;\n\n    var jsonArg1 = new Object();\n    jsonArg1.title = children[4].value;\n    jsonArg1.type = children[5].value;\n    jsonArg1.points = children[6].childNodes[1].value;\n    jsonArg1.checked = -1;\n    jsonArg1.imgSrc = children[6].childNodes[3].className;\n\n    if(alert != true && alert != false) {\n      jsonArg1.imgShortDescription = alert;\n    }\n\n    jsonArg1.choices = [];\n\n\n    if(jsonArg1.type == 'mc') {\n      for(var j = 0; j < children[7].childNodes.length - 1; j++){\n        jsonArg1.choices.push(children[7].childNodes[j].childNodes[2].value);\n\n        if(children[7].childNodes[j].childNodes[1].checked == true) {\n          jsonArg1.checked = j;\n        }\n      }\n    }\n\n    else if(jsonArg1.type == 'fr') {\n      jsonArg1.choices.push(children[8].value);\n    }\n\n    else if(jsonArg1.type == 'tf') {\n      if(children[8].childNodes[0].checked) {\n        jsonArg1.choices.push(\"true\");\n      }\n      else {\n        jsonArg1.choices.push(\"false\");\n      }\n    }\n\n    else {\n      var boxes = document.getElementsByClassName('matchingbox');\n      jsonArg1.numBoxes = boxes.length;\n\n      for(var i = 0; i < boxes.length; i++) {\n        var question = boxes[i].childNodes[3].value;\n        var result = boxes[i].childNodes[5].value;\n\n        jsonArg1.choices.push(question + \";\" + result);\n      }\n    }\n\n    pluginArrayArg.push(jsonArg1);\n    var questions = JSON.parse(JSON.stringify(pluginArrayArg));\n    $.extend(examInit, { questions });\n  }\n\n  var code = \"\";\n\n  firebase.database().ref(\"Teachers/\" + userName + \"/Classes/\" + localStorage.getItem('createExamClass') + \"/Exams/\").once('value').then(function(snapshot) {\n    snapshot.forEach(function(childSnapshot) {\n      if(childSnapshot.key.substring(1) == document.getElementById('exam-code').innerHTML) {\n        code = childSnapshot.key;\n      }\n    });\n    firebase.database().ref(\"Teachers/\" + userName + \"/Classes/\" + localStorage.getItem('createExamClass') + \"/Exams/\" + code).once('value').then(function(snapshot) {\n      snapshot.forEach(function(childSnapshot) {\n        if(childSnapshot.key != \"responses\" && childSnapshot.key != \"taken\") {\n          firebase.database().ref(\"Teachers/\" + userName + \"/Classes/\" + localStorage.getItem('createExamClass') + \"/Exams/\" + code).child(childSnapshot.key).set(examInit);\n        }\n      });\n    });\n  });\n}\n\nfunction getAllPoints() {\n  var pointsBoxes = document.getElementsByClassName('numPoints');\n  var points = 0;\n\n  for(var i = 0; i < pointsBoxes.length; i++) {\n    if(pointsBoxes[i].value != \"\") {\n      points += parseInt(pointsBoxes[i].value);\n    }\n  }\n\n  return points;\n}\n\nfunction createQuestionTracker(i, populating) {\n  var manager = document.getElementById('question-manager');\n  var tracker = document.createElement('div');\n  tracker.id = \"question-tracker\";\n  tracker.className = i;\n\n    $(tracker).hover(function(){\n      if(navigator.userAgent.toLowerCase().indexOf('safari/') > -1) {\n        this.style.cursor = \"pointer\";\n        $(this).children()[0].innerHTML = \"&#x25CF;\";\n        this.childNodes[1].childNodes[0].style.color = \"white\";\n        this.childNodes[1].childNodes[0].style.marginRight = \"10px\";\n      }\n      else {\n        this.style.cursor = \"pointer\";\n        $(this).children()[0].innerHTML = \"&#x25CF;\";\n        this.childNodes[1].childNodes[0].style.color = \"white\";\n      }\n    }, function(){\n      if(navigator.userAgent.toLowerCase().indexOf('safari/') > -1) {\n        this.childNodes[1].childNodes[0].style.color = \"black\";\n        $(this).children()[0].innerHTML = \"&#x25CC;\";\n        this.childNodes[1].childNodes[0].style.marginRight = \"0\";\n      }\n      else {\n        this.childNodes[1].childNodes[0].style.color = \"black\";\n        $(this).children()[0].innerHTML = \"&#x25CC;\";\n      }\n    });\n\n  tracker.onclick = function() {\n    document.getElementById(i).scrollIntoView({block: \"center\"});\n  }\n\n  var circle = document.createElement('div');\n  circle.id = \"circle\";\n  circle.innerHTML = \"&#x25CC;\"\n\n  var center = document.createElement('center');\n  var text = document.createElement('div');\n  text.id = \"text\";\n  text.innerHTML = i;\n\n  center.appendChild(text);\n\n  tracker.appendChild(circle);\n  tracker.appendChild(center);\n\n  manager.appendChild(tracker);\n  manager.scrollTop = (manager.clientHeight + manager.clientHeight);\n}\n\n//populate exam for autosave\nfunction populateExam(code, ref) {\n  var refs = ref.split('/'); refs.pop();\n\n  firebase.database().ref(refs.join().split(',').join('/')).once('value').then(function(snapshot) {\n    snapshot.forEach(function(childSnapshot) {\n      if(childSnapshot.key.substring(1) == code) {\n        firebase.database().ref(refs.join().split(',').join('/') + \"/\" + childSnapshot.key).once('value').then(function(snapshot) {\n          snapshot.forEach(function(childSnapshot) {\n            var val = childSnapshot.val();\n\n            if(val.examCode != undefined){\n              var counter = 0;\n\n              document.getElementById('last-saved').innerHTML = \"Last Sync: \" + val.lastSaved;\n              document.getElementById('exam-code').innerHTML = val.examCode;\n              document.getElementById('date').value = val.examDate;\n              document.getElementById('description').value = val.examDescription;\n              document.getElementById('nameOfExam').value = val.examTitle;\n              document.getElementsByClassName('time')[0].value = val.examTotalMins;\n\n              for(var i = 0; i < Object.keys(val.questions).length; i++) {\n                var localQuestions = document.getElementsByClassName('question');\n                var question = childSnapshot.val().questions[i];\n\n                if(question.choices != undefined && question.type != \"matching\") {\n                  createQuestion(true, Object.keys(question.choices).length);\n                  createQuestionTracker(i + 1, true);\n\n                  localQuestions[i].childNodes[4].value = question.title;\n                  localQuestions[i].childNodes[6].childNodes[1].value = question.points;\n                  localQuestions[i].childNodes[5].value = question.type;\n\n                  if(question.imgSrc != \"\") {\n                    localQuestions[i].childNodes[6].childNodes[3].style.display = \"initial\";\n                    localQuestions[i].childNodes[6].childNodes[3].onclick = function() {\n                      swal({\n                        icon: question.imgSrc,\n                        text: question.imgShortDescription,\n                        className: \"imgView\"\n                      });\n                    }\n                  }\n\n                  changeQuestionType(question.type, i, 'mc');\n\n                  if(question.type == \"mc\") {\n                    for(var j = 0; j < Object.keys(question.choices).length; j++){\n                      if(question.choices[j].value != undefined){\n                        localQuestions[i].childNodes[7].childNodes[j].childNodes[2].value = (question.choices[j].value);\n                        if(j == question.checked) {\n                          setChecked(localQuestions[i].childNodes[7].childNodes[j].childNodes[1]);\n                        }\n                      }\n                      else {\n                        localQuestions[i].childNodes[7].childNodes[j].childNodes[2].value = (question.choices[j]);\n                        if(j == question.checked) {\n                          setChecked(localQuestions[i].childNodes[7].childNodes[j].childNodes[1]);\n                        }\n                      }\n                    }\n                  }\n\n                  else if(question.type == \"fr\"){\n                    localQuestions[i].childNodes[8].value = (question.choices[0]);\n                  }\n\n                  else if(question.type == \"tf\") {\n                    if(question.choices[0] == 'true') {\n                      localQuestions[i].childNodes[8].childNodes[0].checked = true;\n                    }\n                    else {\n                      localQuestions[i].childNodes[8].childNodes[2].checked = true;\n                    }\n                  }\n                }\n\n                // else if(question.type == \"matching\") {\n                //   createQuestion(true, question.numBoxes);\n                //   createQuestionTracker(i + 1, true);\n                //   changeQuestionType(question.type, i, \"mc\");\n                //\n                //   localQuestions[i].childNodes[3].value = question.title;\n                //   localQuestions[i].childNodes[5].childNodes[1].value = question.points;\n                //   localQuestions[i].childNodes[4].value = question.type;\n                //\n                //   localQuestions[i].childNodes[0].value = question.numBoxes;\n                //   for(var j = 0; j < question.numBoxes; j++) {\n                //     createMatchingElement(localQuestions[i].childNodes[6], j + 1);\n                //   }\n                //\n                //   var localBoxes = document.getElementsByClassName('matchingbox');\n                //   for(var k = 0; k < localBoxes.length; k++) {\n                //     localBoxes[k].childNodes[0].value = question.choices[k].split(\";\")[0];\n                //     localBoxes[k].childNodes[2].value = question.choices[k].split(\";\")[1];\n                //   }\n                // }\n              }\n            }\n          });\n        });\n      }\n    });\n  });\n\n  setTimeout(function(){ document.getElementsByClassName('points')[0].value = getAllPoints(); }, 200);\n}\n\nfunction setChecked(div) {\n  setTimeout(function(){ div.checked = true; }, 200);\n}\n\n//load class based on name\nfunction loadClass(name) {\n    if($(\"#exam-wrapper\") != undefined) {\n      $(\"#exam-wrapper\").empty();\n    }\n    var examCounter = 0;\n    var collectiveAvg = 0;\n    var classAvg = 0;\n    var classCounter = 0;\n    var counter = -1\n\n    document.getElementById('welcome-div').style.display = \"none\";\n    document.getElementById('wrapper').style.display = \"none\";\n    document.getElementById('classSpecific').style.display = \"initial\";\n    document.getElementById('exam-wrapper').style.display = \"grid\";\n    document.getElementById('main-header').innerHTML = \"Welcome to \" + name;\n    document.body.style.backgroundImage = \"linear-gradient(to top, #dfe9f3 0%, white 100%)\";\n\n    localStorage.setItem('createExamClass', name);\n\n    firebase.database().ref(\"Teachers/\" + userName + \"/Classes/\" + name + \"/Exams/\").on('value', function(snapshot) {\n      exams.push(snapshot.val());\n      counter++;\n      snapshot.forEach(function(childSnapshot) {\n        childSnapshot.child('responses').forEach(function(exam) {\n          classCounter++;\n          examCounter++;\n          var grade = exam.val()[Object.keys(exam.val())[0]].score;\n          collectiveAvg += parseInt(grade);\n\n          classAvg += parseInt(grade);\n        });\n\n        for(var key in childSnapshot.val()) {\n          if(childSnapshot.val() != \"no_exams\") {\n            createExamBox(childSnapshot.val()[key].examTitle, (classAvg / classCounter).toFixed(1), \"Teachers/\" + userName + \"/Classes/\" + name + \"/Exams/\" + childSnapshot.key, childSnapshot.val()[key].examCode);\n            var val = childSnapshot.val()[key].examTitle;\n\n            if(localStorage.getItem(\"CreatedExamCode\") != \"\") {\n              var button = document.getElementById('cached-code');\n              if(button != null) {\n                button.id = \"cached-exam-button\";\n                button.style.display = \"inline-block\";\n\n                console.log(button)\n\n                button.onclick = function() {\n                  document.getElementById('create-exam').style.display = \"initial\";\n                  document.getElementById('main').style.display = \"none\";\n                  document.body.style.background = \"white\";\n\n                  console.log(localStorage.getItem(\"CreatedExamCode\").toUpperCase())\n\n                  populateExam(localStorage.getItem(\"CreatedExamCode\").toUpperCase(), \"Teachers/\" + userName + \"/Classes/\" + localStorage.getItem('createExamClass') + \"/Exams/\" + localStorage.getItem(\"CreatedExamCode\").toUpperCase());\n                }\n              }\n            }\n\n            if(childSnapshot.val()[key].examTitle == \"\"){\n              val = childSnapshot.val()[key].examCode;\n            }\n\n            if(localStorage.getItem(\"CreatedExamCode\") != null && localStorage.getItem(\"CreatedExamCode\").toUpperCase() == childSnapshot.val()[key].examCode) {\n              console.log(localStorage.getItem(\"CreatedExamCode\").toUpperCase(), childSnapshot.val()[key].examCode)\n                document.getElementById('cached-exam-button').style.display = \"initial\";\n                document.getElementById('cached-exam-code').innerHTML = \"Edit \" + val;\n            }\n            else if(document.getElementById('cached-exam-button') != null){\n              document.getElementById('cached-exam-button').style.display = \"none\";\n            }\n            break;\n          }\n          else {\n            document.getElementById('no-exams').style.display = \"initial\";\n          }\n        }\n        classAvg = 0;\n        classCounter = 0;\n      });\n\n      collectiveAvg = collectiveAvg / examCounter;\n      collectiveAvg = (collectiveAvg).toFixed(1);\n\n      if(collectiveAvg == \"NaN\"){\n        document.getElementById('avg-grade-number').innerHTML = \"No Data\";\n      }\n      else{\n        document.getElementById('avg-grade-number').innerHTML = collectiveAvg + \"%\";\n        localStorage.setItem(\"avg-grade-number\", collectiveAvg + \"%\");\n      }\n    });\n}\n\n// Generate random exam code\nfunction generateCode() {\n  var code = Math.random().toString(36).replace(/[^a-z]+/g, '').substr(0, 5);\n  var className = \"\";\n\n  var string = document.getElementById('main-header').innerHTML.substring(document.getElementById('main-header')).split(\" \");\n  string.shift(); string.shift();\n\n  for(var i = 0; i < string.length; i++) {\n    if(i != string.length - 1) {\n      className += string[i] + \" \";\n    }\n    else{\n      className += string[i];\n    }\n  }\n\n  if(examCodes.indexOf(code) == -1){\n    firebase.database().ref(\"exam-codes\").push(code.toUpperCase() + \";\" + userName + \";\" + className + \";\" + code.toUpperCase());\n    localStorage.setItem(\"CreatedExamCode\", code);\n    return code;\n  }\n  else {\n    generateCode(); // Rerun generateCode() if code exists already\n  }\n}\n\n// remove dropdown if screen size can handle navbar\nfunction removeDropDown(x) {\n if (x.matches) { // If media query matches\n   document.getElementById('dropdown').style.display = \"none\"; // Remove DropDown\n } else {\n   document.getElementById('dropdown').style.display = \"initial\"; //Bring DropDown back\n }\n}\n\n// JS media query for dropdown nav\nvar x = window.matchMedia(\"(min-width: 601px)\") // Specify what to set media-queries at\nremoveDropDown(x) // Call listener function at run time\nx.addListener(removeDropDown) // Attach listener function on state changes\n\n// function to display all data in the table by exam name\nfunction displayExamData(examName) {\n  if(!examDataHasLoaded) {\n    var cumAvg = 0;\n    var classLength = 0;\n    var highest = \"a:-1000\";\n    var lowest = \"a:1000\";\n    var quickest = \"a:1000\";\n    var slowest = \"a:-1000\";\n    var table;\n    var populated = false;\n    var standardDeviation = [];\n\n    document.getElementById('welcome-div').style.display = \"none\";\n    document.getElementById('wrapper').style.display = \"none\";\n    document.getElementById('classSpecific').style.display = \"none\";\n    document.getElementById('exam-wrapper').style.display = \"none\";\n    document.getElementById('examSpecific').style.display = \"initial\";\n    document.getElementById('sort-menu').style.display = \"initial\";\n    document.getElementById('exam-name').innerHTML = examName;\n    document.body.style.backgroundImage = \"linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%)\";\n\n    var i = document.createElement('i');\n    i.className = \"glyphicon glyphicon-circle-arrow-up\";\n    i.id = \"topPage\";\n\n    i.onclick = function() {\n      document.body.scrollTop = 0;\n      document.documentElement.scrollTop = 0;\n    };\n\n    document.getElementById('main').appendChild(document.createElement('br'));\n    document.getElementById('main').appendChild(i);\n\n    var finalSelectedCode = \"\";\n\n    for (var key in exams) {\n      // skip loop if the property is from prototype\n      if (!arr.hasOwnProperty(key)) continue;\n      var obj = exams[key];\n\n      for (var prop in obj) {\n        for(var initData in obj[prop]){\n          if(obj[prop][initData].examCode != undefined && Object.keys(obj[prop]).length > 1) {\n            var code = obj[prop][initData].examCode;\n\n            localStorage.setItem('populatedExamCode', code);\n\n            if(examName == obj[prop][initData].examTitle) {\n              finalSelectedCode = code;\n              document.getElementById('edit-exam').innerHTML = examName;\n              document.getElementById('edit-current-exam').style.display = \"initial\";\n\n              document.getElementById('edit-current-exam').onclick = function() {\n                document.getElementById('create-exam').style.display = \"initial\";\n                document.getElementById('main').style.display = \"none\";\n                document.body.style.background = \"white\";\n                populateExam(finalSelectedCode, \"Teachers/\" + userName + \"/Classes/\" + localStorage.getItem('createExamClass') + \"/Exams/\" + prop)\n              };\n\n              document.getElementById('view-item-analysis').style.display = \"initial\";\n              document.getElementById('view-item-analysis').onclick = function() {\n                document.getElementById('main').style.display = \"none\";\n                document.getElementById('item-analysis').style.display = \"inline-block\";\n                document.body.style.backgroundImage = \"linear-gradient(to bottom, #6a85b6 0%, #bac8e0 100%)\";\n                document.getElementById('item-analysis-name').innerHTML = examName;\n                populateItemAnalysis(finalSelectedCode, \"Teachers/\" + userName + \"/Classes/\" + localStorage.getItem('createExamClass') + \"/Exams/\" + prop)\n              }\n            }\n\n            // skip loop if the property is from prototype\n            if(!obj.hasOwnProperty(prop)) continue;\n\n            var dbName = obj[prop][initData].examTitle;\n            if(dbName == \"\") {\n              dbName = obj[prop][initData].examCode.substring(1);\n            }\n\n            if(dbName == examName) {\n              var random = document.createElement('div');\n              var table = document.createElement('table');\n\n              table.id = \"random\";\n              table.className = \"table table-striped\";\n              table.style.width = \"100vw\";\n\n              var init = document.createElement('tr');\n              init.style.color = \"darkgray\";\n\n              var initName = document.createElement('td');\n              initName.innerHTML = \"Name\";\n              initName.style.paddingLeft = \"66px\";\n              initName.id = \"name\";\n\n              var initScore = document.createElement('td');\n              initScore.innerHTML = \"Score (%)\"\n              initScore.id = \"score\";\n\n              var initPercentile = document.createElement('td');\n              initPercentile.innerHTML = \"Percentile\";\n              initPercentile.id = \"percentile\";\n\n              var initTime = document.createElement('td');\n              initTime.innerHTML = \"Time\";\n              initTime.id = \"time\";\n\n              init.appendChild(initName);\n              init.appendChild(initScore);\n              init.appendChild(initPercentile);\n              init.appendChild(initTime);\n\n              table.appendChild(init);\n            }\n          }\n          else if(Object.keys(obj[prop]).length > 1 && !populated){\n            populated = true;\n\n            for(var response in obj[prop].responses){\n              var data = obj[prop].responses[response][Object.keys(obj[prop].responses[response])[0]];\n\n              standardDeviation.push(parseInt(data.score));\n              examData.push(data.name + \":\" + data.score + \":\" + data.time);\n              cumAvg += parseInt(data.score);\n              classLength = Object.keys(obj[prop].responses).length;\n\n              if(parseInt(data.score) > parseInt(highest.split(\":\")[1])) {\n                highest = data.name + \":\" + parseInt(data.score);\n              }\n\n              if(parseInt(data.score) < parseInt(lowest.split(\":\")[1])) {\n                lowest = data.name + \":\" + parseInt(data.score);\n              }\n\n              var tr = document.createElement('tr');\n              tr.className = response;\n              var examCode = prop;\n              tr.onclick = function() { loadStudentExamData(this.className, examCode); }\n\n              table.appendChild(document.createElement('br'));\n\n        \t\t\tvar name = document.createElement('td');\n              name.style.paddingLeft = \"66px\";\n              name.id = \"name\";\n        \t\t\tvar score = document.createElement('td');\n        \t\t\tvar percentile = document.createElement('td');\n              var time = document.createElement('td');\n\n        \t\t\tname.innerHTML = data.name;\n              name.id = \"name\";\n\n        \t\t\tscore.innerHTML = data.score + \"%\";\n              score.id = \"score\";\n\n              time.innerHTML = data.time + \" Mins\";\n              time.id = \"time\";\n\n        \t\t\tpercentile.innerHTML = getPercentileOriginal(parseInt(data.score), obj[prop].responses, data.name) + \"th\";\n              percentile.id = \"percentile\";\n\n        \t\t\ttr.appendChild(name);\n        \t\t\ttr.appendChild(score);\n        \t\t\ttr.appendChild(percentile);\n              tr.appendChild(time);\n        \t\t\ttable.appendChild(tr);\n\n              random.appendChild(table);\n              document.getElementById('main').appendChild(random);\n            }\n          }\n        }\n      }\n    }\n\n      var overallData = document.getElementById('overall-data');\n      var ul = document.createElement('ul');\n      ul.style.float = \"right\";\n      ul.style.marginRight = \"15vw\";\n\n      var avg = document.createElement('li');\n      avg.innerHTML = \"Class Average: \" + (cumAvg / classLength).toFixed(1) + '%';\n      avg.style.fontSize = \"20px\";\n\n      var highestScorer = document.createElement('li');\n      highestScorer.innerHTML = \"Highest Scorer: \" + highest.split(\":\")[0] + \" (\" + highest.split(\":\")[1] + \"%)\";\n      highestScorer.style.fontSize = \"20px\";\n\n      var lowestScorer = document.createElement('li');\n      lowestScorer.innerHTML = \"Lowest Scorer: \" + lowest.split(\":\")[0] + \" (\" + lowest.split(\":\")[1] + \"%)\";\n      lowestScorer.style.fontSize = \"20px\";\n\n      var standardDev = document.createElement('li');\n\n      // calc SD\n      mean = standardDeviation.reduce((a,b) => a+b)/standardDeviation.length;\n      sd = Math.sqrt(standardDeviation.map(x => Math.pow(x-mean,2)).reduce((a,b) => a+b)/standardDeviation.length);\n\n      standardDev.innerHTML = \"Standard Deviation (): \" + sd.toFixed(3);\n      standardDev.style.fontSize = \"20px\";\n\n      ul.appendChild(avg);\n      ul.appendChild(highestScorer);\n      overallData.appendChild(document.createElement('br'));\n      ul.appendChild(lowestScorer);\n      ul.appendChild(standardDev);\n\n      overallData.appendChild(ul);\n    }\n    else {\n      var possibleTables = document.getElementsByClassName('table');\n      possibleTables[0].style.display = \"table\";\n\n      document.getElementById('topPage').style.display = \"initial\";\n      document.getElementById('examSpecific').style.display = \"inherit\";\n      document.getElementById('classSpecific').style.display = \"none\";\n      document.getElementById('exam-wrapper').style.display = \"none\";\n\n      document.body.style.backgroundImage = \"linear-gradient(135deg, rgb(245, 247, 250) 0%, rgb(195, 207, 226) 100%);\";\n    }\n    examDataHasLoaded = true;\n}\n\nfunction populateItemAnalysis(code, ref) {\n  var dataDiv = document.getElementById('item-analysis-data');\n  \n}\n\nfunction getPercentileOriginal(score, exam, name) {\n  var numBelow = 0;\n  var numEqual = 0;\n\n  for(var student in exam) {\n    if(score > parseInt(exam[student][Object.keys(exam[student])[0]].score)) {\n      numBelow++;\n    }\n    else if(score == parseInt(exam[student][Object.keys(exam[student])[0]].score) && name != exam[student][Object.keys(exam[student])[0]].name) {\n      numEqual++;\n    }\n  }\n  return 100 * (numBelow / (Object.keys(exam).length)).toFixed(1);\n}\n\n//function to remove all class='active'\nfunction removeAllActive() {\n  var navBars = document.getElementsByTagName(\"LI\");\n\n  for(var i = 0; i < navBars.length; i++) {\n    navBars[i].className = \"\";\n  }\n}\n\n//function to switch displays based on what user clicks\nfunction display(title) {\n  if(title == '<a href=\"#\">Ping-Pong</a>') {\n    document.getElementById('main').style.display = \"none\";\n    document.getElementById('pong').style.display = \"initial\";\n    document.getElementById('leaderboard').style.display = \"none\";\n    document.getElementById('feedback').style.display = \"none\";\n    document.getElementById('create-exam').style.display = \"none\"\n    document.getElementById('report-bug').style.display = \"none\";\n  }\n  else if(title == '<a href=\"#\">Dashboard</a>') {\n    document.getElementById('main').style.display = \"initial\";\n    document.getElementById('pong').style.display = \"none\";\n    document.getElementById('leaderboard').style.display = \"none\";\n    document.getElementById('feedback').style.display = \"none\";\n    document.getElementById('create-exam').style.display = \"none\"\n    document.getElementById('report-bug').style.display = \"none\";\n  }\n  else if(title == '<a href=\"#\">Leaderboard</a>') {\n    populateLeaderboard(); // takes care of all other display calls\n    document.getElementById('feedback').style.display = \"none\";\n    document.getElementById('create-exam').style.display = \"none\"\n    document.getElementById('report-bug').style.display = \"none\";\n  }\n  else if(title == '<a href=\"#\">Feedback</a>') {\n    document.getElementById('main').style.display = \"none\";\n    document.getElementById('pong').style.display = \"none\";\n    document.getElementById('leaderboard').style.display = \"none\";\n    document.getElementById('feedback').style.display = \"initial\";\n    document.getElementById('create-exam').style.display = \"none\"\n    document.getElementById('report-bug').style.display = \"none\";\n\n    var iframe = $(\"#feedback-form\");\n    iframe.attr(\"src\", 'https://forms.id/f/zakariyasattar.id.blockstack/56856430b7');\n  }\n  else if(title == '<a href=\"#\">Report A Bug!</a>') {\n    document.getElementById('main').style.display = \"none\";\n    document.getElementById('pong').style.display = \"none\";\n    document.getElementById('leaderboard').style.display = \"none\";\n    document.getElementById('report-bug').style.display = \"initial\";\n    document.getElementById('feedback').style.display = \"none\";\n    document.getElementById('create-exam').style.display = \"none\"\n\n    var iframe = $(\"#report-bug-form\");\n    iframe.attr(\"src\", 'https://forms.id/f/zakariyasattar.id.blockstack/30e2bc327b');\n  }\n}\n\n// function to display / undisplay items to simulate going home\nfunction goHomeFromExams() {\n  document.getElementById('classSpecific').style.display = \"none\";\n  document.getElementById('welcome-div').style.display = \"block\";\n  document.getElementById('wrapper').style.display = \"grid\";\n  document.getElementById('doesNotExist').style.display = \"none\";\n  document.getElementById('no-exams').style.display = \"none\";\n  document.getElementById('exam-wrapper').style.display = \"none\";\n\n  document.body.style.backgroundImage = \"none\"\n}\n\nfunction goExamsFromExam() {\n  var possibleTables = document.getElementsByClassName('table');\n\n  for(var i = 0; i < possibleTables.length; i++) {\n    possibleTables[i].style.display = \"none\";\n  }\n\n  document.getElementById('topPage').style.display = \"none\";\n  document.getElementById('examSpecific').style.display = \"none\";\n  document.getElementById('classSpecific').style.display = \"initial\";\n  document.getElementById('exam-wrapper').style.display = \"grid\";\n\n  document.body.style.backgroundImage = \"linear-gradient(to top, rgb(223, 233, 243) 0%, white 100%)\";\n  $(document.getElementById('overall-data')).empty()\n}\n\nfunction goHomeFromExamData() {\n  goExamsFromExam(); goHomeFromExams();\n}\n\n// function to display student exam data\nfunction loadStudentExamData(name, code) {\n  document.getElementById('examSpecific').style.display = \"none\";\n  document.getElementById('student-exam-data').style.display = \"initial\";\n  document.body.style.backgroundImage = \"none\";\n  var answer = \"\";\n  var finalId;\n\n  //linear-gradient(135deg, rgb(245, 247, 250) 0%, rgb(195, 207, 226) 100%);\n\n  var table = document.getElementsByClassName('table');\n  for(var i = 0; i < table.length; i++) {\n    table[i].style.display = \"none\";\n  }\n\n  firebase.database().ref(\"Teachers/\" + userName + \"/Classes/\" + localStorage.getItem(\"className\") + \"/Students\").once('value', function(snapshot) {\n    for(var info in snapshot.val()) {\n      var data = snapshot.val()[info];\n      var id = data.split(\";\")[0];\n      var fullName = data.split(\";\")[1];\n\n      if(name == fullName) {\n        finalId = id;\n      }\n    }\n  });\n\n  firebase.database().ref(\"Teachers/\" + userName + \"/Classes/\" + localStorage.getItem(\"className\") + \"/Exams/\" + code).once('value', function(snapshot) {\n    var data = (snapshot.val().responses[name][Object.keys(snapshot.val().responses[name])[0]]);\n\n    document.getElementById('resetStatus').onclick = function() {\n      for(var takenKey in snapshot.val().taken) {\n        var id = (snapshot.val().taken[takenKey]);\n\n        if(id == finalId) {\n          firebase.database().ref(\"Teachers/\" + userName + \"/Classes/\" + localStorage.getItem(\"className\") + \"/Exams/\" + code + \"/taken/\").child(takenKey).remove()\n        }\n      }\n\n      swal(\"Success!\", name + \"'s taken status has been reset. \" + name + \" should be able to retake exam now.\", 'success')\n    }\n\n    var studentPoints = data.totalScore / 100 * snapshot.val()[Object.keys(snapshot.val())[0]].examTotalPoints;\n    document.getElementById('score-num').innerHTML = (studentPoints).toFixed(0) + \" / \" + snapshot.val()[Object.keys(snapshot.val())[0]].examTotalPoints;\n    document.getElementById('score').innerHTML = data.totalScore + \"%\";\n\n    var corrAnswer = \"\";\n    localStorage.setItem(\"totalPointsExcludingFr\", 0);\n\n    for(var i = 0; i < Object.keys(data.answers).length; i++) {\n\n      if(snapshot.val()[Object.keys(snapshot.val())[0]].questions[i].type == \"tf\") {\n        corrAnswer = snapshot.val()[Object.keys(snapshot.val())[0]].questions[i].choices[0];\n      }\n      else if(snapshot.val()[Object.keys(snapshot.val())[0]].questions[i].type == \"mc\"){\n        corrAnswer = snapshot.val()[Object.keys(snapshot.val())[0]].questions[i].checked;\n      }\n      else if(snapshot.val()[Object.keys(snapshot.val())[0]].questions[i].type == \"fr\") {\n        corrAnswer = \"\";\n      }\n      createGradedQuestion(\n        // PARAM: studAnswer\n        data.answers[i].split(\";\")[1],\n        // PARAM: corrAnswer\n        corrAnswer,\n        // PARAM: numAnswerChoices\n        Object.keys(snapshot.val()[Object.keys(snapshot.val())[0]].questions[i].choices).length,\n        // PARAM: numPoints\n        snapshot.val()[Object.keys(snapshot.val())[0]].questions[i].points,\n        // PARAM: questions\n        snapshot.val()[Object.keys(snapshot.val())[0]].questions[i],\n        // PARAM: studName\n        name,\n        // PARAM: examCurrentCode\n        code,\n        // PARAM: examTotalPoints\n        snapshot.val()[Object.keys(snapshot.val())[0]].examTotalPoints\n      );\n    }\n  });\n}\n\n//create Question box for every graded question\nfunction createGradedQuestion(studAnswer, corrAnswer, numAnswerChoices, numAnswerPoints, questions, studName, examCurrentCode, examTotalPoints) {\n  var awardedPoints = 0;\n  if(corrAnswer == \"true\"){\n    corrAnswer = \"0\";\n    numAnswerChoices = 2;\n  }\n  else if(corrAnswer == 'false') {\n    corrAnswer = \"1\";\n    numAnswerChoices = 2;\n  }\n\n  var correct = false;\n  if(studAnswer == corrAnswer) {\n    correct = true;\n  }\n\n  if(questions.type != \"fr\" && correct) {\n    localStorage.setItem(\"totalPointsExcludingFr\", parseInt(localStorage.getItem(\"totalPointsExcludingFr\")) + parseInt(questions.points))\n  }\n\n  var exam = document.getElementById('question-data');\n\n  var question = document.createElement('div');\n  question.className = \"question\";\n  question.id = document.getElementsByClassName('question').length + 1;\n\n  var num = document.createElement('span');\n  num.innerHTML = document.getElementsByClassName('question').length + 1 + \". \";\n  num.style.color = \"#97a5aa\";\n\n  var hr = document.createElement('hr');\n\n  var question_title = document.createElement('input');\n  question_title.readOnly = true;\n  question_title.value = questions.title;\n  question_title.id = \"question-title\";\n\n  question.appendChild(num);\n  question.appendChild(question_title);\n\n  if(correct) {\n    awardedPoints = numAnswerPoints;\n  }\n\n  var points = document.createElement('div');\n  points.id = \"points\";\n\n  var span = document.createElement('span');\n  span.innerHTML = \"( \";\n\n  var numPoints = document.createElement('span');\n  numPoints.type = \"text\";\n  numPoints.id = \"numPoints\";\n  numPoints.innerHTML = numAnswerPoints;\n\n  var finishingSpan = document.createElement('span');\n  finishingSpan.className = \"pa\";\n  finishingSpan.innerHTML = \" points)  -  points awarded: \" + awardedPoints;\n\n  points.appendChild(span); points.appendChild(numPoints); points.appendChild(finishingSpan);\n\n  question.appendChild(points);\n\n  var answer_choices = document.createElement('div');\n  answer_choices.className = \"mc\";\n\n  for(var i = 0; i < numAnswerChoices; i++) {\n    var label = document.createElement('label');\n    label.id = \"label\";\n    label.style.width = \"95%\"\n    if((correct && i == studAnswer) || i == corrAnswer) {\n      label.style.background = \"#e4f7e4\";\n      label.style.borderTop = \"1px solid #00cc00\"\n      label.style.borderBottom = \"1px solid #00cc00\"\n\n      var correctAnswer = document.createElement('span');\n      correctAnswer.innerHTML = \"Correct Answer\"\n      correctAnswer.style.float = \"right\";\n      correctAnswer.style.fontWeight = \"normal\";\n      correctAnswer.style.marginTop  = \"10px\";\n      correctAnswer.style.color = \"#00cc00\";\n      correctAnswer.style.marginRight  = \"15px\";\n\n      label.appendChild(correctAnswer);\n    }\n    else if(!correct && i == studAnswer) {\n      label.style.background = \"#f2ebeb\";\n      label.style.borderTop = \"1px solid #cc5252\"\n      label.style.borderBottom = \"1px solid #cc5252\"\n      label.style.color = \"#cc5252\";\n\n      var incorrectAnswer = document.createElement('span');\n      incorrectAnswer.innerHTML = \"Student Answer\"\n      incorrectAnswer.style.float = \"right\";\n      incorrectAnswer.style.fontWeight = \"normal\";\n      incorrectAnswer.style.marginTop  = \"10px\";\n      incorrectAnswer.style.color = \"#cc5252\";\n      incorrectAnswer.style.marginRight  = \"15px\";\n      label.appendChild(incorrectAnswer);\n    }\n\n    var input = document.createElement('input');\n    input.disabled = true;\n    input.style.outline = \"none\";\n    input.type = \"radio\";\n    input.className = \"option-input radio\";\n    input.name = num.innerHTML;\n\n    var span = document.createElement('span');\n    if(questions.type != \"tf\" && questions.type != \"fr\") {\n      span.innerHTML = questions.choices[i];\n    }\n    else if(questions.type == \"tf\"){\n      if(i == 0) {\n        span.innerHTML = \"True\";\n      }\n      else {\n        span.innerHTML = \"False\";\n      }\n    }\n    span.style.fontWeight = \"normal\"\n\n    var answer_choice = document.createElement('span');\n    answer_choice.className = \"option\";\n    answer_choice.id = \"question-choice\";\n\n    label.appendChild(input);\n    label.appendChild(answer_choice);\n    label.appendChild(span);\n    answer_choices.appendChild(label);\n  }\n\n  if(questions.type == \"fr\") {\n    var ta = document.createElement('textarea');\n    $(ta).attr(\"readonly\", true);\n    ta.className = \"fr\";\n    ta.value = studAnswer;\n\n    var pointsAwardedSpan = document.createElement('span');\n    pointsAwardedSpan.innerHTML = \"Points Awarded - \";\n\n    var numAcceptedPoints = document.createElement('input');\n    numAcceptedPoints.maxLength = questions.points.length;\n\n    firebase.database().ref(\"Teachers/\" + userName + \"/Classes/\" + localStorage.getItem(\"className\") + \"/Exams/\" + examCurrentCode + \"/responses/\" + studName).once('value', function(snapshot) {\n      snapshot.forEach(function(childSnapshot) {\n        var questionNum;\n        var answers = childSnapshot.val().answers;\n\n        if(answers[2].split(\";\")[2] != undefined) {\n          setTimeout(function(){ document.getElementsByClassName('pa')[parseInt(num.innerHTML.substring(0, num.innerHTML.indexOf(\".\"))) - 1].innerHTML = \" points)  -  points awarded: \" + answers[2].split(\";\")[2]; }, 100);\n          numAcceptedPoints.value = answers[2].split(\";\")[2];\n        }\n      });\n    });\n\n    numAcceptedPoints.onkeyup = function () {\n      this.value = this.value.replace(/[^\\d]/,'');\n      this.value = this.value.replace('-', '');\n\n      if(this.value != \"\") {\n        document.getElementsByClassName('pa')[parseInt(num.innerHTML.substring(0, num.innerHTML.indexOf(\".\"))) - 1].innerHTML = \" points)  -  points awarded: \" + this.value;\n      }\n      else {\n        document.getElementsByClassName('pa')[parseInt(num.innerHTML.substring(0, num.innerHTML.indexOf(\".\"))) - 1].innerHTML = \" points)  -  points awarded: 0\";\n      }\n\n      var cleanVersion = this.value;\n\n      firebase.database().ref(\"Teachers/\" + userName + \"/Classes/\" + localStorage.getItem(\"className\") + \"/Exams/\" + examCurrentCode + \"/responses/\" + studName).once('value', function(snapshot) {\n        snapshot.forEach(function(childSnapshot) {\n          var questionNum;\n          var answers = childSnapshot.val().answers;\n\n          for(var k = 0; k < answers.length; k++) {\n            if(isNaN(answers[k].split(\";\")[1])) {\n              console.log(answers[k])\n              answers[k] = answers[k].split(\";\")[0] + \";\" + answers[k].split(\";\")[1] + \";\" + cleanVersion;\n            }\n          }\n          firebase.database().ref(\"Teachers/\" + userName + \"/Classes/\" + localStorage.getItem(\"className\") + \"/Exams/\" + examCurrentCode + \"/responses/\" + studName + \"/\" + childSnapshot.key).update({ 'answers': answers });\n\n          var newScore = (((parseInt(localStorage.getItem(\"totalPointsExcludingFr\")) + parseInt(cleanVersion)) / examTotalPoints) * 100).toFixed(1);\n          firebase.database().ref(\"Teachers/\" + userName + \"/Classes/\" + localStorage.getItem(\"className\") + \"/Exams/\" + examCurrentCode + \"/responses/\" + studName + \"/\" + childSnapshot.key).update({ 'totalScore': newScore });\n\n          document.getElementById(\"score\").innerHTML = newScore + \"%\";\n          document.getElementById(\"score-num\").innerHTML = (parseInt(localStorage.getItem(\"totalPointsExcludingFr\")) + parseInt(cleanVersion)) + \" / \" + examTotalPoints;\n        });\n      });\n    }\n\n    numAcceptedPoints.placeholder = \"0 - \" + questions.points;\n    numAcceptedPoints.style.padding = \"5px\";\n    numAcceptedPoints.style.fontSize = \"15px\";\n    numAcceptedPoints.style.border = \"1px solid #808080\";\n    numAcceptedPoints.style.borderRadius = \"3px\";\n    numAcceptedPoints.style.marginTop = \"20px\";\n\n    question.appendChild(ta);\n    question.appendChild(document.createElement('br'));\n    question.appendChild(pointsAwardedSpan);\n    question.appendChild(numAcceptedPoints);\n  }\n  else {\n    question.appendChild(answer_choices);\n  }\n\n  exam.appendChild(question);\n  exam.appendChild(document.createElement('br'));\n  exam.appendChild(hr);\n\n}\n\n//function to calc precentile range\nfunction getPercentile(val, exam) {\n  var numBelow = 0;\n  var numEqual = 0;\n\n  for(var student in exam) {\n    if(parseInt(val.split(\":\")[1]) > parseInt(exam[student].split(\":\")[1])) {\n      numBelow++;\n    }\n    else if(parseInt(val.split(\":\")[1]) == parseInt(exam[student].split(\":\")[1]) && val.split(\":\")[0] != exam[student].split(\":\")[0]) {\n      numEqual++;\n    }\n  }\n  return 100 * (numBelow / (Object.keys(exam).length)).toFixed(1);\n}\n\n// sort function\nfunction sort(func) {\n  var tables = document.getElementsByClassName('table table-striped');\n\n  for(var t = 0; t < tables.length; t++) {\n    tables[t].style.display = \"none\";\n  }\n\n  var testExamData = examData.slice();\n  testExamData.sort();\n\n  if(func == \" Original\") {\n    var table = document.createElement('table');\n    table.id = \"random\";\n    table.className = \"table table-striped\";\n    table.style.width = \"100vw\";\n\n    var init = document.createElement('tr');\n    init.style.color = \"darkgray\";\n\n    var initName = document.createElement('td');\n    initName.innerHTML = \"Name\";\n    initName.style.paddingLeft = \"66px\";\n    initName.id = \"name\";\n\n    var initScore = document.createElement('td');\n    initScore.innerHTML = \"Score (%)\"\n    initScore.id = \"score\";\n\n    var initPercentile = document.createElement('td');\n    initPercentile.innerHTML = \"Percentile\";\n    initPercentile.id = \"percentile\";\n\n    var initTime = document.createElement('td');\n    initTime.innerHTML = \"Time\";\n    initTime.id = \"time\";\n\n    init.appendChild(initName);\n    init.appendChild(initScore);\n    init.appendChild(initPercentile);\n    init.appendChild(initTime);\n\n    table.appendChild(init);\n\n    for(var i = 0; i < examData.length; i++){\n      var tr = document.createElement('tr');\n\n      var iTracker = i;\n      tr.onclick = function() { loadStudentExamData(examData[iTracker].split(\":\")[0], localStorage.getItem(\"populatedExamCode\")); }\n\n      table.appendChild(document.createElement('br'));\n\n      var name = document.createElement('td');\n      name.style.paddingLeft = \"66px\";\n      var score = document.createElement('td');\n      var percentile = document.createElement('td');\n\n      name.innerHTML = examData[i].split(\":\")[0];\n      score.innerHTML = examData[i].split(\":\")[1] + \"%\";\n      percentile.innerHTML = getPercentile(examData[i], examData) + \"th\";\n\n      var time = document.createElement('td');\n      time.innerHTML = examData[i].split(\":\")[2] + \" Mins\";\n      time.id = \"time\";\n\n      tr.appendChild(name);\n      tr.appendChild(score);\n      tr.appendChild(percentile);\n      tr.appendChild(time);\n      table.appendChild(tr);\n    }\n\n    document.getElementById('main').appendChild(table);\n  }\n  else {\n    if(func == \" Sort By Alphabet (A-Z)\"){\n      testExamData.sort();\n\n      var table = document.createElement('table');\n      table.id = \"random\";\n      table.className = \"table table-striped\";\n      table.style.width = \"100vw\";\n\n      var init = document.createElement('tr');\n      init.style.color = \"darkgray\";\n\n      var initName = document.createElement('td');\n      initName.innerHTML = \"Name\";\n      initName.style.paddingLeft = \"66px\";\n      initName.id = \"name\";\n\n      var initScore = document.createElement('td');\n      initScore.innerHTML = \"Score (%)\"\n      initScore.id = \"score\";\n\n      var initPercentile = document.createElement('td');\n      initPercentile.innerHTML = \"Percentile\";\n      initPercentile.id = \"percentile\";\n\n      var initTime = document.createElement('td');\n      initTime.innerHTML = \"Time\";\n      initTime.id = \"time\";\n\n      init.appendChild(initName);\n      init.appendChild(initScore);\n      init.appendChild(initPercentile);\n      init.appendChild(initTime);\n\n      table.appendChild(init);\n\n      for(var i = 0; i < testExamData.length; i++){\n        var tr = document.createElement('tr');\n        tr.onclick = function() { loadStudentExamData(testExamData[i].split(\":\")[0], localStorage.getItem(\"populatedExamCode\")); }\n\n        table.appendChild(document.createElement('br'));\n\n        var name = document.createElement('td');\n        name.style.paddingLeft = \"66px\";\n        var score = document.createElement('td');\n        var percentile = document.createElement('td');\n\n        name.innerHTML = testExamData[i].split(\":\")[0];\n        score.innerHTML = testExamData[i].split(\":\")[1] + \"%\";\n        percentile.innerHTML = getPercentile(testExamData[i], testExamData) + \"th\";\n\n        var time = document.createElement('td');\n        time.innerHTML = testExamData[i].split(\":\")[2] + \" Mins\";\n        time.id = \"time\";\n\n        tr.appendChild(name);\n        tr.appendChild(score);\n        tr.appendChild(percentile);\n        tr.appendChild(time);\n        table.appendChild(tr);\n      }\n\n      document.getElementById('main').appendChild(table);\n\n    }\n    else if(func == \" Sort By Alphabet (Z-A)\") {\n      testExamData.sort();\n\n      var table = document.createElement('table');\n      table.id = \"random\";\n      table.className = \"table table-striped\";\n      table.style.width = \"100vw\";\n\n      var init = document.createElement('tr');\n      init.style.color = \"darkgray\";\n\n      var initName = document.createElement('td');\n      initName.innerHTML = \"Name\";\n      initName.style.paddingLeft = \"66px\";\n      initName.id = \"name\";\n\n      var initScore = document.createElement('td');\n      initScore.innerHTML = \"Score (%)\"\n      initScore.id = \"score\";\n\n      var initPercentile = document.createElement('td');\n      initPercentile.innerHTML = \"Percentile\";\n      initPercentile.id = \"percentile\";\n\n      var initTime = document.createElement('td');\n      initTime.innerHTML = \"Time\";\n      initTime.id = \"time\";\n\n      init.appendChild(initName);\n      init.appendChild(initScore);\n      init.appendChild(initPercentile);\n      init.appendChild(initTime);\n\n      table.appendChild(init);\n\n      for(var i = testExamData.length - 1; i >= 0; i--){\n        var tr = document.createElement('tr');\n        tr.onclick = function() { loadStudentExamData(testExamData[i].split(\":\")[0], localStorage.getItem(\"populatedExamCode\")); }\n\n        table.appendChild(document.createElement('br'));\n\n        var name = document.createElement('td');\n        name.style.paddingLeft = \"66px\";\n        var score = document.createElement('td');\n        var percentile = document.createElement('td');\n\n        name.innerHTML = testExamData[i].split(\":\")[0];\n        score.innerHTML = testExamData[i].split(\":\")[1] + \"%\";\n        percentile.innerHTML = getPercentile(testExamData[i], testExamData) + \"th\";\n\n        var time = document.createElement('td');\n        time.innerHTML = testExamData[i].split(\":\")[2] + \" Mins\";\n        time.id = \"time\";\n\n        tr.appendChild(name);\n        tr.appendChild(score);\n        tr.appendChild(percentile);\n        tr.appendChild(time);\n        table.appendChild(tr);\n      }\n\n      document.getElementById('main').appendChild(table);\n    }\n\n    else if(func == \" Sort By Score (high-low)\") {\n      var scores = mergeSort(testExamData);\n\n      var table = document.createElement('table');\n      table.id = \"random\";\n      table.className = \"table table-striped\";\n      table.style.width = \"100vw\";\n\n      var init = document.createElement('tr');\n      init.style.color = \"darkgray\";\n\n      var initName = document.createElement('td');\n      initName.innerHTML = \"Name\";\n      initName.style.paddingLeft = \"66px\";\n      initName.id = \"name\";\n\n      var initScore = document.createElement('td');\n      initScore.innerHTML = \"Score (%)\"\n      initScore.id = \"score\";\n\n      var initPercentile = document.createElement('td');\n      initPercentile.innerHTML = \"Percentile\";\n      initPercentile.id = \"percentile\";\n\n      var initTime = document.createElement('td');\n      initTime.innerHTML = \"Time\";\n      initTime.id = \"time\";\n\n      init.appendChild(initName);\n      init.appendChild(initScore);\n      init.appendChild(initPercentile);\n      init.appendChild(initTime);\n\n      table.appendChild(init);\n\n      for(var i = scores.length - 1; i >= 0; i--){\n        var tr = document.createElement('tr');\n        tr.onclick = function() { loadStudentExamData(scores[i].split(\":\")[0], localStorage.getItem(\"populatedExamCode\")); }\n\n        table.appendChild(document.createElement('br'));\n\n        var name = document.createElement('td');\n        name.style.paddingLeft = \"66px\";\n        var score = document.createElement('td');\n        var percentile = document.createElement('td');\n\n        name.innerHTML = scores[i].split(\":\")[0];\n        score.innerHTML = scores[i].split(\":\")[1] + \"%\";\n        percentile.innerHTML = getPercentile(scores[i], scores) + \"th\";\n\n        var time = document.createElement('td');\n        time.innerHTML = testExamData[i].split(\":\")[2] + \" Mins\";\n        time.id = \"time\";\n\n        tr.appendChild(name);\n        tr.appendChild(score);\n        tr.appendChild(percentile);\n        tr.appendChild(time);\n        table.appendChild(tr);\n      }\n\n      document.getElementById('main').appendChild(table);\n\n    }\n    else if(func == \" Sort By Score (low-high)\") {\n      var scores = mergeSort(testExamData);\n\n      var table = document.createElement('table');\n      table.id = \"random\";\n      table.className = \"table table-striped\";\n      table.style.width = \"100vw\";\n\n      var init = document.createElement('tr');\n      init.style.color = \"darkgray\";\n\n      var initName = document.createElement('td');\n      initName.innerHTML = \"Name\";\n      initName.style.paddingLeft = \"66px\";\n      initName.id = \"name\";\n\n      var initScore = document.createElement('td');\n      initScore.innerHTML = \"Score (%)\"\n      initScore.id = \"score\";\n\n      var initPercentile = document.createElement('td');\n      initPercentile.innerHTML = \"Percentile\";\n      initPercentile.id = \"percentile\";\n\n      var initTime = document.createElement('td');\n      initTime.innerHTML = \"Time\";\n      initTime.id = \"time\";\n\n      init.appendChild(initName);\n      init.appendChild(initScore);\n      init.appendChild(initPercentile);\n      init.appendChild(initTime);\n\n      table.appendChild(init);\n\n      for(var i = 0; i < scores.length; i++){\n        var tr = document.createElement('tr');\n        tr.onclick = function() { loadStudentExamData(scores[i].split(\":\")[0], localStorage.getItem(\"populatedExamCode\")); }\n\n        table.appendChild(document.createElement('br'));\n\n        var name = document.createElement('td');\n        name.style.paddingLeft = \"66px\";\n        var score = document.createElement('td');\n        var percentile = document.createElement('td');\n\n        name.innerHTML = scores[i].split(\":\")[0];\n        score.innerHTML = scores[i].split(\":\")[1] + \"%\";\n        percentile.innerHTML = getPercentile(scores[i], scores) + \"th\";\n\n        var time = document.createElement('td');\n        time.innerHTML = testExamData[i].split(\":\")[2] + \" Mins\";\n        time.id = \"time\";\n\n        tr.appendChild(name);\n        tr.appendChild(score);\n        tr.appendChild(percentile);\n        tr.appendChild(time);\n        table.appendChild(tr);\n      }\n\n      document.getElementById('main').appendChild(table);\n\n    }\n    else if(func == \" Sort By Time (high-low)\") {\n      var times = mergeSortTime(testExamData);\n\n      var table = document.createElement('table');\n      table.id = \"random\";\n      table.className = \"table table-striped\";\n      table.style.width = \"100vw\";\n\n      var init = document.createElement('tr');\n      init.style.color = \"darkgray\";\n\n      var initName = document.createElement('td');\n      initName.innerHTML = \"Name\";\n      initName.style.paddingLeft = \"66px\";\n      initName.id = \"name\";\n\n      var initScore = document.createElement('td');\n      initScore.innerHTML = \"Score (%)\"\n      initScore.id = \"score\";\n\n      var initPercentile = document.createElement('td');\n      initPercentile.innerHTML = \"Percentile\";\n      initPercentile.id = \"percentile\";\n\n      var initTime = document.createElement('td');\n      initTime.innerHTML = \"Time\";\n      initTime.id = \"time\";\n\n      init.appendChild(initName);\n      init.appendChild(initScore);\n      init.appendChild(initPercentile);\n      init.appendChild(initTime);\n\n      table.appendChild(init);\n\n      for(var i = times.length - 1; i >= 0; i--){\n        var tr = document.createElement('tr');\n        tr.onclick = function() { loadStudentExamData(times[i].split(\":\")[0], localStorage.getItem(\"populatedExamCode\")); }\n\n        table.appendChild(document.createElement('br'));\n\n        var name = document.createElement('td');\n        name.style.paddingLeft = \"66px\";\n        var score = document.createElement('td');\n        var percentile = document.createElement('td');\n\n        name.innerHTML = times[i].split(\":\")[0];\n        score.innerHTML = times[i].split(\":\")[1] + \"%\";\n        percentile.innerHTML = getPercentile(times[i], times) + \"th\";\n\n        var time = document.createElement('td');\n        time.innerHTML = times[i].split(\":\")[2] + \" Mins\";\n        time.id = \"time\";\n\n        tr.appendChild(name);\n        tr.appendChild(score);\n        tr.appendChild(percentile);\n        tr.appendChild(time);\n        table.appendChild(tr);\n      }\n\n      document.getElementById('main').appendChild(table);\n    }\n    else if(func == \" Sort By Time (low-high)\") {\n      var times = mergeSortTime(testExamData);\n\n      var table = document.createElement('table');\n      table.id = \"random\";\n      table.className = \"table table-striped\";\n      table.style.width = \"100vw\";\n\n      var init = document.createElement('tr');\n      init.style.color = \"darkgray\";\n\n      var initName = document.createElement('td');\n      initName.innerHTML = \"Name\";\n      initName.style.paddingLeft = \"66px\";\n      initName.id = \"name\";\n\n      var initScore = document.createElement('td');\n      initScore.innerHTML = \"Score (%)\"\n      initScore.id = \"score\";\n\n      var initPercentile = document.createElement('td');\n      initPercentile.innerHTML = \"Percentile\";\n      initPercentile.id = \"percentile\";\n\n      var initTime = document.createElement('td');\n      initTime.innerHTML = \"Time\";\n      initTime.id = \"time\";\n\n      init.appendChild(initName);\n      init.appendChild(initScore);\n      init.appendChild(initPercentile);\n      init.appendChild(initTime);\n\n      table.appendChild(init);\n\n      for(var i = 0; i < times.length; i++){\n        var tr = document.createElement('tr');\n        tr.onclick = function() { loadStudentExamData(times[i].split(\":\")[0], localStorage.getItem(\"populatedExamCode\")); }\n\n        table.appendChild(document.createElement('br'));\n\n        var name = document.createElement('td');\n        name.style.paddingLeft = \"66px\";\n        var score = document.createElement('td');\n        var percentile = document.createElement('td');\n\n        name.innerHTML = times[i].split(\":\")[0];\n        score.innerHTML = times[i].split(\":\")[1] + \"%\";\n        percentile.innerHTML = getPercentile(times[i], times) + \"th\";\n\n        var time = document.createElement('td');\n        time.innerHTML = times[i].split(\":\")[2] + \" Mins\";\n        time.id = \"time\";\n\n        tr.appendChild(name);\n        tr.appendChild(score);\n        tr.appendChild(percentile);\n        tr.appendChild(time);\n        table.appendChild(tr);\n      }\n\n      document.getElementById('main').appendChild(table);\n    }\n  }\n}\n\n//implement merge sort\nfunction mergeSort (arr) {\n  if (arr.length === 1) {\n    // return once we hit an array with a single item\n    return arr\n  }\n\n  const middle = Math.floor(arr.length / 2) // get the middle item of the array rounded down\n  const left = arr.slice(0, middle) // items on the left side\n  const right = arr.slice(middle) // items on the right side\n\n  return merge(\n    mergeSort(left),\n    mergeSort(right)\n  )\n}\n\n// compare the arrays item by item and return the concatenated result\nfunction merge(left, right) {\n  let result = []\n  let indexLeft = 0\n  let indexRight = 0\n\n  while (indexLeft < left.length && indexRight < right.length) {\n    if (left[indexLeft].split(\":\")[1] < right[indexRight].split(\":\")[1]) {\n      result.push(left[indexLeft])\n      indexLeft++\n    } else {\n      result.push(right[indexRight])\n      indexRight++\n    }\n  }\n\n  return result.concat(left.slice(indexLeft)).concat(right.slice(indexRight))\n}\n\n//implement merge sort\nfunction mergeSortTime (arr) {\n  if (arr.length === 1) {\n    // return once we hit an array with a single item\n    return arr\n  }\n\n  const middle = Math.floor(arr.length / 2) // get the middle item of the array rounded down\n  const left = arr.slice(0, middle) // items on the left side\n  const right = arr.slice(middle) // items on the right side\n\n  return mergeTime(\n    mergeSortTime(left),\n    mergeSortTime(right)\n  )\n}\n\n// compare the arrays item by item and return the concatenated result\nfunction mergeTime(left, right) {\n  let result = []\n  let indexLeft = 0\n  let indexRight = 0\n\n  while (indexLeft < left.length && indexRight < right.length) {\n    if (left[indexLeft].split(\":\")[2] < right[indexRight].split(\":\")[2]) {\n      result.push(left[indexLeft])\n      indexLeft++\n    } else {\n      result.push(right[indexRight])\n      indexRight++\n    }\n  }\n\n  return result.concat(left.slice(indexLeft)).concat(right.slice(indexRight))\n}\n\n// search and parse through exams based on value\nfunction searchExams() {\n  var input, filter, ul, li, a, i, txtValue;\n\n  input = document.getElementById(\"exam-search\");\n  filter = input.value.toUpperCase();\n\n  ul = document.getElementById(\"exam-wrapper\");\n  li = ul.getElementsByClassName(\"examBox\");\n\n  for (i = 0; i < li.length; i++) {\n    a = li[i].getElementsByTagName(\"span\")[0];\n    txtValue = a.textContent || a.innerText;\n    if (txtValue.toUpperCase().indexOf(filter) > -1) {\n        li[i].style.display = \"\";\n    } else {\n        li[i].style.display = \"none\";\n    }\n  }\n}\n\n// create div based on name and avg\nfunction createExamBox(name, classAvg, ref, code) {\n  var gradients = [\n    \"linear-gradient( 135deg, #FEB692 10%, #EA5455 100%)\",\n    \"linear-gradient( 135deg, #72EDF2 10%, #5151E5 100%)\",\n    \"linear-gradient( 135deg, #ABDCFF 10%, #0396FF 100%)\"\n  ];\n\n  var wrapper = document.getElementById('exam-wrapper');\n  var optionVert = false;\n\n  var classBox = document.createElement('div');\n  classBox.className = \"examBox\";\n  classBox.style.background = \"white\";\n\n  classBox.onclick = function() {\n    displayExamData(name);\n    document.getElementById(\"this-exam\").innerHTML = name;\n  };\n\n  firebase.database().ref(ref).on('value', function(snapshot) {\n    for(var obj in snapshot.val()) {\n      if(snapshot.val()[obj].examCode == code && snapshot.val().responses == undefined) {\n        classBox.onclick = function() {\n          document.getElementById('create-exam').style.display = \"initial\";\n          document.getElementById('main').style.display = \"none\";\n          document.body.style.background = \"white\";\n\n          populateExam(code, ref);\n        };\n      }\n    }\n  });\n\n  var difBackground = document.createElement('div')\n  difBackground.style.background = gradients[Math.floor(Math.random()*(3) + 0)];\n  difBackground.style.borderRadius= \"10px 10px 0 0\";\n  difBackground.className = 'wave';\n\n  difBackground.onclick = function() {\n\n  }\n\n  var span = document.createElement('span');\n  if(name == \"\") {\n    name = code;\n  }\n\n  span.innerHTML = name;\n  span.style.marginLeft = \"40px\";\n  span.style.color = \"white\";\n  span.className = 'examName';\n\n  var option_vertical = document.createElement('span');\n  option_vertical.id = \"option_vertical\"\n  option_vertical.className = \"glyphicon glyphicon-option-vertical\";\n\n  option_vertical.onclick = function() {\n    classBox.onclick = function() {}\n\n    var modal = document.createElement('div');\n    modal.id = \"modal\";\n\n    var ul = document.createElement('ul');\n\n    var edit = document.createElement('li');\n    edit.className = \"options\";\n    edit.innerHTML = \"Edit Exam\";\n\n    edit.onclick = function() {\n      document.getElementById('create-exam').style.display = \"initial\";\n      document.getElementById('main').style.display = \"none\";\n      document.body.style.background = \"white\";\n\n      populateExam(code, ref);\n    }\n\n    var results = document.createElement('li');\n    results.className = \"options\";\n    results.innerHTML = \"View Results\";\n\n    results.onclick = function() {\n      displayExamData(name);\n      document.getElementById(\"this-exam\").innerHTML = name;\n    }\n\n    var deleteTest = document.createElement('li');\n    deleteTest.className = \"options\";\n    deleteTest.innerHTML = \"Delete Exam\";\n\n    deleteTest.onclick = function() {\n      deleteExam(code);\n    }\n\n    var displayInfo = document.createElement('li');\n    displayInfo.className = \"options\";\n    displayInfo.innerHTML = \"Display Exam Info\";\n\n\n    displayInfo.onclick = function() {\n      document.getElementById('main').style.display = \"none\";\n      document.getElementById('create-exam').style.display = \"none\";\n      document.getElementById('display').style.display = \"block\";\n      document.getElementById('display-code').innerHTML = code;\n      document.body.style.backgroundImage = \"none\";\n\n      var randomStr = Math.random().toString(36).substring(7);\n      setCorrectExamCode(code, \"Teachers/\" + userName + \"/Classes/\" + localStorage.getItem('createExamClass')+ \"/Exams/\", randomStr);\n\n      firebase.database().ref(\"Teachers/\" + userName + \"/Classes/\" + localStorage.getItem('createExamClass') + \"/Exams/\" + localStorage.getItem(randomStr) + \"/taken\").on('value', function(snapshot) {\n        $(\"#joined-students\").html(\"\");\n        snapshot.forEach(function(childSnapshot) {\n          var name = \"\";\n\n          firebase.database().ref(\"Teachers/\" + userName + \"/Classes/\" + localStorage.getItem('createExamClass') + \"/Students/\").once('value', function(s) {\n            s.forEach(function(cs) {\n              if(cs.val().split(\";\")[0] == childSnapshot.val()){\n                name = cs.val().split(\";\")[1];\n              }\n            })\n          });\n\n          setTimeout(function(){ createCurrentTakingBox(name); }, 55);\n        });\n      });\n    }\n\n    ul.appendChild(edit); ul.appendChild(document.createElement('hr')); ul.appendChild(results); ul.appendChild(document.createElement('hr')); ul.appendChild(deleteTest); ul.appendChild(document.createElement('hr')); ul.appendChild(displayInfo);\n\n    modal.appendChild(ul);\n\n    document.getElementById('html').appendChild(modal);\n    document.body.style.opacity = \"0\"\n    document.body.style.filter = \"blur(30px)\";\n    document.body.style.overflowY = \"hidden\";\n\n    window.onclick = function(event) {\n      if (event.target != option_vertical && event.target != modal && document.getElementById('modal')) {\n        modal.remove();\n        document.body.style.overflowY = \"auto\";\n        document.body.style.opacity = \"1\"\n        document.body.style.filter = \"blur(0px)\";\n      }\n    }\n\n    $(document).keyup(function(e) {\n       if (e.key === \"Escape\") {\n         modal.remove();\n         document.body.style.overflowY = \"auto\";\n         document.body.style.opacity = \"1\";\n         document.body.style.filter = \"blur(0px)\";\n       }\n    });\n\n    setTimeout(function(){\n      classBox.onclick = function() {\n        displayExamData(name);\n        document.getElementById(\"this-exam\").innerHTML = name;\n      }\n    }, 3000);\n  }\n\n  difBackground.appendChild(span);\n  difBackground.appendChild(option_vertical);\n  difBackground.appendChild(document.createElement('hr'));\n  classBox.appendChild(difBackground);\n\n  if(classAvg == 'NaN') {\n    var descriptor = document.createElement('span');\n    descriptor.innerHTML = \"No Responses!\";\n\n    var button = document.createElement('button');\n    button.style.border = \"none\";\n    button.style.borderRadius = \"5px\";\n    button.style.padding = \"10px\";\n    button.style.marginTop = \"10px\";\n    button.style.boxShadow = \"3px 5px lightgray\"\n    button.innerHTML = \"Display Exam Info\";\n\n    button.onmouseover = function() {\n      this.style.transform = \"translate(2px)\";\n    }\n\n    button.onmouseleave = function() {\n      this.style.transform = \"translate(0px)\";\n      this.style.transition = \"all .5s\";\n    }\n\n    button.onclick = function() {\n      classBox.onclick = function() {};\n\n      document.getElementById('main').style.display = \"none\";\n      document.getElementById('create-exam').style.display = \"none\";\n      document.getElementById('display').style.display = \"block\";\n      document.getElementById('display-code').innerHTML = code;\n      document.body.style.backgroundImage = \"none\";\n\n      var randomStr = Math.random().toString(36).substring(7);\n      setCorrectExamCode(code, \"Teachers/\" + userName + \"/Classes/\" + localStorage.getItem('createExamClass')+ \"/Exams/\", randomStr);\n\n      firebase.database().ref(\"Teachers/\" + userName + \"/Classes/\" + localStorage.getItem('createExamClass') + \"/Exams/\" + localStorage.getItem(randomStr) + \"/taken\").on('value', function(snapshot) {\n        $(\"#joined-students\").html(\"\");\n        snapshot.forEach(function(childSnapshot) {\n          var name = \"\";\n\n          firebase.database().ref(\"Teachers/\" + userName + \"/Classes/\" + localStorage.getItem('createExamClass') + \"/Students/\").once('value', function(s) {\n            s.forEach(function(cs) {\n              if(cs.val().split(\";\")[0] == childSnapshot.val()){\n                name = cs.val().split(\";\")[1];\n              }\n            })\n          });\n\n          setTimeout(function(){ createCurrentTakingBox(name); }, 55);\n        });\n      });\n    }\n\n    classBox.appendChild(descriptor);\n    classBox.appendChild(document.createElement('br'));\n    classBox.appendChild(button);\n  }\n\n  else {\n    var letter = document.createElement('span');\n    letter.innerHTML = getLetter(classAvg);\n    letter.style.color = \"#2e2f7d\";\n    letter.style.fontSize = \"90px\";\n\n    var descriptor = document.createElement('span');\n    descriptor.innerHTML = \"Class Average (\" + classAvg + \")\";\n\n    classBox.appendChild(letter);\n    classBox.appendChild(document.createElement('br'));\n    classBox.appendChild(descriptor);\n  }\n\n  wrapper.appendChild(classBox);\n  document.getElementById('main').appendChild(wrapper);\n}\n\nfunction setCorrectExamCode(code, ref, randomNum) {\n  firebase.database().ref(ref).once('value', function(snapshot) {\n    for(var v in snapshot.val()) {\n      if(v.substring(1) == code) {\n        localStorage.setItem(randomNum, v)\n      }\n    }\n  });\n}\n\n\n// create currentlyTaking box\nfunction createCurrentTakingBox(name) {\n  var currentlyTakingDiv = document.getElementById('joined-students');\n  var gradients = [\n    \"linear-gradient(135deg, #667eea 0%, #764ba2 100%)\",\n    \"linear-gradient(to top, #a3bded 0%, #6991c7 100%)\",\n    \"linear-gradient(60deg, #29323c 0%, #485563 100%)\",\n    \"linear-gradient(-60deg, #ff5858 0%, #f09819 100%)\",\n    \"linear-gradient(to top, #4481eb 0%, #04befe 100%)\",\n    \"linear-gradient(to right, #0acffe 0%, #495aff 100%)\",\n    \"linear-gradient(-225deg, #A445B2 0%, #D41872 52%, #FF0066 100%)\"\n  ];\n\n  var box = document.createElement('div');\n  box.id = 'currentlyTakingBox';\n  box.style.backgroundImage = gradients[Math.floor(Math.random()*gradients.length)];\n  box.innerHTML = name;\n\n  var center = document.createElement('center');\n  center.appendChild(box);\n\n  currentlyTakingDiv.appendChild(center);\n}\n\n//delete current exam\nfunction deleteExam(code) {\n  if(code == \"\"){\n    var code = document.getElementById('exam-code').innerHTML;\n  }\n  var modifiedCode = \"\";\n\n  swal({\n    title: \"Are you sure?\",\n    text: \"Once deleted, you will not be able to recover this exam or any of its response data!\",\n    icon: \"warning\",\n    buttons: true,\n    dangerMode: true,\n  })\n  .then((willDelete) => {\n    if (willDelete) {\n      var data = false;\n\n      firebase.database().ref(\"Teachers/\" + userName + \"/Classes/\" + localStorage.getItem('createExamClass') + \"/Exams/\").once('value').then(function(snapshot) {\n        snapshot.forEach(function(childSnapshot) {\n          if(childSnapshot.key.substring(1) == code) {\n            modifiedCode = childSnapshot.key;\n          }\n        });\n        firebase.database().ref('Teachers/' + userName + \"/Classes/\" + localStorage.getItem('className') + \"/Exams/\" + modifiedCode).remove();\n\n        var ref = (firebase.database().ref('Teachers/' + userName + \"/Classes/\" + localStorage.getItem('className') + \"/Exams/\"));\n        ref.once('value', function(snapshot) {\n          snapshot.forEach(function(childSnapshot) {\n            data = true;\n          });\n          if(!data) {\n            ref.push(\"no_exams\");\n          }\n        });\n      });\n\n      firebase.database().ref('exam-codes').on('value', function(snapshot) {\n        snapshot.forEach(function(childSnapshot) {\n          if(childSnapshot.val().split(\";\")[0] == code){\n            firebase.database().ref('exam-codes').child(childSnapshot.key).remove();\n          }\n        });\n      });\n\n      document.getElementById('create-exam').style.display = \"none\";\n      document.getElementById('main').style.display = \"initial\";\n      document.body.style.background = \"white\";\n\n      setTimeout(function(){\n        $(\"#exam-wrapper\").empty();\n        $(\"#exam\").empty();\n\n        loadClass(localStorage.getItem(\"className\"));\n\n        if(localStorage.getItem(\"CreatedExamCode\").toUpperCase() == code) {\n          localStorage.setItem(\"CreatedExamCode\", \"\");\n          document.getElementById('cached-exam-button').remove();\n        }\n\n        swal(\"Poof! Your exam has been deleted!\", {\n          icon: \"success\",\n        });\n    }, 100);\n\n    }\n  });\n}\n\n//function to restructure if question is deleted in the middle\nfunction restructureQuestions() {\n  var questions = document.getElementsByClassName('question');\n\n  for(var i = 0; i < questions.length; i++) {\n    var question = questions[i];\n\n    question.childNodes[0].innerHTML = i + 1 + \". \"\n    question.id = i + 1;\n  }\n}\n\n// function to restructure matching boxes\nfunction restructureBoxes() {\n  var boxes = document.getElementsByClassName('matchingbox');\n\n  for(var i = 0; i < boxes.length; i++) {\n    var box = questions[i];\n\n    box.childNodes[1].innerHTML = i + 1 + \". \"\n  }\n}\n\n//function to dynamically change type of question\nfunction changeQuestionType(val, i, prevVal) {\n  var plus = i + 1;\n  var plusDiv = document.getElementById(plus);\n\n  if(val != prevVal) {\n    for(var j = 0; j < plusDiv.childNodes.length; j++) {\n      if(plusDiv.childNodes[j].className == prevVal) {\n        plusDiv.childNodes[j].style.display = \"none\";\n      }\n    }\n\n    if(val == \"mc\") {\n      document.getElementsByClassName(\"mc\")[i].style.display = \"initial\";\n    }\n\n    else if(val == \"fr\") {\n      document.getElementsByClassName(\"mc\")[i].style.display = \"none\";\n      document.getElementById(plus).appendChild(createFreeResponse());\n    }\n    else if(val == \"tf\") {\n      document.getElementsByClassName(\"mc\")[i].style.display = \"none\";\n      document.getElementById(plus).appendChild(createTrueFalse());\n    }\n    else if(val == \"matching\") {\n      document.getElementsByClassName(\"mc\")[i].style.display = \"none\";\n      document.getElementById(plus).appendChild(createMatching());\n    }\n  }\n}\n\n// search LB\nfunction searchLeaderboard() {\n  var input, filter, ul, tr, a, i, txtValue;\n\n  input = document.getElementById(\"lb-search\");\n  tr = document.getElementById('leaderboard').getElementsByClassName(\"name\");\n\n  for (i = 0; i < tr.length; i++) {\n    if(tr[i].innerHTML == input.value) {\n      tr[i].style.border = \"1px solid black\";\n      tr[i].scrollIntoView({behavior: \"smooth\"});\n    }\n  }\n}\n\n// True | False\nfunction createTrueFalse() {\n  var label = document.createElement('label');\n  label.id = \"label\";\n  label.className = \"tf\";\n\n  var true_input = document.createElement('input');\n  true_input.style.outline = \"none\";\n  true_input.type = \"radio\";\n  true_input.className = \"option-input radio\";\n  true_input.name = \"tf\";\n\n  var false_input = document.createElement('input');\n  false_input.style.outline = \"none\";\n  false_input.type = \"radio\";\n  false_input.className = \"option-input radio\";\n  false_input.name = \"tf\";\n  false_input.style.marginLeft = \"10%\";\n\n  var true_span = document.createElement('span');\n  true_span.innerHTML = \" True\";\n  true_span.style.marginLeft = \"10px\";\n  true_span.style.color = \"gray\"\n  true_span.style.fontWeight = 'normal';\n\n  var false_span = document.createElement('span');\n  false_span.innerHTML = \" False\";\n  false_span.style.marginLeft = \"10px\";\n  false_span.style.color = \"gray\"\n  false_span.style.fontWeight = 'normal';\n\n  label.appendChild(true_input);\n  label.appendChild(true_span)\n\n  label.appendChild(false_input);\n  label.appendChild(false_span)\n\n  return label;\n}\n\n// function for Free-Response\nfunction createFreeResponse() {\n  var ta = document.createElement('textarea');\n  ta.readOnly = true;\n  ta.className = \"fr\";\n  ta.placeholder = \"NOTE: This question type requires manual grading\";\n\n  return ta;\n}\n\n\n// function to create matching boxes\nfunction createMatching(){\n  var matchingWrapper = document.createElement('div');\n  matchingWrapper.className = \"matching-wrapper\";\n\n  var matching = document.createElement('div');\n  matching.className = 'matching';\n\n  var hr = document.createElement('hr');\n  hr.style.width = '67%';\n\n  var questions = document.createElement('span');\n  questions.innerHTML = 'Questions';\n  questions.style.marginLeft = \"1.5vw\";\n\n  var results = document.createElement('span');\n  results.innerHTML = 'Results (Will Be Randomized)'\n  results.style.marginLeft = \"22.5vw\";\n\n  var numElements = document.createElement('input');\n  numElements.type = 'textbox';\n  numElements.placeholder = '# Of Elements...';\n  numElements.style.borderRadius = \"5px\";\n  numElements.style.padding = \"5px\";\n  numElements.style.border= \"1px solid black\";\n  numElements.style.fontSize = \"15px\";\n\n  numElements.onkeyup = function() {\n    $(matchingWrapper).empty();\n\n    if(this.value <= 20) {\n      for(var i = 0; i < this.value; i++) {\n        createMatchingElement(matchingWrapper, i + 1);\n      }\n    }\n    else {\n      this.value = \"\";\n\n      var alert = document.createElement('div');\n      alert.innerHTML = \"20 Elements Max!\"\n      alert.style.textAlign = \"center\";\n      alert.style.width = \"100%\";\n      alert.style.position = \"fixed\";\n      alert.style.zIndex = \"100000\";\n      alert.style.top = \"0\";\n      alert.className = \"alert alert-danger\";\n      alert.role = \"alert\";\n\n      document.getElementById('create-exam').appendChild(document.createElement('center').appendChild(alert));\n\n      setTimeout(function(){ document.getElementsByClassName('alert')[0].remove(); }, 2500);\n    }\n  }\n\n  var newBox = document.createElement('button');\n  newBox.id = \"newBox\";\n  newBox.innerHTML = \"New Element!\";\n\n  newBox.onclick = function() {\n    createMatchingElement(matchingWrapper, document.getElementsByClassName('matchingbox').length + 1);\n    saveExam(false);\n  }\n\n  matching.appendChild(numElements);\n  matching.appendChild(hr);\n  matching.appendChild(questions); matching.appendChild(results);\n  matching.appendChild(matchingWrapper);\n\n  matching.appendChild(document.createElement('br'));\n  matching.appendChild(newBox);\n\n  return matching;\n}\n\n// function to create matching Elements\nfunction createMatchingElement(div, i) {\n  var box = document.createElement('div');\n  box.className = 'matchingbox';\n\n  var labelTrash = document.createElement('span');\n  labelTrash.className = \"glyphicon glyphicon-minus\";\n  labelTrash.style.display = \"none\";\n  labelTrash.style.marginRight = \"5px\";\n  labelTrash.style.color = \"#f25555\";\n\n  $(labelTrash).click(function(){\n    this.parentNode.remove();\n    saveExam(false);\n    restructureBoxes();\n  });\n\n  $(box).hover(function(){\n    this.childNodes[0].style.display = \"initial\";\n  }, function(){\n    this.childNodes[0].style.display = \"none\";\n  });\n\n  $(labelTrash).hover(function(){\n    this.style.cursor=\"pointer\";\n    this.style.color = \"#f25555\";\n  }, function(){\n\n  });\n\n  box.appendChild(labelTrash)\n\n  var num = document.createElement('span');\n  num.innerHTML = i + \".\";\n  num.style.marginRight = \"10px\";\n  num.style.fontSize = \"15px\";\n\n  box.appendChild(num);\n\n  var input = document.createElement('input');\n  input.type = 'textbox';\n  input.style.marginTop = \"20px\";\n  input.style.textAlign = \"center\";\n  input.placeholder = \"1 + 1\";\n  input.id = 'result';\n\n  var arrow = document.createElement('span');\n  arrow.className = 'glyphicon glyphicon-arrow-right';\n  arrow.style.paddingLeft = '5vw';\n\n  var result_input = document.createElement('input');\n  result_input.type = 'textbox';\n  result_input.style.marginLeft = \"5vw\";\n  result_input.style.textAlign = \"center\";\n  result_input.placeholder = \"2\";\n  result_input.id = 'result';\n\n  box.appendChild(input);\n  box.appendChild(arrow);\n  box.appendChild(result_input);\n  div.appendChild(box);\n}\n\nfunction restructureManager() {\n  $('#question-manager').empty();\n\n  for(var i = 0; i < document.getElementsByClassName('question').length; i++) {\n    createQuestionTracker(i + 1, false);\n  }\n}\n\n// function to create HTML question\nfunction createQuestion(loading, numAnswerChoices) {\n  var exam = document.getElementById('exam');\n\n  var question = document.createElement('div');\n  question.className = \"question\";\n  question.id = document.getElementsByClassName('question').length + 1;\n\n  var num = document.createElement('span');\n  num.innerHTML = document.getElementsByClassName('question').length + 1 + \". \";\n  num.style.color = \"#97a5aa\";\n\n  var hr = document.createElement('hr');\n  var br = document.createElement('br');\n\n  var trash = document.createElement('span');\n  trash.className = \"glyphicon glyphicon-trash\";\n  trash.style.display = \"none\";\n  trash.style.marginRight = \"5px\";\n  trash.style.color = \"lightgray\";\n\n  $(trash).click(function(){\n    question.remove(); hr.remove(); br.remove();\n    restructureManager(); restructureQuestions(); saveExam();\n  });\n\n  $(trash).hover(function(){\n    trash.style.cursor=\"pointer\";\n    trash.style.color = \"black\";\n  }, function(){\n    trash.style.color = \"lightgray\";\n  });\n\n  var moveDiv = document.createElement('span');\n  moveDiv.id = \"moveDiv\"\n  moveDiv.className = \"glyphicon glyphicon-refresh\";\n  moveDiv.style.display = \"none\";\n  moveDiv.style.marginRight = \"5px\";\n\n  $(moveDiv).click(function(){\n    if(!swapDiv(this.parentNode, prompt(\"Which Question (#) Would You Like To Swap With?\"))){\n      swal(\"Failed!\", \"The Number You Provided Does Not Exist\", \"error\");\n    }\n    else {\n      saveExam(false);\n    }\n  });\n\n  var viewImage = document.createElement(\"a\");\n  viewImage.innerHTML = \"View Image\";\n  viewImage.style.marginLeft = \"10px\";\n  viewImage.style.display = \"none\";\n\n  var imgUpload = document.createElement('span');\n  imgUpload.className = \"glyphicon glyphicon-picture\";\n  imgUpload.style.display = \"none\";\n  imgUpload.style.marginRight = \"7px\";\n  imgUpload.style.color = \"lightgray\";\n\n  imgUpload.onclick =  function() {\n    uploadImage(num.innerHTML.substring(0, num.innerHTML.indexOf(\".\")), viewImage);\n  };\n\n  $(imgUpload).hover(function(){\n    imgUpload.style.cursor=\"pointer\";\n    imgUpload.style.color = \"black\";\n  }, function(){\n    imgUpload.style.color = \"lightgray\";\n  });\n\n  $(question).hover(function(){\n    num.style.display = \"none\";\n    trash.style.display = \"initial\";\n    moveDiv.style.display = \"initial\";\n    imgUpload.style.display = \"initial\";\n    num.style.cursor = \"pointer\";\n  }, function(){\n    num.style.display = \"initial\";\n    trash.style.display = \"none\";\n    imgUpload.style.display = \"none\";\n    moveDiv.style.display = \"none\";\n  });\n\n\n  var question_title = document.createElement('input');\n  question_title.type = \"text\";\n  question_title.placeholder = \"Ex: What's Your Name?\";\n  question_title.id = \"question-title\";\n\n  var question_type = document.createElement('select');\n    var mc = document.createElement('option'); mc.value = \"mc\"; mc.innerHTML = \"Multiple Choice\";\n    var fr = document.createElement('option'); fr.value = \"fr\"; fr.innerHTML = \"Free Response\";\n    var tf = document.createElement('option'); tf.value = \"tf\"; tf.innerHTML = \"True | False\";\n    // var matching = document.createElement('option'); matching.value = \"matching\"; matching.innerHTML = \"Matching\"\n\n  question_type.appendChild(mc); question_type.appendChild(fr); question_type.appendChild(tf); //question_type.appendChild(matching);\n  question_type.id = \"question-type\";\n\n  var previous;\n\n  $(question_type).on('focusin', function(){\n    previous = $(this).val();\n  });\n\n  question_type.onchange = function() {\n    changeQuestionType(this.children[this.selectedIndex].value, question.id - 1, previous);\n    question_type.blur();\n  }\n\n  question.appendChild(num);\n  question.appendChild(imgUpload);\n  question.appendChild(moveDiv);\n  question.appendChild(trash);\n  question.appendChild(question_title);\n  question.appendChild(question_type);\n\n  var points = document.createElement('div');\n  var span = document.createElement('span');\n  span.innerHTML = \"( \";\n\n  var numPoints = document.createElement('input');\n  numPoints.type = \"text\";\n  numPoints.id = \"numPoints\";\n  numPoints.className = \"numPoints\";\n  numPoints.placeholder = \"Ex: 4\";\n\n  var finishingSpan =  document.createElement('span');\n  finishingSpan.innerHTML = \" points)\";\n\n  points.appendChild(span); points.appendChild(numPoints); points.appendChild(finishingSpan);\n  points.appendChild(viewImage);\n\n  question.appendChild(points);\n\n\n  var answer_choices = document.createElement('div');\n  answer_choices.className = \"mc\";\n\n  for(var i = 0; i < numAnswerChoices; i++) {\n    var label = document.createElement('label');\n    label.id = \"label\";\n\n    var input = document.createElement('input');\n    input.style.outline = \"none\";\n    input.type = \"radio\";\n    input.className = \"option-input radio\";\n    input.name = num.innerHTML;\n\n    var answer_choice = document.createElement('input');\n    answer_choice.className = \"option\";\n    answer_choice.id = \"question-choice\";\n    answer_choice.type=\"text\";\n    answer_choice.placeholder = \" Answer Choice...\";\n\n    var labelTrash = document.createElement('span');\n    labelTrash.className = \"glyphicon glyphicon-minus\";\n    labelTrash.style.display = \"none\";\n    labelTrash.style.marginRight = \"5px\";\n    labelTrash.style.color = \"#f25555\";\n\n    $(labelTrash).click(function(){\n        this.parentNode.remove();\n        saveExam();\n    });\n    $(label).hover(function(){\n      this.childNodes[0].style.display = \"initial\";\n    }, function(){\n      this.childNodes[0].style.display = \"none\";\n    });\n\n    $(labelTrash).hover(function(){\n      this.style.cursor=\"pointer\";\n      this.style.color = \"#f25555\";\n    }, function(){});\n\n\n    label.appendChild(labelTrash)\n    label.appendChild(input);\n    label.appendChild(answer_choice);\n    answer_choices.appendChild(label);\n  }\n\n  var plus = document.createElement('span');\n  plus.className = \"glyphicon glyphicon-plus\";\n\n  var createNewAnswerChoice = document.createElement('a');\n  createNewAnswerChoice.id = \"createNewAnswerChoice\";\n  createNewAnswerChoice.clasName = \"newChoice\";\n  createNewAnswerChoice.href = \"javascript:createNewOptionChoice(\" +  num.innerHTML + \")\";\n  createNewAnswerChoice.appendChild(plus);\n  createNewAnswerChoice.innerHTML += ' New Answer Choice'\n\n  answer_choices.appendChild(createNewAnswerChoice);\n\n  question.appendChild(answer_choices);\n\n  exam.appendChild(question);\n\n  exam.appendChild(br);\n  exam.appendChild(hr);\n\n\n  if(!loading) {\n    window.scroll({ top: question.getBoundingClientRect().top + window.scrollY, behavior: 'smooth' });\n    createQuestionTracker(document.getElementsByClassName('question').length, false);\n    saveExam(false);\n  }\n}\n\n// upload images\nfunction uploadImage(num, imgLink) {\n  var alertDiv = document.createElement('div');\n  alertDiv.id = \"alertDiv\";\n\n  var header = document.createElement('h1');\n  header.style.textDecoration = \"underline dodgerblue\";\n  header.style.color = \"#1ece76\"\n  header.innerHTML = \"Upload Image To Question \" + num;\n  alertDiv.appendChild(header);\n\n  var imgInput = document.createElement('input');\n  imgInput.type = \"file\";\n  imgInput.style.border = \"1px solid dodgerblue\";\n  imgInput.style.padding = \"10px\";\n  imgInput.style.fontSize = \"10px\"\n  imgInput.style.borderRadius = \"5px\";\n\n  var center = document.createElement('center');\n  center.appendChild(imgInput)\n\n  alertDiv.appendChild(document.createElement('br'));\n  alertDiv.appendChild(center);\n  alertDiv.appendChild(document.createElement('hr'));\n\n  var imgOut = document.createElement('img');\n  imgOut.id = \"imgOut\"\n  alertDiv.appendChild(imgOut);\n\n  var shortDescription = document.createElement('input');\n  shortDescription.style.margin = \"20px\";\n  shortDescription.style.borderRadius = \"5px\";\n  shortDescription.style.border = \"1px solid black\";\n  shortDescription.placeholder = \"Short description...\"\n  shortDescription.style.width = \"90%\";\n  shortDescription.style.height = \"30px\";\n  shortDescription.style.padding = \"5px\";\n  shortDescription.style.fontSize = \"15px\";\n  alertDiv.appendChild(shortDescription)\n\n  var cancel = document.createElement('button');\n  cancel.id = \"imgUploadCancel\";\n  cancel.innerHTML = \"Cancel\";\n\n  cancel.onclick = function() {\n    document.body.style.opacity = \"1\"\n    document.body.style.filter = \"blur(0px)\";\n    document.body.style.overflowX = \"auto\";\n    document.body.style.overflowY = \"auto\";\n\n    alertDiv.remove()\n  }\n\n  var upload = document.createElement('button');\n  upload.id = \"imgUploadAccept\";\n  upload.innerHTML = \"Upload!\";\n\n  upload.onclick = function() {\n    if(imgOut.src != \"\") {\n      imgLink.style.display = \"initial\"\n      imgLink.onclick = function() {\n        swal({\n          icon: imgOut.src,\n          text: shortDescription.value,\n          className: \"imgView\"\n        });\n      }\n      imgLink.className = imgOut.src;\n\n      document.body.style.opacity = \"1\"\n      document.body.style.filter = \"blur(0px)\";\n      document.body.style.overflowX = \"auto\";\n      document.body.style.overflowY = \"auto\";\n\n      alertDiv.remove();\n      saveExam(shortDescription.value);\n    }\n  }\n\n  imgInput.onchange = function (evt) {\n    var tgt = evt.target || window.event.srcElement,\n        files = tgt.files;\n\n    // FileReader support\n    if (FileReader && files && files.length) {\n        var fr = new FileReader();\n        fr.onload = function () {\n            imgOut.src = fr.result;\n            imgOut.style.border = \"1px solid black\";\n            cancel.style.marginBottom = \"20px\";\n            upload.style.marginBottom = \"20px\";\n        }\n        fr.readAsDataURL(files[0]);\n    }\n  }\n\n  alertDiv.appendChild(upload);\n  alertDiv.appendChild(cancel);\n\n  document.getElementById('html').appendChild(alertDiv);\n\n  document.body.style.opacity = \"0.1\"\n  document.body.style.filter = \"blur(5px)\";\n  document.body.style.overflowX = \"hidden\";\n  document.body.style.overflowY = \"hidden\";\n}\n\n//function to swap divs\nfunction swapDiv(elem, numToSwap){\n  if(document.getElementById(numToSwap) == undefined) {\n    return false;\n  }\n  else {\n    var div1 = jQuery(elem);\n  \tvar div2 = jQuery(document.getElementById(numToSwap));\n\n  \tvar tdiv1 = div1.clone();\n  \tvar tdiv2 = div2.clone();\n\n\t\tdiv1.replaceWith(tdiv2);\n\t\tdiv2.replaceWith(tdiv1);\n\n    restructureQuestions();\n    return true;\n  }\n}\n\n// append new answer choice to question based on num\nfunction createNewOptionChoice(num) {\n  var val = document.getElementById(num).childNodes[7];\n  val.childNodes[val.childNodes.length - 1].remove();\n\n  var label = document.createElement('label');\n  label.id = \"label\";\n\n  var input = document.createElement('input');\n  input.style.outline = \"none\";\n  input.type = \"radio\";\n  input.className = \"option-input radio\";\n  input.name = \"radio\";\n\n  var answer_choice = document.createElement('input');\n  answer_choice.className = \"option\";\n  answer_choice.id = \"question-choice\";\n  answer_choice.type=\"text\";\n  answer_choice.placeholder = \" Answer Choice...\";\n\n  var answer_choice = document.createElement('input');\n  answer_choice.className = \"option\";\n  answer_choice.id = \"question-choice\";\n  answer_choice.type=\"text\";\n  answer_choice.placeholder = \" Answer Choice...\";\n\n  var labelTrash = document.createElement('span');\n  labelTrash.className = \"glyphicon glyphicon-minus\";\n  labelTrash.style.display = \"none\";\n  labelTrash.style.marginRight = \"5px\";\n  labelTrash.style.color = \"#f25555\";\n\n  $(labelTrash).click(function(){\n      this.parentNode.remove();\n      saveExam();\n  });\n\n  $(label).hover(function(){\n    this.childNodes[0].style.display = \"initial\";\n  }, function(){\n    this.childNodes[0].style.display = \"none\";\n  });\n\n  $(labelTrash).hover(function(){\n    this.style.cursor=\"pointer\";\n    this.style.color = \"#f25555\";\n  }, function(){\n\n  });\n\n  label.appendChild(labelTrash);\n  label.appendChild(input);\n  label.appendChild(answer_choice);\n  val.appendChild(label);\n\n  var plus = document.createElement('span');\n  plus.className = \"glyphicon glyphicon-plus\";\n\n  var createNewAnswerChoice = document.createElement('a');\n  createNewAnswerChoice.id = \"createNewAnswerChoice\";\n  createNewAnswerChoice.href = \"javascript:createNewOptionChoice(\" +  num + \")\";\n  createNewAnswerChoice.clasName = \"newChoice\";\n  createNewAnswerChoice.appendChild(plus);\n  createNewAnswerChoice.innerHTML += ' New Answer Choice';\n\n  val.appendChild(createNewAnswerChoice);\n  saveExam(false);\n}\n\n// return letter grade based on avg\nfunction getLetter(avg) {\n  if(avg >= 90.0) {\n    return \"A\";\n  }\n  else if(avg < 90.0 && avg >= 80.0) {\n    return \"B\";\n  }\n  else if(avg < 80.0 && avg >= 70.0) {\n    return \"C\";\n  }\n  else if(avg < 70.0 && avg >= 60.0) {\n    return \"D\";\n  }\n  else {\n    return \"F\";\n  }\n\n}\n\n// create div box for every class\nfunction createClassBox(className, numStudentsInClass, numExamsInClass) {\n  var wrapper = document.getElementById('wrapper');\n\n  var classBox = document.createElement('div');\n  classBox.onclick = function() {\n    localStorage.setItem('className', className);\n    loadClass(className, numExamsInClass);\n  };\n\n  classBox.className = \"classBox\";\n\n  var span = document.createElement('span');\n  span.innerHTML = className;\n  span.className = 'className';\n\n  classBox.appendChild(span);\n  classBox.appendChild(document.createElement('hr'));\n\n  var numStudents = document.createElement('p');\n\n  var lowKey = document.createElement('h6');\n  lowKey.innerHTML = \"Students\";\n  lowKey.id=\"lowKey\";\n\n  numStudents.innerHTML = numStudentsInClass;\n  numStudents.appendChild(lowKey);\n\n  numStudents.id = \"numStudents\";\n  classBox.appendChild(numStudents);\n\n  var hrInBetween = document.createElement('hr');\n  hrInBetween.id = \"hrInBetween\";\n  classBox.appendChild(hrInBetween);\n\n  var numExams = document.createElement('p');\n\n  lowKey = document.createElement('h6');\n  lowKey.innerHTML = \"Exams\";\n  lowKey.id = \"lowKey\";\n  numExams.innerHTML = numExamsInClass;\n  numExams.appendChild(lowKey);\n\n  numExams.id=\"numExams\";\n  classBox.appendChild(numExams);\n\n  wrapper.appendChild(classBox);\n  document.getElementById('main').appendChild(wrapper);\n}\n\n//populate main dashboard of page when page loads\nfunction populateDashboard() {\n  if(!userDataHasLoaded) {\n    var ref = firebase.database().ref('Teachers');\n    var counter = 0;\n    var exists = false;\n\n    ref.once('value', function(snapshot) {\n      snapshot.forEach(function(childSnapshot) {\n        if(childSnapshot.key == userName) {\n          exists = true;\n          arr.push(childSnapshot.child(\"Classes\").val());\n\n          for (var key in arr) {\n            var x = 0;\n            // skip loop if the property is from prototype\n            if (!arr.hasOwnProperty(key)) continue;\n            var obj = arr[key];\n            for (var prop in obj) {\n              // skip loop if the property is from prototype\n              if(!obj.hasOwnProperty(prop)) continue;\n\n              if(obj[prop].Exams[Object.keys(obj[prop].Exams)[0]] == \"no_exams\") {\n                createClassBox(prop, Object.keys(obj[prop].Students).length, 0);\n              }\n\n              else {\n                createClassBox(prop, Object.keys(obj[prop].Students).length, Object.keys(obj[prop].Exams).length);\n              }\n            }\n          }\n        }\n      });\n      if(!exists) {\n        document.getElementById('doesNotExist').style.display = \"initial\";\n      }\n    });\n  }\n\n  userDataHasLoaded = true;\n}\n"]}