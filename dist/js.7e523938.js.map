{"version":3,"sources":["assets/js/index.js"],"names":["examCodes","students","done","stopEnter","canCount","canChangeCircle","key","initKey","timer","originalOrder","onSignIn","googleUser","document","URL","indexOf","window","location","profile","getBasicProfile","sessionStorage","setItem","JSON","stringify","getId","getName","getImageUrl","getEmail","href","substring","signOut","gapi","auth2","getAuthInstance","then","removeItem","finalString","i","arr","sort","Math","random","j","length","replace","removeAllActive","getElementsByTagName","className","removeDropDown","x","matches","getElementById","style","display","getElementsByClassName","leaverCount","onfullscreenchange","event","timerInterval","fullscreenElement","Swal","fire","title","html","confirmButtonText","cancelButtonText","showCancelButton","showConfirmButton","allowEscapeKey","allowEnterKey","onBeforeOpen","setInterval","getContent","querySelector","textContent","getTimerLeft","onClose","clearInterval","result","value","endTest","toggleFullScreen","dismiss","DismissReason","firebase","database","ref","on","snapshot","forEach","childSnapshot","code","CryptoJS","AES","encrypt","val","push","onload","$","isNaN","parseInt","parentNode","id","setTimeout","innerHTML","getItem","swal","reload","today","Date","getSeconds","getHours","getMinutes","scroll","elem","docViewTop","scrollTop","docViewBottom","height","elemTop","offset","top","isInView","bottom","transition","text","childNodes","appendChild","color","right","undefined","onclick","matchMedia","body","background","populateLeaderboard","searchLeaderboard","input","tr","border","scrollIntoView","behavior","getStudent","low","mid","high","mergeSort","floor","split","middle","left","slice","merge","indexLeft","indexRight","concat","submitExamCode","toUpperCase","data","findCode","test","getCodeLetter","teacher","once","exam","Exams","console","log","retrieveName","taken","decryptedBytes","decrypt","plaintext","toString","enc","Utf8","exists","displayQuiz","overflow","populateExam","onblur","examCode","examTotalMins","examDate","examTeacher","dateJS","getMonth","getDate","getFullYear","examDescription","examTitle","examTotalPoints","empty","Object","keys","questions","localQuestions","question","createQuestion","choices","createQuestionTracker","points","imgSrc","src","icon","imgShortDescription","changeQuestionType","type","multiple","changeNames","span","createElement","fontSize","paddingLeft","numBoxes","createMatchingElement","localBoxes","k","questionsArr","shuffle","Array","prototype","call","remove","m","restructureQuestions","name","array","currentIndex","temporaryValue","randomIndex","createFreeResponse","createTrueFalse","createMatching","label","true_input","outline","false_input","marginLeft","true_span","fontWeight","false_span","ta","oninput","placeholder","matchingWrapper","matching","hr","width","results","numElements","borderRadius","padding","onkeyup","alert","textAlign","position","zIndex","role","newBox","saveExam","div","box","labelTrash","marginRight","click","restructureBoxes","hover","cursor","num","marginTop","arrow","result_input","loading","numAnswerChoices","dataset","original","br","question_title","readOnly","viewImage","numPoints","finishingSpan","answer_choices","answer_choice","onmouseup","checked","button","getBoundingClientRect","scrollY","populating","manager","finalDiv","tracker","navigator","userAgent","toLowerCase","vendor","block","center","clientHeight","exitFullscreen","addEventListener","preventDefault","documentElement","requestFullscreen","getChecked","bubbleSort","temp","submitExam","student_answers","sortedArray","displayResults","answers","dbAnswers","parse","toJSON","total","frTotalPoints","answer","fr","tf","createCorrectBox","createIncorrectBox","createFrBox","studentExamData","toFixed","min","score","dataDiv","float","pointsAwarded","paddingRight","addListener","e","keyCode"],"mappings":"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","file":"js.7e523938.js","sourceRoot":"..","sourcesContent":["var examCodes = [], students = [], done = [];\nvar stopEnter = false, canCount = false, canChangeCircle = true;\nvar key = initKey(); var timer = 0; var originalOrder = [];\n\n(function() {\n    // Expose to global\n    var leaverCount = 0;\n\n    //code to call when document leaves full screen\n    document.onfullscreenchange = function ( event ) {\n      if(document.fullscreenElement == null) {\n        let timerInterval;\n        if(leaverCount <= 5) {\n            Swal.fire({\n              title: 'Are You Sure You Want To Leave?',\n              html: 'You have <strong></strong> seconds to go back to your test or the test ends and your score is recorded! You can open this dialog <span></span> more times',\n              confirmButtonText: 'Yes, end it!',\n              cancelButtonText: 'No, Go Back!',\n              showCancelButton: true,\n              showConfirmButton: true,\n              allowEscapeKey: false,\n              allowEnterKey: false,\n              timer: 10000,\n              onBeforeOpen: () => {\n                timerInterval = setInterval(() => {\n                  Swal.getContent().querySelector('strong').textContent = Swal.getTimerLeft() / 1000;\n                }, 100)\n                Swal.getContent().querySelector('span').textContent = 4 - leaverCount;\n              },\n              onClose: () => {\n                clearInterval(timerInterval)\n              }\n              }).then((result) => {\n                if (!result.value) {\n                  toggleFullScreen();\n\n                  leaverCount++;\n                }\n                else if(result.value) {\n                  endTest();\n                }\n                if (result.dismiss === Swal.DismissReason.timer) {\n                  endTest();\n                }\n            });\n          }\n          else{\n            endTest();\n          }\n      };\n    }\n\n})();\n\n// var data;\n// \t$.ajax({\n// \t  type: \"GET\",\n// \t  url: \"data.csv\",\n// \t  dataType: \"text\",\n// \t  success: function(response)\n// \t  {\n//   \t\tdata = $.csv.toArrays(response);\n//       for(var i = 0; i < data.length; i++){\n//         var id = data[i][0];\n//         var name = data[i][3] + \" \" + data[i][2];\n//         var className = data[i][10];\n//\n//         // firebase.database().ref(\"Teachers/Zakariya Sattar/Classes/\" + className + \"/Students\").push(id + \";\" + name);\n//\n//         var json = {\n//           answers: [\"0:\" + Math.floor(1 + Math.random()*(3)), \"1:\" + Math.floor(0 + Math.random()*(2))],\n//           name: name,\n//           score: Math.floor((Math.random() * 25) + 75),\n//           time: 5,\n//           totalScore: Math.floor((Math.random() * 5) + 15)\n//         }\n//\n//         firebase.database().ref(\"Teachers/Zakariya Sattar/Classes/Advance App Development/Exams/XNXOYB/responses/\" + name).push(json);\n//       }\n// \t  }\n// });\n\n// pull all exam codes then encrypt them\nfirebase.database().ref('exam-codes').on('value', function(snapshot) {\n  snapshot.forEach(function(childSnapshot) {\n    var code = CryptoJS.AES.encrypt(childSnapshot.val(), key);\n    examCodes.push(code);\n  });\n});\n\n// pull all students then encrypt them\nfirebase.database().ref('Students').on('value', function(snapshot) {\n  snapshot.forEach(function(childSnapshot) {\n    // no need for encryption because no active storage\n    students.push(childSnapshot.val());\n  });\n});\n\n// code to run when google user signs in\nfunction onSignIn(googleUser) {\n  if(document.URL.indexOf(\"?\") == -1){\n    window.location = \"teacher.html\";\n\n    var profile = googleUser.getBasicProfile();\n    sessionStorage.setItem(\"userInfo\", JSON.stringify([profile.getId(), profile.getName(), profile.getImageUrl(), profile.getEmail()]));\n  }\n  else {\n    window.location.href = document.URL.substring(0, document.URL.indexOf(\"?\"));\n    sessionStorage.setItem(\"userInfo\", \"\");\n    signOut();\n  }\n}\n\n// request signout\nfunction signOut() {\n  var auth2 = gapi.auth2.getAuthInstance();\n  auth2.signOut().then(function () {\n    sessionStorage.removeItem('userInfo');\n  });\n}\n\n// for displayQuiz()\nwindow.onload = function() {\n  $(\"#create-exam\").on('change', \"input:radio\", function() {\n    if(!isNaN(parseInt(this.parentNode.parentNode.parentNode.id) - 1)) {  //MC\n      done[parseInt(this.parentNode.parentNode.parentNode.id) - 1] = 1;\n    }\n    else {  //\n      done[parseInt(this.parentNode.parentNode.id) - 1] = 1;\n    }\n\n    if(done.indexOf(0) == -1) {\n      document.getElementById('submit-exam').style.display = 'initial';\n      document.getElementById('submit-exam-disabled').style.display = \"none\";\n    }\n  });\n\n  setTimeout(function(){ document.getElementById('timeLeftInExam').innerHTML = sessionStorage.getItem(\"timeLimit\") + \" minutes\";  }, 1500);\n\n  setInterval(function(){\n    if(canCount) {\n      if(timer == (sessionStorage.getItem(\"timeLimit\") - 5)) {\n        swal(\"Timer Warning\", \"5 minutes remaining in this exam\", \"info\");\n      }\n      if(timer <= sessionStorage.getItem(\"timeLimit\")) {\n        timer++;\n        document.getElementById('timeLeftInExam').innerHTML = sessionStorage.getItem(\"timeLimit\") - timer + \" minutes\";\n      }\n      else { // if timer runs out\n        window.location.reload();\n      }\n    }\n  }, 60000);\n\n  setInterval(function(){\n    var today = new Date();\n    if(today.getSeconds() < 10) {\n      document.getElementById(\"currTime\").innerHTML = (today.getHours() % 12 || 12) + \":\" + today.getMinutes() + \":0\" + today.getSeconds();\n    }\n    else {\n      document.getElementById(\"currTime\").innerHTML = (today.getHours() % 12 || 12) + \":\" + today.getMinutes() + \":\" + today.getSeconds();\n    }\n\n  }, 1000)\n\n  $(window).scroll(function(){\n    for(var i = 1; i <= document.getElementsByClassName('question').length; i++) {\n      var elem = document.getElementById(i);\n      var docViewTop = $(window).scrollTop();\n      var docViewBottom = docViewTop + $(window).height();\n\n      var elemTop = $(elem).offset().top;\n      var elemBottom = elemTop + $(elem).height();\n\n      var isInView = ((elemBottom <= docViewBottom) && (elemTop >= docViewTop));\n\n      if (isInView){\n        document.getElementsByClassName(i)[0].style.bottom = '25px';\n        document.getElementsByClassName(i)[0].style.transition = 'all .5s';\n\n        var text = document.getElementsByClassName(i)[0].childNodes[1];\n        document.getElementsByClassName(i)[0].innerHTML = \"&#x25CF;\"\n        document.getElementsByClassName(i)[0].appendChild(text);\n        document.getElementsByClassName(i)[0].childNodes[1].style.color = \"white\";\n        document.getElementsByClassName(i)[0].childNodes[1].style.right = \"22.5px\";\n\n        setTimeout(function(){\n          if(document.getElementsByClassName(i)[0] != undefined) {\n            document.getElementsByClassName(i)[0].style.bottom = '20px';\n            document.getElementsByClassName(i)[0].style.transition = 'all .5s';\n          }\n        }, 3000);\n\n      }\n      else {\n        if(canChangeCircle) {\n          document.getElementsByClassName(i)[0].style.bottom = '20px';\n          document.getElementsByClassName(i)[0].style.transition = 'all .5s';\n\n          var text = document.getElementsByClassName(i)[0].childNodes[1];\n          document.getElementsByClassName(i)[0].innerHTML = \"&#x25CC;\"\n          document.getElementsByClassName(i)[0].appendChild(text);\n          document.getElementsByClassName(i)[0].childNodes[1].style.color = \"black\";\n          document.getElementsByClassName(i)[0].childNodes[1].style.right = \"22.5px\";\n        }\n      }\n    }\n  });\n};\n\n//initialize key with random val\nfunction initKey() {\n  var finalString;\n  var i, arr = [];\n  for (i = 0; i < 25; i++) {\n      arr[i] = i + 1;\n  }\n  arr.sort(function () {\n      return Math.random() - 0.25;\n  });\n\n  for(var j = 0; j < arr.length; j++) {\n    finalString = arr[j] + finalString + \"\";\n  }\n  return finalString.replace('NaN', '');\n}\n\n//function to remove all class='active'\nfunction removeAllActive() {\n  document.getElementsByTagName(\"LI\")[0].className = \"\";\n  document.getElementsByTagName(\"LI\")[1].className = \"\";\n  document.getElementsByTagName(\"LI\")[2].className = \"\";\n}\n\ndocument.getElementById(\"nav-toggle\").onclick = function() {\n  if(document.getElementById('nav-menu').style.display == \"initial\"){\n    document.getElementById('nav-menu').style.display = \"none\";\n  }\n  else {\n    document.getElementById('nav-menu').style.display = \"initial\";\n  }\n}\n\n// remove dropdown if screen size can handle navbar\nfunction removeDropDown(x) {\n if (x.matches) { // If media query matches\n   document.getElementById('dropdown').style.display = \"none\";\n\n   for(var i = 0; i < document.getElementsByClassName('navB').length; i++) {\n     document.getElementsByClassName('navB')[i].style.display = \"initial\";\n   }\n }\n else {\n   document.getElementById('dropdown').style.display = \"initial\";\n   for(var i = 0; i < document.getElementsByClassName('navB').length; i++) {\n     document.getElementsByClassName('navB')[i].style.display = \"none\";\n   }\n }\n}\n\nvar x = window.matchMedia(\"(min-width: 730px)\")\nremoveDropDown(x) // Call listener function at run time\nx.addListener(removeDropDown) // Attach listener function on state changes\n\n\n//function to switch displays based on what user clicks\nfunction display(title) {\n  if(title == '<a href=\"#\">Ping-Pong</a>') {\n    document.getElementById('main').style.display = \"none\";\n    document.getElementById('pong').style.display = \"initial\";\n    document.getElementById('leaderboard').style.display = \"none\";\n  }\n  else if(title == '<a href=\"#\">Home</a>') {\n    document.getElementById('main').style.display = \"initial\";\n    document.getElementById('pong').style.display = \"none\";\n    document.getElementById('leaderboard').style.display = \"none\";\n    document.body.style.background = '#1b1b1d';\n  }\n  else if(title == '<a href=\"#\">Leaderboard</a>') {\n    document.getElementById('main').style.display = \"none\";\n    document.getElementById('pong').style.display = \"none\";\n    document.getElementById('leaderboard').style.display = \"initial\";\n    document.body.style.background = 'white';\n    populateLeaderboard();\n  }\n  document.getElementById('nav-menu').style.display = \"none\";\n}\n\n// search LB\nfunction searchLeaderboard() {\n  var input, filter, ul, tr, a, i, txtValue;\n\n  input = document.getElementById(\"lb-search\");\n  tr = document.getElementById('leaderboard').getElementsByClassName(\"name\");\n\n  for (i = 0; i < tr.length; i++) {\n    if(tr[i].innerHTML == input.value) {\n      tr[i].style.border = \"1px solid black\";\n      tr[i].scrollIntoView({behavior: \"smooth\"});\n    }\n  }\n}\n\nfunction getStudent(id) {\n  students = mergeSort(students);\n  //binary search for finding ID pos\n  var low  = 0 , high = students.length -1 ,mid ;\n  while (low <= high){\n      mid = Math.floor((low+high)/2);\n      if(students[mid].split(\";\")[0]==id) return students[mid];\n      else if (students[mid].split(\";\")[0]<id) low = mid+1;\n      else high = mid-1;\n  }\n  return -1 ;\n}\n\n//implement merge sort\nfunction mergeSort (arr) {\n  if (arr.length === 1) {\n    // return once we hit an array with a single item\n    return arr\n  }\n\n  const middle = Math.floor(arr.length / 2) // get the middle item of the array rounded down\n  const left = arr.slice(0, middle) // items on the left side\n  const right = arr.slice(middle) // items on the right side\n\n  return merge(\n    mergeSort(left),\n    mergeSort(right)\n  )\n}\n\n// compare the arrays item by item and return the concatenated result\nfunction merge (left, right) {\n  let result = []\n  let indexLeft = 0\n  let indexRight = 0\n\n  while (indexLeft < left.length && indexRight < right.length) {\n    if (left[indexLeft].split(\";\")[0] < right[indexRight].split(\";\")[0]) {\n      result.push(left[indexLeft])\n      indexLeft++\n    } else {\n      result.push(right[indexRight])\n      indexRight++\n    }\n  }\n\n  return result.concat(left.slice(indexLeft)).concat(right.slice(indexRight))\n}\n\n// function to retieve and analyze code\nfunction submitExamCode() {\n  var code = document.getElementById('inputExamCode').value.toUpperCase();\n  var data = findCode(code);\n\n  if(code.length == 5 && (!/[~!#$%\\^&*+=\\-\\[\\]\\\\';,/{}|\\\\\":<>\\?]/g.test(code)) ) {\n    document.getElementById('exam-info').innerHTML = \"\";\n    if(data == null) {\n      swal(\"Invalid exam code!\", \"Check for special characters and make sure the length is at least 5\", \"error\");\n    }\n\n    else if(data.split(\";\")[0] == code) {\n      sessionStorage.setItem(\"teacher\", data.split(\";\")[1]);\n      document.getElementById('exam-info').innerHTML = data.split(\";\")[3] + \" | \" + data.split(\";\")[2];\n      document.getElementById('id-input').style.display = 'initial';\n\n      getCodeLetter(code, data.split(\";\")[1], data.split(\";\")[2])\n      stopEnter = true;\n    }\n  }\n}\n\nfunction getCodeLetter(code, teacher, className) {\n  firebase.database().ref(\"Teachers/\" + teacher + \"/Classes/\" + className).once('value', function(snapshot) {\n    for(exam in snapshot.val().Exams) {\n      console.log(exam)\n      if(exam.substring(1) == code) {\n        sessionStorage.setItem('ExamCode', exam);\n      }\n    }\n  });\n}\n\nfunction retrieveName() {\n  var taken = false;\n  var id = document.getElementsByClassName(\"ID\")[0].value;\n\n  if(id.length == 5){\n    var i = 0;\n    for(var x = 0; x < examCodes.length; x++){\n      var decryptedBytes = CryptoJS.AES.decrypt(examCodes[x], key);\n      var plaintext = decryptedBytes.toString(CryptoJS.enc.Utf8);\n\n      if(plaintext.split(\";\")[0] == sessionStorage.getItem('ExamCode').substring(1)){\n        i = x;\n        break;\n      }\n    }\n\n    var teacher = CryptoJS.AES.decrypt(examCodes[i], key);\n    var plaintext = decryptedBytes.toString(CryptoJS.enc.Utf8);\n\n    document.getElementById('userName').innerHTML = \"\";\n\n    firebase.database().ref(\"Teachers/\" + plaintext.split(\";\")[1] + \"/Classes/\" + plaintext.split(\";\")[2] + \"/Exams/\" + sessionStorage.getItem(\"ExamCode\") + \"/taken\").once('value', function(snapshot) {\n      snapshot.forEach(function(childSnapshot) {\n        if(childSnapshot.val() == id) {\n          taken = true;\n        }\n      });\n      if(!taken || taken) {\n        document.getElementById('userName').style.color = \"black\";\n        sessionStorage.setItem('idNum', id);\n        firebase.database().ref(\"Teachers/\" + plaintext.split(\";\")[1] + \"/Classes/\" + plaintext.split(\";\")[2] + \"/Students\").once('value', function(snapshot) {\n          snapshot.forEach(function(childSnapshot) {\n            if(childSnapshot.val().split(\";\")[0] == id) {\n              document.getElementById('userName').innerHTML = childSnapshot.val().split(\";\")[1];\n              document.getElementById('proceed').style.display = \"initial\";\n              document.getElementById('recognition').style.bottom = \"-10px\";\n            }\n          });\n        });\n\n        if(document.getElementById('userName').innerHTML == \"\") {\n          document.getElementById('userName').innerHTML = \"Not Found!\"\n        }\n      }\n\n      else {\n        document.getElementById('userName').innerHTML = \"You Have Taken This Exam Already!\";\n        document.getElementById('userName').style.color = \"red\";\n      }\n    });\n  }\n}\n\n//function to make sure exam code is valid\nfunction findCode(code) {\n  var exists = false;\n  var data = \"\";\n\n  for(var x = 0; x < examCodes.length; x++){\n    var decryptedBytes = CryptoJS.AES.decrypt(examCodes[x], key);\n    var plaintext = decryptedBytes.toString(CryptoJS.enc.Utf8);\n\n    if(plaintext.split(\";\")[0] == code){\n      return plaintext;\n    }\n  }\n\n  return null;\n}\n\n// function to display quiz to student\nfunction displayQuiz() {\n  var code = sessionStorage.getItem(\"ExamCode\");\n  var teacher = sessionStorage.getItem(\"teacher\");\n\n  sessionStorage.setItem(\"StudentName\", document.getElementById('userName').innerHTML);\n  var i = 0;\n\n  for(var x = 0; x < examCodes.length; x++){\n    var decryptedBytes = CryptoJS.AES.decrypt(examCodes[x], key);\n    var plaintext = decryptedBytes.toString(CryptoJS.enc.Utf8);\n    if(plaintext.split(\";\")[0] == code.substring(1) && plaintext.split(\";\")[1] == teacher){\n      i = x;\n      break;\n    }\n  }\n\n  var teacher = CryptoJS.AES.decrypt(examCodes[i], key);\n  var plaintext = decryptedBytes.toString(CryptoJS.enc.Utf8);\n\n  sessionStorage.setItem(\"className\", plaintext.split(\";\")[2]);\n\n  document.getElementById('main').style.display = \"none\";\n  document.getElementById('navigation').style.display = \"none\";\n  document.getElementById('display-exam').style.display = \"initial\";\n\n  document.body.style.background = \"white\";\n  document.body.style.overflow = \"scroll\";\n  populateExam(code, firebase.database().ref(\"Teachers/\" + plaintext.split(\";\")[1] + \"/Classes/\" + plaintext.split(\";\")[2] + \"/Exams/\" + code));\n  // toggleFullScreen();\n\n\n  // listen for alt+tab changes and act upon them\n  window.onblur = function() {\n    toggleFullScreen();\n  }\n\n  canCount = true;\n\n  firebase.database().ref(\"Teachers/\" + sessionStorage.getItem('teacher') + \"/Classes/\" + sessionStorage.getItem('className') + \"/Exams/\" + sessionStorage.getItem(\"ExamCode\")).once('value').then(function(snapshot) {\n    snapshot.forEach(function(childSnapshot) {\n      if(childSnapshot.val().examCode != undefined) {\n        sessionStorage.setItem(\"timeLimit\", childSnapshot.val().examTotalMins);\n      }\n    });\n  });\n\n  firebase.database().ref(\"Teachers/\" + sessionStorage.getItem('teacher') + \"/Classes/\" + sessionStorage.getItem('className') + \"/Exams/\" + sessionStorage.getItem(\"ExamCode\") + \"/taken\").push(sessionStorage.getItem('idNum'));\n}\n\n//pull and populate exam\nfunction populateExam(code, ref) {\n  firebase.database().ref(ref).once('value').then(function(snapshot) {\n    snapshot.forEach(function(childSnapshot) {\n      var val = childSnapshot.val();\n\n      if(val.examCode != undefined){\n        var counter = 0;\n\n        document.getElementById('exam-code').innerHTML = val.examCode + \" | \" + sessionStorage.getItem(\"StudentName\");\n\n        if(val.examDate.split(\"-\")[1] != null) {\n          document.getElementById('date').innerHTML = val.examTeacher + \" | \" + val.examDate.split(\"-\")[1] + \"-\" + val.examDate.split(\"-\")[2] + \"-\" + val.examDate.split(\"-\")[0];\n        }\n        else {\n          var dateJS = new Date();\n          document.getElementById('date').innerHTML = val.examTeacher + \" | \" + (dateJS.getMonth()+1)+'-'+dateJS.getDate()+'-'+dateJS.getFullYear();\n        }\n\n        document.getElementById('description').value = val.examDescription;\n\n        var title = val.examTitle;\n        if(title == \"\") {\n          title = \"Untitled\";\n        }\n        document.getElementById('nameOfExam').innerHTML = title;\n\n        document.getElementsByClassName('points')[0].innerHTML = val.examTotalPoints;\n        document.getElementsByClassName('time')[0].innerHTML = val.examTotalMins;\n\n        $(document.getElementById('finalDiv')).empty();\n\n        for(var i = 0; i < Object.keys(val.questions).length; i++) {\n          done.push(0);\n\n          var localQuestions = document.getElementsByClassName('question');\n          var question = childSnapshot.val().questions[i];\n\n          createQuestion(true, Object.keys(question.choices).length);\n          createQuestionTracker(i + 1, true);\n\n          localQuestions[i].childNodes[1].value = question.title;\n          localQuestions[i].childNodes[2].childNodes[1].innerHTML = question.points;\n\n          if(question.imgSrc != \"\") {\n            var src = question.imgSrc;\n            localQuestions[i].childNodes[2].childNodes[3].style.display = \"initial\";\n            localQuestions[i].childNodes[2].childNodes[3].onclick = function() {\n              swal({\n                icon: src,\n                text: question.imgShortDescription,\n                className: \"imgView\"\n              });\n            }\n          }\n\n          changeQuestionType(question.type, i);\n\n          if(question.type == \"mc\") {\n            var multiple = question.multiple == \"true\";\n            for(var j = 0; j < Object.keys(question.choices).length; j++){\n              if(question.choices[j].value != undefined){\n                localQuestions[i].childNodes[3].childNodes[j].childNodes[1].innerHTML = (question.choices[j].value);\n              }\n              else {\n                localQuestions[i].childNodes[3].childNodes[j].childNodes[1].innerHTML = (question.choices[j]);\n              }\n            }\n\n            if(question.multiple == \"true\") {\n              changeNames(localQuestions[i]);\n\n              var span = document.createElement('span');\n              span.style.fontSize = \"13px\";\n              span.style.paddingLeft = \"20px\";\n              span.innerHTML = \"You may select more than one answer for this question\";\n\n              localQuestions[i].childNodes[2].appendChild(span)\n            }\n          }\n\n          else if(question.type == \"matching\"){\n            document.getElementsByClassName('matching')[i].childNodes[0].value = question.numBoxes;\n            for(var j = 0; j < question.numBoxes; j++) {\n              createMatchingElement(document.getElementsByClassName('matching-wrapper')[i], j + 1);\n            }\n\n            var localBoxes = document.getElementsByClassName('matchingbox');\n            for(var k = 0; k < localBoxes.length; k++) {\n              localBoxes[k].childNodes[1].value = question.choices[k].split(\";\")[0];\n              localBoxes[k].childNodes[3].value = question.choices[k].split(\";\")[1];\n            }\n          }\n        }\n      }\n    });\n  });\n   setTimeout(function(){\n     var questions = (document.getElementsByClassName('question'));\n     var exam = document.getElementById('exam');\n\n     //convert HTMLcollection to array and shuffle\n     originalOrder = questions;\n     var questionsArr = shuffle(Array.prototype.slice.call( questions ));\n\n     $('.questionBr').remove(); $('.questionHr').remove(); $('.question').remove();\n\n     for(var m = 0; m < questionsArr.length; m++) {\n       exam.appendChild(questionsArr[m]);\n       exam.appendChild(document.createElement('br'));\n       exam.appendChild(document.createElement('hr'));\n     }\n     restructureQuestions();\n   }, 500);\n}\n\nfunction changeNames(question) {\n  var choices = question.childNodes[3].childNodes;\n\n  for(var i = 0; i < choices.length; i++) {\n    choices[i].childNodes[0].name = i;\n  }\n}\n\nfunction shuffle(array) {\n  var currentIndex = array.length, temporaryValue, randomIndex;\n\n  // While there remain elements to shuffle...\n  while (0 !== currentIndex) {\n\n    // Pick a remaining element...\n    randomIndex = Math.floor(Math.random() * currentIndex);\n    currentIndex -= 1;\n\n    // And swap it with the current element.\n    temporaryValue = array[currentIndex];\n    array[currentIndex] = array[randomIndex];\n    array[randomIndex] = temporaryValue;\n  }\n\n  return array;\n}\n\n//function to restructure if question is deleted in the middle\nfunction restructureQuestions() {\n  var questions = document.getElementsByClassName('question');\n\n  for(var i = 0; i < questions.length; i++) {\n    var question = questions[i];\n\n    question.childNodes[0].innerHTML = i + 1 + \". \"\n    question.id = i + 1;\n  }\n}\n\n//function to dynamically change type of question\nfunction changeQuestionType(val, i) {\n  if(val == \"mc\") {\n    document.getElementsByClassName(\"mc\")[i].style.display = \"initial\";\n\n    if(document.getElementsByClassName(\"fr\")[i] != undefined) {\n      document.getElementsByClassName(\"fr\")[i].style.display = \"none\";\n    }\n\n    if(document.getElementsByClassName(\"tf\")[i] != undefined) {\n      document.getElementsByClassName(\"tf\")[i].style.display = \"none\";\n    }\n\n    if(document.getElementsByClassName(\"matching\")[i] != undefined) {\n      document.getElementsByClassName(\"matching\")[i].style.display = \"none\";\n    }\n  }\n  else if(val == \"fr\") {\n    document.getElementsByClassName(\"mc\")[i].style.display = \"none\";\n\n    if(document.getElementsByClassName(\"tf\")[i] != undefined) {\n      document.getElementsByClassName(\"tf\")[i].style.display = \"none\";\n    }\n\n    if(document.getElementsByClassName(\"matching\")[i] != undefined) {\n      document.getElementsByClassName(\"matching\")[i].style.display = \"none\";\n    }\n\n    document.getElementById(i + 1).appendChild(createFreeResponse());\n  }\n  else if(val == \"tf\") {\n    document.getElementsByClassName(\"mc\")[i].style.display = \"none\";\n\n    if(document.getElementsByClassName(\"fr\")[i] != undefined) {\n      document.getElementsByClassName(\"fr\")[i].style.display = \"none\";\n    }\n\n    if(document.getElementsByClassName(\"matching\")[i] != undefined) {\n      document.getElementsByClassName(\"matching\")[i].style.display = \"none\";\n    }\n\n    document.getElementById(i + 1).appendChild(createTrueFalse());\n  }\n  else if(val == \"matching\") {\n    document.getElementsByClassName(\"mc\")[i].style.display = \"none\";\n\n    if(document.getElementsByClassName(\"fr\")[i] != undefined) {\n      document.getElementsByClassName(\"fr\")[i].style.display = \"none\";\n    }\n\n    if(document.getElementsByClassName(\"tf\")[i] != undefined) {\n      document.getElementsByClassName(\"tf\")[i].style.display = \"none\";\n    }\n\n    document.getElementById(i + 1).appendChild(createMatching());\n  }\n}\n\n\n// True | False\nfunction createTrueFalse() {\n  var label = document.createElement('label');\n  label.id = \"label\";\n  label.className = \"tf\";\n\n  var true_input = document.createElement('input');\n  true_input.style.outline = \"none\";\n  true_input.type = \"radio\";\n  true_input.className = \"option-input radio\";\n  true_input.name = \"tf_radio\"\n\n  var false_input = document.createElement('input');\n  false_input.style.outline = \"none\";\n  false_input.type = \"radio\";\n  false_input.className = \"option-input radio\";\n  false_input.style.marginLeft = \"10%\";\n  false_input.name = \"tf_radio\"\n\n  var true_span = document.createElement('span');\n  true_span.innerHTML = \" True\";\n  true_span.style.marginLeft = \"10px\";\n  true_span.style.color = \"gray\"\n  true_span.style.fontWeight = 'normal';\n\n  var false_span = document.createElement('span');\n  false_span.innerHTML = \" False\";\n  false_span.style.marginLeft = \"10px\";\n  false_span.style.color = \"gray\"\n  false_span.style.fontWeight = 'normal';\n\n  label.appendChild(true_input);\n  label.appendChild(true_span)\n\n  label.appendChild(false_input);\n  label.appendChild(false_span)\n\n  return label;\n}\n\n// function for Free-Response\nfunction createFreeResponse() {\n  var ta = document.createElement('textarea');\n\n  // read when user changes text area\n  ta.oninput = function() {\n    setTimeout(function(){\n      done[parseInt(ta.parentNode.id) - 1] = 1;\n\n      if(done.indexOf(0) == -1) {\n        document.getElementById('submit-exam').style.display = 'initial';\n        document.getElementById('submit-exam-disabled').style.display = \"none\";\n      }\n    }, 350)\n  }\n\n  ta.className = \"fr\";\n  ta.placeholder = \"NOTE: This question requires manual grading\";\n  return ta;\n}\n\n// function to create matching boxes\nfunction createMatching(){\n  var matchingWrapper = document.createElement('div');\n  matchingWrapper.className = \"matching-wrapper\";\n\n  var matching = document.createElement('div');\n  matching.className = 'matching';\n\n  var hr = document.createElement('hr');\n  hr.style.width = '67%';\n\n  var questions = document.createElement('span');\n  questions.innerHTML = 'Questions';\n  questions.style.marginLeft = \"1.5vw\";\n\n  var results = document.createElement('span');\n  results.innerHTML = 'Results (Will Be Randomized)'\n  results.style.marginLeft = \"22.5vw\";\n\n  var numElements = document.createElement('input');\n  numElements.type = 'textbox';\n  numElements.placeholder = '# Of Elements...';\n  numElements.style.borderRadius = \"5px\";\n  numElements.style.padding = \"5px\";\n  numElements.style.border= \"1px solid black\";\n  numElements.style.fontSize = \"15px\";\n\n  numElements.onkeyup = function() {\n    $(matchingWrapper).empty();\n\n    if(this.value <= 20) {\n      for(var i = 0; i < this.value; i++) {\n        createMatchingElement(matchingWrapper, i + 1);\n      }\n    }\n    else {\n      this.value = \"\";\n\n      var alert = document.createElement('div');\n      alert.innerHTML = \"20 Elements Max!\"\n      alert.style.textAlign = \"center\";\n      alert.style.width = \"100%\";\n      alert.style.position = \"fixed\";\n      alert.style.zIndex = \"100000\";\n      alert.style.top = \"0\";\n      alert.className = \"alert alert-danger\";\n      alert.role = \"alert\";\n\n      document.getElementById('create-exam').appendChild(document.createElement('center').appendChild(alert));\n\n      setTimeout(function(){ document.getElementsByClassName('alert')[0].remove(); }, 2500);\n    }\n  }\n\n  var newBox = document.createElement('button');\n  newBox.id = \"newBox\";\n  newBox.innerHTML = \"New Element!\";\n\n  newBox.onclick = function() {\n    createMatchingElement(matchingWrapper, document.getElementsByClassName('matchingbox').length + 1);\n    saveExam(false);\n  }\n\n  matching.appendChild(numElements);\n  matching.appendChild(hr);\n  matching.appendChild(questions); matching.appendChild(results);\n  matching.appendChild(matchingWrapper);\n\n  matching.appendChild(document.createElement('br'));\n  matching.appendChild(newBox);\n\n  return matching;\n}\n\n// function to create matching Elements\nfunction createMatchingElement(div, i) {\n  var box = document.createElement('div');\n  box.className = 'matchingbox';\n\n  var labelTrash = document.createElement('span');\n  labelTrash.className = \"glyphicon glyphicon-minus\";\n  labelTrash.style.display = \"none\";\n  labelTrash.style.marginRight = \"5px\";\n  labelTrash.style.color = \"#f25555\";\n\n  $(labelTrash).click(function(){\n    this.parentNode.remove();\n    saveExam(false);\n    restructureBoxes();\n  });\n\n  $(box).hover(function(){\n    this.childNodes[0].style.display = \"initial\";\n  }, function(){\n    this.childNodes[0].style.display = \"none\";\n  });\n\n  $(labelTrash).hover(function(){\n    this.style.cursor=\"pointer\";\n    this.style.color = \"#f25555\";\n  }, function(){\n\n  });\n\n  box.appendChild(labelTrash)\n\n  var num = document.createElement('span');\n  num.innerHTML = i + \".\";\n  num.style.marginRight = \"10px\";\n  num.style.fontSize = \"15px\";\n\n  box.appendChild(num);\n\n  var input = document.createElement('input');\n  input.type = 'textbox';\n  input.style.marginTop = \"20px\";\n  input.style.textAlign = \"center\";\n  input.placeholder = \"1 + 1\";\n  input.id = 'result';\n\n  var arrow = document.createElement('span');\n  arrow.className = 'glyphicon glyphicon-arrow-right';\n  arrow.style.paddingLeft = '5vw';\n\n  var result_input = document.createElement('input');\n  result_input.type = 'textbox';\n  result_input.style.marginLeft = \"5vw\";\n  result_input.style.textAlign = \"center\";\n  result_input.placeholder = \"2\";\n  result_input.id = 'result';\n\n  box.appendChild(input);\n  box.appendChild(arrow);\n  box.appendChild(result_input);\n  div.appendChild(box);\n}\n\n// function to create HTML question\nfunction createQuestion(loading, numAnswerChoices) {\n  var exam = document.getElementById('exam');\n\n  var question = document.createElement('div');\n  question.className = \"question\";\n  question.id = document.getElementsByClassName('question').length + 1;\n  question.dataset.original = document.getElementsByClassName('question').length + 1;\n\n  var num = document.createElement('span');\n  num.innerHTML = document.getElementsByClassName('question').length + 1 + \". \";\n  num.style.color = \"#97a5aa\";\n\n  var hr = document.createElement('hr');\n  hr.className = \"questionHr\";\n\n  var br = document.createElement('br');\n  br.className = \"questionBr\";\n\n  var question_title = document.createElement('input');\n  question_title.readOnly = true;\n  question_title.type = \"text\";\n  question_title.placeholder = \"Ex: What's Your Name?\";\n  question_title.id = \"question-title\";\n\n  question.appendChild(num);\n  question.appendChild(question_title);\n\n  var viewImage = document.createElement(\"a\");\n  viewImage.innerHTML = \"View Image\";\n  viewImage.style.marginLeft = \"10px\";\n  viewImage.style.display = \"none\";\n\n  var points = document.createElement('div');\n  points.id = \"points\";\n  var span = document.createElement('span');\n  span.innerHTML = \"( \";\n\n  var numPoints = document.createElement('span');\n  numPoints.type = \"text\";\n  numPoints.id = \"numPoints\";\n  numPoints.placeholder = \"Ex: 4\";\n\n  var finishingSpan =  document.createElement('span');\n  finishingSpan.innerHTML = \" points)\";\n\n  points.appendChild(span); points.appendChild(numPoints); points.appendChild(finishingSpan);\n  points.appendChild(viewImage);\n\n  question.appendChild(points);\n\n  var answer_choices = document.createElement('div');\n  answer_choices.className = \"mc\";\n\n  for(var i = 0; i < numAnswerChoices; i++) {\n    var label = document.createElement('label');\n    label.id = \"label\";\n\n    var input = document.createElement('input');\n    input.style.outline = \"none\";\n    input.type = \"radio\";\n    input.name = \"group\";\n    input.className = \"option-input radio\";\n    input.name = num.innerHTML;\n\n    var answer_choice = document.createElement('span');\n    answer_choice.className = \"option\";\n    answer_choice.id = \"question-choice\";\n\n    label.appendChild(input);\n    label.appendChild(answer_choice);\n\n    label.onmouseup = function() {\n      if(this.childNodes[0].checked) {\n        var button = this.childNodes[0];\n        setTimeout(function(){ button.checked = false; }, 150);\n      }\n    }\n\n    answer_choices.appendChild(label);\n  }\n  question.appendChild(answer_choices);\n\n  exam.appendChild(question);\n  exam.appendChild(br);\n  exam.appendChild(hr);\n\n\n  if(!loading) {\n    window.scroll({ top: question.getBoundingClientRect().top + window.scrollY, behavior: 'smooth' });\n    createQuestionTracker(document.getElementsByClassName('question').length, false);\n  }\n}\n\nfunction createQuestionTracker(i, populating) {\n  if(i == 2 && !populating) {\n    createQuestionTracker(1, false);\n  }\n  var manager = document.getElementById('questionNums');\n  var finalDiv = document.getElementById('finalDiv');\n\n  var tracker = document.createElement('span');\n  tracker.innerHTML = \"&#x25CC;\"\n  tracker.style.fontSize = \"60px\";\n  tracker.style.position = \"relative\";\n  tracker.style.bottom = \"20px\";\n  tracker.style.color = \"#58f\";\n  tracker.style.left = \"125px\";\n\n  tracker.id = \"question-tracker\";\n  tracker.className = i;\n\n  $(tracker).hover(function(){\n    var text = tracker.childNodes[1];\n\n    if(navigator.userAgent.toLowerCase().indexOf('safari/') > -1 || /Chrome/.test(navigator.userAgent) && /Google Inc/.test(navigator.vendor)) {\n      text.style.right = \"22.5px\";\n    }\n\n    this.style.cursor = \"pointer\";\n    this.innerHTML = \"&#x25CF;\";\n    this.appendChild(text);\n\n    this.style.bottom = '25px';\n    this.style.transition = 'all .5s';\n\n    tracker.childNodes[1].style.color = \"white\";\n  }, function(){\n    var text = tracker.childNodes[1];\n    this.innerHTML = \"&#x25CC;\";\n\n    if(navigator.userAgent.toLowerCase().indexOf('safari/') > -1 || /Chrome/.test(navigator.userAgent) && /Google Inc/.test(navigator.vendor)) {\n      text.style.right = \"27.5px\";\n    }\n\n    this.style.bottom = '20px';\n    this.style.transition = 'all .5s';\n\n    this.appendChild(text);\n    tracker.childNodes[1].style.color = \"black\";\n  });\n\n  tracker.onclick = function() {\n    document.getElementById(i).scrollIntoView({block: \"center\"});\n  }\n\n  var center = document.createElement('center');\n  var text = document.createElement('div');\n  text.id = \"text\";\n  text.innerHTML = i;\n\n  if(navigator.userAgent.toLowerCase().indexOf('safari/') > -1 || /Chrome/.test(navigator.userAgent) && /Google Inc/.test(navigator.vendor)) {\n    text.style.right = \"27.5px\";\n  }\n\n  tracker.appendChild(text);\n\n  finalDiv.appendChild(tracker);\n  manager.appendChild(finalDiv);\n  manager.scrollTop = (manager.clientHeight + manager.clientHeight);\n}\n\n//toggleFullScreen\nfunction toggleFullScreen() {\n  if (!document.fullscreenElement) {\n    document.addEventListener('contextmenu', event => event.preventDefault());\n    document.documentElement.requestFullscreen();\n  }\n  else {\n    if (document.exitFullscreen) {\n      document.exitFullscreen();\n    }\n  }\n}\n\n//function to end test\nfunction endTest() {\n  window.location.href = window.location.href;\n}\n\nfunction getChecked(question) {\n  var type = question.childNodes[Object.keys(question.childNodes)[question.childNodes.length - 1]];\n\n  if(type.className == \"mc\") {\n    for(var i = 0; i < type.childNodes.length; i++) {\n      if(type.childNodes[i].childNodes[0].checked == true) {\n        return i;\n      }\n    }\n  }\n\n  else if(type.className == \"tf\") {\n    if(type.childNodes[0].checked) {\n      return 0;\n    }\n    else {\n      return 1;\n    }\n  }\n\n  else if(type.className == \"matching\"){\n    type = \"matching\";\n    return 15;\n  }\n\n  else if(type.className == \"fr\"){\n    return type.value;\n  }\n}\n\nfunction bubbleSort(array) {\n  for(var i = 0; i < array.length; i++) {\n    for(var j = 1; j < array.length; j++) {\n      if(array[j - 1].dataset.original > array[j].dataset.original) {\n        var temp = array[j-1];\n        array[j-1] = array[j];\n        array[j] = temp;\n      }\n    }\n  }\n  return array;\n}\n\n// submit code - reroute!\nfunction submitExam() {\n  var student_answers = [];\n  var sortedArray = bubbleSort(Array.prototype.slice.call( originalOrder ));\n\n  for(var i = 0; i < sortedArray.length; i++) {\n    var question = sortedArray[i];\n    var checked = getChecked(question);\n\n    student_answers.push(i + \";\" + checked);\n  }\n\n  sessionStorage.setItem(\"student_answers\", JSON.stringify(student_answers));\n\n  document.getElementById('display-exam').style.display = \"none\";\n  document.getElementById('result').style.display = \"initial\";\n\n  displayResults();\n}\n\n// function to display results\nfunction displayResults() {\n  var answers = JSON.parse(sessionStorage.getItem('student_answers'));\n  var dbAnswers;\n  var responseStructure = {};\n\n  firebase.database().ref(\"Teachers/\" + sessionStorage.getItem('teacher') + \"/Classes/\" + sessionStorage.getItem('className') + \"/Exams/\" + sessionStorage.getItem(\"ExamCode\")).once('value').then(function(snapshot) {\n    snapshot.forEach(function(childSnapshot) {\n      if(childSnapshot.toJSON().questions != undefined) {\n        dbAnswers = childSnapshot.toJSON();\n      }\n    });\n\n    var total = 0;\n    var frTotalPoints = 0;\n\n    for(var i = 0; i < originalOrder.length; i++) {\n      var answer = \"\";\n      var fr = false;\n      var tf = false;\n\n      if(dbAnswers.questions[i].type == \"tf\") {\n        tf = true;\n        if(answers[i].split(\";\")[1] == 1) {\n          answer = \"false\";\n        }\n        else {\n          answer = \"true\";\n        }\n\n        if(answer == dbAnswers.questions[i].choices[0]){\n          total += parseInt(dbAnswers.questions[i].points);\n          createCorrectBox(dbAnswers.questions[i].title, answers[i].split(\";\")[0], parseInt(dbAnswers.questions[i].points));\n        }\n        else {\n          createIncorrectBox(dbAnswers.questions[i].title, answers[i].split(\";\")[0], parseInt(dbAnswers.questions[i].points));\n        }\n      }\n      else if(dbAnswers.questions[i].type == \"mc\") {\n        answer = parseInt(answers[i].split(\";\")[1])\n      }\n      else {\n        fr = true;\n        createFrBox(dbAnswers.questions[i].title, answers[i].split(\";\")[0], parseInt(dbAnswers.questions[i].points));\n        frTotalPoints += parseInt(dbAnswers.questions[i].points);\n      }\n\n      if(!fr && !tf) {\n        if(answer == dbAnswers.questions[i].checked) {\n          total += parseInt(dbAnswers.questions[i].points);\n          createCorrectBox(dbAnswers.questions[i].title, answers[i].split(\";\")[0], parseInt(dbAnswers.questions[i].points));\n        }\n        else {\n          createIncorrectBox(dbAnswers.questions[i].title, answers[i].split(\";\")[0], parseInt(dbAnswers.questions[i].points));\n        }\n      }\n    }\n\n    var studentExamData = {\n      \"score\" : ((total / (dbAnswers.examTotalPoints - frTotalPoints)) * 100).toFixed(1),\n      \"time\" : timer,\n      \"answers\" : answers,\n      \"name\" : sessionStorage.getItem('StudentName'),\n      \"totalScore\" : (total / (dbAnswers.examTotalPoints) * 100).toFixed(1)\n    }\n\n    firebase.database().ref(\"Teachers/\" + sessionStorage.getItem('teacher') + \"/Classes/\" + sessionStorage.getItem('className') + \"/Exams/\" + sessionStorage.getItem(\"ExamCode\") + \"/responses/\" + sessionStorage.getItem('StudentName')).push(studentExamData);\n\n    var min = \" Minutes\"\n\n    if(timer == 1) {\n      min = \" Minute\"\n    }\n\n    document.getElementById('score').innerHTML = studentExamData.score + \"%\";\n    document.getElementById('score-num').innerHTML = (total + \" / \" + (dbAnswers.examTotalPoints - frTotalPoints) + \" in \" + timer + min);\n\n  });\n\n\n   var result = document.getElementById('result');\n}\n\nfunction createFrBox(title, num, points) {\n  var dataDiv = document.getElementById('question-data');\n\n  var box = document.createElement('div');\n  box.style.width = \"90vw\";\n  box.style.marginTop = \"10px\";\n  box.style.border = \"1px solid black\";\n  box.style.padding = \"15px\";\n  box.style.height = \"50px\";\n  box.style.background = \"#798893\";\n  box.style.color = \"white\";\n  box.style.borderRadius = \"6px\";\n  box.className = \"questionBox\";\n\n  var name = document.createElement('span');\n  name.innerHTML = parseInt(num) + 1 + \" | \" + title;\n  name.style.float = \"left\";\n  name.style.paddingLeft = \"10px\";\n\n  var pointsAwarded = document.createElement('span');\n  pointsAwarded.innerHTML = \"Free Response Questions Require Manual Grading (Points Possible: \" + points + \")\"\n  pointsAwarded.style.float = \"right\";\n  pointsAwarded.style.paddingRight = \"20px\";\n\n  box.appendChild(name);\n  box.appendChild(pointsAwarded);\n\n  dataDiv.appendChild(box);\n}\n\nfunction createCorrectBox(title, num, points) {\n  var dataDiv = document.getElementById('question-data');\n\n  var box = document.createElement('div');\n  box.style.width = \"90vw\";\n  box.style.marginTop = \"10px\";\n  box.style.border = \"1px solid black\";\n  box.style.padding = \"15px\";\n  box.style.height = \"50px\";\n  box.style.background = \"#84f277\";\n  box.style.borderRadius = \"6px\";\n  box.className = \"questionBox\";\n\n  var name = document.createElement('span');\n  name.innerHTML = parseInt(num) + 1 + \" | \" + title;\n  name.style.float = \"left\";\n  name.style.paddingLeft = \"10px\";\n\n  var pointsAwarded = document.createElement('span');\n  pointsAwarded.innerHTML = \"You Received \" + points + \" / \" + points + \" Points For This Question!\"\n  pointsAwarded.style.float = \"right\";\n  pointsAwarded.style.paddingRight = \"20px\";\n\n  box.appendChild(name);\n  box.appendChild(pointsAwarded);\n\n  dataDiv.appendChild(box);\n}\n\nfunction createIncorrectBox(title, num, points) {\n  var dataDiv = document.getElementById('question-data');\n\n  var box = document.createElement('div');\n  box.style.width = \"90vw\";\n  box.style.marginTop = \"10px\";\n  box.style.border = \"1px solid black\";\n  box.style.padding = \"15px\";\n  box.style.height = \"50px\";\n  box.style.background = \"#cc2d2d\";\n  box.style.color = \"white\";\n  box.style.borderRadius = \"6px\";\n  box.className = \"questionBox\";\n\n  var name = document.createElement('span');\n  name.innerHTML = parseInt(num) + 1 + \" | \" + title;\n  name.style.float = \"left\";\n  name.style.paddingLeft = \"10px\";\n\n  var pointsAwarded = document.createElement('span');\n  pointsAwarded.innerHTML = \"You Received \" + 0 + \" / \" + points + \" Points For This Question\"\n  pointsAwarded.style.float = \"right\";\n  pointsAwarded.style.paddingRight = \"20px\";\n\n  box.appendChild(name);\n  box.appendChild(pointsAwarded);\n\n  dataDiv.appendChild(box);\n}\n\n// window.onbeforeunload = function() {\n//    return \"Dude, are you sure you want to leave? Think of the kittens!\";\n// }\n\n// if user hits enter, check exam code\ndocument.addEventListener(\"keypress\", function(e) {\n  if (e.keyCode === 13 && !stopEnter) {\n    submitExamCode();\n  }\n}, false);\n\n//throw key away\nkey = \"\";\n"]}