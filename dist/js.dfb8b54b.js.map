{"version":3,"sources":["assets/js/index.js"],"names":["examCodes","students","done","stopEnter","canCount","canChangeCircle","key","initKey","timer","originalOrder","onSignIn","googleUser","document","URL","indexOf","window","location","profile","getBasicProfile","sessionStorage","setItem","JSON","stringify","getId","getName","getImageUrl","getEmail","href","substring","signOut","gapi","auth2","getAuthInstance","then","removeItem","finalString","i","arr","sort","Math","random","j","length","replace","removeAllActive","getElementsByTagName","className","removeDropDown","x","matches","getElementById","style","display","getElementsByClassName","leaverCount","onfullscreenchange","event","timerInterval","fullscreenElement","Swal","fire","title","html","confirmButtonText","cancelButtonText","showCancelButton","showConfirmButton","allowEscapeKey","allowEnterKey","onBeforeOpen","setInterval","getContent","querySelector","textContent","getTimerLeft","onClose","clearInterval","result","value","endTest","toggleFullScreen","dismiss","DismissReason","firebase","database","ref","on","snapshot","forEach","childSnapshot","code","CryptoJS","AES","encrypt","val","push","onload","$","parseInt","name","parentNode","id","innerHTML","getItem","swal","reload","today","Date","getSeconds","getHours","getMinutes","scroll","elem","docViewTop","scrollTop","docViewBottom","height","elemTop","offset","top","isInView","bottom","transition","text","childNodes","appendChild","color","right","setTimeout","undefined","onclick","matchMedia","body","background","populateLeaderboard","searchLeaderboard","input","tr","border","scrollIntoView","behavior","getStudent","low","mid","high","mergeSort","floor","split","middle","left","slice","merge","indexLeft","indexRight","concat","submitExamCode","toUpperCase","data","findCode","test","getCodeLetter","teacher","once","exam","Exams","retrieveName","taken","decryptedBytes","decrypt","plaintext","toString","enc","Utf8","exists","displayQuiz","overflow","populateExam","onblur","examCode","examTotalMins","examDate","examTeacher","dateJS","getMonth","getDate","getFullYear","examDescription","examTitle","examTotalPoints","empty","Object","keys","questions","localQuestions","question","createQuestion","choices","createQuestionTracker","points","imgSrc","src","icon","imgShortDescription","changeQuestionType","type","numBoxes","createMatchingElement","localBoxes","k","questionsArr","shuffle","Array","prototype","call","remove","m","createElement","restructureQuestions","array","currentIndex","temporaryValue","randomIndex","createFreeResponse","createTrueFalse","createMatching","label","true_input","outline","false_input","marginLeft","true_span","fontWeight","false_span","ta","oninput","placeholder","matchingWrapper","matching","hr","width","results","numElements","borderRadius","padding","fontSize","onkeyup","alert","textAlign","position","zIndex","role","newBox","saveExam","div","box","labelTrash","marginRight","click","restructureBoxes","hover","cursor","num","marginTop","arrow","paddingLeft","result_input","loading","numAnswerChoices","dataset","original","br","question_title","readOnly","viewImage","span","numPoints","finishingSpan","answer_choices","answer_choice","getBoundingClientRect","scrollY","populating","manager","finalDiv","tracker","navigator","userAgent","toLowerCase","vendor","block","center","clientHeight","exitFullscreen","addEventListener","preventDefault","documentElement","requestFullscreen","getChecked","checked","bubbleSort","temp","submitExam","student_answers","sortedArray","console","log","displayResults","answers","dbAnswers","parse","toJSON","total","frTotalPoints","answer","fr","tf","createCorrectBox","createIncorrectBox","createFrBox","studentExamData","toFixed","min","score","dataDiv","float","pointsAwarded","paddingRight","addListener","e","keyCode"],"mappings":"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","file":"js.dfb8b54b.js","sourceRoot":"..","sourcesContent":["var examCodes = [], students = [], done = [];\nvar stopEnter = false, canCount = false, canChangeCircle = true;\nvar key = initKey(); var timer = 0; var originalOrder = [];\n\n(function() {\n    // Expose to global\n    var leaverCount = 0;\n\n    //code to call when document leaves full screen\n    document.onfullscreenchange = function ( event ) {\n      if(document.fullscreenElement == null) {\n        let timerInterval;\n        if(leaverCount <= 5) {\n            Swal.fire({\n              title: 'Are You Sure You Want To Leave?',\n              html: 'You have <strong></strong> seconds to go back to your test or the test ends and your score is recorded! You can open this dialog <span></span> more times',\n              confirmButtonText: 'Yes, end it!',\n              cancelButtonText: 'No, Go Back!',\n              showCancelButton: true,\n              showConfirmButton: true,\n              allowEscapeKey: false,\n              allowEnterKey: false,\n              timer: 10000,\n              onBeforeOpen: () => {\n                timerInterval = setInterval(() => {\n                  Swal.getContent().querySelector('strong').textContent = Swal.getTimerLeft() / 1000;\n                }, 100)\n                Swal.getContent().querySelector('span').textContent = 4 - leaverCount;\n              },\n              onClose: () => {\n                clearInterval(timerInterval)\n              }\n              }).then((result) => {\n                if (!result.value) {\n                  toggleFullScreen();\n\n                  leaverCount++;\n                }\n                else if(result.value) {\n                  endTest();\n                }\n                if (result.dismiss === Swal.DismissReason.timer) {\n                  endTest();\n                }\n            });\n          }\n          else{\n            endTest();\n          }\n      };\n    }\n\n})();\n\n// var data;\n// \t$.ajax({\n// \t  type: \"GET\",\n// \t  url: \"data.csv\",\n// \t  dataType: \"text\",\n// \t  success: function(response)\n// \t  {\n//   \t\tdata = $.csv.toArrays(response);\n//       for(var i = 0; i < data.length; i++){\n//         var id = data[i][0];\n//         var names = data[i][3] + \" \" + data[i][2];\n//         var className = data[i][10];\n//\n//         // firebase.database().ref(\"Teachers/Zakariya Sattar/Classes/\" + className + \"/Students\").push(id + \";\" + name);\n//         var json = {\n//           name: names,\n//           score:  Math.floor((Math.random() * 25) + 75),\n//           time: 5,\n//           totalScore: Math.floor((Math.random() * 5) + 15)\n//         }\n//         firebase.database().ref(\"Teachers/Zakariya Sattar/Classes/Advance App Development/Exams/ZIPIXM/responses/\" + names).push(json);\n//       }\n// \t  }\n// });\n\n// pull all exam codes then encrypt them\nfirebase.database().ref('exam-codes').on('value', function(snapshot) {\n  snapshot.forEach(function(childSnapshot) {\n    var code = CryptoJS.AES.encrypt(childSnapshot.val(), key);\n    examCodes.push(code);\n  });\n});\n\n// pull all students then encrypt them\nfirebase.database().ref('Students').on('value', function(snapshot) {\n  snapshot.forEach(function(childSnapshot) {\n    // no need for encryption because no active storage\n    students.push(childSnapshot.val());\n  });\n});\n\n// code to run when google user signs in\nfunction onSignIn(googleUser) {\n  if(document.URL.indexOf(\"?\") == -1){\n    window.location = \"teacher.html\";\n\n    var profile = googleUser.getBasicProfile();\n    sessionStorage.setItem(\"userInfo\", JSON.stringify([profile.getId(), profile.getName(), profile.getImageUrl(), profile.getEmail()]));\n  }\n  else {\n    window.location.href = document.URL.substring(0, document.URL.indexOf(\"?\"));\n    sessionStorage.setItem(\"userInfo\", \"\");\n    signOut();\n  }\n}\n\n// request signout\nfunction signOut() {\n  var auth2 = gapi.auth2.getAuthInstance();\n  auth2.signOut().then(function () {\n    sessionStorage.removeItem('userInfo');\n  });\n}\n\n// for displayQuiz()\nwindow.onload = function() {\n  $(\"#create-exam\").on('change', \"input:radio\", function() {\n    if(parseInt(this.name.substring(0, 1))) {  //MC\n      done[parseInt(this.name.substring(0, 1)) - 1] = 1;\n    }\n    else {  //TF\n      done[parseInt(this.parentNode.parentNode.id) - 1] = 1;\n    }\n\n    // document.getElementsByClassName(this.parentNode.parentNode.parentNode.id)[0].style.background = \"green\";\n\n    if(done.indexOf(0) == -1) {\n      document.getElementById('submit-exam').style.display = 'initial';\n      document.getElementById('submit-exam-disabled').style.display = \"none\";\n    }\n  });\n\n  document.getElementById('timeLeftInExam').innerHTML = sessionStorage.getItem(\"timeLimit\") - 0 + \" minutes\";\n\n  setInterval(function(){\n    if(canCount) {\n      if(timer == (sessionStorage.getItem(\"timeLimit\") - 5)) {\n        swal(\"Timer Warning\", \"5 minutes remaining in this exam\", \"info\");\n      }\n      if(timer <= sessionStorage.getItem(\"timeLimit\")) {\n        timer++;\n        document.getElementById('timeLeftInExam').innerHTML = sessionStorage.getItem(\"timeLimit\") - timer + \" minutes\";\n      }\n      else {\n        window.location.reload();\n      }\n    }\n  }, 60000);\n\n  setInterval(function(){\n    var today = new Date();\n    if(today.getSeconds() < 10) {\n      document.getElementById(\"currTime\").innerHTML = today.getHours() + \":\" + today.getMinutes() + \":0\" + today.getSeconds();\n    }\n    else {\n      document.getElementById(\"currTime\").innerHTML = today.getHours() + \":\" + today.getMinutes() + \":\" + today.getSeconds();\n    }\n\n  }, 1000)\n\n  $(window).scroll(function(){\n    for(var i = 1; i <= document.getElementsByClassName('question').length; i++) {\n      var elem = document.getElementById(i);\n      var docViewTop = $(window).scrollTop();\n      var docViewBottom = docViewTop + $(window).height();\n\n      var elemTop = $(elem).offset().top;\n      var elemBottom = elemTop + $(elem).height();\n\n      var isInView = ((elemBottom <= docViewBottom) && (elemTop >= docViewTop));\n\n      if (isInView){\n        document.getElementsByClassName(i)[0].style.bottom = '25px';\n        document.getElementsByClassName(i)[0].style.transition = 'all .5s';\n\n        var text = document.getElementsByClassName(i)[0].childNodes[1];\n        document.getElementsByClassName(i)[0].innerHTML = \"&#x25CF;\"\n        document.getElementsByClassName(i)[0].appendChild(text);\n        document.getElementsByClassName(i)[0].childNodes[1].style.color = \"white\";\n        document.getElementsByClassName(i)[0].childNodes[1].style.right = \"22.5px\";\n\n        setTimeout(function(){\n          if(document.getElementsByClassName(i)[0] != undefined) {\n            document.getElementsByClassName(i)[0].style.bottom = '20px';\n            document.getElementsByClassName(i)[0].style.transition = 'all .5s';\n          }\n        }, 3000);\n\n      }\n      else {\n        if(canChangeCircle) {\n          document.getElementsByClassName(i)[0].style.bottom = '20px';\n          document.getElementsByClassName(i)[0].style.transition = 'all .5s';\n\n          var text = document.getElementsByClassName(i)[0].childNodes[1];\n          document.getElementsByClassName(i)[0].innerHTML = \"&#x25CC;\"\n          document.getElementsByClassName(i)[0].appendChild(text);\n          document.getElementsByClassName(i)[0].childNodes[1].style.color = \"black\";\n          document.getElementsByClassName(i)[0].childNodes[1].style.right = \"22.5px\";\n        }\n      }\n    }\n  });\n};\n\n//initialize key with random val\nfunction initKey() {\n  var finalString;\n  var i, arr = [];\n  for (i = 0; i < 25; i++) {\n      arr[i] = i + 1;\n  }\n  arr.sort(function () {\n      return Math.random() - 0.25;\n  });\n\n  for(var j = 0; j < arr.length; j++) {\n    finalString = arr[j] + finalString + \"\";\n  }\n  return finalString.replace('NaN', '');\n}\n\n//function to remove all class='active'\nfunction removeAllActive() {\n  document.getElementsByTagName(\"LI\")[0].className = \"\";\n  document.getElementsByTagName(\"LI\")[1].className = \"\";\n  document.getElementsByTagName(\"LI\")[2].className = \"\";\n}\n\ndocument.getElementById(\"nav-toggle\").onclick = function() {\n  if(document.getElementById('nav-menu').style.display == \"initial\"){\n    document.getElementById('nav-menu').style.display = \"none\";\n  }\n  else {\n    document.getElementById('nav-menu').style.display = \"initial\";\n  }\n}\n\n// remove dropdown if screen size can handle navbar\nfunction removeDropDown(x) {\n if (x.matches) { // If media query matches\n   document.getElementById('dropdown').style.display = \"none\";\n\n   for(var i = 0; i < document.getElementsByClassName('navB').length; i++) {\n     document.getElementsByClassName('navB')[i].style.display = \"initial\";\n   }\n }\n else {\n   document.getElementById('dropdown').style.display = \"initial\";\n   for(var i = 0; i < document.getElementsByClassName('navB').length; i++) {\n     document.getElementsByClassName('navB')[i].style.display = \"none\";\n   }\n }\n}\n\nvar x = window.matchMedia(\"(min-width: 730px)\")\nremoveDropDown(x) // Call listener function at run time\nx.addListener(removeDropDown) // Attach listener function on state changes\n\n\n//function to switch displays based on what user clicks\nfunction display(title) {\n  if(title == '<a href=\"#\">Ping-Pong</a>') {\n    document.getElementById('main').style.display = \"none\";\n    document.getElementById('pong').style.display = \"initial\";\n    document.getElementById('leaderboard').style.display = \"none\";\n  }\n  else if(title == '<a href=\"#\">Home</a>') {\n    document.getElementById('main').style.display = \"initial\";\n    document.getElementById('pong').style.display = \"none\";\n    document.getElementById('leaderboard').style.display = \"none\";\n    document.body.style.background = '#1b1b1d';\n  }\n  else if(title == '<a href=\"#\">Leaderboard</a>') {\n    document.getElementById('main').style.display = \"none\";\n    document.getElementById('pong').style.display = \"none\";\n    document.getElementById('leaderboard').style.display = \"initial\";\n    document.body.style.background = 'white';\n    populateLeaderboard();\n  }\n  document.getElementById('nav-menu').style.display = \"none\";\n}\n\n// search LB\nfunction searchLeaderboard() {\n  var input, filter, ul, tr, a, i, txtValue;\n\n  input = document.getElementById(\"lb-search\");\n  tr = document.getElementById('leaderboard').getElementsByClassName(\"name\");\n\n  for (i = 0; i < tr.length; i++) {\n    if(tr[i].innerHTML == input.value) {\n      tr[i].style.border = \"1px solid black\";\n      tr[i].scrollIntoView({behavior: \"smooth\"});\n    }\n  }\n}\n\nfunction getStudent(id) {\n  students = mergeSort(students);\n  //binary search for finding ID pos\n  var low  = 0 , high = students.length -1 ,mid ;\n  while (low <= high){\n      mid = Math.floor((low+high)/2);\n      if(students[mid].split(\";\")[0]==id) return students[mid];\n      else if (students[mid].split(\";\")[0]<id) low = mid+1;\n      else high = mid-1;\n  }\n  return -1 ;\n}\n\n//implement merge sort\nfunction mergeSort (arr) {\n  if (arr.length === 1) {\n    // return once we hit an array with a single item\n    return arr\n  }\n\n  const middle = Math.floor(arr.length / 2) // get the middle item of the array rounded down\n  const left = arr.slice(0, middle) // items on the left side\n  const right = arr.slice(middle) // items on the right side\n\n  return merge(\n    mergeSort(left),\n    mergeSort(right)\n  )\n}\n\n// compare the arrays item by item and return the concatenated result\nfunction merge (left, right) {\n  let result = []\n  let indexLeft = 0\n  let indexRight = 0\n\n  while (indexLeft < left.length && indexRight < right.length) {\n    if (left[indexLeft].split(\";\")[0] < right[indexRight].split(\";\")[0]) {\n      result.push(left[indexLeft])\n      indexLeft++\n    } else {\n      result.push(right[indexRight])\n      indexRight++\n    }\n  }\n\n  return result.concat(left.slice(indexLeft)).concat(right.slice(indexRight))\n}\n\n// function to retieve and analyze code\nfunction submitExamCode() {\n  var code = document.getElementById('inputExamCode').value.toUpperCase();\n  var data = findCode(code);\n\n  if(code.length == 5 && (!/[~!#$%\\^&*+=\\-\\[\\]\\\\';,/{}|\\\\\":<>\\?]/g.test(code))) {\n    document.getElementById('exam-info').innerHTML = \"\";\n    if(data == null) {\n      swal(\"Invalid exam code!\", \"Check for special characters and make sure the length is at least 5\", \"error\");\n    }\n\n    else if(data.split(\";\")[0] == code) {\n      sessionStorage.setItem(\"teacher\", data.split(\";\")[1]);\n      document.getElementById('exam-info').innerHTML = data.split(\";\")[3] + \" | \" + data.split(\";\")[2];\n      document.getElementById('id-input').style.display = 'initial';\n\n      getCodeLetter(code, data.split(\";\")[1], data.split(\";\")[2])\n      stopEnter = true;\n    }\n  }\n}\n\nfunction getCodeLetter(code, teacher, className) {\n  firebase.database().ref(\"Teachers/\" + teacher + \"/Classes/\" + className).once('value', function(snapshot) {\n    for(exam in snapshot.val().Exams) {\n      if(exam.substring(1) == code) {\n        sessionStorage.setItem('ExamCode', exam);\n      }\n    }\n  });\n}\n\nfunction retrieveName() {\n  var taken = false;\n  var id = document.getElementsByClassName(\"ID\")[0].value;\n\n  if(id.length == 5){\n    var i = 0;\n    for(var x = 0; x < examCodes.length; x++){\n      var decryptedBytes = CryptoJS.AES.decrypt(examCodes[x], key);\n      var plaintext = decryptedBytes.toString(CryptoJS.enc.Utf8);\n\n      if(plaintext.split(\";\")[0] == sessionStorage.getItem('ExamCode').substring(1)){\n        i = x;\n        break;\n      }\n    }\n\n    var teacher = CryptoJS.AES.decrypt(examCodes[i], key);\n    var plaintext = decryptedBytes.toString(CryptoJS.enc.Utf8);\n\n    document.getElementById('userName').innerHTML = \"\";\n\n    firebase.database().ref(\"Teachers/\" + plaintext.split(\";\")[1] + \"/Classes/\" + plaintext.split(\";\")[2] + \"/Exams/\" + sessionStorage.getItem(\"ExamCode\") + \"/taken\").once('value', function(snapshot) {\n      snapshot.forEach(function(childSnapshot) {\n        if(childSnapshot.val() == id) {\n          taken = true;\n        }\n      });\n      if(!taken || taken) {\n        document.getElementById('userName').style.color = \"black\";\n        sessionStorage.setItem('idNum', id);\n        firebase.database().ref(\"Teachers/\" + plaintext.split(\";\")[1] + \"/Classes/\" + plaintext.split(\";\")[2] + \"/Students\").once('value', function(snapshot) {\n          snapshot.forEach(function(childSnapshot) {\n            if(childSnapshot.val().split(\";\")[0] == id) {\n              document.getElementById('userName').innerHTML = childSnapshot.val().split(\";\")[1];\n              document.getElementById('proceed').style.display = \"initial\";\n              document.getElementById('recognition').style.bottom = \"-10px\";\n            }\n          });\n        });\n\n        if(document.getElementById('userName').innerHTML == \"\") {\n          document.getElementById('userName').innerHTML = \"Not Found!\"\n        }\n      }\n\n      else {\n        document.getElementById('userName').innerHTML = \"You Have Taken This Exam Already!\";\n        document.getElementById('userName').style.color = \"red\";\n      }\n    });\n  }\n}\n\n//function to make sure exam code is valid\nfunction findCode(code) {\n  var exists = false;\n  var data = \"\";\n\n  for(var x = 0; x < examCodes.length; x++){\n    var decryptedBytes = CryptoJS.AES.decrypt(examCodes[x], key);\n    var plaintext = decryptedBytes.toString(CryptoJS.enc.Utf8);\n\n    if(plaintext.split(\";\")[0] == code){\n      return plaintext;\n    }\n  }\n\n  return null;\n}\n\n// function to display quiz to student\nfunction displayQuiz() {\n  var code = sessionStorage.getItem(\"ExamCode\");\n  var teacher = sessionStorage.getItem(\"teacher\");\n\n  sessionStorage.setItem(\"StudentName\", document.getElementById('userName').innerHTML);\n  var i = 0;\n\n  for(var x = 0; x < examCodes.length; x++){\n    var decryptedBytes = CryptoJS.AES.decrypt(examCodes[x], key);\n    var plaintext = decryptedBytes.toString(CryptoJS.enc.Utf8);\n    if(plaintext.split(\";\")[0] == code.substring(1) && plaintext.split(\";\")[1] == teacher){\n      i = x;\n      break;\n    }\n  }\n\n  var teacher = CryptoJS.AES.decrypt(examCodes[i], key);\n  var plaintext = decryptedBytes.toString(CryptoJS.enc.Utf8);\n\n  sessionStorage.setItem(\"className\", plaintext.split(\";\")[2]);\n\n  document.getElementById('main').style.display = \"none\";\n  document.getElementById('navigation').style.display = \"none\";\n  document.getElementById('display-exam').style.display = \"initial\";\n\n  document.body.style.background = \"white\";\n  document.body.style.overflow = \"scroll\";\n  populateExam(code, firebase.database().ref(\"Teachers/\" + plaintext.split(\";\")[1] + \"/Classes/\" + plaintext.split(\";\")[2] + \"/Exams/\" + code));\n  toggleFullScreen();\n\n\n  // listen for alt+tab changes and act upon them\n  window.onblur = function() {\n    toggleFullScreen();\n  }\n\n  canCount = true;\n\n  firebase.database().ref(\"Teachers/\" + sessionStorage.getItem('teacher') + \"/Classes/\" + sessionStorage.getItem('className') + \"/Exams/\" + sessionStorage.getItem(\"ExamCode\")).once('value').then(function(snapshot) {\n    snapshot.forEach(function(childSnapshot) {\n      if(childSnapshot.val().examCode != undefined) {\n        sessionStorage.setItem(\"timeLimit\", childSnapshot.val().examTotalMins);\n      }\n    });\n  });\n\n  firebase.database().ref(\"Teachers/\" + sessionStorage.getItem('teacher') + \"/Classes/\" + sessionStorage.getItem('className') + \"/Exams/\" + sessionStorage.getItem(\"ExamCode\") + \"/taken\").push(sessionStorage.getItem('idNum'));\n}\n\n//pull and populate exam\nfunction populateExam(code, ref) {\n  firebase.database().ref(ref).once('value').then(function(snapshot) {\n    snapshot.forEach(function(childSnapshot) {\n      var val = childSnapshot.val();\n\n      if(val.examCode != undefined){\n        var counter = 0;\n\n        document.getElementById('exam-code').innerHTML = val.examCode + \" | \" + sessionStorage.getItem(\"StudentName\");\n\n        if(val.examDate.split(\"-\")[1] != null) {\n          document.getElementById('date').innerHTML = val.examTeacher + \" | \" + val.examDate.split(\"-\")[1] + \"-\" + val.examDate.split(\"-\")[2] + \"-\" + val.examDate.split(\"-\")[0];\n        }\n        else {\n          var dateJS = new Date();\n          document.getElementById('date').innerHTML = val.examTeacher + \" | \" + (dateJS.getMonth()+1)+'-'+dateJS.getDate()+'-'+dateJS.getFullYear();\n        }\n\n        document.getElementById('description').value = val.examDescription;\n\n        var title = val.examTitle;\n        if(title == \"\") {\n          title = \"Untitled\";\n        }\n        document.getElementById('nameOfExam').innerHTML = title;\n\n        document.getElementsByClassName('points')[0].innerHTML = val.examTotalPoints;\n        document.getElementsByClassName('time')[0].innerHTML = val.examTotalMins;\n\n        $(document.getElementById('finalDiv')).empty();\n\n        for(var i = 0; i < Object.keys(val.questions).length; i++) {\n\n          done.push(0);\n          var localQuestions = document.getElementsByClassName('question');\n          var question = childSnapshot.val().questions[i];\n\n          createQuestion(true, Object.keys(question.choices).length);\n          createQuestionTracker(i + 1, true);\n\n          localQuestions[i].childNodes[1].value = question.title;\n          localQuestions[i].childNodes[2].childNodes[1].innerHTML = question.points;\n\n          if(question.imgSrc != \"\") {\n            var src = question.imgSrc;\n            localQuestions[i].childNodes[2].childNodes[3].style.display = \"initial\";\n            localQuestions[i].childNodes[2].childNodes[3].onclick = function() {\n              swal({\n                icon: src,\n                text: question.imgShortDescription,\n                className: \"imgView\"\n              });\n            }\n          }\n\n          changeQuestionType(question.type, i);\n\n          if(question.type == \"mc\") {\n            for(var j = 0; j < Object.keys(question.choices).length; j++){\n              if(question.choices[j].value != undefined){\n                localQuestions[i].childNodes[3].childNodes[j].childNodes[1].innerHTML = (question.choices[j].value);\n              }\n              else {\n                localQuestions[i].childNodes[3].childNodes[j].childNodes[1].innerHTML = (question.choices[j]);\n              }\n            }\n          }\n\n          else if(question.type == \"matching\"){\n            document.getElementsByClassName('matching')[i].childNodes[0].value = question.numBoxes;\n            for(var j = 0; j < question.numBoxes; j++) {\n              createMatchingElement(document.getElementsByClassName('matching-wrapper')[i], j + 1);\n            }\n\n            var localBoxes = document.getElementsByClassName('matchingbox');\n            for(var k = 0; k < localBoxes.length; k++) {\n              localBoxes[k].childNodes[1].value = question.choices[k].split(\";\")[0];\n              localBoxes[k].childNodes[3].value = question.choices[k].split(\";\")[1];\n            }\n          }\n        }\n      }\n    });\n  });\n   setTimeout(function(){\n     var questions = (document.getElementsByClassName('question'));\n     var exam = document.getElementById('exam');\n\n     //convert HTMLcollection to array and shuffle\n     originalOrder = questions;\n     var questionsArr = shuffle(Array.prototype.slice.call( questions ));\n\n     $('.questionBr').remove(); $('.questionHr').remove(); $('.question').remove();\n\n     for(var m = 0; m < questionsArr.length; m++) {\n       exam.appendChild(questionsArr[m]);\n       exam.appendChild(document.createElement('br'));\n       exam.appendChild(document.createElement('hr'));\n     }\n     restructureQuestions();\n   }, 500);\n}\n\nfunction shuffle(array) {\n  var currentIndex = array.length, temporaryValue, randomIndex;\n\n  // While there remain elements to shuffle...\n  while (0 !== currentIndex) {\n\n    // Pick a remaining element...\n    randomIndex = Math.floor(Math.random() * currentIndex);\n    currentIndex -= 1;\n\n    // And swap it with the current element.\n    temporaryValue = array[currentIndex];\n    array[currentIndex] = array[randomIndex];\n    array[randomIndex] = temporaryValue;\n  }\n\n  return array;\n}\n\n//function to restructure if question is deleted in the middle\nfunction restructureQuestions() {\n  var questions = document.getElementsByClassName('question');\n\n  for(var i = 0; i < questions.length; i++) {\n    var question = questions[i];\n\n    question.childNodes[0].innerHTML = i + 1 + \". \"\n    question.id = i + 1;\n  }\n}\n\n//function to dynamically change type of question\nfunction changeQuestionType(val, i) {\n  if(val == \"mc\") {\n    document.getElementsByClassName(\"mc\")[i].style.display = \"initial\";\n\n    if(document.getElementsByClassName(\"fr\")[i] != undefined) {\n      document.getElementsByClassName(\"fr\")[i].style.display = \"none\";\n    }\n\n    if(document.getElementsByClassName(\"tf\")[i] != undefined) {\n      document.getElementsByClassName(\"tf\")[i].style.display = \"none\";\n    }\n\n    if(document.getElementsByClassName(\"matching\")[i] != undefined) {\n      document.getElementsByClassName(\"matching\")[i].style.display = \"none\";\n    }\n  }\n  else if(val == \"fr\") {\n    document.getElementsByClassName(\"mc\")[i].style.display = \"none\";\n\n    if(document.getElementsByClassName(\"tf\")[i] != undefined) {\n      document.getElementsByClassName(\"tf\")[i].style.display = \"none\";\n    }\n\n    if(document.getElementsByClassName(\"matching\")[i] != undefined) {\n      document.getElementsByClassName(\"matching\")[i].style.display = \"none\";\n    }\n\n    document.getElementById(i + 1).appendChild(createFreeResponse());\n  }\n  else if(val == \"tf\") {\n    document.getElementsByClassName(\"mc\")[i].style.display = \"none\";\n\n    if(document.getElementsByClassName(\"fr\")[i] != undefined) {\n      document.getElementsByClassName(\"fr\")[i].style.display = \"none\";\n    }\n\n    if(document.getElementsByClassName(\"matching\")[i] != undefined) {\n      document.getElementsByClassName(\"matching\")[i].style.display = \"none\";\n    }\n\n    document.getElementById(i + 1).appendChild(createTrueFalse());\n  }\n  else if(val == \"matching\") {\n    document.getElementsByClassName(\"mc\")[i].style.display = \"none\";\n\n    if(document.getElementsByClassName(\"fr\")[i] != undefined) {\n      document.getElementsByClassName(\"fr\")[i].style.display = \"none\";\n    }\n\n    if(document.getElementsByClassName(\"tf\")[i] != undefined) {\n      document.getElementsByClassName(\"tf\")[i].style.display = \"none\";\n    }\n\n    document.getElementById(i + 1).appendChild(createMatching());\n  }\n}\n\n\n// True | False\nfunction createTrueFalse() {\n  var label = document.createElement('label');\n  label.id = \"label\";\n  label.className = \"tf\";\n\n  var true_input = document.createElement('input');\n  true_input.style.outline = \"none\";\n  true_input.type = \"radio\";\n  true_input.className = \"option-input radio\";\n  true_input.name = \"tf_radio\"\n\n  var false_input = document.createElement('input');\n  false_input.style.outline = \"none\";\n  false_input.type = \"radio\";\n  false_input.className = \"option-input radio\";\n  false_input.style.marginLeft = \"10%\";\n  false_input.name = \"tf_radio\"\n\n  var true_span = document.createElement('span');\n  true_span.innerHTML = \" True\";\n  true_span.style.marginLeft = \"10px\";\n  true_span.style.color = \"gray\"\n  true_span.style.fontWeight = 'normal';\n\n  var false_span = document.createElement('span');\n  false_span.innerHTML = \" False\";\n  false_span.style.marginLeft = \"10px\";\n  false_span.style.color = \"gray\"\n  false_span.style.fontWeight = 'normal';\n\n  label.appendChild(true_input);\n  label.appendChild(true_span)\n\n  label.appendChild(false_input);\n  label.appendChild(false_span)\n\n  return label;\n}\n\n// function for Free-Response\nfunction createFreeResponse() {\n  var ta = document.createElement('textarea');\n\n  // read when user changes text area\n  ta.oninput = function() {\n    setTimeout(function(){\n      done[parseInt(ta.parentNode.id) - 1] = 1;\n\n      if(done.indexOf(0) == -1) {\n        document.getElementById('submit-exam').style.display = 'initial';\n        document.getElementById('submit-exam-disabled').style.display = \"none\";\n      }\n    }, 100)\n  }\n\n  ta.className = \"fr\";\n  ta.placeholder = \"NOTE: This question requires manual grading\";\n  return ta;\n}\n\n// function to create matching boxes\nfunction createMatching(){\n  var matchingWrapper = document.createElement('div');\n  matchingWrapper.className = \"matching-wrapper\";\n\n  var matching = document.createElement('div');\n  matching.className = 'matching';\n\n  var hr = document.createElement('hr');\n  hr.style.width = '67%';\n\n  var questions = document.createElement('span');\n  questions.innerHTML = 'Questions';\n  questions.style.marginLeft = \"1.5vw\";\n\n  var results = document.createElement('span');\n  results.innerHTML = 'Results (Will Be Randomized)'\n  results.style.marginLeft = \"22.5vw\";\n\n  var numElements = document.createElement('input');\n  numElements.type = 'textbox';\n  numElements.placeholder = '# Of Elements...';\n  numElements.style.borderRadius = \"5px\";\n  numElements.style.padding = \"5px\";\n  numElements.style.border= \"1px solid black\";\n  numElements.style.fontSize = \"15px\";\n\n  numElements.onkeyup = function() {\n    $(matchingWrapper).empty();\n\n    if(this.value <= 20) {\n      for(var i = 0; i < this.value; i++) {\n        createMatchingElement(matchingWrapper, i + 1);\n      }\n    }\n    else {\n      this.value = \"\";\n\n      var alert = document.createElement('div');\n      alert.innerHTML = \"20 Elements Max!\"\n      alert.style.textAlign = \"center\";\n      alert.style.width = \"100%\";\n      alert.style.position = \"fixed\";\n      alert.style.zIndex = \"100000\";\n      alert.style.top = \"0\";\n      alert.className = \"alert alert-danger\";\n      alert.role = \"alert\";\n\n      document.getElementById('create-exam').appendChild(document.createElement('center').appendChild(alert));\n\n      setTimeout(function(){ document.getElementsByClassName('alert')[0].remove(); }, 2500);\n    }\n  }\n\n  var newBox = document.createElement('button');\n  newBox.id = \"newBox\";\n  newBox.innerHTML = \"New Element!\";\n\n  newBox.onclick = function() {\n    createMatchingElement(matchingWrapper, document.getElementsByClassName('matchingbox').length + 1);\n    saveExam(false);\n  }\n\n  matching.appendChild(numElements);\n  matching.appendChild(hr);\n  matching.appendChild(questions); matching.appendChild(results);\n  matching.appendChild(matchingWrapper);\n\n  matching.appendChild(document.createElement('br'));\n  matching.appendChild(newBox);\n\n  return matching;\n}\n\n// function to create matching Elements\nfunction createMatchingElement(div, i) {\n  var box = document.createElement('div');\n  box.className = 'matchingbox';\n\n  var labelTrash = document.createElement('span');\n  labelTrash.className = \"glyphicon glyphicon-minus\";\n  labelTrash.style.display = \"none\";\n  labelTrash.style.marginRight = \"5px\";\n  labelTrash.style.color = \"#f25555\";\n\n  $(labelTrash).click(function(){\n    this.parentNode.remove();\n    saveExam(false);\n    restructureBoxes();\n  });\n\n  $(box).hover(function(){\n    this.childNodes[0].style.display = \"initial\";\n  }, function(){\n    this.childNodes[0].style.display = \"none\";\n  });\n\n  $(labelTrash).hover(function(){\n    this.style.cursor=\"pointer\";\n    this.style.color = \"#f25555\";\n  }, function(){\n\n  });\n\n  box.appendChild(labelTrash)\n\n  var num = document.createElement('span');\n  num.innerHTML = i + \".\";\n  num.style.marginRight = \"10px\";\n  num.style.fontSize = \"15px\";\n\n  box.appendChild(num);\n\n  var input = document.createElement('input');\n  input.type = 'textbox';\n  input.style.marginTop = \"20px\";\n  input.style.textAlign = \"center\";\n  input.placeholder = \"1 + 1\";\n  input.id = 'result';\n\n  var arrow = document.createElement('span');\n  arrow.className = 'glyphicon glyphicon-arrow-right';\n  arrow.style.paddingLeft = '5vw';\n\n  var result_input = document.createElement('input');\n  result_input.type = 'textbox';\n  result_input.style.marginLeft = \"5vw\";\n  result_input.style.textAlign = \"center\";\n  result_input.placeholder = \"2\";\n  result_input.id = 'result';\n\n  box.appendChild(input);\n  box.appendChild(arrow);\n  box.appendChild(result_input);\n  div.appendChild(box);\n}\n\n// function to create HTML question\nfunction createQuestion(loading, numAnswerChoices) {\n  var exam = document.getElementById('exam');\n\n  var question = document.createElement('div');\n  question.className = \"question\";\n  question.id = document.getElementsByClassName('question').length + 1;\n  question.dataset.original = document.getElementsByClassName('question').length + 1;\n\n  var num = document.createElement('span');\n  num.innerHTML = document.getElementsByClassName('question').length + 1 + \". \";\n  num.style.color = \"#97a5aa\";\n\n  var hr = document.createElement('hr');\n  hr.className = \"questionHr\";\n\n  var br = document.createElement('br');\n  br.className = \"questionBr\";\n\n  var question_title = document.createElement('input');\n  question_title.readOnly = true;\n  question_title.type = \"text\";\n  question_title.placeholder = \"Ex: What's Your Name?\";\n  question_title.id = \"question-title\";\n\n  question.appendChild(num);\n  question.appendChild(question_title);\n\n  var viewImage = document.createElement(\"a\");\n  viewImage.innerHTML = \"View Image\";\n  viewImage.style.marginLeft = \"10px\";\n  viewImage.style.display = \"none\";\n\n  var points = document.createElement('div');\n  points.id = \"points\";\n  var span = document.createElement('span');\n  span.innerHTML = \"( \";\n\n  var numPoints = document.createElement('span');\n  numPoints.type = \"text\";\n  numPoints.id = \"numPoints\";\n  numPoints.placeholder = \"Ex: 4\";\n\n  var finishingSpan =  document.createElement('span');\n  finishingSpan.innerHTML = \" points)\";\n\n  points.appendChild(span); points.appendChild(numPoints); points.appendChild(finishingSpan);\n  points.appendChild(viewImage);\n\n  question.appendChild(points);\n\n  var answer_choices = document.createElement('div');\n  answer_choices.className = \"mc\";\n\n  for(var i = 0; i < numAnswerChoices; i++) {\n    var label = document.createElement('label');\n    label.id = \"label\";\n\n    var input = document.createElement('input');\n    input.style.outline = \"none\";\n    input.type = \"radio\";\n    input.className = \"option-input radio\";\n    input.name = num.innerHTML;\n\n    var answer_choice = document.createElement('span');\n    answer_choice.className = \"option\";\n    answer_choice.id = \"question-choice\";\n\n    label.appendChild(input);\n    label.appendChild(answer_choice);\n    answer_choices.appendChild(label);\n  }\n  question.appendChild(answer_choices);\n\n  exam.appendChild(question);\n  exam.appendChild(br);\n  exam.appendChild(hr);\n\n\n  if(!loading) {\n    window.scroll({ top: question.getBoundingClientRect().top + window.scrollY, behavior: 'smooth' });\n    createQuestionTracker(document.getElementsByClassName('question').length, false);\n  }\n}\n\nfunction createQuestionTracker(i, populating) {\n  if(i == 2 && !populating) {\n    createQuestionTracker(1, false);\n  }\n  var manager = document.getElementById('questionNums');\n  var finalDiv = document.getElementById('finalDiv');\n\n  var tracker = document.createElement('span');\n  tracker.innerHTML = \"&#x25CC;\"\n  tracker.style.fontSize = \"60px\";\n  tracker.style.position = \"relative\";\n  tracker.style.bottom = \"20px\";\n  tracker.style.color = \"#58f\";\n  tracker.style.left = \"125px\";\n\n  tracker.id = \"question-tracker\";\n  tracker.className = i;\n\n  $(tracker).hover(function(){\n    var text = tracker.childNodes[1];\n\n    if(navigator.userAgent.toLowerCase().indexOf('safari/') > -1 || /Chrome/.test(navigator.userAgent) && /Google Inc/.test(navigator.vendor)) {\n      text.style.right = \"22.5px\";\n    }\n\n    this.style.cursor = \"pointer\";\n    this.innerHTML = \"&#x25CF;\";\n    this.appendChild(text);\n\n    this.style.bottom = '25px';\n    this.style.transition = 'all .5s';\n\n    tracker.childNodes[1].style.color = \"white\";\n  }, function(){\n    var text = tracker.childNodes[1];\n    this.innerHTML = \"&#x25CC;\";\n\n    if(navigator.userAgent.toLowerCase().indexOf('safari/') > -1 || /Chrome/.test(navigator.userAgent) && /Google Inc/.test(navigator.vendor)) {\n      text.style.right = \"27.5px\";\n    }\n\n    this.style.bottom = '20px';\n    this.style.transition = 'all .5s';\n\n    this.appendChild(text);\n    tracker.childNodes[1].style.color = \"black\";\n  });\n\n  tracker.onclick = function() {\n    document.getElementById(i).scrollIntoView({block: \"center\"});\n  }\n\n  var center = document.createElement('center');\n  var text = document.createElement('div');\n  text.id = \"text\";\n  text.innerHTML = i;\n\n  if(navigator.userAgent.toLowerCase().indexOf('safari/') > -1 || /Chrome/.test(navigator.userAgent) && /Google Inc/.test(navigator.vendor)) {\n    text.style.right = \"27.5px\";\n  }\n\n  tracker.appendChild(text);\n\n  finalDiv.appendChild(tracker);\n  manager.appendChild(finalDiv);\n  manager.scrollTop = (manager.clientHeight + manager.clientHeight);\n}\n\n//toggleFullScreen\nfunction toggleFullScreen() {\n  if (!document.fullscreenElement) {\n    document.addEventListener('contextmenu', event => event.preventDefault());\n    document.documentElement.requestFullscreen();\n  }\n  else {\n    if (document.exitFullscreen) {\n      document.exitFullscreen();\n    }\n  }\n}\n\n//function to end test\nfunction endTest() {\n  window.location.href = window.location.href;\n}\n\nfunction getChecked(question) {\n  var type = question.childNodes[Object.keys(question.childNodes)[question.childNodes.length - 1]];\n\n  if(type.className == \"mc\") {\n    for(var i = 0; i < type.childNodes.length; i++) {\n      if(type.childNodes[i].childNodes[0].checked == true) {\n        return i;\n      }\n    }\n  }\n\n  else if(type.className == \"tf\") {\n    if(type.childNodes[0].checked) {\n      return 0;\n    }\n    else {\n      return 1;\n    }\n  }\n\n  else if(type.className == \"matching\"){\n    type = \"matching\";\n    return 15;\n  }\n\n  else if(type.className == \"fr\"){\n    return type.value;\n  }\n}\n\nfunction bubbleSort(array) {\n  for(var i = 0; i < array.length; i++) {\n    for(var j = 1; j < array.length; j++) {\n      if(array[j - 1].dataset.original > array[j].dataset.original) {\n        var temp = array[j-1];\n        array[j-1] = array[j];\n        array[j] = temp;\n      }\n    }\n  }\n  return array;\n}\n\n// submit code - reroute!\nfunction submitExam() {\n  var student_answers = [];\n  var sortedArray = bubbleSort(Array.prototype.slice.call( originalOrder ));\n  console.log(bubbleSort(Array.prototype.slice.call( originalOrder )));\n\n  for(var i = 0; i < sortedArray.length; i++) {\n    var question = sortedArray[i];\n    var checked = getChecked(question);\n\n    student_answers.push(i + \";\" + checked);\n  }\n\n  sessionStorage.setItem(\"student_answers\", JSON.stringify(student_answers));\n\n  document.getElementById('display-exam').style.display = \"none\";\n  document.getElementById('result').style.display = \"initial\";\n\n  displayResults();\n}\n\n// function to display results\nfunction displayResults() {\n  var answers = JSON.parse(sessionStorage.getItem('student_answers'));\n  var dbAnswers;\n  var responseStructure = {};\n\n  firebase.database().ref(\"Teachers/\" + sessionStorage.getItem('teacher') + \"/Classes/\" + sessionStorage.getItem('className') + \"/Exams/\" + sessionStorage.getItem(\"ExamCode\")).once('value').then(function(snapshot) {\n    snapshot.forEach(function(childSnapshot) {\n      if(childSnapshot.toJSON().questions != undefined) {\n        dbAnswers = childSnapshot.toJSON();\n      }\n    });\n\n    var total = 0;\n    var frTotalPoints = 0;\n\n    for(var i = 0; i < originalOrder.length; i++) {\n      var answer = \"\";\n      var fr = false;\n      var tf = false;\n\n      if(dbAnswers.questions[i].type == \"tf\") {\n        tf = true;\n        if(answers[i].split(\";\")[1] == 1) {\n          answer = \"false\";\n        }\n        else {\n          answer = \"true\";\n        }\n\n        if(answer == dbAnswers.questions[i].choices[0]){\n          total += parseInt(dbAnswers.questions[i].points);\n          createCorrectBox(dbAnswers.questions[i].title, answers[i].split(\";\")[0], parseInt(dbAnswers.questions[i].points));\n        }\n        else {\n          createIncorrectBox(dbAnswers.questions[i].title, answers[i].split(\";\")[0], parseInt(dbAnswers.questions[i].points));\n        }\n      }\n      else if(dbAnswers.questions[i].type == \"mc\") {\n        answer = parseInt(answers[i].split(\";\")[1])\n      }\n      else {\n        fr = true;\n        createFrBox(dbAnswers.questions[i].title, answers[i].split(\";\")[0], parseInt(dbAnswers.questions[i].points));\n        frTotalPoints += parseInt(dbAnswers.questions[i].points);\n      }\n\n      if(!fr && !tf) {\n        if(answer == dbAnswers.questions[i].checked) {\n          total += parseInt(dbAnswers.questions[i].points);\n          createCorrectBox(dbAnswers.questions[i].title, answers[i].split(\";\")[0], parseInt(dbAnswers.questions[i].points));\n        }\n        else {\n          createIncorrectBox(dbAnswers.questions[i].title, answers[i].split(\";\")[0], parseInt(dbAnswers.questions[i].points));\n        }\n      }\n    }\n\n    var studentExamData = {\n      \"score\" : ((total / (dbAnswers.examTotalPoints - frTotalPoints)) * 100).toFixed(1),\n      \"time\" : timer,\n      \"answers\" : answers,\n      \"name\" : sessionStorage.getItem('StudentName'),\n      \"totalScore\" : (total / (dbAnswers.examTotalPoints) * 100).toFixed(1)\n    }\n\n    firebase.database().ref(\"Teachers/\" + sessionStorage.getItem('teacher') + \"/Classes/\" + sessionStorage.getItem('className') + \"/Exams/\" + sessionStorage.getItem(\"ExamCode\") + \"/responses/\" + sessionStorage.getItem('StudentName')).push(studentExamData);\n\n    var min = \" Minutes\"\n\n    if(timer == 1) {\n      min = \" Minute\"\n    }\n\n    document.getElementById('score').innerHTML = studentExamData.score + \"%\";\n    document.getElementById('score-num').innerHTML = (total + \" / \" + (dbAnswers.examTotalPoints - frTotalPoints) + \" in \" + timer + min);\n\n  });\n\n\n   var result = document.getElementById('result');\n}\n\nfunction createFrBox(title, num, points) {\n  var dataDiv = document.getElementById('question-data');\n\n  var box = document.createElement('div');\n  box.style.width = \"90vw\";\n  box.style.marginTop = \"10px\";\n  box.style.border = \"1px solid black\";\n  box.style.padding = \"15px\";\n  box.style.height = \"50px\";\n  box.style.background = \"#798893\";\n  box.style.color = \"white\";\n  box.style.borderRadius = \"6px\";\n  box.className = \"questionBox\";\n\n  var name = document.createElement('span');\n  name.innerHTML = parseInt(num) + 1 + \" | \" + title;\n  name.style.float = \"left\";\n  name.style.paddingLeft = \"10px\";\n\n  var pointsAwarded = document.createElement('span');\n  pointsAwarded.innerHTML = \"Free Response Questions Require Manual Grading (Points Possible: \" + points + \")\"\n  pointsAwarded.style.float = \"right\";\n  pointsAwarded.style.paddingRight = \"20px\";\n\n  box.appendChild(name);\n  box.appendChild(pointsAwarded);\n\n  dataDiv.appendChild(box);\n}\n\nfunction createCorrectBox(title, num, points) {\n  var dataDiv = document.getElementById('question-data');\n\n  var box = document.createElement('div');\n  box.style.width = \"90vw\";\n  box.style.marginTop = \"10px\";\n  box.style.border = \"1px solid black\";\n  box.style.padding = \"15px\";\n  box.style.height = \"50px\";\n  box.style.background = \"#84f277\";\n  box.style.borderRadius = \"6px\";\n  box.className = \"questionBox\";\n\n  var name = document.createElement('span');\n  name.innerHTML = parseInt(num) + 1 + \" | \" + title;\n  name.style.float = \"left\";\n  name.style.paddingLeft = \"10px\";\n\n  var pointsAwarded = document.createElement('span');\n  pointsAwarded.innerHTML = \"You Received \" + points + \" / \" + points + \" Points For This Question!\"\n  pointsAwarded.style.float = \"right\";\n  pointsAwarded.style.paddingRight = \"20px\";\n\n  box.appendChild(name);\n  box.appendChild(pointsAwarded);\n\n  dataDiv.appendChild(box);\n}\n\nfunction createIncorrectBox(title, num, points) {\n  var dataDiv = document.getElementById('question-data');\n\n  var box = document.createElement('div');\n  box.style.width = \"90vw\";\n  box.style.marginTop = \"10px\";\n  box.style.border = \"1px solid black\";\n  box.style.padding = \"15px\";\n  box.style.height = \"50px\";\n  box.style.background = \"#cc2d2d\";\n  box.style.color = \"white\";\n  box.style.borderRadius = \"6px\";\n  box.className = \"questionBox\";\n\n  var name = document.createElement('span');\n  name.innerHTML = parseInt(num) + 1 + \" | \" + title;\n  name.style.float = \"left\";\n  name.style.paddingLeft = \"10px\";\n\n  var pointsAwarded = document.createElement('span');\n  pointsAwarded.innerHTML = \"You Received \" + 0 + \" / \" + points + \" Points For This Question\"\n  pointsAwarded.style.float = \"right\";\n  pointsAwarded.style.paddingRight = \"20px\";\n\n  box.appendChild(name);\n  box.appendChild(pointsAwarded);\n\n  dataDiv.appendChild(box);\n}\n\n// window.onbeforeunload = function() {\n//    return \"Dude, are you sure you want to leave? Think of the kittens!\";\n// }\n\n// if user hits enter, check exam code\ndocument.addEventListener(\"keypress\", function(e) {\n  if (e.keyCode === 13 && !stopEnter) {\n    submitExamCode();\n  }\n}, false);\n\n//throw key away\nkey = \"\";\n"]}