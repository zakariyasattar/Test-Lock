parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"yFTU":[function(require,module,exports) {
null==sessionStorage.getItem("userInfo")&&(document.body.style.display="none",alert("NOT AUTHORIZED"));var e,t=[],n=[],a=[],l=[],d=[],i=0,s="ABCDEFGHIJKLMNOPQRSTUVWXYZ",o=!1,r=!1;window.onload=function(){se(),$(".dropdown").click(function(){$(".dropdown-menu").toggleClass("show")}),$("#description").focus(function(){$("#description").css("border","1px solid #458ec1")}).blur(function(){$("#description").css("border","1px solid lightgray")}),$("#create-exam").on("blur",":input",function(){y(!1)}),$("#create-exam").on("change","input:radio",function(){y(!1)}),$(window).scroll(function(){for(var e=1;e<document.getElementsByClassName("question").length+1;e++){var t=document.getElementById(e),n=$(window).scrollTop(),a=n+$(window).height(),l=$(t).offset().top;l+$(t).height()<=a&&l>=n?navigator.userAgent.toLowerCase().indexOf("safari/")>-1?(document.getElementById("question-manager").scrollTop=document.getElementById("question-tracker").clientHeight*(e-1),document.getElementsByClassName(e)[0].childNodes[0].innerHTML="&#x25CF;",document.getElementsByClassName(e)[0].childNodes[1].childNodes[0].style.color="white",document.getElementsByClassName(e)[0].childNodes[1].childNodes[0].style.marginRight="10px"):(document.getElementById("question-manager").scrollTop=document.getElementById("question-tracker").clientHeight*(e-1),document.getElementsByClassName(e)[0].childNodes[0].innerHTML="&#x25CF;",document.getElementsByClassName(e)[0].childNodes[1].childNodes[0].style.color="white"):navigator.userAgent.toLowerCase().indexOf("safari/")>-1?(document.getElementsByClassName(e)[0].childNodes[0].innerHTML="&#x25CC;",document.getElementsByClassName(e)[0].childNodes[1].childNodes[0].style.color="black",document.getElementsByClassName(e)[0].childNodes[1].childNodes[0].style.marginRight="0"):null!=document.getElementsByClassName(e)[0]&&(document.getElementsByClassName(e)[0].childNodes[0].innerHTML="&#x25CC;",document.getElementsByClassName(e)[0].childNodes[1].childNodes[0].style.color="black")}})};var c=JSON.parse(sessionStorage.getItem("userInfo"))[1],m=JSON.parse(sessionStorage.getItem("userInfo"))[2];function p(){var e=0;0==t.length&&firebase.database().ref("exam-codes").on("value",function(e){e.forEach(function(e){t.push(e.val().split(";")[0]),n.push(e.val().split(";")[1])})});var a=C(),l={examCode:a.toUpperCase(),examTitle:"",lastSaved:"",examType:"",examTotalPoints:"",examTotalMins:"",examDate:"",examDescription:"",questions:[{title:"",type:"",points:"",choices:[{value:""},{value:""},{value:""},{value:""}]}]};firebase.database().ref("Teachers/"+c+"/Classes/"+sessionStorage.getItem("className")+"/Exams/").once("value",function(t){t.forEach(function(t){"no_exams"==t.val()?firebase.database().ref("Teachers/"+c+"/Classes/"+sessionStorage.getItem("className")+"/Exams/").child(t.key).remove():e++})}),e<26?firebase.database().ref("Teachers/"+c+"/Classes/"+sessionStorage.getItem("className")+"/Exams/"+s[s.length-1-e]+a.toUpperCase()).push(l):firebase.database().ref("Teachers/"+c+"/Classes/"+sessionStorage.getItem("className")+"/Exams/"+s[s.length-1-e-26]+s[s.length-1-e-26]+a.toUpperCase()).push(l),te(!0,4),document.getElementById("create-exam").style.display="initial",document.getElementById("main").style.display="none",document.body.style.background="white",document.getElementById("exam-code").innerHTML=a.toUpperCase()}function u(){var e=document.createElement("div");e.innerHTML="Successfully Saved Exam!",e.style.textAlign="center",e.style.width="100%",e.style.position="fixed",e.style.zIndex="100000",e.style.top="0",e.className="alert alert-success",e.role="alert",document.getElementById("create-exam").appendChild(document.createElement("center").appendChild(e)),setTimeout(function(){document.getElementsByClassName("alert")[0].remove()},2500)}function y(e){e&&u();var t=(new Date).toLocaleString().replace(","," @");""==t&&(t=" Not Saved!"),document.getElementById("last-saved").innerHTML="Last Sync: "+t,document.getElementsByClassName("points")[0].value=h(),""!=document.getElementById("nameOfExam").value&&firebase.database().ref("exam-codes").once("value").then(function(e){e.forEach(function(e){e.val().split(";")[0]==document.getElementById("exam-code").innerHTML&&firebase.database().ref("exam-codes").child(e.key).set(e.val().split(";")[0]+";"+e.val().split(";")[1]+";"+e.val().split(";")[2]+";"+document.getElementById("nameOfExam").value)})});for(var n={examTeacher:c,examCode:document.getElementById("exam-code").innerHTML,examTitle:document.getElementById("nameOfExam").value,lastSaved:t,examTotalPoints:h(),examTotalMins:document.getElementsByClassName("time")[0].value,examDate:document.getElementById("date").value,examDescription:document.getElementById("description").value,questions:[]},a=document.getElementsByClassName("question"),l=new Array,d=0;d<a.length;d++){var i=(m=a[d]).childNodes,s=new Object;if(s.title=i[4].value,s.type=i[5].value,s.points=i[6].childNodes[1].value,s.checked=-1,s.imgSrc=i[6].childNodes[3].className,1!=e&&0!=e&&(s.imgShortDescription=e),s.choices=[],"mc"==s.type)for(var o=0;o<i[7].childNodes.length-1;o++)s.choices.push(i[7].childNodes[o].childNodes[2].value),1==i[7].childNodes[o].childNodes[1].checked&&(s.checked=o);else if("fr"==s.type)s.choices.push(i[8].value);else if("tf"==s.type)i[8].childNodes[0].checked?s.choices.push("true"):s.choices.push("false");else{var r=document.getElementsByClassName("matchingbox");s.numBoxes=r.length;for(d=0;d<r.length;d++){var m=r[d].childNodes[3].value,p=r[d].childNodes[5].value;s.choices.push(m+";"+p)}}l.push(s);var y=JSON.parse(JSON.stringify(l));$.extend(n,{questions:y})}var g="";firebase.database().ref("Teachers/"+c+"/Classes/"+sessionStorage.getItem("createExamClass")+"/Exams/").once("value").then(function(e){e.forEach(function(e){e.key.substring(1)==document.getElementById("exam-code").innerHTML&&(g=e.key)}),firebase.database().ref("Teachers/"+c+"/Classes/"+sessionStorage.getItem("createExamClass")+"/Exams/"+g).once("value").then(function(e){e.forEach(function(e){"responses"!=e.key&&"taken"!=e.key&&firebase.database().ref("Teachers/"+c+"/Classes/"+sessionStorage.getItem("createExamClass")+"/Exams/"+g).child(e.key).set(n)})})})}function h(){for(var e=document.getElementsByClassName("numPoints"),t=0,n=0;n<e.length;n++)""!=e[n].value&&(t+=parseInt(e[n].value));return t}function g(e,t){var n=document.getElementById("question-manager"),a=document.createElement("div");a.id="question-tracker",a.className=e,$(a).hover(function(){navigator.userAgent.toLowerCase().indexOf("safari/")>-1?(this.style.cursor="pointer",$(this).children()[0].innerHTML="&#x25CF;",this.childNodes[1].childNodes[0].style.color="white",this.childNodes[1].childNodes[0].style.marginRight="10px"):(this.style.cursor="pointer",$(this).children()[0].innerHTML="&#x25CF;",this.childNodes[1].childNodes[0].style.color="white")},function(){navigator.userAgent.toLowerCase().indexOf("safari/")>-1?(this.childNodes[1].childNodes[0].style.color="black",$(this).children()[0].innerHTML="&#x25CC;",this.childNodes[1].childNodes[0].style.marginRight="0"):(this.childNodes[1].childNodes[0].style.color="black",$(this).children()[0].innerHTML="&#x25CC;")}),a.onclick=function(){document.getElementById(e).scrollIntoView({block:"center"})};var l=document.createElement("div");l.id="circle",l.innerHTML="&#x25CC;";var d=document.createElement("center"),i=document.createElement("div");i.id="text",i.innerHTML=e,d.appendChild(i),a.appendChild(l),a.appendChild(d),n.appendChild(a),n.scrollTop=n.clientHeight+n.clientHeight}function E(e,t){var n=t.split("/");n.pop(),firebase.database().ref(n.join().split(",").join("/")).once("value").then(function(t){t.forEach(function(t){t.key.substring(1)==e&&firebase.database().ref(n.join().split(",").join("/")+"/"+t.key).once("value").then(function(e){e.forEach(function(e){var t=e.val();if(null!=t.examCode){document.getElementById("last-saved").innerHTML="Last Sync: "+t.lastSaved,document.getElementById("exam-code").innerHTML=t.examCode,document.getElementById("date").value=t.examDate,document.getElementById("description").value=t.examDescription,document.getElementById("nameOfExam").value=t.examTitle,document.getElementsByClassName("time")[0].value=t.examTotalMins;for(var n=0;n<Object.keys(t.questions).length;n++){var a=document.getElementsByClassName("question"),l=e.val().questions[n];if(null!=l.choices&&"matching"!=l.type)if(te(!0,Object.keys(l.choices).length),g(n+1,!0),a[n].childNodes[4].value=l.title,a[n].childNodes[6].childNodes[1].value=l.points,a[n].childNodes[5].value=l.type,""!=l.imgSrc&&(a[n].childNodes[6].childNodes[3].style.display="initial",a[n].childNodes[6].childNodes[3].onclick=function(){swal({icon:l.imgSrc,text:l.imgShortDescription,className:"imgView"})}),J(l.type,n,"mc"),"mc"==l.type)for(var d=0;d<Object.keys(l.choices).length;d++)null!=l.choices[d].value?(a[n].childNodes[7].childNodes[d].childNodes[2].value=l.choices[d].value,d==l.checked&&f(a[n].childNodes[7].childNodes[d].childNodes[1])):(a[n].childNodes[7].childNodes[d].childNodes[2].value=l.choices[d],d==l.checked&&f(a[n].childNodes[7].childNodes[d].childNodes[1]));else"fr"==l.type?a[n].childNodes[8].value=l.choices[0]:"tf"==l.type&&("true"==l.choices[0]?a[n].childNodes[8].childNodes[0].checked=!0:a[n].childNodes[8].childNodes[2].checked=!0)}}})})})}),setTimeout(function(){document.getElementsByClassName("points")[0].value=h()},200)}function f(e){setTimeout(function(){e.checked=!0},200)}function v(e){null!=$("#exam-wrapper")&&$("#exam-wrapper").empty();var t=0,n=0,a=0,d=0;document.getElementById("welcome-div").style.display="none",document.getElementById("wrapper").style.display="none",document.getElementById("classSpecific").style.display="initial",document.getElementById("exam-wrapper").style.display="grid",document.getElementById("main-header").innerHTML="Welcome to "+e,document.body.style.backgroundImage="linear-gradient(to top, #dfe9f3 0%, white 100%)",sessionStorage.setItem("createExamClass",e),firebase.database().ref("Teachers/"+c+"/Classes/"+e+"/Exams/").on("value",function(i){l.push(i.val()),0,i.forEach(function(l){for(var i in l.child("responses").forEach(function(e){d++,t++;var l=e.val()[Object.keys(e.val())[0]].score;n+=parseInt(l),a+=parseInt(l)}),l.val()){if("no_exams"!=l.val()){U(l.val()[i].examTitle,(a/d).toFixed(1),"Teachers/"+c+"/Classes/"+e+"/Exams/"+l.key,l.val()[i].examCode);var s=l.val()[i].examTitle;if(""!=sessionStorage.getItem("CreatedExamCode")){var o=document.getElementById("cached-code");null!=o&&(o.id="cached-exam-button",o.style.display="inline-block",console.log(o),o.onclick=function(){document.getElementById("create-exam").style.display="initial",document.getElementById("main").style.display="none",document.body.style.background="white",console.log(sessionStorage.getItem("CreatedExamCode").toUpperCase()),E(sessionStorage.getItem("CreatedExamCode").toUpperCase(),"Teachers/"+c+"/Classes/"+sessionStorage.getItem("createExamClass")+"/Exams/"+sessionStorage.getItem("CreatedExamCode").toUpperCase())})}""==l.val()[i].examTitle&&(s=l.val()[i].examCode),null!=sessionStorage.getItem("CreatedExamCode")&&sessionStorage.getItem("CreatedExamCode").toUpperCase()==l.val()[i].examCode?(console.log(sessionStorage.getItem("CreatedExamCode").toUpperCase(),l.val()[i].examCode),document.getElementById("cached-exam-button").style.display="initial",document.getElementById("cached-exam-code").innerHTML="Edit "+s):null!=document.getElementById("cached-exam-button")&&(document.getElementById("cached-exam-button").style.display="none");break}document.getElementById("no-exams").style.display="initial"}a=0,d=0}),"NaN"==(n=(n/=t).toFixed(1))?document.getElementById("avg-grade-number").innerHTML="No Data":(document.getElementById("avg-grade-number").innerHTML=n+"%",sessionStorage.setItem("avg-grade-number",n+"%"))})}function C(){var e=Math.random().toString(36).replace(/[^a-z]+/g,"").substr(0,5),n="",a=document.getElementById("main-header").innerHTML.substring(document.getElementById("main-header")).split(" ");a.shift(),a.shift();for(var l=0;l<a.length;l++)l!=a.length-1?n+=a[l]+" ":n+=a[l];if(-1==t.indexOf(e))return firebase.database().ref("exam-codes").push(e.toUpperCase()+";"+c+";"+n+";"+e.toUpperCase()),sessionStorage.setItem("CreatedExamCode",e),e;C()}function b(e){e.matches?document.getElementById("dropdown").style.display="none":document.getElementById("dropdown").style.display="initial"}document.getElementById("welcome-text").innerHTML="Welcome "+c+"!",document.getElementById("profile").src=m,$("#profile").click(function(){swal({title:"Sign Out",text:"Are You Sure You Want To Sign Out?",icon:"warning",buttons:["Cancel","Sign Me Out!"]}).then(function(e){e&&(window.location.href="index.html?noRedirect")})});var x=window.matchMedia("(min-width: 601px)");function I(e){if(o){document.getElementsByClassName("table")[0].style.display="table",document.getElementById("topPage").style.display="initial",document.getElementById("examSpecific").style.display="inherit",document.getElementById("classSpecific").style.display="none",document.getElementById("exam-wrapper").style.display="none",document.body.style.backgroundImage="linear-gradient(135deg, rgb(245, 247, 250) 0%, rgb(195, 207, 226) 100%);"}else{var t=0,n=0,i="a:-1000",s="a:1000",r=!1,m=[];document.getElementById("welcome-div").style.display="none",document.getElementById("wrapper").style.display="none",document.getElementById("classSpecific").style.display="none",document.getElementById("exam-wrapper").style.display="none",document.getElementById("examSpecific").style.display="initial",document.getElementById("sort-menu").style.display="initial",document.getElementById("exam-name").innerHTML=e,document.body.style.backgroundImage="linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%)";var p=document.createElement("i");p.className="glyphicon glyphicon-circle-arrow-up",p.id="topPage",p.onclick=function(){document.body.scrollTop=0,document.documentElement.scrollTop=0},document.getElementById("main").appendChild(document.createElement("br")),document.getElementById("main").appendChild(p);var u="",y="";for(var h in l)if(a.hasOwnProperty(h)){var g=l[h];for(var f in g)for(var v in g[f])if(null!=g[f][v].examCode&&Object.keys(g[f]).length>1){var C=g[f][v].examCode;if(sessionStorage.setItem("populatedExamCode",C),e==g[f][v].examTitle&&(u=C,y=f,document.getElementById("edit-exam").innerHTML=e,document.getElementById("edit-current-exam").style.display="initial",document.getElementById("edit-current-exam").onclick=function(){document.getElementById("create-exam").style.display="initial",document.getElementById("main").style.display="none",document.body.style.background="white",E(u,"Teachers/"+c+"/Classes/"+sessionStorage.getItem("createExamClass")+"/Exams/"+y)},document.getElementById("view-item-analysis").style.display="initial",document.getElementById("view-item-analysis").onclick=function(){document.getElementById("main").style.display="none",document.getElementById("item-analysis").style.display="inline-block",document.body.style.backgroundImage="linear-gradient(to bottom, #6a85b6 0%, #bac8e0 100%)",document.getElementById("item-analysis-name").innerHTML=e,T(u,"Teachers/"+c+"/Classes/"+sessionStorage.getItem("createExamClass")+"/Exams/"+y)}),!g.hasOwnProperty(f))continue;var b=g[f][v].examTitle;if(""==b&&(b=g[f][v].examCode.substring(1)),b==e){var x,I=document.createElement("div");(x=document.createElement("table")).id="random",x.className="table table-striped",x.style.width="100vw";var N=document.createElement("tr");N.style.color="darkgray";var L=document.createElement("td");L.innerHTML="Name",L.style.paddingLeft="66px",L.id="name";var M=document.createElement("td");M.innerHTML="Score (%)",M.id="score";var H=document.createElement("td");H.innerHTML="Percentile",H.id="percentile";var k=document.createElement("td");k.innerHTML="Time",k.id="time",N.appendChild(L),N.appendChild(M),N.appendChild(H),N.appendChild(k),x.appendChild(N)}}else if(Object.keys(g[f]).length>1&&!r)for(var w in r=!0,g[f].responses){var O=g[f].responses[w][Object.keys(g[f].responses[w])[0]];m.push(parseInt(O.score)),d.push(O.name+":"+O.score+":"+O.time),t+=parseInt(O.score),n=Object.keys(g[f].responses).length,parseInt(O.score)>parseInt(i.split(":")[1])&&(i=O.name+":"+parseInt(O.score)),parseInt(O.score)<parseInt(s.split(":")[1])&&(s=O.name+":"+parseInt(O.score));var $=document.createElement("tr");$.className=w;var q=f;$.onclick=function(){S(this.className,q)},x.appendChild(document.createElement("br"));var j=document.createElement("td");j.style.paddingLeft="66px",j.id="name";var A=document.createElement("td"),R=document.createElement("td"),F=document.createElement("td");j.innerHTML=O.name,j.id="name",A.innerHTML=O.score+"%",A.id="score",F.innerHTML=O.time+" Mins",F.id="time",R.innerHTML=B(parseInt(O.score),g[f].responses,O.name)+"th",R.id="percentile",$.appendChild(j),$.appendChild(A),$.appendChild(R),$.appendChild(F),x.appendChild($),I.appendChild(x),document.getElementById("main").appendChild(I)}}var P=document.getElementById("overall-data"),D=document.createElement("ul");D.style.float="right",D.style.marginRight="15vw";var U=document.createElement("li");U.innerHTML="Class Average: "+(t/n).toFixed(1)+"%",U.style.fontSize="20px";var W=document.createElement("li");W.innerHTML="Highest Scorer: "+i.split(":")[0]+" ("+i.split(":")[1]+"%)",W.style.fontSize="20px";var z=document.createElement("li");z.innerHTML="Lowest Scorer: "+s.split(":")[0]+" ("+s.split(":")[1]+"%)",z.style.fontSize="20px";var Y=document.createElement("li");mean=m.reduce(function(e,t){return e+t})/m.length,sd=Math.sqrt(m.map(function(e){return Math.pow(e-mean,2)}).reduce(function(e,t){return e+t})/m.length),Y.innerHTML="Standard Deviation (Ïƒ): "+sd.toFixed(3),Y.style.fontSize="20px",D.appendChild(U),D.appendChild(W),P.appendChild(document.createElement("br")),D.appendChild(z),D.appendChild(Y),P.appendChild(D)}o=!0}function T(e,t){var n=document.getElementById("item-analysis-data"),a=[];firebase.database().ref(t).once("value",function(e){for(var t in e.val().responses){var l=e.val().responses[t][[Object.keys(e.val().responses[t])[0]]];a.push(l.answers)}e.forEach(function(e){if(null!=e.val().examCode){var t=e.val().questions;for(var l in t){var d=t[l];N(n,d,a,l)}}})})}function N(e,t,n,a){var l=document.createElement("div"),d=document.createElement("span");d.style.color="#2e2f7d",d.style.paddingRight="20px",d.style.paddingLeft="20px",d.style.float="left",d.style.paddingRight="20px",d.style.borderRight="1px solid #2e2f7d",d.innerHTML=parseInt(a)+1,l.appendChild(d);var i=n.length,s=new Array(t.choices.length).fill(0),o=(new Array(2).fill(0),document.createElement("div"));if(o.className="progress",o.style.width="85%","mc"==t.type){for(var r=0;r<n.length;r++)s[parseInt(n[r][0].split(";")[1])]++;for(var c=0;c<s.length;c++)if(0!=s[c])if(c+1==t.checked){var m,p=s[c]/i*100+"%";(m=document.createElement("div")).className="progress-bar progress-bar-success progress-bar-striped",m.innerHTML="ABCDEFGHIJKLMNOPQRSTUVWXYZ".split("")[c]+" ("+p+")",setTimeout(function(){m.style.width=p},250),o.appendChild(m),console.log("appendedGreen")}else{var u;p=s[c]/i*100+"%";(u=document.createElement("div")).className="progress-bar progress-bar-danger progress-bar-striped",u.innerHTML="ABCDEFGHIJKLMNOPQRSTUVWXYZ".split("")[c]+" ("+p+")",setTimeout(function(){u.style.width=p},250),o.appendChild(u)}l.appendChild(o)}else"tf"==t.type||t.type;e.appendChild(document.createElement("br")),e.appendChild(l),e.appendChild(document.createElement("br")),e.appendChild(document.createElement("hr"))}function B(e,t,n){var a=0;for(var l in t)e>parseInt(t[l][Object.keys(t[l])[0]].score)?a++:e==parseInt(t[l][Object.keys(t[l])[0]].score)&&n!=t[l][Object.keys(t[l])[0]].name&&0;return 100*(a/Object.keys(t).length).toFixed(1)}function L(){for(var e=document.getElementsByTagName("LI"),t=0;t<e.length;t++)e[t].className=""}function M(e){if('<a href="#">Ping-Pong</a>'==e)document.getElementById("main").style.display="none",document.getElementById("pong").style.display="initial",document.getElementById("leaderboard").style.display="none",document.getElementById("feedback").style.display="none",document.getElementById("create-exam").style.display="none",document.getElementById("report-bug").style.display="none";else if('<a href="#">Dashboard</a>'==e)document.getElementById("main").style.display="initial",document.getElementById("pong").style.display="none",document.getElementById("leaderboard").style.display="none",document.getElementById("feedback").style.display="none",document.getElementById("create-exam").style.display="none",document.getElementById("report-bug").style.display="none";else if('<a href="#">Leaderboard</a>'==e)populateLeaderboard(),document.getElementById("feedback").style.display="none",document.getElementById("create-exam").style.display="none",document.getElementById("report-bug").style.display="none";else if('<a href="#">Feedback</a>'==e){document.getElementById("main").style.display="none",document.getElementById("pong").style.display="none",document.getElementById("leaderboard").style.display="none",document.getElementById("feedback").style.display="initial",document.getElementById("create-exam").style.display="none",document.getElementById("report-bug").style.display="none",$("#feedback-form").attr("src","https://forms.id/f/zakariyasattar.id.blockstack/56856430b7")}else if('<a href="#">Report A Bug!</a>'==e){document.getElementById("main").style.display="none",document.getElementById("pong").style.display="none",document.getElementById("leaderboard").style.display="none",document.getElementById("report-bug").style.display="initial",document.getElementById("feedback").style.display="none",document.getElementById("create-exam").style.display="none",$("#report-bug-form").attr("src","https://forms.id/f/zakariyasattar.id.blockstack/30e2bc327b")}}function H(){document.getElementById("classSpecific").style.display="none",document.getElementById("welcome-div").style.display="block",document.getElementById("wrapper").style.display="grid",document.getElementById("doesNotExist").style.display="none",document.getElementById("no-exams").style.display="none",document.getElementById("exam-wrapper").style.display="none",document.body.style.backgroundImage="none"}function k(){for(var e=document.getElementsByClassName("table"),t=0;t<e.length;t++)e[t].style.display="none";document.getElementById("topPage").style.display="none",document.getElementById("examSpecific").style.display="none",document.getElementById("classSpecific").style.display="initial",document.getElementById("exam-wrapper").style.display="grid",document.body.style.backgroundImage="linear-gradient(to top, rgb(223, 233, 243) 0%, white 100%)",$(document.getElementById("overall-data")).empty()}function w(){k(),H()}function S(e,t){document.getElementById("examSpecific").style.display="none",document.getElementById("student-exam-data").style.display="initial",document.body.style.backgroundImage="none";for(var n,a=document.getElementsByClassName("table"),l=0;l<a.length;l++)a[l].style.display="none";firebase.database().ref("Teachers/"+c+"/Classes/"+sessionStorage.getItem("className")+"/Students").once("value",function(t){for(var a in t.val()){var l=t.val()[a],d=l.split(";")[0],i=l.split(";")[1];e==i&&(n=d)}}),firebase.database().ref("Teachers/"+c+"/Classes/"+sessionStorage.getItem("className")+"/Exams/"+t).once("value",function(a){var l=a.val().responses[e][Object.keys(a.val().responses[e])[0]];document.getElementById("resetStatus").onclick=function(){for(var l in a.val().taken){a.val().taken[l]==n&&firebase.database().ref("Teachers/"+c+"/Classes/"+sessionStorage.getItem("className")+"/Exams/"+t+"/taken/").child(l).remove()}swal("Success!",e+"'s taken status has been reset. "+e+" should be able to retake exam now.","success")};var d=l.totalScore/100*a.val()[Object.keys(a.val())[0]].examTotalPoints;document.getElementById("score-num").innerHTML=d.toFixed(0)+" / "+a.val()[Object.keys(a.val())[0]].examTotalPoints,document.getElementById("score").innerHTML=l.totalScore+"%";var i="";sessionStorage.setItem("totalPointsExcludingFr",0);for(var s=0;s<Object.keys(l.answers).length;s++)"tf"==a.val()[Object.keys(a.val())[0]].questions[s].type?i=a.val()[Object.keys(a.val())[0]].questions[s].choices[0]:"mc"==a.val()[Object.keys(a.val())[0]].questions[s].type?i=a.val()[Object.keys(a.val())[0]].questions[s].checked:"fr"==a.val()[Object.keys(a.val())[0]].questions[s].type&&(i=""),O(l.answers[s].split(";")[1],i,Object.keys(a.val()[Object.keys(a.val())[0]].questions[s].choices).length,a.val()[Object.keys(a.val())[0]].questions[s].points,a.val()[Object.keys(a.val())[0]].questions[s],e,t,a.val()[Object.keys(a.val())[0]].examTotalPoints)})}function O(e,t,n,a,l,d,i,s){var o=0;"true"==t?(t="0",n=2):"false"==t&&(t="1",n=2);var r=!1;e==t&&(r=!0),"fr"!=l.type&&r&&sessionStorage.setItem("totalPointsExcludingFr",parseInt(sessionStorage.getItem("totalPointsExcludingFr"))+parseInt(l.points));var m=document.getElementById("question-data"),p=document.createElement("div");p.className="question",p.id=document.getElementsByClassName("question").length+1;var u=document.createElement("span");u.innerHTML=document.getElementsByClassName("question").length+1+". ",u.style.color="#97a5aa";var y=document.createElement("hr"),h=document.createElement("input");h.readOnly=!0,h.value=l.title,h.id="question-title",p.appendChild(u),p.appendChild(h),r&&(o=a);var g=document.createElement("div");g.id="points",(N=document.createElement("span")).innerHTML="( ";var E=document.createElement("span");E.type="text",E.id="numPoints",E.innerHTML=a;var f=document.createElement("span");f.className="pa",f.innerHTML=" points)  -  points awarded: "+o,g.appendChild(N),g.appendChild(E),g.appendChild(f),p.appendChild(g);var v=document.createElement("div");v.className="mc";for(var C=0;C<n;C++){var b=document.createElement("label");if(b.id="label",b.style.width="95%",r&&C==e||C==t){b.style.background="#e4f7e4",b.style.borderTop="1px solid #00cc00",b.style.borderBottom="1px solid #00cc00";var x=document.createElement("span");x.innerHTML="Correct Answer",x.style.float="right",x.style.fontWeight="normal",x.style.marginTop="10px",x.style.color="#00cc00",x.style.marginRight="15px",b.appendChild(x)}else if(!r&&C==e){b.style.background="#f2ebeb",b.style.borderTop="1px solid #cc5252",b.style.borderBottom="1px solid #cc5252",b.style.color="#cc5252";var I=document.createElement("span");I.innerHTML="Student Answer",I.style.float="right",I.style.fontWeight="normal",I.style.marginTop="10px",I.style.color="#cc5252",I.style.marginRight="15px",b.appendChild(I)}var T=document.createElement("input");T.disabled=!0,T.style.outline="none",T.type="radio",T.className="option-input radio",T.name=u.innerHTML;var N=document.createElement("span");"tf"!=l.type&&"fr"!=l.type?N.innerHTML=l.choices[C]:"tf"==l.type&&(N.innerHTML=0==C?"True":"False"),N.style.fontWeight="normal";var B=document.createElement("span");B.className="option",B.id="question-choice",b.appendChild(T),b.appendChild(B),b.appendChild(N),v.appendChild(b)}if("fr"==l.type){var L=document.createElement("textarea");$(L).attr("readonly",!0),L.className="fr",L.value=e;var M=document.createElement("span");M.innerHTML="Points Awarded - ";var H=document.createElement("input");H.maxLength=l.points.length,firebase.database().ref("Teachers/"+c+"/Classes/"+sessionStorage.getItem("className")+"/Exams/"+i+"/responses/"+d).once("value",function(e){e.forEach(function(e){var t=e.val().answers;null!=t[2].split(";")[2]&&(setTimeout(function(){document.getElementsByClassName("pa")[parseInt(u.innerHTML.substring(0,u.innerHTML.indexOf(".")))-1].innerHTML=" points)  -  points awarded: "+t[2].split(";")[2]},100),H.value=t[2].split(";")[2])})}),H.onkeyup=function(){this.value=this.value.replace(/[^\d]/,""),this.value=this.value.replace("-",""),""!=this.value?document.getElementsByClassName("pa")[parseInt(u.innerHTML.substring(0,u.innerHTML.indexOf(".")))-1].innerHTML=" points)  -  points awarded: "+this.value:document.getElementsByClassName("pa")[parseInt(u.innerHTML.substring(0,u.innerHTML.indexOf(".")))-1].innerHTML=" points)  -  points awarded: 0";var e=this.value;firebase.database().ref("Teachers/"+c+"/Classes/"+sessionStorage.getItem("className")+"/Exams/"+i+"/responses/"+d).once("value",function(t){t.forEach(function(t){for(var n=t.val().answers,a=0;a<n.length;a++)isNaN(n[a].split(";")[1])&&(console.log(n[a]),n[a]=n[a].split(";")[0]+";"+n[a].split(";")[1]+";"+e);firebase.database().ref("Teachers/"+c+"/Classes/"+sessionStorage.getItem("className")+"/Exams/"+i+"/responses/"+d+"/"+t.key).update({answers:n});var l=((parseInt(sessionStorage.getItem("totalPointsExcludingFr"))+parseInt(e))/s*100).toFixed(1);firebase.database().ref("Teachers/"+c+"/Classes/"+sessionStorage.getItem("className")+"/Exams/"+i+"/responses/"+d+"/"+t.key).update({totalScore:l}),document.getElementById("score").innerHTML=l+"%",document.getElementById("score-num").innerHTML=parseInt(sessionStorage.getItem("totalPointsExcludingFr"))+parseInt(e)+" / "+s})})},H.placeholder="0 - "+l.points,H.style.padding="5px",H.style.fontSize="15px",H.style.border="1px solid #808080",H.style.borderRadius="3px",H.style.marginTop="20px",p.appendChild(L),p.appendChild(document.createElement("br")),p.appendChild(M),p.appendChild(H)}else p.appendChild(v);m.appendChild(p),m.appendChild(document.createElement("br")),m.appendChild(y)}function q(e,t){var n=0;for(var a in t)parseInt(e.split(":")[1])>parseInt(t[a].split(":")[1])?n++:parseInt(e.split(":")[1])==parseInt(t[a].split(":")[1])&&e.split(":")[0]!=t[a].split(":")[0]&&0;return 100*(n/Object.keys(t).length).toFixed(1)}function j(e){for(var t=document.getElementsByClassName("table table-striped"),n=0;n<t.length;n++)t[n].style.display="none";var a=d.slice();if(a.sort()," Original"==e){(p=document.createElement("table")).id="random",p.className="table table-striped",p.style.width="100vw",(u=document.createElement("tr")).style.color="darkgray",(y=document.createElement("td")).innerHTML="Name",y.style.paddingLeft="66px",y.id="name",(h=document.createElement("td")).innerHTML="Score (%)",h.id="score",(g=document.createElement("td")).innerHTML="Percentile",g.id="percentile",(E=document.createElement("td")).innerHTML="Time",E.id="time",u.appendChild(y),u.appendChild(h),u.appendChild(g),u.appendChild(E),p.appendChild(u);for(var l=0;l<d.length;l++){var i=document.createElement("tr"),s=l;i.onclick=function(){S(d[s].split(":")[0],sessionStorage.getItem("populatedExamCode"))},p.appendChild(document.createElement("br")),(f=document.createElement("td")).style.paddingLeft="66px";var o=document.createElement("td"),r=document.createElement("td");f.innerHTML=d[l].split(":")[0],o.innerHTML=d[l].split(":")[1]+"%",r.innerHTML=q(d[l],d)+"th",(v=document.createElement("td")).innerHTML=d[l].split(":")[2]+" Mins",v.id="time",i.appendChild(f),i.appendChild(o),i.appendChild(r),i.appendChild(v),p.appendChild(i)}document.getElementById("main").appendChild(p)}else if(" Sort By Alphabet (A-Z)"==e){a.sort(),(p=document.createElement("table")).id="random",p.className="table table-striped",p.style.width="100vw",(u=document.createElement("tr")).style.color="darkgray",(y=document.createElement("td")).innerHTML="Name",y.style.paddingLeft="66px",y.id="name",(h=document.createElement("td")).innerHTML="Score (%)",h.id="score",(g=document.createElement("td")).innerHTML="Percentile",g.id="percentile",(E=document.createElement("td")).innerHTML="Time",E.id="time",u.appendChild(y),u.appendChild(h),u.appendChild(g),u.appendChild(E),p.appendChild(u);for(l=0;l<a.length;l++){(i=document.createElement("tr")).onclick=function(){S(a[l].split(":")[0],sessionStorage.getItem("populatedExamCode"))},p.appendChild(document.createElement("br")),(f=document.createElement("td")).style.paddingLeft="66px";o=document.createElement("td"),r=document.createElement("td");f.innerHTML=a[l].split(":")[0],o.innerHTML=a[l].split(":")[1]+"%",r.innerHTML=q(a[l],a)+"th",(v=document.createElement("td")).innerHTML=a[l].split(":")[2]+" Mins",v.id="time",i.appendChild(f),i.appendChild(o),i.appendChild(r),i.appendChild(v),p.appendChild(i)}document.getElementById("main").appendChild(p)}else if(" Sort By Alphabet (Z-A)"==e){a.sort(),(p=document.createElement("table")).id="random",p.className="table table-striped",p.style.width="100vw",(u=document.createElement("tr")).style.color="darkgray",(y=document.createElement("td")).innerHTML="Name",y.style.paddingLeft="66px",y.id="name",(h=document.createElement("td")).innerHTML="Score (%)",h.id="score",(g=document.createElement("td")).innerHTML="Percentile",g.id="percentile",(E=document.createElement("td")).innerHTML="Time",E.id="time",u.appendChild(y),u.appendChild(h),u.appendChild(g),u.appendChild(E),p.appendChild(u);for(l=a.length-1;l>=0;l--){(i=document.createElement("tr")).onclick=function(){S(a[l].split(":")[0],sessionStorage.getItem("populatedExamCode"))},p.appendChild(document.createElement("br")),(f=document.createElement("td")).style.paddingLeft="66px";o=document.createElement("td"),r=document.createElement("td");f.innerHTML=a[l].split(":")[0],o.innerHTML=a[l].split(":")[1]+"%",r.innerHTML=q(a[l],a)+"th",(v=document.createElement("td")).innerHTML=a[l].split(":")[2]+" Mins",v.id="time",i.appendChild(f),i.appendChild(o),i.appendChild(r),i.appendChild(v),p.appendChild(i)}document.getElementById("main").appendChild(p)}else if(" Sort By Score (high-low)"==e){var c=A(a);(p=document.createElement("table")).id="random",p.className="table table-striped",p.style.width="100vw",(u=document.createElement("tr")).style.color="darkgray",(y=document.createElement("td")).innerHTML="Name",y.style.paddingLeft="66px",y.id="name",(h=document.createElement("td")).innerHTML="Score (%)",h.id="score",(g=document.createElement("td")).innerHTML="Percentile",g.id="percentile",(E=document.createElement("td")).innerHTML="Time",E.id="time",u.appendChild(y),u.appendChild(h),u.appendChild(g),u.appendChild(E),p.appendChild(u);for(l=c.length-1;l>=0;l--){(i=document.createElement("tr")).onclick=function(){S(c[l].split(":")[0],sessionStorage.getItem("populatedExamCode"))},p.appendChild(document.createElement("br")),(f=document.createElement("td")).style.paddingLeft="66px";o=document.createElement("td"),r=document.createElement("td");f.innerHTML=c[l].split(":")[0],o.innerHTML=c[l].split(":")[1]+"%",r.innerHTML=q(c[l],c)+"th",(v=document.createElement("td")).innerHTML=a[l].split(":")[2]+" Mins",v.id="time",i.appendChild(f),i.appendChild(o),i.appendChild(r),i.appendChild(v),p.appendChild(i)}document.getElementById("main").appendChild(p)}else if(" Sort By Score (low-high)"==e){c=A(a);(p=document.createElement("table")).id="random",p.className="table table-striped",p.style.width="100vw",(u=document.createElement("tr")).style.color="darkgray",(y=document.createElement("td")).innerHTML="Name",y.style.paddingLeft="66px",y.id="name",(h=document.createElement("td")).innerHTML="Score (%)",h.id="score",(g=document.createElement("td")).innerHTML="Percentile",g.id="percentile",(E=document.createElement("td")).innerHTML="Time",E.id="time",u.appendChild(y),u.appendChild(h),u.appendChild(g),u.appendChild(E),p.appendChild(u);for(l=0;l<c.length;l++){(i=document.createElement("tr")).onclick=function(){S(c[l].split(":")[0],sessionStorage.getItem("populatedExamCode"))},p.appendChild(document.createElement("br")),(f=document.createElement("td")).style.paddingLeft="66px";o=document.createElement("td"),r=document.createElement("td");f.innerHTML=c[l].split(":")[0],o.innerHTML=c[l].split(":")[1]+"%",r.innerHTML=q(c[l],c)+"th",(v=document.createElement("td")).innerHTML=a[l].split(":")[2]+" Mins",v.id="time",i.appendChild(f),i.appendChild(o),i.appendChild(r),i.appendChild(v),p.appendChild(i)}document.getElementById("main").appendChild(p)}else if(" Sort By Time (high-low)"==e){var m=F(a);(p=document.createElement("table")).id="random",p.className="table table-striped",p.style.width="100vw",(u=document.createElement("tr")).style.color="darkgray",(y=document.createElement("td")).innerHTML="Name",y.style.paddingLeft="66px",y.id="name",(h=document.createElement("td")).innerHTML="Score (%)",h.id="score",(g=document.createElement("td")).innerHTML="Percentile",g.id="percentile",(E=document.createElement("td")).innerHTML="Time",E.id="time",u.appendChild(y),u.appendChild(h),u.appendChild(g),u.appendChild(E),p.appendChild(u);for(l=m.length-1;l>=0;l--){(i=document.createElement("tr")).onclick=function(){S(m[l].split(":")[0],sessionStorage.getItem("populatedExamCode"))},p.appendChild(document.createElement("br")),(f=document.createElement("td")).style.paddingLeft="66px";o=document.createElement("td"),r=document.createElement("td");f.innerHTML=m[l].split(":")[0],o.innerHTML=m[l].split(":")[1]+"%",r.innerHTML=q(m[l],m)+"th",(v=document.createElement("td")).innerHTML=m[l].split(":")[2]+" Mins",v.id="time",i.appendChild(f),i.appendChild(o),i.appendChild(r),i.appendChild(v),p.appendChild(i)}document.getElementById("main").appendChild(p)}else if(" Sort By Time (low-high)"==e){var p,u,y,h,g,E;m=F(a);(p=document.createElement("table")).id="random",p.className="table table-striped",p.style.width="100vw",(u=document.createElement("tr")).style.color="darkgray",(y=document.createElement("td")).innerHTML="Name",y.style.paddingLeft="66px",y.id="name",(h=document.createElement("td")).innerHTML="Score (%)",h.id="score",(g=document.createElement("td")).innerHTML="Percentile",g.id="percentile",(E=document.createElement("td")).innerHTML="Time",E.id="time",u.appendChild(y),u.appendChild(h),u.appendChild(g),u.appendChild(E),p.appendChild(u);for(l=0;l<m.length;l++){var f;(i=document.createElement("tr")).onclick=function(){S(m[l].split(":")[0],sessionStorage.getItem("populatedExamCode"))},p.appendChild(document.createElement("br")),(f=document.createElement("td")).style.paddingLeft="66px";var v;o=document.createElement("td"),r=document.createElement("td");f.innerHTML=m[l].split(":")[0],o.innerHTML=m[l].split(":")[1]+"%",r.innerHTML=q(m[l],m)+"th",(v=document.createElement("td")).innerHTML=m[l].split(":")[2]+" Mins",v.id="time",i.appendChild(f),i.appendChild(o),i.appendChild(r),i.appendChild(v),p.appendChild(i)}document.getElementById("main").appendChild(p)}}function A(e){if(1===e.length)return e;var t=Math.floor(e.length/2),n=e.slice(0,t),a=e.slice(t);return R(A(n),A(a))}function R(e,t){for(var n=[],a=0,l=0;a<e.length&&l<t.length;)e[a].split(":")[1]<t[l].split(":")[1]?(n.push(e[a]),a++):(n.push(t[l]),l++);return n.concat(e.slice(a)).concat(t.slice(l))}function F(e){if(1===e.length)return e;var t=Math.floor(e.length/2),n=e.slice(0,t),a=e.slice(t);return P(F(n),F(a))}function P(e,t){for(var n=[],a=0,l=0;a<e.length&&l<t.length;)e[a].split(":")[2]<t[l].split(":")[2]?(n.push(e[a]),a++):(n.push(t[l]),l++);return n.concat(e.slice(a)).concat(t.slice(l))}function D(){var e,t,n,a;for(e=document.getElementById("exam-search").value.toUpperCase(),t=document.getElementById("exam-wrapper").getElementsByClassName("examBox"),a=0;a<t.length;a++)((n=t[a].getElementsByTagName("span")[0]).textContent||n.innerText).toUpperCase().indexOf(e)>-1?t[a].style.display="":t[a].style.display="none"}function U(e,t,n,a){var l=document.getElementById("exam-wrapper"),d=document.createElement("div");d.className="examBox",d.style.background="white",d.onclick=function(){I(e),document.getElementById("this-exam").innerHTML=e},firebase.database().ref(n).on("value",function(e){for(var t in e.val())e.val()[t].examCode==a&&null==e.val().responses&&(d.onclick=function(){document.getElementById("create-exam").style.display="initial",document.getElementById("main").style.display="none",document.body.style.background="white",E(a,n)})});var i=document.createElement("div");i.style.background=["linear-gradient( 135deg, #FEB692 10%, #EA5455 100%)","linear-gradient( 135deg, #72EDF2 10%, #5151E5 100%)","linear-gradient( 135deg, #ABDCFF 10%, #0396FF 100%)"][Math.floor(3*Math.random()+0)],i.style.borderRadius="10px 10px 0 0",i.className="wave",i.onclick=function(){};var s=document.createElement("span");""==e&&(e=a),s.innerHTML=e,s.style.marginLeft="40px",s.style.color="white",s.className="examName";var o=document.createElement("span");if(o.id="option_vertical",o.className="glyphicon glyphicon-option-vertical",o.onclick=function(){d.onclick=function(){};var t=document.createElement("div");t.id="modal";var l=document.createElement("ul"),i=document.createElement("li");i.className="options",i.innerHTML="Edit Exam",i.onclick=function(){document.getElementById("create-exam").style.display="initial",document.getElementById("main").style.display="none",document.body.style.background="white",E(a,n)};var s=document.createElement("li");s.className="options",s.innerHTML="View Results",s.onclick=function(){I(e),document.getElementById("this-exam").innerHTML=e};var r=document.createElement("li");r.className="options",r.innerHTML="Delete Exam",r.onclick=function(){Y(a)};var m=document.createElement("li");m.className="options",m.innerHTML="Display Exam Info",m.onclick=function(){document.getElementById("main").style.display="none",document.getElementById("create-exam").style.display="none",document.getElementById("display").style.display="block",document.getElementById("display-code").innerHTML=a,document.body.style.backgroundImage="none";var e=Math.random().toString(36).substring(7);W(a,"Teachers/"+c+"/Classes/"+sessionStorage.getItem("createExamClass")+"/Exams/",e),firebase.database().ref("Teachers/"+c+"/Classes/"+sessionStorage.getItem("createExamClass")+"/Exams/"+sessionStorage.getItem(e)+"/taken").on("value",function(e){$("#joined-students").html(""),e.forEach(function(e){var t="";firebase.database().ref("Teachers/"+c+"/Classes/"+sessionStorage.getItem("createExamClass")+"/Students/").once("value",function(n){n.forEach(function(n){n.val().split(";")[0]==e.val()&&(t=n.val().split(";")[1])})}),setTimeout(function(){z(t)},55)})})},l.appendChild(i),l.appendChild(document.createElement("hr")),l.appendChild(s),l.appendChild(document.createElement("hr")),l.appendChild(r),l.appendChild(document.createElement("hr")),l.appendChild(m),t.appendChild(l),document.getElementById("html").appendChild(t),document.body.style.opacity="0",document.body.style.filter="blur(30px)",document.body.style.overflowY="hidden",window.onclick=function(e){e.target!=o&&e.target!=t&&document.getElementById("modal")&&(t.remove(),document.body.style.overflowY="auto",document.body.style.opacity="1",document.body.style.filter="blur(0px)")},$(document).keyup(function(e){"Escape"===e.key&&(t.remove(),document.body.style.overflowY="auto",document.body.style.opacity="1",document.body.style.filter="blur(0px)")}),setTimeout(function(){d.onclick=function(){I(e),document.getElementById("this-exam").innerHTML=e}},3e3)},i.appendChild(s),i.appendChild(o),i.appendChild(document.createElement("hr")),d.appendChild(i),"NaN"==t){(m=document.createElement("span")).innerHTML="No Responses!";var r=document.createElement("button");r.style.border="none",r.style.borderRadius="5px",r.style.padding="10px",r.style.marginTop="10px",r.style.boxShadow="3px 5px lightgray",r.innerHTML="Display Exam Info",r.onmouseover=function(){this.style.transform="translate(2px)"},r.onmouseleave=function(){this.style.transform="translate(0px)",this.style.transition="all .5s"},r.onclick=function(){d.onclick=function(){},document.getElementById("main").style.display="none",document.getElementById("create-exam").style.display="none",document.getElementById("display").style.display="block",document.getElementById("display-code").innerHTML=a,document.body.style.backgroundImage="none";var e=Math.random().toString(36).substring(7);W(a,"Teachers/"+c+"/Classes/"+sessionStorage.getItem("createExamClass")+"/Exams/",e),firebase.database().ref("Teachers/"+c+"/Classes/"+sessionStorage.getItem("createExamClass")+"/Exams/"+sessionStorage.getItem(e)+"/taken").on("value",function(e){$("#joined-students").html(""),e.forEach(function(e){var t="";firebase.database().ref("Teachers/"+c+"/Classes/"+sessionStorage.getItem("createExamClass")+"/Students/").once("value",function(n){n.forEach(function(n){n.val().split(";")[0]==e.val()&&(t=n.val().split(";")[1])})}),setTimeout(function(){z(t)},55)})})},d.appendChild(m),d.appendChild(document.createElement("br")),d.appendChild(r)}else{var m,p=document.createElement("span");p.innerHTML=de(t),p.style.color="#2e2f7d",p.style.fontSize="90px",(m=document.createElement("span")).innerHTML="Class Average ("+t+")",d.appendChild(p),d.appendChild(document.createElement("br")),d.appendChild(m)}l.appendChild(d),document.getElementById("main").appendChild(l)}function W(e,t,n){firebase.database().ref(t).once("value",function(t){for(var a in t.val())a.substring(1)==e&&sessionStorage.setItem(n,a)})}function z(e){var t=document.getElementById("joined-students"),n=["linear-gradient(135deg, #667eea 0%, #764ba2 100%)","linear-gradient(to top, #a3bded 0%, #6991c7 100%)","linear-gradient(60deg, #29323c 0%, #485563 100%)","linear-gradient(-60deg, #ff5858 0%, #f09819 100%)","linear-gradient(to top, #4481eb 0%, #04befe 100%)","linear-gradient(to right, #0acffe 0%, #495aff 100%)","linear-gradient(-225deg, #A445B2 0%, #D41872 52%, #FF0066 100%)"],a=document.createElement("div");a.id="currentlyTakingBox",a.style.backgroundImage=n[Math.floor(Math.random()*n.length)],a.innerHTML=e;var l=document.createElement("center");l.appendChild(a),t.appendChild(l)}function Y(e){if(""==e)e=document.getElementById("exam-code").innerHTML;var t="";swal({title:"Are you sure?",text:"Once deleted, you will not be able to recover this exam or any of its response data!",icon:"warning",buttons:!0,dangerMode:!0}).then(function(n){if(n){var a=!1;firebase.database().ref("Teachers/"+c+"/Classes/"+sessionStorage.getItem("createExamClass")+"/Exams/").once("value").then(function(n){n.forEach(function(n){n.key.substring(1)==e&&(t=n.key)}),firebase.database().ref("Teachers/"+c+"/Classes/"+sessionStorage.getItem("className")+"/Exams/"+t).remove();var l=firebase.database().ref("Teachers/"+c+"/Classes/"+sessionStorage.getItem("className")+"/Exams/");l.once("value",function(e){e.forEach(function(e){a=!0}),a||l.push("no_exams")})}),firebase.database().ref("exam-codes").on("value",function(t){t.forEach(function(t){t.val().split(";")[0]==e&&firebase.database().ref("exam-codes").child(t.key).remove()})}),document.getElementById("create-exam").style.display="none",document.getElementById("main").style.display="initial",document.body.style.background="white",setTimeout(function(){$("#exam-wrapper").empty(),$("#exam").empty(),v(sessionStorage.getItem("className")),sessionStorage.getItem("CreatedExamCode").toUpperCase()==e&&(sessionStorage.setItem("CreatedExamCode",""),document.getElementById("cached-exam-button").remove()),swal("Poof! Your exam has been deleted!",{icon:"success"})},100)}})}function V(){for(var e=document.getElementsByClassName("question"),t=0;t<e.length;t++){var n=e[t];n.childNodes[0].innerHTML=t+1+". ",n.id=t+1}}function Q(){for(var e=document.getElementsByClassName("matchingbox"),t=0;t<e.length;t++){questions[t].childNodes[1].innerHTML=t+1+". "}}function J(e,t,n){var a=t+1,l=document.getElementById(a);if(e!=n){for(var d=0;d<l.childNodes.length;d++)l.childNodes[d].className==n&&(l.childNodes[d].style.display="none");"mc"==e?document.getElementsByClassName("mc")[t].style.display="initial":"fr"==e?(document.getElementsByClassName("mc")[t].style.display="none",document.getElementById(a).appendChild(K())):"tf"==e?(document.getElementsByClassName("mc")[t].style.display="none",document.getElementById(a).appendChild(Z())):"matching"==e&&(document.getElementsByClassName("mc")[t].style.display="none",document.getElementById(a).appendChild(_()))}}function X(){var e,t,n;for(e=document.getElementById("lb-search"),t=document.getElementById("leaderboard").getElementsByClassName("name"),n=0;n<t.length;n++)t[n].innerHTML==e.value&&(t[n].style.border="1px solid black",t[n].scrollIntoView({behavior:"smooth"}))}function Z(){var e=document.createElement("label");e.id="label",e.className="tf";var t=document.createElement("input");t.style.outline="none",t.type="radio",t.className="option-input radio",t.name="tf";var n=document.createElement("input");n.style.outline="none",n.type="radio",n.className="option-input radio",n.name="tf",n.style.marginLeft="10%";var a=document.createElement("span");a.innerHTML=" True",a.style.marginLeft="10px",a.style.color="gray",a.style.fontWeight="normal";var l=document.createElement("span");return l.innerHTML=" False",l.style.marginLeft="10px",l.style.color="gray",l.style.fontWeight="normal",e.appendChild(t),e.appendChild(a),e.appendChild(n),e.appendChild(l),e}function K(){var e=document.createElement("textarea");return e.readOnly=!0,e.className="fr",e.placeholder="NOTE: This question type requires manual grading",e}function _(){var e=document.createElement("div");e.className="matching-wrapper";var t=document.createElement("div");t.className="matching";var n=document.createElement("hr");n.style.width="67%";var a=document.createElement("span");a.innerHTML="Questions",a.style.marginLeft="1.5vw";var l=document.createElement("span");l.innerHTML="Results (Will Be Randomized)",l.style.marginLeft="22.5vw";var d=document.createElement("input");d.type="textbox",d.placeholder="# Of Elements...",d.style.borderRadius="5px",d.style.padding="5px",d.style.border="1px solid black",d.style.fontSize="15px",d.onkeyup=function(){if($(e).empty(),this.value<=20)for(var t=0;t<this.value;t++)G(e,t+1);else{this.value="";var n=document.createElement("div");n.innerHTML="20 Elements Max!",n.style.textAlign="center",n.style.width="100%",n.style.position="fixed",n.style.zIndex="100000",n.style.top="0",n.className="alert alert-danger",n.role="alert",document.getElementById("create-exam").appendChild(document.createElement("center").appendChild(n)),setTimeout(function(){document.getElementsByClassName("alert")[0].remove()},2500)}};var i=document.createElement("button");return i.id="newBox",i.innerHTML="New Element!",i.onclick=function(){G(e,document.getElementsByClassName("matchingbox").length+1),y(!1)},t.appendChild(d),t.appendChild(n),t.appendChild(a),t.appendChild(l),t.appendChild(e),t.appendChild(document.createElement("br")),t.appendChild(i),t}function G(e,t){var n=document.createElement("div");n.className="matchingbox";var a=document.createElement("span");a.className="glyphicon glyphicon-minus",a.style.display="none",a.style.marginRight="5px",a.style.color="#f25555",$(a).click(function(){this.parentNode.remove(),y(!1),Q()}),$(n).hover(function(){this.childNodes[0].style.display="initial"},function(){this.childNodes[0].style.display="none"}),$(a).hover(function(){this.style.cursor="pointer",this.style.color="#f25555"},function(){}),n.appendChild(a);var l=document.createElement("span");l.innerHTML=t+".",l.style.marginRight="10px",l.style.fontSize="15px",n.appendChild(l);var d=document.createElement("input");d.type="textbox",d.style.marginTop="20px",d.style.textAlign="center",d.placeholder="1 + 1",d.id="result";var i=document.createElement("span");i.className="glyphicon glyphicon-arrow-right",i.style.paddingLeft="5vw";var s=document.createElement("input");s.type="textbox",s.style.marginLeft="5vw",s.style.textAlign="center",s.placeholder="2",s.id="result",n.appendChild(d),n.appendChild(i),n.appendChild(s),e.appendChild(n)}function ee(){$("#question-manager").empty();for(var e=0;e<document.getElementsByClassName("question").length;e++)g(e+1,!1)}function te(e,t){var n=document.getElementById("exam"),a=document.createElement("div");a.className="question",a.id=document.getElementsByClassName("question").length+1;var l=document.createElement("span");l.innerHTML=document.getElementsByClassName("question").length+1+". ",l.style.color="#97a5aa";var d=document.createElement("hr"),i=document.createElement("br"),s=document.createElement("span");s.className="glyphicon glyphicon-trash",s.style.display="none",s.style.marginRight="5px",s.style.color="lightgray",$(s).click(function(){a.remove(),d.remove(),i.remove(),ee(),V(),y()}),$(s).hover(function(){s.style.cursor="pointer",s.style.color="black"},function(){s.style.color="lightgray"});var o=document.createElement("span");o.id="moveDiv",o.className="glyphicon glyphicon-refresh",o.style.display="none",o.style.marginRight="5px",$(o).click(function(){ae(this.parentNode,prompt("Which Question (#) Would You Like To Swap With?"))?y(!1):swal("Failed!","The Number You Provided Does Not Exist","error")});var r=document.createElement("a");r.innerHTML="View Image",r.style.marginLeft="10px",r.style.display="none";var c=document.createElement("span");c.className="glyphicon glyphicon-picture",c.style.display="none",c.style.marginRight="7px",c.style.color="lightgray",c.onclick=function(){ne(l.innerHTML.substring(0,l.innerHTML.indexOf(".")),r)},$(c).hover(function(){c.style.cursor="pointer",c.style.color="black"},function(){c.style.color="lightgray"}),$(a).hover(function(){l.style.display="none",s.style.display="initial",o.style.display="initial",c.style.display="initial",l.style.cursor="pointer"},function(){l.style.display="initial",s.style.display="none",c.style.display="none",o.style.display="none"});var m=document.createElement("input");m.type="text",m.placeholder="Ex: What's Your Name?",m.id="question-title";var p=document.createElement("select"),u=document.createElement("option");u.value="mc",u.innerHTML="Multiple Choice";var h=document.createElement("option");h.value="fr",h.innerHTML="Free Response";var E,f=document.createElement("option");f.value="tf",f.innerHTML="True | False",p.appendChild(u),p.appendChild(h),p.appendChild(f),p.id="question-type",$(p).on("focusin",function(){E=$(this).val()}),p.onchange=function(){J(this.children[this.selectedIndex].value,a.id-1,E),p.blur()},a.appendChild(l),a.appendChild(c),a.appendChild(o),a.appendChild(s),a.appendChild(m),a.appendChild(p);var v=document.createElement("div"),C=document.createElement("span");C.innerHTML="( ";var b=document.createElement("input");b.type="text",b.id="numPoints",b.className="numPoints",b.placeholder="Ex: 4";var x=document.createElement("span");x.innerHTML=" points)",v.appendChild(C),v.appendChild(b),v.appendChild(x),v.appendChild(r),a.appendChild(v);var I=document.createElement("div");I.className="mc";for(var T=0;T<t;T++){var N=document.createElement("label");N.id="label";var B=document.createElement("input");B.style.outline="none",B.type="radio",B.className="option-input radio",B.name=l.innerHTML;var L=document.createElement("input");L.className="option",L.id="question-choice",L.type="text",L.placeholder=" Answer Choice...";var M=document.createElement("span");M.className="glyphicon glyphicon-minus",M.style.display="none",M.style.marginRight="5px",M.style.color="#f25555",$(M).click(function(){this.parentNode.remove(),y()}),$(N).hover(function(){this.childNodes[0].style.display="initial"},function(){this.childNodes[0].style.display="none"}),$(M).hover(function(){this.style.cursor="pointer",this.style.color="#f25555"},function(){}),N.appendChild(M),N.appendChild(B),N.appendChild(L),I.appendChild(N)}var H=document.createElement("span");H.className="glyphicon glyphicon-plus";var k=document.createElement("a");k.id="createNewAnswerChoice",k.clasName="newChoice",k.href="javascript:createNewOptionChoice("+l.innerHTML+")",k.appendChild(H),k.innerHTML+=" New Answer Choice",I.appendChild(k),a.appendChild(I),n.appendChild(a),n.appendChild(i),n.appendChild(d),e||(window.scroll({top:a.getBoundingClientRect().top+window.scrollY,behavior:"smooth"}),g(document.getElementsByClassName("question").length,!1),y(!1))}function ne(e,t){var n=document.createElement("div");n.id="alertDiv";var a=document.createElement("h1");a.style.textDecoration="underline dodgerblue",a.style.color="#1ece76",a.innerHTML="Upload Image To Question "+e,n.appendChild(a);var l=document.createElement("input");l.type="file",l.style.border="1px solid dodgerblue",l.style.padding="10px",l.style.fontSize="10px",l.style.borderRadius="5px";var d=document.createElement("center");d.appendChild(l),n.appendChild(document.createElement("br")),n.appendChild(d),n.appendChild(document.createElement("hr"));var i=document.createElement("img");i.id="imgOut",n.appendChild(i);var s=document.createElement("input");s.style.margin="20px",s.style.borderRadius="5px",s.style.border="1px solid black",s.placeholder="Short description...",s.style.width="90%",s.style.height="30px",s.style.padding="5px",s.style.fontSize="15px",n.appendChild(s);var o=document.createElement("button");o.id="imgUploadCancel",o.innerHTML="Cancel",o.onclick=function(){document.body.style.opacity="1",document.body.style.filter="blur(0px)",document.body.style.overflowX="auto",document.body.style.overflowY="auto",n.remove()};var r=document.createElement("button");r.id="imgUploadAccept",r.innerHTML="Upload!",r.onclick=function(){""!=i.src&&(t.style.display="initial",t.onclick=function(){swal({icon:i.src,text:s.value,className:"imgView"})},t.className=i.src,document.body.style.opacity="1",document.body.style.filter="blur(0px)",document.body.style.overflowX="auto",document.body.style.overflowY="auto",n.remove(),y(s.value))},l.onchange=function(e){var t=(e.target||window.event.srcElement).files;if(FileReader&&t&&t.length){var n=new FileReader;n.onload=function(){i.src=n.result,i.style.border="1px solid black",o.style.marginBottom="20px",r.style.marginBottom="20px"},n.readAsDataURL(t[0])}},n.appendChild(r),n.appendChild(o),document.getElementById("html").appendChild(n),document.body.style.opacity="0.1",document.body.style.filter="blur(5px)",document.body.style.overflowX="hidden",document.body.style.overflowY="hidden"}function ae(e,t){if(null==document.getElementById(t))return!1;var n=jQuery(e),a=jQuery(document.getElementById(t)),l=n.clone(),d=a.clone();return n.replaceWith(d),a.replaceWith(l),V(),!0}function le(e){var t=document.getElementById(e).childNodes[7];if(t.childNodes.length<=8){t.childNodes[t.childNodes.length-1].remove();var n=document.createElement("label");n.id="label";var a,l=document.createElement("input");l.style.outline="none",l.type="radio",l.className="option-input radio",l.name="radio",(a=document.createElement("input")).className="option",a.id="question-choice",a.type="text",a.placeholder=" Answer Choice...",(a=document.createElement("input")).className="option",a.id="question-choice",a.type="text",a.placeholder=" Answer Choice...";var d=document.createElement("span");d.className="glyphicon glyphicon-minus",d.style.display="none",d.style.marginRight="5px",d.style.color="#f25555",$(d).click(function(){this.parentNode.remove(),y()}),$(n).hover(function(){this.childNodes[0].style.display="initial"},function(){this.childNodes[0].style.display="none"}),$(d).hover(function(){this.style.cursor="pointer",this.style.color="#f25555"},function(){}),n.appendChild(d),n.appendChild(l),n.appendChild(a),t.appendChild(n);var i=document.createElement("span");i.className="glyphicon glyphicon-plus";var s=document.createElement("a");s.id="createNewAnswerChoice",s.href="javascript:createNewOptionChoice("+e+")",s.clasName="newChoice",s.appendChild(i),s.innerHTML+=" New Answer Choice",t.appendChild(s),y(!1)}else swal("Maximum","Sorry, you can only add 8 option choices","error")}function de(e){return e>=90?"A":e<90&&e>=80?"B":e<80&&e>=70?"C":e<70&&e>=60?"D":"F"}function ie(e,t,n){var a=document.getElementById("wrapper"),l=document.createElement("div");l.onclick=function(){sessionStorage.setItem("className",e),v(e,n)},l.className="classBox";var d=document.createElement("span");d.innerHTML=e,d.className="className",l.appendChild(d),l.appendChild(document.createElement("hr"));var i=document.createElement("p"),s=document.createElement("h6");s.innerHTML="Students",s.id="lowKey",i.innerHTML=t,i.appendChild(s),i.id="numStudents",l.appendChild(i);var o=document.createElement("hr");o.id="hrInBetween",l.appendChild(o);var r=document.createElement("p");(s=document.createElement("h6")).innerHTML="Exams",s.id="lowKey",r.innerHTML=n,r.appendChild(s),r.id="numExams",l.appendChild(r),a.appendChild(l),document.getElementById("main").appendChild(a)}function se(){if(!r){var e=firebase.database().ref("Teachers"),t=!1;e.once("value",function(e){e.forEach(function(e){if(e.key==c)for(var n in t=!0,a.push(e.child("Classes").val()),a){if(a.hasOwnProperty(n)){var l=a[n];for(var d in l)l.hasOwnProperty(d)&&("no_exams"==l[d].Exams[Object.keys(l[d].Exams)[0]]?ie(d,Object.keys(l[d].Students).length,0):ie(d,Object.keys(l[d].Students).length,Object.keys(l[d].Exams).length))}}}),t||(document.getElementById("doesNotExist").style.display="initial")})}r=!0}b(x),x.addListener(b);
},{}]},{},["yFTU"], null)
//# sourceMappingURL=/teacher.97adce7d.js.map